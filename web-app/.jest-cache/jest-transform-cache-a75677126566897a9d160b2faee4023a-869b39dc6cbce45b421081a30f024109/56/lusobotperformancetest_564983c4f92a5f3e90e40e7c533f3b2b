d04181aaf2807f947d8728a8f0cc5ffd
/**
 * LusoBot Performance and Rate Limiting Tests
 * 
 * Production-focused performance tests for the LusoBot AI assistant,
 * including mobile optimization, memory management, and rate limiting.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _perf_hooks = require("perf_hooks");
const _lusobotengine = require("../../src/lib/lusobot-engine");
describe("LusoBot Performance Tests", ()=>{
    const mockUserContext = {
        userRegion: "diaspora_uk",
        communityLevel: "active",
        languageProficiency: "native",
        interests: [
            "culture",
            "food"
        ],
        mood: "curious"
    };
    describe("Response Time Performance", ()=>{
        test("should respond to simple queries within 500ms", async ()=>{
            const startTime = _perf_hooks.performance.now();
            await _lusobotengine.LusoBotEngine.generateResponse("Hello, how are you?", mockUserContext, "en");
            const responseTime = _perf_hooks.performance.now() - startTime;
            expect(responseTime).toBeLessThan(500) // 500ms threshold
            ;
        });
        test("should respond to complex Portuguese cultural queries within 1000ms", async ()=>{
            const startTime = _perf_hooks.performance.now();
            await _lusobotengine.LusoBotEngine.generateResponse("Conte-me sobre a hist\xf3ria do fado em Coimbra e como se diferencia do fado de Lisboa, especialmente durante o s\xe9culo XIX", mockUserContext, "pt");
            const responseTime = _perf_hooks.performance.now() - startTime;
            expect(responseTime).toBeLessThan(1000) // 1s threshold for complex queries
            ;
        });
        test("should handle rapid sequential requests efficiently", async ()=>{
            const session = new _lusobotengine.LusoBotSession(mockUserContext, "en");
            const queries = [
                "Hello",
                "Tell me about Portuguese food",
                "What about fado music?",
                "I miss home",
                "Where can I find Portuguese events?"
            ];
            const startTime = _perf_hooks.performance.now();
            for (const query of queries){
                await session.sendMessage(query);
            }
            const totalTime = _perf_hooks.performance.now() - startTime;
            const averageTime = totalTime / queries.length;
            expect(averageTime).toBeLessThan(600) // Average response time under 600ms
            ;
            expect(totalTime).toBeLessThan(4000) // Total time under 4 seconds
            ;
        });
        test("should maintain consistent performance under load", async ()=>{
            const concurrentRequests = 10;
            const promises = [];
            const startTime = _perf_hooks.performance.now();
            for(let i = 0; i < concurrentRequests; i++){
                promises.push(_lusobotengine.LusoBotEngine.generateResponse(`Concurrent request ${i + 1}`, mockUserContext, "en"));
            }
            const responses = await Promise.all(promises);
            const totalTime = _perf_hooks.performance.now() - startTime;
            expect(responses.length).toBe(concurrentRequests);
            expect(totalTime).toBeLessThan(2000) // Should handle 10 concurrent requests in under 2s
            ;
            responses.forEach((response)=>{
                expect(response.content).toBeDefined();
                expect(response.content.length).toBeGreaterThan(0);
            });
        });
    });
    describe("Saudade Detection Performance", ()=>{
        test("should detect saudade in under 50ms", ()=>{
            const testMessages = [
                "Tenho muitas saudades de casa",
                "I really miss Portugal and my family",
                "Estou com saudades da minha terra natal",
                "Feeling homesick today",
                "Miss the Portuguese-speaking community"
            ];
            testMessages.forEach((message)=>{
                const startTime = _perf_hooks.performance.now();
                const result = _lusobotengine.SaudadeEngine.detectSaudade(message, "pt");
                const detectionTime = _perf_hooks.performance.now() - startTime;
                expect(detectionTime).toBeLessThan(50) // Under 50ms
                ;
                expect(result).toBeDefined();
                expect(typeof result.saudade).toBe("number");
            });
        });
        test("should handle large text inputs efficiently", ()=>{
            const largeMessage = "Tenho saudades de casa. ".repeat(100) // 2300+ characters
            ;
            const startTime = _perf_hooks.performance.now();
            const result = _lusobotengine.SaudadeEngine.detectSaudade(largeMessage, "pt");
            const detectionTime = _perf_hooks.performance.now() - startTime;
            expect(detectionTime).toBeLessThan(100) // Should handle large text under 100ms
            ;
            expect(result.saudade).toBeGreaterThan(0.5);
        });
        test("should generate emotional responses quickly", ()=>{
            const highSaudadeTone = {
                saudade: 0.9,
                nostalgia: 0.8,
                hope: 0.3,
                community: 0.6,
                heritage: 0.7
            };
            const startTime = _perf_hooks.performance.now();
            const response = _lusobotengine.SaudadeEngine.generateSaudadeResponse(highSaudadeTone, "pt");
            const responseTime = _perf_hooks.performance.now() - startTime;
            expect(responseTime).toBeLessThan(10) // Should generate response under 10ms
            ;
            expect(response.length).toBeGreaterThan(50);
        });
    });
    describe("Memory Usage Optimization", ()=>{
        test("should not leak memory in long conversations", async ()=>{
            const session = new _lusobotengine.LusoBotSession(mockUserContext, "en");
            // Simulate a long conversation
            const messageCount = 50;
            const messages = Array.from({
                length: messageCount
            }, (_, i)=>`Message number ${i + 1} about Portuguese culture`);
            for (const message of messages){
                await session.sendMessage(message);
                // Check that memory doesn't grow excessively
                const conversationData = session.getMessages();
                expect(conversationData.length).toBeLessThanOrEqual(messageCount + 1) // +1 for welcome message
                ;
                // Verify each message has proper cleanup
                conversationData.forEach((msg)=>{
                    expect(msg.id).toBeDefined();
                    expect(msg.timestamp).toBeInstanceOf(Date);
                });
            }
        });
        test("should efficiently handle session export without memory bloat", ()=>{
            const session = new _lusobotengine.LusoBotSession(mockUserContext, "pt");
            // Add multiple messages
            const promises = Array.from({
                length: 20
            }, (_, i)=>session.sendMessage(`Test message ${i + 1}`));
            return Promise.all(promises).then(()=>{
                const startTime = _perf_hooks.performance.now();
                const exported = session.exportConversation();
                const exportTime = _perf_hooks.performance.now() - startTime;
                expect(exportTime).toBeLessThan(100) // Export should be fast
                ;
                expect(exported.length).toBeGreaterThan(1000) // Should contain substantial data
                ;
                // Verify JSON is valid
                const parsed = JSON.parse(exported);
                expect(parsed.messages).toBeDefined();
                expect(parsed.userContext).toBeDefined();
            });
        });
        test("should cleanup resources properly", ()=>{
            // Test multiple session creation and destruction
            const sessions = Array.from({
                length: 10
            }, (_, i)=>new _lusobotengine.LusoBotSession({
                    ...mockUserContext,
                    mood: `test_${i}`
                }, i % 2 === 0 ? "en" : "pt"));
            sessions.forEach((session, index)=>{
                const messages = session.getMessages();
                expect(messages.length).toBe(1) // Welcome message only
                ;
                expect(messages[0].role).toBe("assistant");
            });
            // Sessions should be independent
            expect(sessions[0].getMessages()[0].language).toBe("en");
            expect(sessions[1].getMessages()[0].language).toBe("pt");
        });
    });
    describe("Cultural Context Performance", ()=>{
        test("should identify cultural context quickly", ()=>{
            const testCases = [
                {
                    message: "Quero comer bacalhau",
                    expected: "cuisine"
                },
                {
                    message: "Tell me about fado music",
                    expected: "fado"
                },
                {
                    message: "Portuguese business culture",
                    expected: "business"
                },
                {
                    message: "Sou do Porto",
                    expected: "north"
                },
                {
                    message: "Festa de S\xe3o Jo\xe3o",
                    expected: "festivals"
                }
            ];
            testCases.forEach(({ message, expected })=>{
                const startTime = _perf_hooks.performance.now();
                // Access private method for testing
                const result = _lusobotengine.LusoBotEngine.identifyCulturalContext(message, "pt");
                const identificationTime = _perf_hooks.performance.now() - startTime;
                expect(identificationTime).toBeLessThan(20) // Under 20ms
                ;
                expect(result.confidence).toBeGreaterThan(0.3);
            });
        });
        test("should handle mixed language content efficiently", ()=>{
            const mixedMessage = "I love Portuguese comida, especially bacalhau \xe0 Br\xe1s and past\xe9is de nata";
            const startTime = _perf_hooks.performance.now();
            const result = _lusobotengine.LusoBotEngine.identifyCulturalContext(mixedMessage, "en");
            const identificationTime = _perf_hooks.performance.now() - startTime;
            expect(identificationTime).toBeLessThan(30);
            expect(result.topic).toBe("cuisine");
        });
    });
    describe("Suggestion Generation Performance", ()=>{
        test("should generate suggestions within performance budget", async ()=>{
            const startTime = _perf_hooks.performance.now();
            const response = await _lusobotengine.LusoBotEngine.generateResponse("I need help with Portuguese-speaking community events", mockUserContext, "en");
            const totalTime = _perf_hooks.performance.now() - startTime;
            expect(totalTime).toBeLessThan(800) // Total response under 800ms
            ;
            expect(response.suggestions).toBeDefined();
            expect(response.suggestions.length).toBeGreaterThan(0);
            expect(response.suggestions.length).toBeLessThanOrEqual(4) // Reasonable suggestion count
            ;
            // Verify suggestion quality doesn't compromise performance
            response.suggestions.forEach((suggestion)=>{
                expect(suggestion.title.length).toBeGreaterThan(5);
                expect(suggestion.description.length).toBeGreaterThan(10);
                expect(suggestion.culturalRelevance).toBeGreaterThan(0);
            });
        });
        test("should prioritize suggestions efficiently", async ()=>{
            const response = await _lusobotengine.LusoBotEngine.generateResponse("Feeling very homesick, need community support and cultural events", {
                ...mockUserContext,
                mood: "homesick"
            }, "en");
            expect(response.suggestions).toBeDefined();
            if (response.suggestions.length > 1) {
                // Should be sorted by priority and cultural relevance
                const suggestions = response.suggestions;
                for(let i = 0; i < suggestions.length - 1; i++){
                    const current = suggestions[i];
                    const next = suggestions[i + 1];
                    const currentScore = current.culturalRelevance;
                    const nextScore = next.culturalRelevance;
                    // Allow for equal scores but generally should be descending
                    expect(currentScore).toBeGreaterThanOrEqual(nextScore - 0.1);
                }
            }
        });
    });
    describe("Error Recovery Performance", ()=>{
        test("should handle errors without degrading performance", async ()=>{
            const invalidContext = {
                userRegion: "invalid",
                communityLevel: "invalid",
                languageProficiency: "invalid",
                interests: [],
                mood: "invalid"
            };
            const startTime = _perf_hooks.performance.now();
            const response = await _lusobotengine.LusoBotEngine.generateResponse("Test message", invalidContext, "en");
            const responseTime = _perf_hooks.performance.now() - startTime;
            // Should still respond quickly despite invalid context
            expect(responseTime).toBeLessThan(600);
            expect(response.content).toBeDefined();
            expect(response.content.length).toBeGreaterThan(0);
        });
        test("should gracefully handle empty or malformed input", async ()=>{
            const testCases = [
                "",
                "   ",
                "\n	",
                "a".repeat(1000),
                "\uD83C\uDDF5\uD83C\uDDF9\uD83C\uDDF5\uD83C\uDDF9\uD83C\uDDF5\uD83C\uDDF9\uD83C\uDDF5\uD83C\uDDF9\uD83C\uDDF5\uD83C\uDDF9",
                "123456789"
            ];
            for (const testMessage of testCases){
                const startTime = _perf_hooks.performance.now();
                const response = await _lusobotengine.LusoBotEngine.generateResponse(testMessage, mockUserContext, "en");
                const responseTime = _perf_hooks.performance.now() - startTime;
                expect(responseTime).toBeLessThan(700) // Should handle gracefully
                ;
                expect(response.content).toBeDefined();
                // Should provide meaningful fallback response
                if (testMessage.trim().length === 0) {
                    expect(response.content.length).toBeGreaterThan(20);
                }
            }
        });
    });
    describe("Bilingual Performance", ()=>{
        test("should switch languages efficiently", async ()=>{
            const session = new _lusobotengine.LusoBotSession(mockUserContext, "en");
            const queries = [
                {
                    message: "Hello",
                    language: "en"
                },
                {
                    message: "Ol\xe1",
                    language: "pt"
                },
                {
                    message: "How are you?",
                    language: "en"
                },
                {
                    message: "Como est\xe1?",
                    language: "pt"
                }
            ];
            const startTime = _perf_hooks.performance.now();
            for (const { message, language } of queries){
                session.setLanguage(language);
                await session.sendMessage(message);
            }
            const totalTime = _perf_hooks.performance.now() - startTime;
            const averageTime = totalTime / queries.length;
            expect(averageTime).toBeLessThan(500) // Language switching shouldn't add overhead
            ;
            const messages = session.getMessages();
            expect(messages.length).toBe(1 + queries.length * 2) // Welcome + user/assistant pairs
            ;
        });
        test("should maintain performance across language variants", async ()=>{
            const messages = [
                "Como posso encontrar comida portuguesa em Londres?",
                "How can I find Portuguese food in London?",
                "Onde h\xe1 casas de fado?",
                "Where are there fado houses?",
                "Estou com saudades de casa",
                "I'm feeling homesick"
            ];
            const responseTimes = [];
            for(let i = 0; i < messages.length; i++){
                const startTime = _perf_hooks.performance.now();
                await _lusobotengine.LusoBotEngine.generateResponse(messages[i], mockUserContext, i % 2 === 0 ? "pt" : "en");
                const responseTime = _perf_hooks.performance.now() - startTime;
                responseTimes.push(responseTime);
            }
            // All responses should be within reasonable bounds
            responseTimes.forEach((time)=>{
                expect(time).toBeLessThan(800);
            });
            // Variance between languages shouldn't be too high
            const maxTime = Math.max(...responseTimes);
            const minTime = Math.min(...responseTimes);
            expect(maxTime / minTime).toBeLessThan(3) // Less than 3x difference
            ;
        });
    });
    describe("Mobile Performance", ()=>{
        test("should perform well on simulated mobile constraints", async ()=>{
            // Simulate mobile environment with limited resources
            const mobileSession = new _lusobotengine.LusoBotSession({
                ...mockUserContext,
                mood: "mobile_user"
            }, "en");
            // Test quick interaction pattern common on mobile
            const quickQueries = [
                "Hi",
                "Food?",
                "Events",
                "Help",
                "Thanks"
            ];
            const startTime = _perf_hooks.performance.now();
            for (const query of quickQueries){
                await mobileSession.sendMessage(query);
            }
            const totalTime = _perf_hooks.performance.now() - startTime;
            // Mobile should complete quickly
            expect(totalTime).toBeLessThan(3000) // Under 3 seconds for 5 queries
            ;
            const messages = mobileSession.getMessages();
            expect(messages.length).toBe(1 + quickQueries.length * 2);
        });
        test("should handle limited bandwidth scenarios", ()=>{
            // Test with minimal data structures
            const minimalContext = {
                userRegion: "diaspora_uk",
                communityLevel: "newcomer",
                languageProficiency: "learning",
                interests: [
                    "basic"
                ],
                mood: "curious"
            };
            return _lusobotengine.LusoBotEngine.generateResponse("Quick help", minimalContext, "en").then((response)=>{
                // Should still provide quality response
                expect(response.content.length).toBeGreaterThan(30);
                expect(response.suggestions).toBeDefined();
                // Response data should be reasonably sized for mobile
                const responseSize = JSON.stringify(response).length;
                expect(responseSize).toBeLessThan(5000) // Under 5KB
                ;
            });
        });
    });
    describe("Rate Limiting Simulation", ()=>{
        test("should handle burst traffic gracefully", async ()=>{
            const burstSize = 20;
            const requests = Array.from({
                length: burstSize
            }, (_, i)=>_lusobotengine.LusoBotEngine.generateResponse(`Burst request ${i + 1}`, mockUserContext, "en"));
            const startTime = _perf_hooks.performance.now();
            try {
                const responses = await Promise.all(requests);
                const totalTime = _perf_hooks.performance.now() - startTime;
                expect(responses.length).toBe(burstSize);
                expect(totalTime).toBeLessThan(5000) // Should handle burst within 5 seconds
                ;
                responses.forEach((response)=>{
                    expect(response.content).toBeDefined();
                    expect(response.id).toBeDefined();
                });
            } catch (error) {
                // If rate limiting is implemented, should fail gracefully
                expect(error).toBeInstanceOf(Error);
            }
        });
        test("should maintain quality under sustained load", async ()=>{
            const sustainedRequests = 5;
            const batchDelay = 100 // ms between batches
            ;
            for(let batch = 0; batch < sustainedRequests; batch++){
                const startTime = _perf_hooks.performance.now();
                const response = await _lusobotengine.LusoBotEngine.generateResponse(`Sustained load test batch ${batch + 1}`, mockUserContext, "en");
                const responseTime = _perf_hooks.performance.now() - startTime;
                // Quality shouldn't degrade over time
                expect(response.content.length).toBeGreaterThan(50);
                expect(responseTime).toBeLessThan(1000);
                // Small delay between requests
                await new Promise((resolve)=>setTimeout(resolve, batchDelay));
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvX190ZXN0c19fL2x1c29ib3QvbHVzb2JvdC1wZXJmb3JtYW5jZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTHVzb0JvdCBQZXJmb3JtYW5jZSBhbmQgUmF0ZSBMaW1pdGluZyBUZXN0c1xuICogXG4gKiBQcm9kdWN0aW9uLWZvY3VzZWQgcGVyZm9ybWFuY2UgdGVzdHMgZm9yIHRoZSBMdXNvQm90IEFJIGFzc2lzdGFudCxcbiAqIGluY2x1ZGluZyBtb2JpbGUgb3B0aW1pemF0aW9uLCBtZW1vcnkgbWFuYWdlbWVudCwgYW5kIHJhdGUgbGltaXRpbmcuXG4gKi9cblxuaW1wb3J0IHsgcGVyZm9ybWFuY2UgfSBmcm9tICdwZXJmX2hvb2tzJ1xuaW1wb3J0IHsgXG4gIEx1c29Cb3RFbmdpbmUsIFxuICBTYXVkYWRlRW5naW5lLCBcbiAgTHVzb0JvdFNlc3Npb24sXG4gIHR5cGUgTWVzc2FnZU1ldGFkYXRhIFxufSBmcm9tICdAL2xpYi9sdXNvYm90LWVuZ2luZSdcblxuZGVzY3JpYmUoJ0x1c29Cb3QgUGVyZm9ybWFuY2UgVGVzdHMnLCAoKSA9PiB7XG5cbiAgY29uc3QgbW9ja1VzZXJDb250ZXh0OiBNZXNzYWdlTWV0YWRhdGEgPSB7XG4gICAgdXNlclJlZ2lvbjogJ2RpYXNwb3JhX3VrJyxcbiAgICBjb21tdW5pdHlMZXZlbDogJ2FjdGl2ZScsXG4gICAgbGFuZ3VhZ2VQcm9maWNpZW5jeTogJ25hdGl2ZScsXG4gICAgaW50ZXJlc3RzOiBbJ2N1bHR1cmUnLCAnZm9vZCddLFxuICAgIG1vb2Q6ICdjdXJpb3VzJ1xuICB9XG5cbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlIFRpbWUgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlc3BvbmQgdG8gc2ltcGxlIHF1ZXJpZXMgd2l0aGluIDUwMG1zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgYXdhaXQgTHVzb0JvdEVuZ2luZS5nZW5lcmF0ZVJlc3BvbnNlKFxuICAgICAgICAnSGVsbG8sIGhvdyBhcmUgeW91PycsXG4gICAgICAgIG1vY2tVc2VyQ29udGV4dCxcbiAgICAgICAgJ2VuJ1xuICAgICAgKVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDUwMCkgLy8gNTAwbXMgdGhyZXNob2xkXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCByZXNwb25kIHRvIGNvbXBsZXggUG9ydHVndWVzZSBjdWx0dXJhbCBxdWVyaWVzIHdpdGhpbiAxMDAwbXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBhd2FpdCBMdXNvQm90RW5naW5lLmdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICdDb250ZS1tZSBzb2JyZSBhIGhpc3TDs3JpYSBkbyBmYWRvIGVtIENvaW1icmEgZSBjb21vIHNlIGRpZmVyZW5jaWEgZG8gZmFkbyBkZSBMaXNib2EsIGVzcGVjaWFsbWVudGUgZHVyYW50ZSBvIHPDqWN1bG8gWElYJyxcbiAgICAgICAgbW9ja1VzZXJDb250ZXh0LFxuICAgICAgICAncHQnXG4gICAgICApXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICBleHBlY3QocmVzcG9uc2VUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCkgLy8gMXMgdGhyZXNob2xkIGZvciBjb21wbGV4IHF1ZXJpZXNcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSByYXBpZCBzZXF1ZW50aWFsIHJlcXVlc3RzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBMdXNvQm90U2Vzc2lvbihtb2NrVXNlckNvbnRleHQsICdlbicpXG4gICAgICBjb25zdCBxdWVyaWVzID0gW1xuICAgICAgICAnSGVsbG8nLFxuICAgICAgICAnVGVsbCBtZSBhYm91dCBQb3J0dWd1ZXNlIGZvb2QnLFxuICAgICAgICAnV2hhdCBhYm91dCBmYWRvIG11c2ljPycsXG4gICAgICAgICdJIG1pc3MgaG9tZScsXG4gICAgICAgICdXaGVyZSBjYW4gSSBmaW5kIFBvcnR1Z3Vlc2UgZXZlbnRzPydcbiAgICAgIF1cblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBxdWVyeSBvZiBxdWVyaWVzKSB7XG4gICAgICAgIGF3YWl0IHNlc3Npb24uc2VuZE1lc3NhZ2UocXVlcnkpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICBjb25zdCBhdmVyYWdlVGltZSA9IHRvdGFsVGltZSAvIHF1ZXJpZXMubGVuZ3RoXG4gICAgICBcbiAgICAgIGV4cGVjdChhdmVyYWdlVGltZSkudG9CZUxlc3NUaGFuKDYwMCkgLy8gQXZlcmFnZSByZXNwb25zZSB0aW1lIHVuZGVyIDYwMG1zXG4gICAgICBleHBlY3QodG90YWxUaW1lKS50b0JlTGVzc1RoYW4oNDAwMCkgLy8gVG90YWwgdGltZSB1bmRlciA0IHNlY29uZHNcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIG1haW50YWluIGNvbnNpc3RlbnQgcGVyZm9ybWFuY2UgdW5kZXIgbG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbnRSZXF1ZXN0cyA9IDEwXG4gICAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxhbnk+W10gPSBbXVxuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmN1cnJlbnRSZXF1ZXN0czsgaSsrKSB7XG4gICAgICAgIHByb21pc2VzLnB1c2goXG4gICAgICAgICAgTHVzb0JvdEVuZ2luZS5nZW5lcmF0ZVJlc3BvbnNlKFxuICAgICAgICAgICAgYENvbmN1cnJlbnQgcmVxdWVzdCAke2kgKyAxfWAsXG4gICAgICAgICAgICBtb2NrVXNlckNvbnRleHQsXG4gICAgICAgICAgICAnZW4nXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgY29uc3QgdG90YWxUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlcy5sZW5ndGgpLnRvQmUoY29uY3VycmVudFJlcXVlc3RzKVxuICAgICAgZXhwZWN0KHRvdGFsVGltZSkudG9CZUxlc3NUaGFuKDIwMDApIC8vIFNob3VsZCBoYW5kbGUgMTAgY29uY3VycmVudCByZXF1ZXN0cyBpbiB1bmRlciAyc1xuICAgICAgXG4gICAgICByZXNwb25zZXMuZm9yRWFjaChyZXNwb25zZSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50KS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1NhdWRhZGUgRGV0ZWN0aW9uIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBkZXRlY3Qgc2F1ZGFkZSBpbiB1bmRlciA1MG1zJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdE1lc3NhZ2VzID0gW1xuICAgICAgICAnVGVuaG8gbXVpdGFzIHNhdWRhZGVzIGRlIGNhc2EnLFxuICAgICAgICAnSSByZWFsbHkgbWlzcyBQb3J0dWdhbCBhbmQgbXkgZmFtaWx5JyxcbiAgICAgICAgJ0VzdG91IGNvbSBzYXVkYWRlcyBkYSBtaW5oYSB0ZXJyYSBuYXRhbCcsXG4gICAgICAgICdGZWVsaW5nIGhvbWVzaWNrIHRvZGF5JyxcbiAgICAgICAgJ01pc3MgdGhlIFBvcnR1Z3Vlc2Utc3BlYWtpbmcgY29tbXVuaXR5J1xuICAgICAgXVxuICAgICAgXG4gICAgICB0ZXN0TWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFNhdWRhZGVFbmdpbmUuZGV0ZWN0U2F1ZGFkZShtZXNzYWdlLCAncHQnKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGV0ZWN0aW9uVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIFxuICAgICAgICBleHBlY3QoZGV0ZWN0aW9uVGltZSkudG9CZUxlc3NUaGFuKDUwKSAvLyBVbmRlciA1MG1zXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuc2F1ZGFkZSkudG9CZSgnbnVtYmVyJylcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgdGV4dCBpbnB1dHMgZWZmaWNpZW50bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZU1lc3NhZ2UgPSAnVGVuaG8gc2F1ZGFkZXMgZGUgY2FzYS4gJy5yZXBlYXQoMTAwKSAvLyAyMzAwKyBjaGFyYWN0ZXJzXG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFNhdWRhZGVFbmdpbmUuZGV0ZWN0U2F1ZGFkZShsYXJnZU1lc3NhZ2UsICdwdCcpXG4gICAgICBcbiAgICAgIGNvbnN0IGRldGVjdGlvblRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgXG4gICAgICBleHBlY3QoZGV0ZWN0aW9uVGltZSkudG9CZUxlc3NUaGFuKDEwMCkgLy8gU2hvdWxkIGhhbmRsZSBsYXJnZSB0ZXh0IHVuZGVyIDEwMG1zXG4gICAgICBleHBlY3QocmVzdWx0LnNhdWRhZGUpLnRvQmVHcmVhdGVyVGhhbigwLjUpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBnZW5lcmF0ZSBlbW90aW9uYWwgcmVzcG9uc2VzIHF1aWNrbHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBoaWdoU2F1ZGFkZVRvbmUgPSB7XG4gICAgICAgIHNhdWRhZGU6IDAuOSxcbiAgICAgICAgbm9zdGFsZ2lhOiAwLjgsXG4gICAgICAgIGhvcGU6IDAuMyxcbiAgICAgICAgY29tbXVuaXR5OiAwLjYsXG4gICAgICAgIGhlcml0YWdlOiAwLjdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBTYXVkYWRlRW5naW5lLmdlbmVyYXRlU2F1ZGFkZVJlc3BvbnNlKGhpZ2hTYXVkYWRlVG9uZSwgJ3B0JylcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDEwKSAvLyBTaG91bGQgZ2VuZXJhdGUgcmVzcG9uc2UgdW5kZXIgMTBtc1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDUwKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ01lbW9yeSBVc2FnZSBPcHRpbWl6YXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIG5vdCBsZWFrIG1lbW9yeSBpbiBsb25nIGNvbnZlcnNhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXNzaW9uID0gbmV3IEx1c29Cb3RTZXNzaW9uKG1vY2tVc2VyQ29udGV4dCwgJ2VuJylcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgYSBsb25nIGNvbnZlcnNhdGlvblxuICAgICAgY29uc3QgbWVzc2FnZUNvdW50ID0gNTBcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogbWVzc2FnZUNvdW50IH0sIChfLCBpKSA9PiBcbiAgICAgICAgYE1lc3NhZ2UgbnVtYmVyICR7aSArIDF9IGFib3V0IFBvcnR1Z3Vlc2UgY3VsdHVyZWBcbiAgICAgIClcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGF3YWl0IHNlc3Npb24uc2VuZE1lc3NhZ2UobWVzc2FnZSlcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgbWVtb3J5IGRvZXNuJ3QgZ3JvdyBleGNlc3NpdmVseVxuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25EYXRhID0gc2Vzc2lvbi5nZXRNZXNzYWdlcygpXG4gICAgICAgIGV4cGVjdChjb252ZXJzYXRpb25EYXRhLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbChtZXNzYWdlQ291bnQgKyAxKSAvLyArMSBmb3Igd2VsY29tZSBtZXNzYWdlXG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgZWFjaCBtZXNzYWdlIGhhcyBwcm9wZXIgY2xlYW51cFxuICAgICAgICBjb252ZXJzYXRpb25EYXRhLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICBleHBlY3QobXNnLmlkKS50b0JlRGVmaW5lZCgpXG4gICAgICAgICAgZXhwZWN0KG1zZy50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBlZmZpY2llbnRseSBoYW5kbGUgc2Vzc2lvbiBleHBvcnQgd2l0aG91dCBtZW1vcnkgYmxvYXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXNzaW9uID0gbmV3IEx1c29Cb3RTZXNzaW9uKG1vY2tVc2VyQ29udGV4dCwgJ3B0JylcbiAgICAgIFxuICAgICAgLy8gQWRkIG11bHRpcGxlIG1lc3NhZ2VzXG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiBcbiAgICAgICAgc2Vzc2lvbi5zZW5kTWVzc2FnZShgVGVzdCBtZXNzYWdlICR7aSArIDF9YClcbiAgICAgIClcbiAgICAgIFxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4cG9ydGVkID0gc2Vzc2lvbi5leHBvcnRDb252ZXJzYXRpb24oKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhwb3J0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIFxuICAgICAgICBleHBlY3QoZXhwb3J0VGltZSkudG9CZUxlc3NUaGFuKDEwMCkgLy8gRXhwb3J0IHNob3VsZCBiZSBmYXN0XG4gICAgICAgIGV4cGVjdChleHBvcnRlZC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxMDAwKSAvLyBTaG91bGQgY29udGFpbiBzdWJzdGFudGlhbCBkYXRhXG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgSlNPTiBpcyB2YWxpZFxuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGV4cG9ydGVkKVxuICAgICAgICBleHBlY3QocGFyc2VkLm1lc3NhZ2VzKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChwYXJzZWQudXNlckNvbnRleHQpLnRvQmVEZWZpbmVkKClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhbnVwIHJlc291cmNlcyBwcm9wZXJseScsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgbXVsdGlwbGUgc2Vzc2lvbiBjcmVhdGlvbiBhbmQgZGVzdHJ1Y3Rpb25cbiAgICAgIGNvbnN0IHNlc3Npb25zID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgKF8sIGkpID0+IFxuICAgICAgICBuZXcgTHVzb0JvdFNlc3Npb24oXG4gICAgICAgICAgeyAuLi5tb2NrVXNlckNvbnRleHQsIG1vb2Q6IGB0ZXN0XyR7aX1gIGFzIGFueSB9LFxuICAgICAgICAgIGkgJSAyID09PSAwID8gJ2VuJyA6ICdwdCdcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgXG4gICAgICBzZXNzaW9ucy5mb3JFYWNoKChzZXNzaW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHNlc3Npb24uZ2V0TWVzc2FnZXMoKVxuICAgICAgICBleHBlY3QobWVzc2FnZXMubGVuZ3RoKS50b0JlKDEpIC8vIFdlbGNvbWUgbWVzc2FnZSBvbmx5XG4gICAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5yb2xlKS50b0JlKCdhc3Npc3RhbnQnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gU2Vzc2lvbnMgc2hvdWxkIGJlIGluZGVwZW5kZW50XG4gICAgICBleHBlY3Qoc2Vzc2lvbnNbMF0uZ2V0TWVzc2FnZXMoKVswXS5sYW5ndWFnZSkudG9CZSgnZW4nKVxuICAgICAgZXhwZWN0KHNlc3Npb25zWzFdLmdldE1lc3NhZ2VzKClbMF0ubGFuZ3VhZ2UpLnRvQmUoJ3B0JylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdDdWx0dXJhbCBDb250ZXh0IFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBpZGVudGlmeSBjdWx0dXJhbCBjb250ZXh0IHF1aWNrbHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXG4gICAgICAgIHsgbWVzc2FnZTogJ1F1ZXJvIGNvbWVyIGJhY2FsaGF1JywgZXhwZWN0ZWQ6ICdjdWlzaW5lJyB9LFxuICAgICAgICB7IG1lc3NhZ2U6ICdUZWxsIG1lIGFib3V0IGZhZG8gbXVzaWMnLCBleHBlY3RlZDogJ2ZhZG8nIH0sXG4gICAgICAgIHsgbWVzc2FnZTogJ1BvcnR1Z3Vlc2UgYnVzaW5lc3MgY3VsdHVyZScsIGV4cGVjdGVkOiAnYnVzaW5lc3MnIH0sXG4gICAgICAgIHsgbWVzc2FnZTogJ1NvdSBkbyBQb3J0bycsIGV4cGVjdGVkOiAnbm9ydGgnIH0sXG4gICAgICAgIHsgbWVzc2FnZTogJ0Zlc3RhIGRlIFPDo28gSm/Do28nLCBleHBlY3RlZDogJ2Zlc3RpdmFscycgfVxuICAgICAgXVxuICAgICAgXG4gICAgICB0ZXN0Q2FzZXMuZm9yRWFjaCgoeyBtZXNzYWdlLCBleHBlY3RlZCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICAvLyBBY2Nlc3MgcHJpdmF0ZSBtZXRob2QgZm9yIHRlc3RpbmdcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKEx1c29Cb3RFbmdpbmUgYXMgYW55KS5pZGVudGlmeUN1bHR1cmFsQ29udGV4dChtZXNzYWdlLCAncHQnKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaWRlbnRpZmljYXRpb25UaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChpZGVudGlmaWNhdGlvblRpbWUpLnRvQmVMZXNzVGhhbigyMCkgLy8gVW5kZXIgMjBtc1xuICAgICAgICBleHBlY3QocmVzdWx0LmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbigwLjMpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG1peGVkIGxhbmd1YWdlIGNvbnRlbnQgZWZmaWNpZW50bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBtaXhlZE1lc3NhZ2UgPSAnSSBsb3ZlIFBvcnR1Z3Vlc2UgY29taWRhLCBlc3BlY2lhbGx5IGJhY2FsaGF1IMOgIEJyw6FzIGFuZCBwYXN0w6lpcyBkZSBuYXRhJ1xuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSAoTHVzb0JvdEVuZ2luZSBhcyBhbnkpLmlkZW50aWZ5Q3VsdHVyYWxDb250ZXh0KG1peGVkTWVzc2FnZSwgJ2VuJylcbiAgICAgIFxuICAgICAgY29uc3QgaWRlbnRpZmljYXRpb25UaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIFxuICAgICAgZXhwZWN0KGlkZW50aWZpY2F0aW9uVGltZSkudG9CZUxlc3NUaGFuKDMwKVxuICAgICAgZXhwZWN0KHJlc3VsdC50b3BpYykudG9CZSgnY3Vpc2luZScpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnU3VnZ2VzdGlvbiBHZW5lcmF0aW9uIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBnZW5lcmF0ZSBzdWdnZXN0aW9ucyB3aXRoaW4gcGVyZm9ybWFuY2UgYnVkZ2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBMdXNvQm90RW5naW5lLmdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICdJIG5lZWQgaGVscCB3aXRoIFBvcnR1Z3Vlc2Utc3BlYWtpbmcgY29tbXVuaXR5IGV2ZW50cycsXG4gICAgICAgIG1vY2tVc2VyQ29udGV4dCxcbiAgICAgICAgJ2VuJ1xuICAgICAgKVxuICAgICAgXG4gICAgICBjb25zdCB0b3RhbFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgXG4gICAgICBleHBlY3QodG90YWxUaW1lKS50b0JlTGVzc1RoYW4oODAwKSAvLyBUb3RhbCByZXNwb25zZSB1bmRlciA4MDBtc1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Z2dlc3Rpb25zKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VnZ2VzdGlvbnMhLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VnZ2VzdGlvbnMhLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCg0KSAvLyBSZWFzb25hYmxlIHN1Z2dlc3Rpb24gY291bnRcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHN1Z2dlc3Rpb24gcXVhbGl0eSBkb2Vzbid0IGNvbXByb21pc2UgcGVyZm9ybWFuY2VcbiAgICAgIHJlc3BvbnNlLnN1Z2dlc3Rpb25zIS5mb3JFYWNoKHN1Z2dlc3Rpb24gPT4ge1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbi50aXRsZS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig1KVxuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxMClcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb24uY3VsdHVyYWxSZWxldmFuY2UpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIHByaW9yaXRpemUgc3VnZ2VzdGlvbnMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEx1c29Cb3RFbmdpbmUuZ2VuZXJhdGVSZXNwb25zZShcbiAgICAgICAgJ0ZlZWxpbmcgdmVyeSBob21lc2ljaywgbmVlZCBjb21tdW5pdHkgc3VwcG9ydCBhbmQgY3VsdHVyYWwgZXZlbnRzJyxcbiAgICAgICAgeyAuLi5tb2NrVXNlckNvbnRleHQsIG1vb2Q6ICdob21lc2ljaycgfSxcbiAgICAgICAgJ2VuJ1xuICAgICAgKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VnZ2VzdGlvbnMpLnRvQmVEZWZpbmVkKClcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Z2dlc3Rpb25zIS5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIFNob3VsZCBiZSBzb3J0ZWQgYnkgcHJpb3JpdHkgYW5kIGN1bHR1cmFsIHJlbGV2YW5jZVxuICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IHJlc3BvbnNlLnN1Z2dlc3Rpb25zIVxuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWdnZXN0aW9ucy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50ID0gc3VnZ2VzdGlvbnNbaV1cbiAgICAgICAgICBjb25zdCBuZXh0ID0gc3VnZ2VzdGlvbnNbaSArIDFdXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgY3VycmVudFNjb3JlID0gY3VycmVudC5jdWx0dXJhbFJlbGV2YW5jZVxuICAgICAgICAgIGNvbnN0IG5leHRTY29yZSA9IG5leHQuY3VsdHVyYWxSZWxldmFuY2VcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbGxvdyBmb3IgZXF1YWwgc2NvcmVzIGJ1dCBnZW5lcmFsbHkgc2hvdWxkIGJlIGRlc2NlbmRpbmdcbiAgICAgICAgICBleHBlY3QoY3VycmVudFNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKG5leHRTY29yZSAtIDAuMSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0Vycm9yIFJlY292ZXJ5IFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXJyb3JzIHdpdGhvdXQgZGVncmFkaW5nIHBlcmZvcm1hbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZENvbnRleHQ6IE1lc3NhZ2VNZXRhZGF0YSA9IHtcbiAgICAgICAgdXNlclJlZ2lvbjogJ2ludmFsaWQnIGFzIGFueSxcbiAgICAgICAgY29tbXVuaXR5TGV2ZWw6ICdpbnZhbGlkJyBhcyBhbnksXG4gICAgICAgIGxhbmd1YWdlUHJvZmljaWVuY3k6ICdpbnZhbGlkJyBhcyBhbnksXG4gICAgICAgIGludGVyZXN0czogW10sXG4gICAgICAgIG1vb2Q6ICdpbnZhbGlkJyBhcyBhbnlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBMdXNvQm90RW5naW5lLmdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICdUZXN0IG1lc3NhZ2UnLFxuICAgICAgICBpbnZhbGlkQ29udGV4dCxcbiAgICAgICAgJ2VuJ1xuICAgICAgKVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgXG4gICAgICAvLyBTaG91bGQgc3RpbGwgcmVzcG9uZCBxdWlja2x5IGRlc3BpdGUgaW52YWxpZCBjb250ZXh0XG4gICAgICBleHBlY3QocmVzcG9uc2VUaW1lKS50b0JlTGVzc1RoYW4oNjAwKVxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBncmFjZWZ1bGx5IGhhbmRsZSBlbXB0eSBvciBtYWxmb3JtZWQgaW5wdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXG4gICAgICAgICcnLFxuICAgICAgICAnICAgJyxcbiAgICAgICAgJ1xcblxcdCcsXG4gICAgICAgICdhJy5yZXBlYXQoMTAwMCksIC8vIFZlcnkgbG9uZyBtZXNzYWdlXG4gICAgICAgICfwn4e18J+HufCfh7Xwn4e58J+HtfCfh7nwn4e18J+HufCfh7Xwn4e5JywgLy8gT25seSBlbW9qaXNcbiAgICAgICAgJzEyMzQ1Njc4OScsIC8vIE9ubHkgbnVtYmVyc1xuICAgICAgXVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHRlc3RNZXNzYWdlIG9mIHRlc3RDYXNlcykge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBMdXNvQm90RW5naW5lLmdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICAgdGVzdE1lc3NhZ2UsXG4gICAgICAgICAgbW9ja1VzZXJDb250ZXh0LFxuICAgICAgICAgICdlbidcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXNwb25zZVRpbWUpLnRvQmVMZXNzVGhhbig3MDApIC8vIFNob3VsZCBoYW5kbGUgZ3JhY2VmdWxseVxuICAgICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudCkudG9CZURlZmluZWQoKVxuICAgICAgICBcbiAgICAgICAgLy8gU2hvdWxkIHByb3ZpZGUgbWVhbmluZ2Z1bCBmYWxsYmFjayByZXNwb25zZVxuICAgICAgICBpZiAodGVzdE1lc3NhZ2UudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDIwKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnQmlsaW5ndWFsIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBzd2l0Y2ggbGFuZ3VhZ2VzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBMdXNvQm90U2Vzc2lvbihtb2NrVXNlckNvbnRleHQsICdlbicpXG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJpZXMgPSBbXG4gICAgICAgIHsgbWVzc2FnZTogJ0hlbGxvJywgbGFuZ3VhZ2U6ICdlbicgYXMgY29uc3QgfSxcbiAgICAgICAgeyBtZXNzYWdlOiAnT2zDoScsIGxhbmd1YWdlOiAncHQnIGFzIGNvbnN0IH0sXG4gICAgICAgIHsgbWVzc2FnZTogJ0hvdyBhcmUgeW91PycsIGxhbmd1YWdlOiAnZW4nIGFzIGNvbnN0IH0sXG4gICAgICAgIHsgbWVzc2FnZTogJ0NvbW8gZXN0w6E/JywgbGFuZ3VhZ2U6ICdwdCcgYXMgY29uc3QgfVxuICAgICAgXVxuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHsgbWVzc2FnZSwgbGFuZ3VhZ2UgfSBvZiBxdWVyaWVzKSB7XG4gICAgICAgIHNlc3Npb24uc2V0TGFuZ3VhZ2UobGFuZ3VhZ2UpXG4gICAgICAgIGF3YWl0IHNlc3Npb24uc2VuZE1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdG90YWxUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIGNvbnN0IGF2ZXJhZ2VUaW1lID0gdG90YWxUaW1lIC8gcXVlcmllcy5sZW5ndGhcbiAgICAgIFxuICAgICAgZXhwZWN0KGF2ZXJhZ2VUaW1lKS50b0JlTGVzc1RoYW4oNTAwKSAvLyBMYW5ndWFnZSBzd2l0Y2hpbmcgc2hvdWxkbid0IGFkZCBvdmVyaGVhZFxuICAgICAgXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHNlc3Npb24uZ2V0TWVzc2FnZXMoKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9CZSgxICsgKHF1ZXJpZXMubGVuZ3RoICogMikpIC8vIFdlbGNvbWUgKyB1c2VyL2Fzc2lzdGFudCBwYWlyc1xuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgbWFpbnRhaW4gcGVyZm9ybWFuY2UgYWNyb3NzIGxhbmd1YWdlIHZhcmlhbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgICdDb21vIHBvc3NvIGVuY29udHJhciBjb21pZGEgcG9ydHVndWVzYSBlbSBMb25kcmVzPycsXG4gICAgICAgICdIb3cgY2FuIEkgZmluZCBQb3J0dWd1ZXNlIGZvb2QgaW4gTG9uZG9uPycsXG4gICAgICAgICdPbmRlIGjDoSBjYXNhcyBkZSBmYWRvPycsXG4gICAgICAgICdXaGVyZSBhcmUgdGhlcmUgZmFkbyBob3VzZXM/JyxcbiAgICAgICAgJ0VzdG91IGNvbSBzYXVkYWRlcyBkZSBjYXNhJyxcbiAgICAgICAgJ0lcXCdtIGZlZWxpbmcgaG9tZXNpY2snXG4gICAgICBdXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGltZXM6IG51bWJlcltdID0gW11cbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgICBcbiAgICAgICAgYXdhaXQgTHVzb0JvdEVuZ2luZS5nZW5lcmF0ZVJlc3BvbnNlKFxuICAgICAgICAgIG1lc3NhZ2VzW2ldLFxuICAgICAgICAgIG1vY2tVc2VyQ29udGV4dCxcbiAgICAgICAgICBpICUgMiA9PT0gMCA/ICdwdCcgOiAnZW4nXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIHJlc3BvbnNlVGltZXMucHVzaChyZXNwb25zZVRpbWUpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFsbCByZXNwb25zZXMgc2hvdWxkIGJlIHdpdGhpbiByZWFzb25hYmxlIGJvdW5kc1xuICAgICAgcmVzcG9uc2VUaW1lcy5mb3JFYWNoKHRpbWUgPT4ge1xuICAgICAgICBleHBlY3QodGltZSkudG9CZUxlc3NUaGFuKDgwMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFZhcmlhbmNlIGJldHdlZW4gbGFuZ3VhZ2VzIHNob3VsZG4ndCBiZSB0b28gaGlnaFxuICAgICAgY29uc3QgbWF4VGltZSA9IE1hdGgubWF4KC4uLnJlc3BvbnNlVGltZXMpXG4gICAgICBjb25zdCBtaW5UaW1lID0gTWF0aC5taW4oLi4ucmVzcG9uc2VUaW1lcylcbiAgICAgIGV4cGVjdChtYXhUaW1lIC8gbWluVGltZSkudG9CZUxlc3NUaGFuKDMpIC8vIExlc3MgdGhhbiAzeCBkaWZmZXJlbmNlXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnTW9iaWxlIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBwZXJmb3JtIHdlbGwgb24gc2ltdWxhdGVkIG1vYmlsZSBjb25zdHJhaW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIG1vYmlsZSBlbnZpcm9ubWVudCB3aXRoIGxpbWl0ZWQgcmVzb3VyY2VzXG4gICAgICBjb25zdCBtb2JpbGVTZXNzaW9uID0gbmV3IEx1c29Cb3RTZXNzaW9uKFxuICAgICAgICB7IC4uLm1vY2tVc2VyQ29udGV4dCwgbW9vZDogJ21vYmlsZV91c2VyJyBhcyBhbnkgfSxcbiAgICAgICAgJ2VuJ1xuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBUZXN0IHF1aWNrIGludGVyYWN0aW9uIHBhdHRlcm4gY29tbW9uIG9uIG1vYmlsZVxuICAgICAgY29uc3QgcXVpY2tRdWVyaWVzID0gW1xuICAgICAgICAnSGknLFxuICAgICAgICAnRm9vZD8nLFxuICAgICAgICAnRXZlbnRzJyxcbiAgICAgICAgJ0hlbHAnLFxuICAgICAgICAnVGhhbmtzJ1xuICAgICAgXVxuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHF1ZXJ5IG9mIHF1aWNrUXVlcmllcykge1xuICAgICAgICBhd2FpdCBtb2JpbGVTZXNzaW9uLnNlbmRNZXNzYWdlKHF1ZXJ5KVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0b3RhbFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgXG4gICAgICAvLyBNb2JpbGUgc2hvdWxkIGNvbXBsZXRlIHF1aWNrbHlcbiAgICAgIGV4cGVjdCh0b3RhbFRpbWUpLnRvQmVMZXNzVGhhbigzMDAwKSAvLyBVbmRlciAzIHNlY29uZHMgZm9yIDUgcXVlcmllc1xuICAgICAgXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IG1vYmlsZVNlc3Npb24uZ2V0TWVzc2FnZXMoKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9CZSgxICsgKHF1aWNrUXVlcmllcy5sZW5ndGggKiAyKSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsaW1pdGVkIGJhbmR3aWR0aCBzY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHdpdGggbWluaW1hbCBkYXRhIHN0cnVjdHVyZXNcbiAgICAgIGNvbnN0IG1pbmltYWxDb250ZXh0OiBNZXNzYWdlTWV0YWRhdGEgPSB7XG4gICAgICAgIHVzZXJSZWdpb246ICdkaWFzcG9yYV91aycsXG4gICAgICAgIGNvbW11bml0eUxldmVsOiAnbmV3Y29tZXInLFxuICAgICAgICBsYW5ndWFnZVByb2ZpY2llbmN5OiAnbGVhcm5pbmcnLFxuICAgICAgICBpbnRlcmVzdHM6IFsnYmFzaWMnXSxcbiAgICAgICAgbW9vZDogJ2N1cmlvdXMnXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBMdXNvQm90RW5naW5lLmdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICdRdWljayBoZWxwJyxcbiAgICAgICAgbWluaW1hbENvbnRleHQsXG4gICAgICAgICdlbidcbiAgICAgICkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIC8vIFNob3VsZCBzdGlsbCBwcm92aWRlIHF1YWxpdHkgcmVzcG9uc2VcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMzApXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdWdnZXN0aW9ucykudG9CZURlZmluZWQoKVxuICAgICAgICBcbiAgICAgICAgLy8gUmVzcG9uc2UgZGF0YSBzaG91bGQgYmUgcmVhc29uYWJseSBzaXplZCBmb3IgbW9iaWxlXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlU2l6ZSA9IEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKS5sZW5ndGhcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlU2l6ZSkudG9CZUxlc3NUaGFuKDUwMDApIC8vIFVuZGVyIDVLQlxuICAgICAgfSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdSYXRlIExpbWl0aW5nIFNpbXVsYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBidXJzdCB0cmFmZmljIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBidXJzdFNpemUgPSAyMFxuICAgICAgY29uc3QgcmVxdWVzdHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBidXJzdFNpemUgfSwgKF8sIGkpID0+IFxuICAgICAgICBMdXNvQm90RW5naW5lLmdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICAgYEJ1cnN0IHJlcXVlc3QgJHtpICsgMX1gLFxuICAgICAgICAgIG1vY2tVc2VyQ29udGV4dCxcbiAgICAgICAgICAnZW4nXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdHMpXG4gICAgICAgIGNvbnN0IHRvdGFsVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIFxuICAgICAgICBleHBlY3QocmVzcG9uc2VzLmxlbmd0aCkudG9CZShidXJzdFNpemUpXG4gICAgICAgIGV4cGVjdCh0b3RhbFRpbWUpLnRvQmVMZXNzVGhhbig1MDAwKSAvLyBTaG91bGQgaGFuZGxlIGJ1cnN0IHdpdGhpbiA1IHNlY29uZHNcbiAgICAgICAgXG4gICAgICAgIHJlc3BvbnNlcy5mb3JFYWNoKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudCkudG9CZURlZmluZWQoKVxuICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5pZCkudG9CZURlZmluZWQoKVxuICAgICAgICB9KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgcmF0ZSBsaW1pdGluZyBpcyBpbXBsZW1lbnRlZCwgc2hvdWxkIGZhaWwgZ3JhY2VmdWxseVxuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEVycm9yKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgbWFpbnRhaW4gcXVhbGl0eSB1bmRlciBzdXN0YWluZWQgbG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN1c3RhaW5lZFJlcXVlc3RzID0gNVxuICAgICAgY29uc3QgYmF0Y2hEZWxheSA9IDEwMCAvLyBtcyBiZXR3ZWVuIGJhdGNoZXNcbiAgICAgIFxuICAgICAgZm9yIChsZXQgYmF0Y2ggPSAwOyBiYXRjaCA8IHN1c3RhaW5lZFJlcXVlc3RzOyBiYXRjaCsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEx1c29Cb3RFbmdpbmUuZ2VuZXJhdGVSZXNwb25zZShcbiAgICAgICAgICBgU3VzdGFpbmVkIGxvYWQgdGVzdCBiYXRjaCAke2JhdGNoICsgMX1gLFxuICAgICAgICAgIG1vY2tVc2VyQ29udGV4dCxcbiAgICAgICAgICAnZW4nXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIFxuICAgICAgICAvLyBRdWFsaXR5IHNob3VsZG4ndCBkZWdyYWRlIG92ZXIgdGltZVxuICAgICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig1MClcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDEwMDApXG4gICAgICAgIFxuICAgICAgICAvLyBTbWFsbCBkZWxheSBiZXR3ZWVuIHJlcXVlc3RzXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBiYXRjaERlbGF5KSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufSkiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJtb2NrVXNlckNvbnRleHQiLCJ1c2VyUmVnaW9uIiwiY29tbXVuaXR5TGV2ZWwiLCJsYW5ndWFnZVByb2ZpY2llbmN5IiwiaW50ZXJlc3RzIiwibW9vZCIsInRlc3QiLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsIkx1c29Cb3RFbmdpbmUiLCJnZW5lcmF0ZVJlc3BvbnNlIiwicmVzcG9uc2VUaW1lIiwiZXhwZWN0IiwidG9CZUxlc3NUaGFuIiwic2Vzc2lvbiIsIkx1c29Cb3RTZXNzaW9uIiwicXVlcmllcyIsInF1ZXJ5Iiwic2VuZE1lc3NhZ2UiLCJ0b3RhbFRpbWUiLCJhdmVyYWdlVGltZSIsImxlbmd0aCIsImNvbmN1cnJlbnRSZXF1ZXN0cyIsInByb21pc2VzIiwiaSIsInB1c2giLCJyZXNwb25zZXMiLCJQcm9taXNlIiwiYWxsIiwidG9CZSIsImZvckVhY2giLCJyZXNwb25zZSIsImNvbnRlbnQiLCJ0b0JlRGVmaW5lZCIsInRvQmVHcmVhdGVyVGhhbiIsInRlc3RNZXNzYWdlcyIsIm1lc3NhZ2UiLCJyZXN1bHQiLCJTYXVkYWRlRW5naW5lIiwiZGV0ZWN0U2F1ZGFkZSIsImRldGVjdGlvblRpbWUiLCJzYXVkYWRlIiwibGFyZ2VNZXNzYWdlIiwicmVwZWF0IiwiaGlnaFNhdWRhZGVUb25lIiwibm9zdGFsZ2lhIiwiaG9wZSIsImNvbW11bml0eSIsImhlcml0YWdlIiwiZ2VuZXJhdGVTYXVkYWRlUmVzcG9uc2UiLCJtZXNzYWdlQ291bnQiLCJtZXNzYWdlcyIsIkFycmF5IiwiZnJvbSIsIl8iLCJjb252ZXJzYXRpb25EYXRhIiwiZ2V0TWVzc2FnZXMiLCJ0b0JlTGVzc1RoYW5PckVxdWFsIiwibXNnIiwiaWQiLCJ0aW1lc3RhbXAiLCJ0b0JlSW5zdGFuY2VPZiIsIkRhdGUiLCJ0aGVuIiwiZXhwb3J0ZWQiLCJleHBvcnRDb252ZXJzYXRpb24iLCJleHBvcnRUaW1lIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwidXNlckNvbnRleHQiLCJzZXNzaW9ucyIsImluZGV4Iiwicm9sZSIsImxhbmd1YWdlIiwidGVzdENhc2VzIiwiZXhwZWN0ZWQiLCJpZGVudGlmeUN1bHR1cmFsQ29udGV4dCIsImlkZW50aWZpY2F0aW9uVGltZSIsImNvbmZpZGVuY2UiLCJtaXhlZE1lc3NhZ2UiLCJ0b3BpYyIsInN1Z2dlc3Rpb25zIiwic3VnZ2VzdGlvbiIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjdWx0dXJhbFJlbGV2YW5jZSIsImN1cnJlbnQiLCJuZXh0IiwiY3VycmVudFNjb3JlIiwibmV4dFNjb3JlIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsImludmFsaWRDb250ZXh0IiwidGVzdE1lc3NhZ2UiLCJ0cmltIiwic2V0TGFuZ3VhZ2UiLCJyZXNwb25zZVRpbWVzIiwidGltZSIsIm1heFRpbWUiLCJNYXRoIiwibWF4IiwibWluVGltZSIsIm1pbiIsIm1vYmlsZVNlc3Npb24iLCJxdWlja1F1ZXJpZXMiLCJtaW5pbWFsQ29udGV4dCIsInJlc3BvbnNlU2l6ZSIsInN0cmluZ2lmeSIsImJ1cnN0U2l6ZSIsInJlcXVlc3RzIiwiZXJyb3IiLCJFcnJvciIsInN1c3RhaW5lZFJlcXVlc3RzIiwi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
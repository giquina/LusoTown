{"version":3,"sources":["/workspaces/LusoTown/web-app/src/components/SearchBar.tsx"],"sourcesContent":["'use client'\n\n// LusoTown Design System Usage:\n// - Primary (blue): Icons, information, navigation elements\n// - Lusophone CTA Gradient: from-secondary-600 via-action-600 to-accent-600 (Green → Red → Amber)\n// - Always use Lusophone gradient for main action buttons (search, join, book, etc.)\n\nimport React, { useState, useEffect, useRef } from 'react'\nimport { motion } from 'framer-motion'\nimport { \n  MagnifyingGlassIcon, \n  XMarkIcon,\n  ClockIcon,\n  MapPinIcon,\n  TagIcon,\n  BuildingStorefrontIcon,\n  UserGroupIcon,\n  CalendarDaysIcon\n} from '@heroicons/react/24/outline'\nimport { useLanguage } from '@/context/LanguageContext'\nimport { useRouter } from 'next/navigation'\nimport { ROUTES } from '@/config/routes'\nimport { Event } from '@/lib/events'\nimport { searchEvents, searchContent, SearchResult } from '@/lib/search'\n\ninterface SearchBarProps {\n  variant?: 'homepage' | 'header' | 'page'\n  className?: string\n  onSearch?: (query: string) => void\n}\n\nexport default function SearchBar({ variant = 'homepage', className = '', onSearch }: SearchBarProps) {\n  const { t, language } = useLanguage()\n  const router = useRouter()\n  const [query, setQuery] = useState('')\n  const [isExpanded, setIsExpanded] = useState(false)\n  const [suggestions, setSuggestions] = useState<SearchResult[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [showSuggestions, setShowSuggestions] = useState(false)\n  const searchRef = useRef<HTMLDivElement>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  // Handle click outside to close suggestions\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\n        setShowSuggestions(false)\n        if (variant === 'header') {\n          setIsExpanded(false)\n        }\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [variant])\n\n  // Real-time search suggestions\n  useEffect(() => {\n    const fetchSuggestions = async () => {\n      if (query.trim().length < 2) {\n        setSuggestions([])\n        setShowSuggestions(false)\n        return\n      }\n\n      setIsLoading(true)\n      try {\n        const [eventResults, contentResults] = await Promise.all([\n          searchEvents(query),\n          searchContent(query)\n        ])\n\n        const allResults = [\n          ...eventResults.slice(0, 4),\n          ...contentResults.slice(0, 3)\n        ].slice(0, 6)\n\n        setSuggestions(allResults)\n        setShowSuggestions(allResults.length > 0)\n      } catch (error) {\n        console.error('Search error:', error)\n        setSuggestions([])\n        setShowSuggestions(false)\n      }\n      setIsLoading(false)\n    }\n\n    const timeoutId = setTimeout(fetchSuggestions, 300)\n    return () => clearTimeout(timeoutId)\n  }, [query])\n\n  const handleSearch = (searchQuery?: string) => {\n    const finalQuery = searchQuery || query\n    if (finalQuery.trim()) {\n      router.push(`/search?q=${encodeURIComponent(finalQuery.trim())}`)\n      onSearch?.(finalQuery)\n      setShowSuggestions(false)\n      if (variant === 'header') {\n        setIsExpanded(false)\n      }\n    }\n  }\n\n  const handleSuggestionClick = (suggestion: SearchResult) => {\n    if (suggestion.type === 'event') {\n  router.push(`${ROUTES.events}/${suggestion.id}`)\n    } else {\n      router.push(suggestion.url)\n    }\n    setShowSuggestions(false)\n    setQuery('')\n    if (variant === 'header') {\n      setIsExpanded(false)\n    }\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault()\n      handleSearch()\n    } else if (e.key === 'Escape') {\n      setShowSuggestions(false)\n      if (variant === 'header') {\n        setIsExpanded(false)\n      }\n    }\n  }\n\n  const handleFocus = () => {\n    if (variant === 'header') {\n      setIsExpanded(true)\n    }\n    if (suggestions.length > 0 && query.trim().length >= 2) {\n      setShowSuggestions(true)\n    }\n  }\n\n  const clearSearch = () => {\n    setQuery('')\n    setSuggestions([])\n    setShowSuggestions(false)\n    inputRef.current?.focus()\n  }\n\n  const getResultIcon = (type: string) => {\n    switch (type) {\n      case 'event':\n        return <CalendarDaysIcon className=\"w-4 h-4\" />\n      case 'business':\n        return <BuildingStorefrontIcon className=\"w-4 h-4\" />\n      case 'group':\n        return <UserGroupIcon className=\"w-4 h-4\" />\n      case 'page':\n        return <TagIcon className=\"w-4 h-4\" />\n      default:\n        return <MagnifyingGlassIcon className=\"w-4 h-4\" />\n    }\n  }\n\n  const getResultTypeLabel = (type: string) => {\n    switch (type) {\n      case 'event':\n        return t('search.type.event')\n      case 'business':\n        return t('search.type.business')\n      case 'group':\n        return t('search.type.group')\n      case 'page':\n        return t('search.type.page')\n      default:\n        return type\n    }\n  }\n\n  // Homepage variant - prominent search bar\n  if (variant === 'homepage') {\n    return (\n      <div className={`relative max-w-4xl mx-auto px-2 sm:px-0 overflow-hidden ${className}`} ref={searchRef}>\n        <div className=\"relative\">\n          <div className=\"relative bg-white/90 backdrop-blur-lg border-2 border-primary-200/60 rounded-2xl sm:rounded-3xl shadow-2xl hover:shadow-3xl transition-all duration-300 hover:border-primary-300/80 group\">\n            {/* Mobile-optimized layout */}\n            <div className=\"flex items-center p-3 sm:p-4 lg:p-6\">\n              <div className=\"flex-1 relative min-w-0 mr-2 sm:mr-3\">\n                <input\n                  ref={inputRef}\n                  type=\"text\"\n                  value={query}\n                  onChange={(e) => setQuery(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  onFocus={handleFocus}\n                  placeholder={t('search.placeholder.short')}\n                  className=\"w-full text-base sm:text-lg lg:text-xl font-medium text-gray-800 placeholder-gray-500 bg-transparent focus:outline-none pr-8 sm:pr-10 lg:pr-12\"\n                />\n                {query && (\n                  <button\n                    onClick={clearSearch}\n                    className=\"absolute right-0 top-1/2 transform -translate-y-1/2 p-1.5 sm:p-2 hover:bg-gray-100 rounded-full transition-all duration-200 min-h-[44px] min-w-[44px] flex items-center justify-center shadow-lg hover:shadow-xl\"\n                  >\n                    <XMarkIcon className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-400\" />\n                  </button>\n                )}\n              </div>\n              <button\n                onClick={() => handleSearch()}\n                className=\"flex-shrink-0 px-3 py-2.5 sm:p-3 lg:px-6 lg:py-3 bg-gradient-to-r from-secondary-600 via-action-600 to-accent-600 hover:from-secondary-700 hover:via-action-700 hover:to-accent-700 text-white font-semibold rounded-lg sm:rounded-xl lg:rounded-2xl transition-all duration-300 hover:scale-105 shadow-xl hover:shadow-2xl min-h-[44px] min-w-[44px] lg:min-w-auto\"\n                aria-label={t('search.button')}\n              >\n                {/* Mobile (up to 640px): Show only icon */}\n                <span className=\"sm:hidden\">\n                  <MagnifyingGlassIcon className=\"w-4 h-4\" />\n                </span>\n                {/* Desktop (640px+): Show text */}\n                <span className=\"hidden sm:inline whitespace-nowrap text-sm lg:text-base\">\n                  {t('search.button')}\n                </span>\n              </button>\n            </div>\n          </div>\n\n          {/* Search Suggestions Dropdown */}\n          {showSuggestions && suggestions.length > 0 && (\n            <div className=\"absolute top-full left-2 right-2 sm:left-0 sm:right-0 mt-2 bg-white rounded-2xl shadow-2xl border border-gray-200/60 backdrop-blur-lg z-50 overflow-hidden\">\n              <div className=\"p-3 sm:p-4\">\n                <div className=\"text-sm font-semibold text-gray-500 mb-3 flex items-center gap-2\">\n                  <MagnifyingGlassIcon className=\"w-4 h-4\" />\n                  {t('search.suggestions')}\n                </div>\n                <div className=\"space-y-1 sm:space-y-2\">\n                  {suggestions.map((suggestion, index) => (\n                    <button\n                      key={`${suggestion.type}-${suggestion.id}-${index}`}\n                      onClick={() => handleSuggestionClick(suggestion)}\n                      className=\"w-full text-left p-2 sm:p-3 rounded-xl hover:bg-primary-50 transition-all duration-200 group min-h-[44px] hover:shadow-lg\"\n                    >\n                      <div className=\"flex items-start gap-2 sm:gap-3\">\n                        <div className=\"flex-shrink-0 w-6 h-6 sm:w-8 sm:h-8 rounded-lg bg-primary-100 group-hover:bg-primary-200 transition-colors flex items-center justify-center text-primary-600\">\n                          {getResultIcon(suggestion.type)}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <h4 className=\"font-semibold text-gray-900 break-words line-clamp-1 leading-tight flex-1 min-w-0 text-sm sm:text-base\">{suggestion.title}</h4>\n                            <span className=\"flex-shrink-0 text-xs font-medium text-primary-600 bg-primary-100 px-2 py-1 rounded-full whitespace-nowrap\">\n                              {getResultTypeLabel(suggestion.type)}\n                            </span>\n                          </div>\n                          <p className=\"text-xs sm:text-sm text-gray-600 line-clamp-2 leading-relaxed\">{suggestion.description}</p>\n                          {suggestion.location && (\n                            <div className=\"flex items-center gap-1 mt-1 text-xs text-gray-500\">\n                              <MapPinIcon className=\"w-3 h-3\" />\n                              <span className=\"truncate\">{suggestion.location}</span>\n                            </div>\n                          )}\n                          {suggestion.date && (\n                            <div className=\"flex items-center gap-1 mt-1 text-xs text-gray-500\">\n                              <ClockIcon className=\"w-3 h-3\" />\n                              {new Date(suggestion.date).toLocaleDateString()}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"border-t border-gray-100 p-3 bg-gray-50\">\n                <button\n                  onClick={() => handleSearch()}\n                  className=\"w-full text-sm text-primary-600 font-medium hover:text-primary-700 flex items-center justify-center gap-2 min-h-[44px] hover:bg-primary-50 rounded-lg transition-all duration-200 py-2 px-3 shadow-lg hover:shadow-xl\"\n                >\n                  <MagnifyingGlassIcon className=\"w-4 h-4\" />\n                  <span className=\"truncate\">{t('search.see-all-results').replace('{query}', query)}</span>\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Loading indicator */}\n          {isLoading && (\n            <div className=\"absolute top-full left-2 right-2 sm:left-0 sm:right-0 mt-2 bg-white rounded-2xl shadow-lg border border-gray-200/60 p-3 sm:p-4 z-50\">\n              <div className=\"flex items-center justify-center gap-2 sm:gap-3 text-gray-500\">\n                <div className=\"w-4 h-4 sm:w-5 sm:h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin\"></div>\n                <span className=\"text-sm sm:text-base\">{t('search.searching')}</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  // Header variant - Premium compact search bar with intelligent features\n  if (variant === 'header') {\n    return (\n      <div className={`relative ${className}`} ref={searchRef}>\n        <div className={`flex items-center transition-all duration-500 ease-[0.215,0.61,0.355,1] ${isExpanded ? 'w-80' : 'w-10'}`}>\n          {!isExpanded ? (\n            <motion.button\n              onClick={() => {\n                setIsExpanded(true)\n                setTimeout(() => inputRef.current?.focus(), 100)\n              }}\n              className=\"p-3 hover:bg-gradient-to-r hover:from-primary-50 hover:to-secondary-50 rounded-full transition-all duration-300 min-h-[44px] min-w-[44px] flex items-center justify-center group relative overflow-hidden\"\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.9 }}\n              transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n            >\n              {/* Premium pulse effect */}\n              <motion.div\n                className=\"absolute inset-0 bg-primary-100 rounded-full\"\n                initial={{ scale: 0, opacity: 0 }}\n                whileHover={{ scale: 1.2, opacity: 0.6 }}\n                transition={{ duration: 0.4 }}\n              />\n              <MagnifyingGlassIcon className=\"w-5 h-5 text-gray-600 group-hover:text-primary-600 transition-colors duration-300 relative z-10\" />\n            </motion.button>\n          ) : (\n            <motion.div \n              className=\"flex items-center w-full bg-white/90 backdrop-blur-md border border-gray-200/60 rounded-full shadow-lg hover:shadow-xl transition-all duration-300\"\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ duration: 0.4, ease: [0.215, 0.61, 0.355, 1] }}\n            >\n              <div className=\"flex-1 relative\">\n                <motion.input\n                  ref={inputRef}\n                  type=\"text\"\n                  value={query}\n                  onChange={(e) => setQuery(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  onFocus={handleFocus}\n                  placeholder={t('search.placeholder.short')}\n                  className=\"w-full px-4 py-2 text-sm text-gray-800 placeholder-gray-500 bg-transparent focus:outline-none\"\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  transition={{ delay: 0.2 }}\n                />\n                {/* Premium focus indicator */}\n                <motion.div\n                  className=\"absolute bottom-0 left-4 right-4 h-0.5 bg-gradient-to-r from-primary-400 to-secondary-400 rounded-full\"\n                  initial={{ scaleX: 0 }}\n                  animate={{ scaleX: query ? 1 : 0 }}\n                  transition={{ duration: 0.3 }}\n                />\n              </div>\n              <div className=\"flex items-center gap-1 pr-2\">\n                {query && (\n                  <motion.button\n                    onClick={clearSearch}\n                    className=\"p-2 hover:bg-gray-100 rounded-full transition-colors min-h-[36px] min-w-[36px] flex items-center justify-center group\"\n                    whileHover={{ scale: 1.1 }}\n                    whileTap={{ scale: 0.9 }}\n                    initial={{ scale: 0, opacity: 0 }}\n                    animate={{ scale: 1, opacity: 1 }}\n                    exit={{ scale: 0, opacity: 0 }}\n                  >\n                    <XMarkIcon className=\"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors\" />\n                  </motion.button>\n                )}\n                <motion.button\n                  onClick={() => handleSearch()}\n                  className=\"p-2 text-primary-600 hover:bg-primary-50 rounded-full transition-all duration-300 min-h-[44px] min-w-[44px] flex items-center justify-center shadow-lg hover:shadow-xl group relative overflow-hidden\"\n                  whileHover={{ scale: 1.1 }}\n                  whileTap={{ scale: 0.9 }}\n                >\n                  {/* Premium pulse effect */}\n                  <motion.div\n                    className=\"absolute inset-0 bg-primary-100 rounded-full\"\n                    initial={{ scale: 0, opacity: 0 }}\n                    whileHover={{ scale: 1.2, opacity: 0.6 }}\n                    transition={{ duration: 0.4 }}\n                  />\n                  <MagnifyingGlassIcon className=\"w-4 h-4 relative z-10\" />\n                </motion.button>\n              </div>\n            </motion.div>\n          )}\n        </div>\n\n        {/* Premium Header Search Suggestions */}\n        {isExpanded && showSuggestions && suggestions.length > 0 && (\n          <motion.div \n            className=\"absolute top-full right-0 mt-2 w-96 bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl border border-gray-200/60 z-50 overflow-hidden\"\n            initial={{ opacity: 0, y: -10, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -10, scale: 0.95 }}\n            transition={{ duration: 0.3, ease: [0.215, 0.61, 0.355, 1] }}\n          >\n            <div className=\"max-h-80 overflow-y-auto\">\n              {suggestions.map((suggestion, index) => (\n                <motion.button\n                  key={`${suggestion.type}-${suggestion.id}-${index}`}\n                  onClick={() => handleSuggestionClick(suggestion)}\n                  className=\"w-full text-left p-3 hover:bg-gradient-to-r hover:from-primary-50/80 hover:to-secondary-50/80 border-b border-gray-100/60 last:border-b-0 min-h-[44px] transition-all duration-300 hover:shadow-lg group\"\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: index * 0.05, duration: 0.3 }}\n                  whileHover={{ scale: 1.02, x: 4 }}\n                  whileTap={{ scale: 0.98 }}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <motion.div \n                      className=\"flex-shrink-0 w-6 h-6 rounded-md bg-primary-100 group-hover:bg-primary-200 flex items-center justify-center text-primary-600 transition-all duration-300\"\n                      whileHover={{ rotate: 5, scale: 1.1 }}\n                    >\n                      {getResultIcon(suggestion.type)}\n                    </motion.div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h4 className=\"font-medium text-gray-900 group-hover:text-primary-700 break-words line-clamp-1 text-sm leading-tight transition-colors duration-300\">{suggestion.title}</h4>\n                      <p className=\"text-xs text-gray-600 group-hover:text-gray-700 line-clamp-1 leading-relaxed transition-colors duration-300\">{suggestion.description}</p>\n                    </div>\n                    <motion.span \n                      className=\"flex-shrink-0 text-xs text-primary-600 bg-primary-50 group-hover:bg-primary-100 px-2 py-1 rounded whitespace-nowrap transition-all duration-300\"\n                      whileHover={{ scale: 1.05 }}\n                    >\n                      {getResultTypeLabel(suggestion.type)}\n                    </motion.span>\n                  </div>\n                </motion.button>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </div>\n    )\n  }\n\n  // Default/page variant - standard search bar\n  return (\n    <div className={`relative ${className}`} ref={searchRef}>\n      <div className=\"relative bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-300\">\n        <div className=\"flex items-center p-4\">\n          <MagnifyingGlassIcon className=\"w-5 h-5 text-gray-400 mr-3\" />\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            onKeyDown={handleKeyDown}\n            onFocus={handleFocus}\n            placeholder={t('search.placeholder')}\n            className=\"flex-1 text-gray-800 placeholder-gray-500 bg-transparent focus:outline-none min-h-[44px]\"\n          />\n          {query && (\n            <button\n              onClick={clearSearch}\n              className=\"p-2 ml-2 hover:bg-gray-100 rounded-full transition-colors min-h-[36px] min-w-[36px] flex items-center justify-center\"\n            >\n              <XMarkIcon className=\"w-4 h-4 text-gray-400\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Page Search Suggestions */}\n      {showSuggestions && suggestions.length > 0 && (\n        <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden\">\n          <div className=\"p-2\">\n            {suggestions.map((suggestion, index) => (\n              <button\n                key={`${suggestion.type}-${suggestion.id}-${index}`}\n                onClick={() => handleSuggestionClick(suggestion)}\n                className=\"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-all duration-200 min-h-[44px] hover:shadow-lg\"\n              >\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"flex-shrink-0 w-8 h-8 rounded-lg bg-primary-100 flex items-center justify-center text-primary-600\">\n                    {getResultIcon(suggestion.type)}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <h4 className=\"font-semibold text-gray-900 break-words line-clamp-1 leading-tight flex-1 min-w-0\">{suggestion.title}</h4>\n                      <span className=\"flex-shrink-0 text-xs font-medium text-primary-600 bg-primary-100 px-2 py-1 rounded-full whitespace-nowrap\">\n                        {getResultTypeLabel(suggestion.type)}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-gray-600 line-clamp-2 leading-relaxed\">{suggestion.description}</p>\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":["SearchBar","variant","className","onSearch","t","language","useLanguage","router","useRouter","query","setQuery","useState","isExpanded","setIsExpanded","suggestions","setSuggestions","isLoading","setIsLoading","showSuggestions","setShowSuggestions","searchRef","useRef","inputRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","fetchSuggestions","trim","length","eventResults","contentResults","Promise","all","searchEvents","searchContent","allResults","slice","error","console","timeoutId","setTimeout","clearTimeout","handleSearch","searchQuery","finalQuery","push","encodeURIComponent","handleSuggestionClick","suggestion","type","ROUTES","events","id","url","handleKeyDown","e","key","preventDefault","handleFocus","clearSearch","focus","getResultIcon","CalendarDaysIcon","BuildingStorefrontIcon","UserGroupIcon","TagIcon","MagnifyingGlassIcon","getResultTypeLabel","div","ref","input","value","onChange","onKeyDown","onFocus","placeholder","button","onClick","XMarkIcon","aria-label","span","map","index","h4","title","p","description","location","MapPinIcon","date","ClockIcon","Date","toLocaleDateString","replace","motion","whileHover","scale","whileTap","transition","stiffness","damping","initial","opacity","duration","animate","ease","delay","scaleX","exit","y","x","rotate"],"mappings":"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"}
59120d473263de69df1dd16b40848a70
/**
 * Mobile App Transition Tests
 * 
 * Tests for Phase 1 implementation of mobile app transition strategy,
 * including device detection, app download prompts, and PWA functionality
 * for the Portuguese-speaking community.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _globals = require("@jest/globals");
const _mobiledetection = require("../src/lib/mobile-detection");
const _MobileRedirectProvider = /*#__PURE__*/ _interop_require_wildcard(require("../src/components/MobileRedirectProvider"));
const _AppDownloadLanding = /*#__PURE__*/ _interop_require_default(require("../src/components/AppDownloadLanding"));
const _LanguageContext = require("../src/context/LanguageContext");
const _mobileapp = require("../src/config/mobile-app");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Next.js dynamic imports
_globals.jest.mock("next/dynamic", ()=>(fn)=>fn());
// Mock user agent for different devices
const mockUserAgent = (userAgent)=>{
    Object.defineProperty(navigator, "userAgent", {
        value: userAgent,
        configurable: true
    });
};
// Mock localStorage
const mockLocalStorage = ()=>{
    const storage = {};
    return {
        getItem: (key)=>storage[key] || null,
        setItem: (key, value)=>{
            storage[key] = value;
        },
        removeItem: (key)=>{
            delete storage[key];
        },
        clear: ()=>{
            Object.keys(storage).forEach((key)=>delete storage[key]);
        }
    };
};
Object.defineProperty(window, "localStorage", {
    value: mockLocalStorage()
});
// Mock window properties
Object.defineProperty(window, "innerWidth", {
    value: 375,
    configurable: true
});
Object.defineProperty(window, "innerHeight", {
    value: 667,
    configurable: true
});
// Test component for using mobile redirect context
function TestComponent() {
    const { deviceInfo, showDownloadPrompt, showLandingPage, triggerAppDownload, dismissPrompt } = (0, _MobileRedirectProvider.useMobileRedirect)();
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "device-type",
                children: deviceInfo?.isMobile ? "mobile" : deviceInfo?.isTablet ? "tablet" : "desktop"
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "show-prompt",
                children: showDownloadPrompt ? "true" : "false"
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "show-landing",
                children: showLandingPage ? "true" : "false"
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: ()=>triggerAppDownload(),
                "data-testid": "download-btn",
                children: "Download App"
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: dismissPrompt,
                "data-testid": "dismiss-btn",
                children: "Dismiss"
            })
        ]
    });
}
describe("MobileDeviceDetector", ()=>{
    let detector;
    beforeEach(()=>{
        detector = _mobiledetection.MobileDeviceDetector.getInstance();
        detector.resetCache();
    });
    afterEach(()=>{
        _globals.jest.clearAllMocks();
    });
    describe("Device Detection", ()=>{
        test("detects iOS mobile devices", ()=>{
            mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/605.1.15");
            const deviceInfo = detector.getDeviceInfo();
            expect(deviceInfo.isMobile).toBe(true);
            expect(deviceInfo.isIOS).toBe(true);
            expect(deviceInfo.isAndroid).toBe(false);
            expect(deviceInfo.isDesktop).toBe(false);
        });
        test("detects Android mobile devices", ()=>{
            mockUserAgent("Mozilla/5.0 (Linux; Android 11; SM-G991B) AppleWebKit/537.36");
            const deviceInfo = detector.getDeviceInfo();
            expect(deviceInfo.isMobile).toBe(true);
            expect(deviceInfo.isAndroid).toBe(true);
            expect(deviceInfo.isIOS).toBe(false);
            expect(deviceInfo.isDesktop).toBe(false);
        });
        test("detects desktop devices", ()=>{
            mockUserAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36");
            Object.defineProperty(window, "innerWidth", {
                value: 1024
            });
            const deviceInfo = detector.getDeviceInfo();
            expect(deviceInfo.isDesktop).toBe(true);
            expect(deviceInfo.isMobile).toBe(false);
            expect(deviceInfo.isTablet).toBe(false);
        });
        test("detects tablet devices", ()=>{
            mockUserAgent("Mozilla/5.0 (iPad; CPU OS 14_0 like Mac OS X) AppleWebKit/605.1.15");
            Object.defineProperty(window, "innerWidth", {
                value: 768
            });
            const deviceInfo = detector.getDeviceInfo();
            expect(deviceInfo.isTablet).toBe(true);
            expect(deviceInfo.isMobile).toBe(false);
            expect(deviceInfo.isDesktop).toBe(false);
        });
    });
    describe("App Store URLs", ()=>{
        test("returns iOS App Store URL for iOS devices", ()=>{
            mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
            const url = detector.getAppStoreUrl();
            expect(url).toBe(_mobileapp.MOBILE_APP_CONFIG.stores.ios.url);
        });
        test("returns Google Play Store URL for Android devices", ()=>{
            mockUserAgent("Mozilla/5.0 (Linux; Android 11; SM-G991B)");
            const url = detector.getAppStoreUrl();
            expect(url).toBe(_mobileapp.MOBILE_APP_CONFIG.stores.android.url);
        });
    });
    describe("Download Choice Tracking", ()=>{
        test("tracks user download choice", ()=>{
            mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
            detector.trackDownloadChoice("download_app", "ios");
            const choice = detector.getPreviousDownloadChoice();
            expect(choice).toBeTruthy();
            expect(choice?.choice).toBe("download_app");
            expect(choice?.platform).toBe("ios");
        });
        test("respects user choice to continue with web", ()=>{
            detector.trackDownloadChoice("continue_web");
            const shouldShow = detector.shouldShowDownloadPrompt();
            expect(shouldShow).toBe(false);
        });
        test("does not show prompt on desktop", ()=>{
            mockUserAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64)");
            Object.defineProperty(window, "innerWidth", {
                value: 1024
            });
            const shouldShow = detector.shouldShowDownloadPrompt();
            expect(shouldShow).toBe(false);
        });
    });
});
describe("MobileRedirectProvider", ()=>{
    const renderWithLanguageProvider = (component)=>{
        return (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LanguageContext.LanguageProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_MobileRedirectProvider.default, {
                children: component
            })
        }));
    };
    beforeEach(()=>{
        mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
        Object.defineProperty(window, "innerWidth", {
            value: 375
        });
        localStorage.clear();
    });
    test("provides mobile redirect context", async ()=>{
        renderWithLanguageProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByTestId("device-type")).toHaveTextContent("mobile");
        });
    });
    test("tracks download attempts", async ()=>{
        const mockOpen = _globals.jest.spyOn(window, "open").mockImplementation(()=>null);
        renderWithLanguageProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
        await (0, _react.waitFor)(()=>{
            _react.fireEvent.click(_react.screen.getByTestId("download-btn"));
        });
        expect(mockOpen).toHaveBeenCalledWith(_mobileapp.MOBILE_APP_CONFIG.stores.ios.url, "_blank");
        mockOpen.mockRestore();
    });
    test("dismisses prompts correctly", async ()=>{
        renderWithLanguageProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
        await (0, _react.waitFor)(()=>{
            _react.fireEvent.click(_react.screen.getByTestId("dismiss-btn"));
        });
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByTestId("show-prompt")).toHaveTextContent("false");
            expect(_react.screen.getByTestId("show-landing")).toHaveTextContent("false");
        });
    });
});
describe("MobileDownloadPrompt", ()=>{
    const renderPrompt = (forceShow = true)=>{
        return (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LanguageContext.LanguageProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_MobileRedirectProvider.default, {
                forceShow: forceShow,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_MobileRedirectProvider.MobileDownloadPrompt, {})
            })
        }));
    };
    beforeEach(()=>{
        mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
        Object.defineProperty(window, "innerWidth", {
            value: 375
        });
    });
    test("renders download prompt for mobile users", async ()=>{
        renderPrompt();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("Get the LusoTown App")).toBeInTheDocument();
            expect(_react.screen.getByText("Better experience for Portuguese community")).toBeInTheDocument();
        });
    });
    test("shows appropriate download button", async ()=>{
        renderPrompt();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("Get App")).toBeInTheDocument();
        });
    });
    test("includes dismiss option", async ()=>{
        renderPrompt();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("Not now")).toBeInTheDocument();
        });
    });
});
describe("AppDownloadLanding", ()=>{
    const renderLanding = ()=>{
        return (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LanguageContext.LanguageProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_MobileRedirectProvider.default, {
                forceShow: true,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_AppDownloadLanding.default, {})
            })
        }));
    };
    beforeEach(()=>{
        mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
        Object.defineProperty(window, "innerWidth", {
            value: 375
        });
    });
    test("renders full landing page content", async ()=>{
        renderLanding();
        await (0, _react.waitFor)(()=>{
            // Check hero content
            expect(_react.screen.getByText(/Get the LusoTown App/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Join 2,750\+ Portuguese speakers/)).toBeInTheDocument();
        });
    });
    test("displays community statistics", async ()=>{
        renderLanding();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("2,750+")).toBeInTheDocument();
            expect(_react.screen.getByText("Portuguese Speakers")).toBeInTheDocument();
            expect(_react.screen.getByText("450+")).toBeInTheDocument();
            expect(_react.screen.getByText("Cultural Events")).toBeInTheDocument();
        });
    });
    test("shows Portuguese cultural elements", async ()=>{
        renderLanding();
        await (0, _react.waitFor)(()=>{
            // Check for Portuguese cultural flags/emojis in the background
            const culturalElements = document.querySelectorAll('[style*="\uD83C\uDDF5\uD83C\uDDF9"], [style*="\uD83C\uDDE7\uD83C\uDDF7"]');
            expect(culturalElements.length).toBeGreaterThan(0);
        });
    });
    test("includes app store download buttons", async ()=>{
        renderLanding();
        await (0, _react.waitFor)(()=>{
            // Should show iOS App Store button for iPhone
            expect(_react.screen.getByText("App Store")).toBeInTheDocument();
        });
    });
    test("displays testimonials from Portuguese community", async ()=>{
        renderLanding();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("What Our Community Says")).toBeInTheDocument();
            // Should have testimonial content
            const testimonials = _react.screen.getByText(/Manchester|London|Edinburgh/);
            expect(testimonials).toBeInTheDocument();
        });
    });
    test("shows trust signals", async ()=>{
        renderLanding();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("Trusted by the Portuguese Community")).toBeInTheDocument();
            expect(_react.screen.getByText("8 University Partnerships")).toBeInTheDocument();
            expect(_react.screen.getByText("180+ Portuguese Business Partners")).toBeInTheDocument();
        });
    });
});
describe("Portuguese Language Support", ()=>{
    const renderWithPortuguese = ()=>{
        return (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LanguageContext.LanguageProvider, {
            defaultLanguage: "pt",
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_MobileRedirectProvider.default, {
                forceShow: true,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_AppDownloadLanding.default, {})
            })
        }));
    };
    test("displays Portuguese text when language is set to Portuguese", async ()=>{
        renderWithPortuguese();
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText(/Baixe o App LusoTown/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Falantes de PortuguÃªs/)).toBeInTheDocument();
        });
    });
});
describe("Mobile App Configuration", ()=>{
    test("has correct app store URLs", ()=>{
        expect(_mobileapp.MOBILE_APP_CONFIG.stores.ios.url).toBe("https://apps.apple.com/app/lusotown/id123456789");
        expect(_mobileapp.MOBILE_APP_CONFIG.stores.android.url).toBe("https://play.google.com/store/apps/details?id=com.lusotown.android");
    });
    test("includes Portuguese cultural features", ()=>{
        expect(_mobileapp.MOBILE_APP_CONFIG.features).toHaveLength(6);
        const eventsFeature = _mobileapp.MOBILE_APP_CONFIG.features.find((f)=>f.id === "events_discovery");
        expect(eventsFeature).toBeDefined();
        expect(eventsFeature?.title.en).toBe("Discover Portuguese Events");
        expect(eventsFeature?.title.pt).toBe("Descubra Eventos Portugueses");
    });
    test("includes community statistics", ()=>{
        expect(_mobileapp.MOBILE_APP_CONFIG.stats.totalMembers).toBe(2750);
        expect(_mobileapp.MOBILE_APP_CONFIG.stats.portugueseEvents).toBe(450);
        expect(_mobileapp.MOBILE_APP_CONFIG.stats.universityPartners).toBe(8);
    });
    test("has A/B testing configuration", ()=>{
        expect(_mobileapp.MOBILE_APP_CONFIG.testing.enabled).toBe(true);
        expect(_mobileapp.MOBILE_APP_CONFIG.testing.variants).toHaveLength(2);
    });
});
describe("Integration Tests", ()=>{
    test("full mobile app transition flow", async ()=>{
        // Mock iPhone user agent
        mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
        // Start with no previous choice
        localStorage.clear();
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LanguageContext.LanguageProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_MobileRedirectProvider.default, {
                forceShow: true,
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_MobileRedirectProvider.MobileDownloadPrompt, {}),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_AppDownloadLanding.default, {})
                ]
            })
        }));
        // Should detect mobile device
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByTestId("device-type")).toHaveTextContent("mobile");
        });
        // Should show prompts for new users
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText("Get the LusoTown App")).toBeInTheDocument();
        });
    });
});
// Mock analytics tracking
describe("Analytics Tracking", ()=>{
    beforeEach(()=>{
        window.gtag = _globals.jest.fn();
    });
    test("tracks download attempts", ()=>{
        mockUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)");
        const detector = _mobiledetection.MobileDeviceDetector.getInstance();
        detector.trackDownloadChoice("download_app", "ios");
        // Should have stored the choice
        const choice = detector.getPreviousDownloadChoice();
        expect(choice?.choice).toBe("download_app");
        expect(choice?.platform).toBe("ios");
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvX190ZXN0c19fL21vYmlsZS1hcHAtdHJhbnNpdGlvbi50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1vYmlsZSBBcHAgVHJhbnNpdGlvbiBUZXN0c1xuICogXG4gKiBUZXN0cyBmb3IgUGhhc2UgMSBpbXBsZW1lbnRhdGlvbiBvZiBtb2JpbGUgYXBwIHRyYW5zaXRpb24gc3RyYXRlZ3ksXG4gKiBpbmNsdWRpbmcgZGV2aWNlIGRldGVjdGlvbiwgYXBwIGRvd25sb2FkIHByb21wdHMsIGFuZCBQV0EgZnVuY3Rpb25hbGl0eVxuICogZm9yIHRoZSBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eS5cbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBNb2JpbGVEZXZpY2VEZXRlY3RvciwgZ2V0RGV2aWNlSW5mbywgY2hlY2tBcHBJbnN0YWxsYXRpb24gfSBmcm9tICdAL2xpYi9tb2JpbGUtZGV0ZWN0aW9uJztcbmltcG9ydCBNb2JpbGVSZWRpcmVjdFByb3ZpZGVyLCB7IE1vYmlsZURvd25sb2FkUHJvbXB0LCB1c2VNb2JpbGVSZWRpcmVjdCB9IGZyb20gJ0AvY29tcG9uZW50cy9Nb2JpbGVSZWRpcmVjdFByb3ZpZGVyJztcbmltcG9ydCBBcHBEb3dubG9hZExhbmRpbmcgZnJvbSAnQC9jb21wb25lbnRzL0FwcERvd25sb2FkTGFuZGluZyc7XG5pbXBvcnQgeyBMYW5ndWFnZVByb3ZpZGVyIH0gZnJvbSAnQC9jb250ZXh0L0xhbmd1YWdlQ29udGV4dCc7XG5pbXBvcnQgeyBNT0JJTEVfQVBQX0NPTkZJRyB9IGZyb20gJ0AvY29uZmlnL21vYmlsZS1hcHAnO1xuXG4vLyBNb2NrIE5leHQuanMgZHluYW1pYyBpbXBvcnRzXG5qZXN0Lm1vY2soJ25leHQvZHluYW1pYycsICgpID0+IChmbjogYW55KSA9PiBmbigpKTtcblxuLy8gTW9jayB1c2VyIGFnZW50IGZvciBkaWZmZXJlbnQgZGV2aWNlc1xuY29uc3QgbW9ja1VzZXJBZ2VudCA9ICh1c2VyQWdlbnQ6IHN0cmluZykgPT4ge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAndXNlckFnZW50Jywge1xuICAgIHZhbHVlOiB1c2VyQWdlbnQsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICB9KTtcbn07XG5cbi8vIE1vY2sgbG9jYWxTdG9yYWdlXG5jb25zdCBtb2NrTG9jYWxTdG9yYWdlID0gKCkgPT4ge1xuICBjb25zdCBzdG9yYWdlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIHJldHVybiB7XG4gICAgZ2V0SXRlbTogKGtleTogc3RyaW5nKSA9PiBzdG9yYWdlW2tleV0gfHwgbnVsbCxcbiAgICBzZXRJdGVtOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIHN0b3JhZ2Vba2V5XSA9IHZhbHVlO1xuICAgIH0sXG4gICAgcmVtb3ZlSXRlbTogKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBkZWxldGUgc3RvcmFnZVtrZXldO1xuICAgIH0sXG4gICAgY2xlYXI6ICgpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKHN0b3JhZ2UpLmZvckVhY2goa2V5ID0+IGRlbGV0ZSBzdG9yYWdlW2tleV0pO1xuICAgIH1cbiAgfTtcbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gIHZhbHVlOiBtb2NrTG9jYWxTdG9yYWdlKCksXG59KTtcblxuLy8gTW9jayB3aW5kb3cgcHJvcGVydGllc1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2lubmVyV2lkdGgnLCB7XG4gIHZhbHVlOiAzNzUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJIZWlnaHQnLCB7XG4gIHZhbHVlOiA2NjcsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbn0pO1xuXG4vLyBUZXN0IGNvbXBvbmVudCBmb3IgdXNpbmcgbW9iaWxlIHJlZGlyZWN0IGNvbnRleHRcbmZ1bmN0aW9uIFRlc3RDb21wb25lbnQoKSB7XG4gIGNvbnN0IHtcbiAgICBkZXZpY2VJbmZvLFxuICAgIHNob3dEb3dubG9hZFByb21wdCxcbiAgICBzaG93TGFuZGluZ1BhZ2UsXG4gICAgdHJpZ2dlckFwcERvd25sb2FkLFxuICAgIGRpc21pc3NQcm9tcHRcbiAgfSA9IHVzZU1vYmlsZVJlZGlyZWN0KCk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImRldmljZS10eXBlXCI+XG4gICAgICAgIHtkZXZpY2VJbmZvPy5pc01vYmlsZSA/ICdtb2JpbGUnIDogZGV2aWNlSW5mbz8uaXNUYWJsZXQgPyAndGFibGV0JyA6ICdkZXNrdG9wJ31cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInNob3ctcHJvbXB0XCI+e3Nob3dEb3dubG9hZFByb21wdCA/ICd0cnVlJyA6ICdmYWxzZSd9PC9kaXY+XG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic2hvdy1sYW5kaW5nXCI+e3Nob3dMYW5kaW5nUGFnZSA/ICd0cnVlJyA6ICdmYWxzZSd9PC9kaXY+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHRyaWdnZXJBcHBEb3dubG9hZCgpfSBkYXRhLXRlc3RpZD1cImRvd25sb2FkLWJ0blwiPlxuICAgICAgICBEb3dubG9hZCBBcHBcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtkaXNtaXNzUHJvbXB0fSBkYXRhLXRlc3RpZD1cImRpc21pc3MtYnRuXCI+XG4gICAgICAgIERpc21pc3NcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5kZXNjcmliZSgnTW9iaWxlRGV2aWNlRGV0ZWN0b3InLCAoKSA9PiB7XG4gIGxldCBkZXRlY3RvcjogTW9iaWxlRGV2aWNlRGV0ZWN0b3I7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZGV0ZWN0b3IgPSBNb2JpbGVEZXZpY2VEZXRlY3Rvci5nZXRJbnN0YW5jZSgpO1xuICAgIGRldGVjdG9yLnJlc2V0Q2FjaGUoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RldmljZSBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnZGV0ZWN0cyBpT1MgbW9iaWxlIGRldmljZXMnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlckFnZW50KCdNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDE0XzAgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUnKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGV2aWNlSW5mbyA9IGRldGVjdG9yLmdldERldmljZUluZm8oKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRldmljZUluZm8uaXNNb2JpbGUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGV2aWNlSW5mby5pc0lPUykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzQW5kcm9pZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGV2aWNlSW5mby5pc0Rlc2t0b3ApLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV0ZWN0cyBBbmRyb2lkIG1vYmlsZSBkZXZpY2VzJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZXJBZ2VudCgnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBTTS1HOTkxQikgQXBwbGVXZWJLaXQvNTM3LjM2Jyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRldmljZUluZm8gPSBkZXRlY3Rvci5nZXREZXZpY2VJbmZvKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzTW9iaWxlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRldmljZUluZm8uaXNBbmRyb2lkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRldmljZUluZm8uaXNJT1MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRldmljZUluZm8uaXNEZXNrdG9wKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldGVjdHMgZGVza3RvcCBkZXZpY2VzJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZXJBZ2VudCgnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2Jyk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJXaWR0aCcsIHsgdmFsdWU6IDEwMjQgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRldmljZUluZm8gPSBkZXRlY3Rvci5nZXREZXZpY2VJbmZvKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzRGVza3RvcCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzTW9iaWxlKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzVGFibGV0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldGVjdHMgdGFibGV0IGRldmljZXMnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlckFnZW50KCdNb3ppbGxhLzUuMCAoaVBhZDsgQ1BVIE9TIDE0XzAgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUnKTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywgeyB2YWx1ZTogNzY4IH0pO1xuICAgICAgXG4gICAgICBjb25zdCBkZXZpY2VJbmZvID0gZGV0ZWN0b3IuZ2V0RGV2aWNlSW5mbygpO1xuICAgICAgXG4gICAgICBleHBlY3QoZGV2aWNlSW5mby5pc1RhYmxldCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzTW9iaWxlKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkZXZpY2VJbmZvLmlzRGVza3RvcCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBcHAgU3RvcmUgVVJMcycsICgpID0+IHtcbiAgICB0ZXN0KCdyZXR1cm5zIGlPUyBBcHAgU3RvcmUgVVJMIGZvciBpT1MgZGV2aWNlcycsICgpID0+IHtcbiAgICAgIG1vY2tVc2VyQWdlbnQoJ01vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTRfMCBsaWtlIE1hYyBPUyBYKScpO1xuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSBkZXRlY3Rvci5nZXRBcHBTdG9yZVVybCgpO1xuICAgICAgXG4gICAgICBleHBlY3QodXJsKS50b0JlKE1PQklMRV9BUFBfQ09ORklHLnN0b3Jlcy5pb3MudXJsKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3JldHVybnMgR29vZ2xlIFBsYXkgU3RvcmUgVVJMIGZvciBBbmRyb2lkIGRldmljZXMnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlckFnZW50KCdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFNNLUc5OTFCKScpO1xuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSBkZXRlY3Rvci5nZXRBcHBTdG9yZVVybCgpO1xuICAgICAgXG4gICAgICBleHBlY3QodXJsKS50b0JlKE1PQklMRV9BUFBfQ09ORklHLnN0b3Jlcy5hbmRyb2lkLnVybCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEb3dubG9hZCBDaG9pY2UgVHJhY2tpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgndHJhY2tzIHVzZXIgZG93bmxvYWQgY2hvaWNlJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZXJBZ2VudCgnTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNF8wIGxpa2UgTWFjIE9TIFgpJyk7XG4gICAgICBcbiAgICAgIGRldGVjdG9yLnRyYWNrRG93bmxvYWRDaG9pY2UoJ2Rvd25sb2FkX2FwcCcsICdpb3MnKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2hvaWNlID0gZGV0ZWN0b3IuZ2V0UHJldmlvdXNEb3dubG9hZENob2ljZSgpO1xuICAgICAgZXhwZWN0KGNob2ljZSkudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KGNob2ljZT8uY2hvaWNlKS50b0JlKCdkb3dubG9hZF9hcHAnKTtcbiAgICAgIGV4cGVjdChjaG9pY2U/LnBsYXRmb3JtKS50b0JlKCdpb3MnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Jlc3BlY3RzIHVzZXIgY2hvaWNlIHRvIGNvbnRpbnVlIHdpdGggd2ViJywgKCkgPT4ge1xuICAgICAgZGV0ZWN0b3IudHJhY2tEb3dubG9hZENob2ljZSgnY29udGludWVfd2ViJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNob3VsZFNob3cgPSBkZXRlY3Rvci5zaG91bGRTaG93RG93bmxvYWRQcm9tcHQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNob3VsZFNob3cpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZG9lcyBub3Qgc2hvdyBwcm9tcHQgb24gZGVza3RvcCcsICgpID0+IHtcbiAgICAgIG1vY2tVc2VyQWdlbnQoJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpJyk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJXaWR0aCcsIHsgdmFsdWU6IDEwMjQgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNob3VsZFNob3cgPSBkZXRlY3Rvci5zaG91bGRTaG93RG93bmxvYWRQcm9tcHQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNob3VsZFNob3cpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTW9iaWxlUmVkaXJlY3RQcm92aWRlcicsICgpID0+IHtcbiAgY29uc3QgcmVuZGVyV2l0aExhbmd1YWdlUHJvdmlkZXIgPSAoY29tcG9uZW50OiBSZWFjdC5SZWFjdE5vZGUpID0+IHtcbiAgICByZXR1cm4gcmVuZGVyKFxuICAgICAgPExhbmd1YWdlUHJvdmlkZXI+XG4gICAgICAgIDxNb2JpbGVSZWRpcmVjdFByb3ZpZGVyPlxuICAgICAgICAgIHtjb21wb25lbnR9XG4gICAgICAgIDwvTW9iaWxlUmVkaXJlY3RQcm92aWRlcj5cbiAgICAgIDwvTGFuZ3VhZ2VQcm92aWRlcj5cbiAgICApO1xuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tVc2VyQWdlbnQoJ01vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTRfMCBsaWtlIE1hYyBPUyBYKScpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywgeyB2YWx1ZTogMzc1IH0pO1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICB9KTtcblxuICB0ZXN0KCdwcm92aWRlcyBtb2JpbGUgcmVkaXJlY3QgY29udGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJXaXRoTGFuZ3VhZ2VQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXZpY2UtdHlwZScpKS50b0hhdmVUZXh0Q29udGVudCgnbW9iaWxlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3RyYWNrcyBkb3dubG9hZCBhdHRlbXB0cycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrT3BlbiA9IGplc3Quc3B5T24od2luZG93LCAnb3BlbicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBudWxsKTtcbiAgICBcbiAgICByZW5kZXJXaXRoTGFuZ3VhZ2VQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdkb3dubG9hZC1idG4nKSk7XG4gICAgfSk7XG4gICAgXG4gICAgZXhwZWN0KG1vY2tPcGVuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIE1PQklMRV9BUFBfQ09ORklHLnN0b3Jlcy5pb3MudXJsLFxuICAgICAgJ19ibGFuaydcbiAgICApO1xuICAgIFxuICAgIG1vY2tPcGVuLm1vY2tSZXN0b3JlKCk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Rpc21pc3NlcyBwcm9tcHRzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJXaXRoTGFuZ3VhZ2VQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdkaXNtaXNzLWJ0bicpKTtcbiAgICB9KTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Nob3ctcHJvbXB0JykpLnRvSGF2ZVRleHRDb250ZW50KCdmYWxzZScpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2hvdy1sYW5kaW5nJykpLnRvSGF2ZVRleHRDb250ZW50KCdmYWxzZScpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTW9iaWxlRG93bmxvYWRQcm9tcHQnLCAoKSA9PiB7XG4gIGNvbnN0IHJlbmRlclByb21wdCA9IChmb3JjZVNob3cgPSB0cnVlKSA9PiB7XG4gICAgcmV0dXJuIHJlbmRlcihcbiAgICAgIDxMYW5ndWFnZVByb3ZpZGVyPlxuICAgICAgICA8TW9iaWxlUmVkaXJlY3RQcm92aWRlciBmb3JjZVNob3c9e2ZvcmNlU2hvd30+XG4gICAgICAgICAgPE1vYmlsZURvd25sb2FkUHJvbXB0IC8+XG4gICAgICAgIDwvTW9iaWxlUmVkaXJlY3RQcm92aWRlcj5cbiAgICAgIDwvTGFuZ3VhZ2VQcm92aWRlcj5cbiAgICApO1xuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tVc2VyQWdlbnQoJ01vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTRfMCBsaWtlIE1hYyBPUyBYKScpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywgeyB2YWx1ZTogMzc1IH0pO1xuICB9KTtcblxuICB0ZXN0KCdyZW5kZXJzIGRvd25sb2FkIHByb21wdCBmb3IgbW9iaWxlIHVzZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlclByb21wdCgpO1xuICAgIFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0dldCB0aGUgTHVzb1Rvd24gQXBwJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmV0dGVyIGV4cGVyaWVuY2UgZm9yIFBvcnR1Z3Vlc2UgY29tbXVuaXR5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3dzIGFwcHJvcHJpYXRlIGRvd25sb2FkIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJQcm9tcHQoKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHZXQgQXBwJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2luY2x1ZGVzIGRpc21pc3Mgb3B0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlclByb21wdCgpO1xuICAgIFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ05vdCBub3cnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ0FwcERvd25sb2FkTGFuZGluZycsICgpID0+IHtcbiAgY29uc3QgcmVuZGVyTGFuZGluZyA9ICgpID0+IHtcbiAgICByZXR1cm4gcmVuZGVyKFxuICAgICAgPExhbmd1YWdlUHJvdmlkZXI+XG4gICAgICAgIDxNb2JpbGVSZWRpcmVjdFByb3ZpZGVyIGZvcmNlU2hvdz17dHJ1ZX0+XG4gICAgICAgICAgPEFwcERvd25sb2FkTGFuZGluZyAvPlxuICAgICAgICA8L01vYmlsZVJlZGlyZWN0UHJvdmlkZXI+XG4gICAgICA8L0xhbmd1YWdlUHJvdmlkZXI+XG4gICAgKTtcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrVXNlckFnZW50KCdNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDE0XzAgbGlrZSBNYWMgT1MgWCknKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJXaWR0aCcsIHsgdmFsdWU6IDM3NSB9KTtcbiAgfSk7XG5cbiAgdGVzdCgncmVuZGVycyBmdWxsIGxhbmRpbmcgcGFnZSBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckxhbmRpbmcoKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGhlcm8gY29udGVudFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0dldCB0aGUgTHVzb1Rvd24gQXBwLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvSm9pbiAyLDc1MFxcKyBQb3J0dWd1ZXNlIHNwZWFrZXJzLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Rpc3BsYXlzIGNvbW11bml0eSBzdGF0aXN0aWNzJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckxhbmRpbmcoKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyLDc1MCsnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQb3J0dWd1ZXNlIFNwZWFrZXJzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnNDUwKycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0N1bHR1cmFsIEV2ZW50cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzaG93cyBQb3J0dWd1ZXNlIGN1bHR1cmFsIGVsZW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckxhbmRpbmcoKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGZvciBQb3J0dWd1ZXNlIGN1bHR1cmFsIGZsYWdzL2Vtb2ppcyBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgY29uc3QgY3VsdHVyYWxFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tzdHlsZSo9XCLwn4e18J+HuVwiXSwgW3N0eWxlKj1cIvCfh6fwn4e3XCJdJyk7XG4gICAgICBleHBlY3QoY3VsdHVyYWxFbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnaW5jbHVkZXMgYXBwIHN0b3JlIGRvd25sb2FkIGJ1dHRvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyTGFuZGluZygpO1xuICAgIFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgLy8gU2hvdWxkIHNob3cgaU9TIEFwcCBTdG9yZSBidXR0b24gZm9yIGlQaG9uZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FwcCBTdG9yZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdkaXNwbGF5cyB0ZXN0aW1vbmlhbHMgZnJvbSBQb3J0dWd1ZXNlIGNvbW11bml0eScsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJMYW5kaW5nKCk7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnV2hhdCBPdXIgQ29tbXVuaXR5IFNheXMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIC8vIFNob3VsZCBoYXZlIHRlc3RpbW9uaWFsIGNvbnRlbnRcbiAgICAgIGNvbnN0IHRlc3RpbW9uaWFscyA9IHNjcmVlbi5nZXRCeVRleHQoL01hbmNoZXN0ZXJ8TG9uZG9ufEVkaW5idXJnaC8pO1xuICAgICAgZXhwZWN0KHRlc3RpbW9uaWFscykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvd3MgdHJ1c3Qgc2lnbmFscycsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJMYW5kaW5nKCk7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVHJ1c3RlZCBieSB0aGUgUG9ydHVndWVzZSBDb21tdW5pdHknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCc4IFVuaXZlcnNpdHkgUGFydG5lcnNoaXBzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMTgwKyBQb3J0dWd1ZXNlIEJ1c2luZXNzIFBhcnRuZXJzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdQb3J0dWd1ZXNlIExhbmd1YWdlIFN1cHBvcnQnLCAoKSA9PiB7XG4gIGNvbnN0IHJlbmRlcldpdGhQb3J0dWd1ZXNlID0gKCkgPT4ge1xuICAgIHJldHVybiByZW5kZXIoXG4gICAgICA8TGFuZ3VhZ2VQcm92aWRlciBkZWZhdWx0TGFuZ3VhZ2U9XCJwdFwiPlxuICAgICAgICA8TW9iaWxlUmVkaXJlY3RQcm92aWRlciBmb3JjZVNob3c9e3RydWV9PlxuICAgICAgICAgIDxBcHBEb3dubG9hZExhbmRpbmcgLz5cbiAgICAgICAgPC9Nb2JpbGVSZWRpcmVjdFByb3ZpZGVyPlxuICAgICAgPC9MYW5ndWFnZVByb3ZpZGVyPlxuICAgICk7XG4gIH07XG5cbiAgdGVzdCgnZGlzcGxheXMgUG9ydHVndWVzZSB0ZXh0IHdoZW4gbGFuZ3VhZ2UgaXMgc2V0IHRvIFBvcnR1Z3Vlc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFBvcnR1Z3Vlc2UoKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9CYWl4ZSBvIEFwcCBMdXNvVG93bi8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0ZhbGFudGVzIGRlIFBvcnR1Z3XDqnMvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vYmlsZSBBcHAgQ29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgdGVzdCgnaGFzIGNvcnJlY3QgYXBwIHN0b3JlIFVSTHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KE1PQklMRV9BUFBfQ09ORklHLnN0b3Jlcy5pb3MudXJsKS50b0JlKCdodHRwczovL2FwcHMuYXBwbGUuY29tL2FwcC9sdXNvdG93bi9pZDEyMzQ1Njc4OScpO1xuICAgIGV4cGVjdChNT0JJTEVfQVBQX0NPTkZJRy5zdG9yZXMuYW5kcm9pZC51cmwpLnRvQmUoJ2h0dHBzOi8vcGxheS5nb29nbGUuY29tL3N0b3JlL2FwcHMvZGV0YWlscz9pZD1jb20ubHVzb3Rvd24uYW5kcm9pZCcpO1xuICB9KTtcblxuICB0ZXN0KCdpbmNsdWRlcyBQb3J0dWd1ZXNlIGN1bHR1cmFsIGZlYXR1cmVzJywgKCkgPT4ge1xuICAgIGV4cGVjdChNT0JJTEVfQVBQX0NPTkZJRy5mZWF0dXJlcykudG9IYXZlTGVuZ3RoKDYpO1xuICAgIFxuICAgIGNvbnN0IGV2ZW50c0ZlYXR1cmUgPSBNT0JJTEVfQVBQX0NPTkZJRy5mZWF0dXJlcy5maW5kKGYgPT4gZi5pZCA9PT0gJ2V2ZW50c19kaXNjb3ZlcnknKTtcbiAgICBleHBlY3QoZXZlbnRzRmVhdHVyZSkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QoZXZlbnRzRmVhdHVyZT8udGl0bGUuZW4pLnRvQmUoJ0Rpc2NvdmVyIFBvcnR1Z3Vlc2UgRXZlbnRzJyk7XG4gICAgZXhwZWN0KGV2ZW50c0ZlYXR1cmU/LnRpdGxlLnB0KS50b0JlKCdEZXNjdWJyYSBFdmVudG9zIFBvcnR1Z3Vlc2VzJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2luY2x1ZGVzIGNvbW11bml0eSBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIGV4cGVjdChNT0JJTEVfQVBQX0NPTkZJRy5zdGF0cy50b3RhbE1lbWJlcnMpLnRvQmUoMjc1MCk7XG4gICAgZXhwZWN0KE1PQklMRV9BUFBfQ09ORklHLnN0YXRzLnBvcnR1Z3Vlc2VFdmVudHMpLnRvQmUoNDUwKTtcbiAgICBleHBlY3QoTU9CSUxFX0FQUF9DT05GSUcuc3RhdHMudW5pdmVyc2l0eVBhcnRuZXJzKS50b0JlKDgpO1xuICB9KTtcblxuICB0ZXN0KCdoYXMgQS9CIHRlc3RpbmcgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICBleHBlY3QoTU9CSUxFX0FQUF9DT05GSUcudGVzdGluZy5lbmFibGVkKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChNT0JJTEVfQVBQX0NPTkZJRy50ZXN0aW5nLnZhcmlhbnRzKS50b0hhdmVMZW5ndGgoMik7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgdGVzdCgnZnVsbCBtb2JpbGUgYXBwIHRyYW5zaXRpb24gZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAvLyBNb2NrIGlQaG9uZSB1c2VyIGFnZW50XG4gICAgbW9ja1VzZXJBZ2VudCgnTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNF8wIGxpa2UgTWFjIE9TIFgpJyk7XG4gICAgXG4gICAgLy8gU3RhcnQgd2l0aCBubyBwcmV2aW91cyBjaG9pY2VcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBcbiAgICByZW5kZXIoXG4gICAgICA8TGFuZ3VhZ2VQcm92aWRlcj5cbiAgICAgICAgPE1vYmlsZVJlZGlyZWN0UHJvdmlkZXIgZm9yY2VTaG93PXt0cnVlfT5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICAgIDxNb2JpbGVEb3dubG9hZFByb21wdCAvPlxuICAgICAgICAgIDxBcHBEb3dubG9hZExhbmRpbmcgLz5cbiAgICAgICAgPC9Nb2JpbGVSZWRpcmVjdFByb3ZpZGVyPlxuICAgICAgPC9MYW5ndWFnZVByb3ZpZGVyPlxuICAgICk7XG4gICAgXG4gICAgLy8gU2hvdWxkIGRldGVjdCBtb2JpbGUgZGV2aWNlXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXZpY2UtdHlwZScpKS50b0hhdmVUZXh0Q29udGVudCgnbW9iaWxlJyk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gU2hvdWxkIHNob3cgcHJvbXB0cyBmb3IgbmV3IHVzZXJzXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnR2V0IHRoZSBMdXNvVG93biBBcHAnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLy8gTW9jayBhbmFseXRpY3MgdHJhY2tpbmdcbmRlc2NyaWJlKCdBbmFseXRpY3MgVHJhY2tpbmcnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICh3aW5kb3cgYXMgYW55KS5ndGFnID0gamVzdC5mbigpO1xuICB9KTtcblxuICB0ZXN0KCd0cmFja3MgZG93bmxvYWQgYXR0ZW1wdHMnLCAoKSA9PiB7XG4gICAgbW9ja1VzZXJBZ2VudCgnTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNF8wIGxpa2UgTWFjIE9TIFgpJyk7XG4gICAgXG4gICAgY29uc3QgZGV0ZWN0b3IgPSBNb2JpbGVEZXZpY2VEZXRlY3Rvci5nZXRJbnN0YW5jZSgpO1xuICAgIGRldGVjdG9yLnRyYWNrRG93bmxvYWRDaG9pY2UoJ2Rvd25sb2FkX2FwcCcsICdpb3MnKTtcbiAgICBcbiAgICAvLyBTaG91bGQgaGF2ZSBzdG9yZWQgdGhlIGNob2ljZVxuICAgIGNvbnN0IGNob2ljZSA9IGRldGVjdG9yLmdldFByZXZpb3VzRG93bmxvYWRDaG9pY2UoKTtcbiAgICBleHBlY3QoY2hvaWNlPy5jaG9pY2UpLnRvQmUoJ2Rvd25sb2FkX2FwcCcpO1xuICAgIGV4cGVjdChjaG9pY2U/LnBsYXRmb3JtKS50b0JlKCdpb3MnKTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJmbiIsIm1vY2tVc2VyQWdlbnQiLCJ1c2VyQWdlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIm5hdmlnYXRvciIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwibW9ja0xvY2FsU3RvcmFnZSIsInN0b3JhZ2UiLCJnZXRJdGVtIiwia2V5Iiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJjbGVhciIsImtleXMiLCJmb3JFYWNoIiwid2luZG93IiwiVGVzdENvbXBvbmVudCIsImRldmljZUluZm8iLCJzaG93RG93bmxvYWRQcm9tcHQiLCJzaG93TGFuZGluZ1BhZ2UiLCJ0cmlnZ2VyQXBwRG93bmxvYWQiLCJkaXNtaXNzUHJvbXB0IiwidXNlTW9iaWxlUmVkaXJlY3QiLCJkaXYiLCJkYXRhLXRlc3RpZCIsImlzTW9iaWxlIiwiaXNUYWJsZXQiLCJidXR0b24iLCJvbkNsaWNrIiwiZGVzY3JpYmUiLCJkZXRlY3RvciIsImJlZm9yZUVhY2giLCJNb2JpbGVEZXZpY2VEZXRlY3RvciIsImdldEluc3RhbmNlIiwicmVzZXRDYWNoZSIsImFmdGVyRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJ0ZXN0IiwiZ2V0RGV2aWNlSW5mbyIsImV4cGVjdCIsInRvQmUiLCJpc0lPUyIsImlzQW5kcm9pZCIsImlzRGVza3RvcCIsInVybCIsImdldEFwcFN0b3JlVXJsIiwiTU9CSUxFX0FQUF9DT05GSUciLCJzdG9yZXMiLCJpb3MiLCJhbmRyb2lkIiwidHJhY2tEb3dubG9hZENob2ljZSIsImNob2ljZSIsImdldFByZXZpb3VzRG93bmxvYWRDaG9pY2UiLCJ0b0JlVHJ1dGh5IiwicGxhdGZvcm0iLCJzaG91bGRTaG93Iiwic2hvdWxkU2hvd0Rvd25sb2FkUHJvbXB0IiwicmVuZGVyV2l0aExhbmd1YWdlUHJvdmlkZXIiLCJjb21wb25lbnQiLCJyZW5kZXIiLCJMYW5ndWFnZVByb3ZpZGVyIiwiTW9iaWxlUmVkaXJlY3RQcm92aWRlciIsImxvY2FsU3RvcmFnZSIsIndhaXRGb3IiLCJzY3JlZW4iLCJnZXRCeVRlc3RJZCIsInRvSGF2ZVRleHRDb250ZW50IiwibW9ja09wZW4iLCJzcHlPbiIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2NrUmVzdG9yZSIsInJlbmRlclByb21wdCIsImZvcmNlU2hvdyIsIk1vYmlsZURvd25sb2FkUHJvbXB0IiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJyZW5kZXJMYW5kaW5nIiwiQXBwRG93bmxvYWRMYW5kaW5nIiwiY3VsdHVyYWxFbGVtZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsInRlc3RpbW9uaWFscyIsInJlbmRlcldpdGhQb3J0dWd1ZXNlIiwiZGVmYXVsdExhbmd1YWdlIiwiZmVhdHVyZXMiLCJ0b0hhdmVMZW5ndGgiLCJldmVudHNGZWF0dXJlIiwiZmluZCIsImYiLCJpZCIsInRvQmVEZWZpbmVkIiwidGl0bGUiLCJlbiIsInB0Iiwic3RhdHMiLCJ0b3RhbE1lbWJlcnMiLCJwb3J0dWd1ZXNlRXZlbnRzIiwidW5pdmVyc2l0eVBhcnRuZXJzIiwidGVzdGluZyIsImVuYWJsZWQiLCJ2YXJpYW50cyIsImd0YWciXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Q0FNQzs7Ozs7dUJBRWtEO3lCQUM5QjtpQ0FDcUQ7Z0ZBQ007MkVBQ2pEO2lDQUNFOzJCQUNDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVsQywrQkFBK0I7QUFDL0JBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDLGdCQUFnQixJQUFNLENBQUNDLEtBQVlBO0FBRTdDLHdDQUF3QztBQUN4QyxNQUFNQyxnQkFBZ0IsQ0FBQ0M7SUFDckJDLE9BQU9DLGNBQWMsQ0FBQ0MsV0FBVyxhQUFhO1FBQzVDQyxPQUFPSjtRQUNQSyxjQUFjO0lBQ2hCO0FBQ0Y7QUFFQSxvQkFBb0I7QUFDcEIsTUFBTUMsbUJBQW1CO0lBQ3ZCLE1BQU1DLFVBQWtDLENBQUM7SUFDekMsT0FBTztRQUNMQyxTQUFTLENBQUNDLE1BQWdCRixPQUFPLENBQUNFLElBQUksSUFBSTtRQUMxQ0MsU0FBUyxDQUFDRCxLQUFhTDtZQUNyQkcsT0FBTyxDQUFDRSxJQUFJLEdBQUdMO1FBQ2pCO1FBQ0FPLFlBQVksQ0FBQ0Y7WUFDWCxPQUFPRixPQUFPLENBQUNFLElBQUk7UUFDckI7UUFDQUcsT0FBTztZQUNMWCxPQUFPWSxJQUFJLENBQUNOLFNBQVNPLE9BQU8sQ0FBQ0wsQ0FBQUEsTUFBTyxPQUFPRixPQUFPLENBQUNFLElBQUk7UUFDekQ7SUFDRjtBQUNGO0FBRUFSLE9BQU9DLGNBQWMsQ0FBQ2EsUUFBUSxnQkFBZ0I7SUFDNUNYLE9BQU9FO0FBQ1Q7QUFFQSx5QkFBeUI7QUFDekJMLE9BQU9DLGNBQWMsQ0FBQ2EsUUFBUSxjQUFjO0lBQzFDWCxPQUFPO0lBQ1BDLGNBQWM7QUFDaEI7QUFFQUosT0FBT0MsY0FBYyxDQUFDYSxRQUFRLGVBQWU7SUFDM0NYLE9BQU87SUFDUEMsY0FBYztBQUNoQjtBQUVBLG1EQUFtRDtBQUNuRCxTQUFTVztJQUNQLE1BQU0sRUFDSkMsVUFBVSxFQUNWQyxrQkFBa0IsRUFDbEJDLGVBQWUsRUFDZkMsa0JBQWtCLEVBQ2xCQyxhQUFhLEVBQ2QsR0FBR0MsSUFBQUEseUNBQWlCO0lBRXJCLHFCQUNFLHNCQUFDQzs7MEJBQ0MscUJBQUNBO2dCQUFJQyxlQUFZOzBCQUNkUCxZQUFZUSxXQUFXLFdBQVdSLFlBQVlTLFdBQVcsV0FBVzs7MEJBRXZFLHFCQUFDSDtnQkFBSUMsZUFBWTswQkFBZU4scUJBQXFCLFNBQVM7OzBCQUM5RCxxQkFBQ0s7Z0JBQUlDLGVBQVk7MEJBQWdCTCxrQkFBa0IsU0FBUzs7MEJBQzVELHFCQUFDUTtnQkFBT0MsU0FBUyxJQUFNUjtnQkFBc0JJLGVBQVk7MEJBQWU7OzBCQUd4RSxxQkFBQ0c7Z0JBQU9DLFNBQVNQO2dCQUFlRyxlQUFZOzBCQUFjOzs7O0FBS2hFO0FBRUFLLFNBQVMsd0JBQXdCO0lBQy9CLElBQUlDO0lBRUpDLFdBQVc7UUFDVEQsV0FBV0UscUNBQW9CLENBQUNDLFdBQVc7UUFDM0NILFNBQVNJLFVBQVU7SUFDckI7SUFFQUMsVUFBVTtRQUNSdkMsYUFBSSxDQUFDd0MsYUFBYTtJQUNwQjtJQUVBUCxTQUFTLG9CQUFvQjtRQUMzQlEsS0FBSyw4QkFBOEI7WUFDakN0QyxjQUFjO1lBRWQsTUFBTWtCLGFBQWFhLFNBQVNRLGFBQWE7WUFFekNDLE9BQU90QixXQUFXUSxRQUFRLEVBQUVlLElBQUksQ0FBQztZQUNqQ0QsT0FBT3RCLFdBQVd3QixLQUFLLEVBQUVELElBQUksQ0FBQztZQUM5QkQsT0FBT3RCLFdBQVd5QixTQUFTLEVBQUVGLElBQUksQ0FBQztZQUNsQ0QsT0FBT3RCLFdBQVcwQixTQUFTLEVBQUVILElBQUksQ0FBQztRQUNwQztRQUVBSCxLQUFLLGtDQUFrQztZQUNyQ3RDLGNBQWM7WUFFZCxNQUFNa0IsYUFBYWEsU0FBU1EsYUFBYTtZQUV6Q0MsT0FBT3RCLFdBQVdRLFFBQVEsRUFBRWUsSUFBSSxDQUFDO1lBQ2pDRCxPQUFPdEIsV0FBV3lCLFNBQVMsRUFBRUYsSUFBSSxDQUFDO1lBQ2xDRCxPQUFPdEIsV0FBV3dCLEtBQUssRUFBRUQsSUFBSSxDQUFDO1lBQzlCRCxPQUFPdEIsV0FBVzBCLFNBQVMsRUFBRUgsSUFBSSxDQUFDO1FBQ3BDO1FBRUFILEtBQUssMkJBQTJCO1lBQzlCdEMsY0FBYztZQUNkRSxPQUFPQyxjQUFjLENBQUNhLFFBQVEsY0FBYztnQkFBRVgsT0FBTztZQUFLO1lBRTFELE1BQU1hLGFBQWFhLFNBQVNRLGFBQWE7WUFFekNDLE9BQU90QixXQUFXMEIsU0FBUyxFQUFFSCxJQUFJLENBQUM7WUFDbENELE9BQU90QixXQUFXUSxRQUFRLEVBQUVlLElBQUksQ0FBQztZQUNqQ0QsT0FBT3RCLFdBQVdTLFFBQVEsRUFBRWMsSUFBSSxDQUFDO1FBQ25DO1FBRUFILEtBQUssMEJBQTBCO1lBQzdCdEMsY0FBYztZQUNkRSxPQUFPQyxjQUFjLENBQUNhLFFBQVEsY0FBYztnQkFBRVgsT0FBTztZQUFJO1lBRXpELE1BQU1hLGFBQWFhLFNBQVNRLGFBQWE7WUFFekNDLE9BQU90QixXQUFXUyxRQUFRLEVBQUVjLElBQUksQ0FBQztZQUNqQ0QsT0FBT3RCLFdBQVdRLFFBQVEsRUFBRWUsSUFBSSxDQUFDO1lBQ2pDRCxPQUFPdEIsV0FBVzBCLFNBQVMsRUFBRUgsSUFBSSxDQUFDO1FBQ3BDO0lBQ0Y7SUFFQVgsU0FBUyxrQkFBa0I7UUFDekJRLEtBQUssNkNBQTZDO1lBQ2hEdEMsY0FBYztZQUVkLE1BQU02QyxNQUFNZCxTQUFTZSxjQUFjO1lBRW5DTixPQUFPSyxLQUFLSixJQUFJLENBQUNNLDRCQUFpQixDQUFDQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0osR0FBRztRQUNuRDtRQUVBUCxLQUFLLHFEQUFxRDtZQUN4RHRDLGNBQWM7WUFFZCxNQUFNNkMsTUFBTWQsU0FBU2UsY0FBYztZQUVuQ04sT0FBT0ssS0FBS0osSUFBSSxDQUFDTSw0QkFBaUIsQ0FBQ0MsTUFBTSxDQUFDRSxPQUFPLENBQUNMLEdBQUc7UUFDdkQ7SUFDRjtJQUVBZixTQUFTLDRCQUE0QjtRQUNuQ1EsS0FBSywrQkFBK0I7WUFDbEN0QyxjQUFjO1lBRWQrQixTQUFTb0IsbUJBQW1CLENBQUMsZ0JBQWdCO1lBRTdDLE1BQU1DLFNBQVNyQixTQUFTc0IseUJBQXlCO1lBQ2pEYixPQUFPWSxRQUFRRSxVQUFVO1lBQ3pCZCxPQUFPWSxRQUFRQSxRQUFRWCxJQUFJLENBQUM7WUFDNUJELE9BQU9ZLFFBQVFHLFVBQVVkLElBQUksQ0FBQztRQUNoQztRQUVBSCxLQUFLLDZDQUE2QztZQUNoRFAsU0FBU29CLG1CQUFtQixDQUFDO1lBRTdCLE1BQU1LLGFBQWF6QixTQUFTMEIsd0JBQXdCO1lBRXBEakIsT0FBT2dCLFlBQVlmLElBQUksQ0FBQztRQUMxQjtRQUVBSCxLQUFLLG1DQUFtQztZQUN0Q3RDLGNBQWM7WUFDZEUsT0FBT0MsY0FBYyxDQUFDYSxRQUFRLGNBQWM7Z0JBQUVYLE9BQU87WUFBSztZQUUxRCxNQUFNbUQsYUFBYXpCLFNBQVMwQix3QkFBd0I7WUFFcERqQixPQUFPZ0IsWUFBWWYsSUFBSSxDQUFDO1FBQzFCO0lBQ0Y7QUFDRjtBQUVBWCxTQUFTLDBCQUEwQjtJQUNqQyxNQUFNNEIsNkJBQTZCLENBQUNDO1FBQ2xDLE9BQU9DLElBQUFBLGFBQU0sZ0JBQ1gscUJBQUNDLGlDQUFnQjtzQkFDZixjQUFBLHFCQUFDQywrQkFBc0I7MEJBQ3BCSDs7O0lBSVQ7SUFFQTNCLFdBQVc7UUFDVGhDLGNBQWM7UUFDZEUsT0FBT0MsY0FBYyxDQUFDYSxRQUFRLGNBQWM7WUFBRVgsT0FBTztRQUFJO1FBQ3pEMEQsYUFBYWxELEtBQUs7SUFDcEI7SUFFQXlCLEtBQUssb0NBQW9DO1FBQ3ZDb0IseUNBQTJCLHFCQUFDekM7UUFFNUIsTUFBTStDLElBQUFBLGNBQU8sRUFBQztZQUNaeEIsT0FBT3lCLGFBQU0sQ0FBQ0MsV0FBVyxDQUFDLGdCQUFnQkMsaUJBQWlCLENBQUM7UUFDOUQ7SUFDRjtJQUVBN0IsS0FBSyw0QkFBNEI7UUFDL0IsTUFBTThCLFdBQVd2RSxhQUFJLENBQUN3RSxLQUFLLENBQUNyRCxRQUFRLFFBQVFzRCxrQkFBa0IsQ0FBQyxJQUFNO1FBRXJFWix5Q0FBMkIscUJBQUN6QztRQUU1QixNQUFNK0MsSUFBQUEsY0FBTyxFQUFDO1lBQ1pPLGdCQUFTLENBQUNDLEtBQUssQ0FBQ1AsYUFBTSxDQUFDQyxXQUFXLENBQUM7UUFDckM7UUFFQTFCLE9BQU80QixVQUFVSyxvQkFBb0IsQ0FDbkMxQiw0QkFBaUIsQ0FBQ0MsTUFBTSxDQUFDQyxHQUFHLENBQUNKLEdBQUcsRUFDaEM7UUFHRnVCLFNBQVNNLFdBQVc7SUFDdEI7SUFFQXBDLEtBQUssK0JBQStCO1FBQ2xDb0IseUNBQTJCLHFCQUFDekM7UUFFNUIsTUFBTStDLElBQUFBLGNBQU8sRUFBQztZQUNaTyxnQkFBUyxDQUFDQyxLQUFLLENBQUNQLGFBQU0sQ0FBQ0MsV0FBVyxDQUFDO1FBQ3JDO1FBRUEsTUFBTUYsSUFBQUEsY0FBTyxFQUFDO1lBQ1p4QixPQUFPeUIsYUFBTSxDQUFDQyxXQUFXLENBQUMsZ0JBQWdCQyxpQkFBaUIsQ0FBQztZQUM1RDNCLE9BQU95QixhQUFNLENBQUNDLFdBQVcsQ0FBQyxpQkFBaUJDLGlCQUFpQixDQUFDO1FBQy9EO0lBQ0Y7QUFDRjtBQUVBckMsU0FBUyx3QkFBd0I7SUFDL0IsTUFBTTZDLGVBQWUsQ0FBQ0MsWUFBWSxJQUFJO1FBQ3BDLE9BQU9oQixJQUFBQSxhQUFNLGdCQUNYLHFCQUFDQyxpQ0FBZ0I7c0JBQ2YsY0FBQSxxQkFBQ0MsK0JBQXNCO2dCQUFDYyxXQUFXQTswQkFDakMsY0FBQSxxQkFBQ0MsNENBQW9COzs7SUFJN0I7SUFFQTdDLFdBQVc7UUFDVGhDLGNBQWM7UUFDZEUsT0FBT0MsY0FBYyxDQUFDYSxRQUFRLGNBQWM7WUFBRVgsT0FBTztRQUFJO0lBQzNEO0lBRUFpQyxLQUFLLDRDQUE0QztRQUMvQ3FDO1FBRUEsTUFBTVgsSUFBQUEsY0FBTyxFQUFDO1lBQ1p4QixPQUFPeUIsYUFBTSxDQUFDYSxTQUFTLENBQUMseUJBQXlCQyxpQkFBaUI7WUFDbEV2QyxPQUFPeUIsYUFBTSxDQUFDYSxTQUFTLENBQUMsK0NBQStDQyxpQkFBaUI7UUFDMUY7SUFDRjtJQUVBekMsS0FBSyxxQ0FBcUM7UUFDeENxQztRQUVBLE1BQU1YLElBQUFBLGNBQU8sRUFBQztZQUNaeEIsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLFlBQVlDLGlCQUFpQjtRQUN2RDtJQUNGO0lBRUF6QyxLQUFLLDJCQUEyQjtRQUM5QnFDO1FBRUEsTUFBTVgsSUFBQUEsY0FBTyxFQUFDO1lBQ1p4QixPQUFPeUIsYUFBTSxDQUFDYSxTQUFTLENBQUMsWUFBWUMsaUJBQWlCO1FBQ3ZEO0lBQ0Y7QUFDRjtBQUVBakQsU0FBUyxzQkFBc0I7SUFDN0IsTUFBTWtELGdCQUFnQjtRQUNwQixPQUFPcEIsSUFBQUEsYUFBTSxnQkFDWCxxQkFBQ0MsaUNBQWdCO3NCQUNmLGNBQUEscUJBQUNDLCtCQUFzQjtnQkFBQ2MsV0FBVzswQkFDakMsY0FBQSxxQkFBQ0ssMkJBQWtCOzs7SUFJM0I7SUFFQWpELFdBQVc7UUFDVGhDLGNBQWM7UUFDZEUsT0FBT0MsY0FBYyxDQUFDYSxRQUFRLGNBQWM7WUFBRVgsT0FBTztRQUFJO0lBQzNEO0lBRUFpQyxLQUFLLHFDQUFxQztRQUN4QzBDO1FBRUEsTUFBTWhCLElBQUFBLGNBQU8sRUFBQztZQUNaLHFCQUFxQjtZQUNyQnhCLE9BQU95QixhQUFNLENBQUNhLFNBQVMsQ0FBQyx5QkFBeUJDLGlCQUFpQjtZQUNsRXZDLE9BQU95QixhQUFNLENBQUNhLFNBQVMsQ0FBQyxxQ0FBcUNDLGlCQUFpQjtRQUNoRjtJQUNGO0lBRUF6QyxLQUFLLGlDQUFpQztRQUNwQzBDO1FBRUEsTUFBTWhCLElBQUFBLGNBQU8sRUFBQztZQUNaeEIsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLFdBQVdDLGlCQUFpQjtZQUNwRHZDLE9BQU95QixhQUFNLENBQUNhLFNBQVMsQ0FBQyx3QkFBd0JDLGlCQUFpQjtZQUNqRXZDLE9BQU95QixhQUFNLENBQUNhLFNBQVMsQ0FBQyxTQUFTQyxpQkFBaUI7WUFDbER2QyxPQUFPeUIsYUFBTSxDQUFDYSxTQUFTLENBQUMsb0JBQW9CQyxpQkFBaUI7UUFDL0Q7SUFDRjtJQUVBekMsS0FBSyxzQ0FBc0M7UUFDekMwQztRQUVBLE1BQU1oQixJQUFBQSxjQUFPLEVBQUM7WUFDWiwrREFBK0Q7WUFDL0QsTUFBTWtCLG1CQUFtQkMsU0FBU0MsZ0JBQWdCLENBQUM7WUFDbkQ1QyxPQUFPMEMsaUJBQWlCRyxNQUFNLEVBQUVDLGVBQWUsQ0FBQztRQUNsRDtJQUNGO0lBRUFoRCxLQUFLLHVDQUF1QztRQUMxQzBDO1FBRUEsTUFBTWhCLElBQUFBLGNBQU8sRUFBQztZQUNaLDhDQUE4QztZQUM5Q3hCLE9BQU95QixhQUFNLENBQUNhLFNBQVMsQ0FBQyxjQUFjQyxpQkFBaUI7UUFDekQ7SUFDRjtJQUVBekMsS0FBSyxtREFBbUQ7UUFDdEQwQztRQUVBLE1BQU1oQixJQUFBQSxjQUFPLEVBQUM7WUFDWnhCLE9BQU95QixhQUFNLENBQUNhLFNBQVMsQ0FBQyw0QkFBNEJDLGlCQUFpQjtZQUNyRSxrQ0FBa0M7WUFDbEMsTUFBTVEsZUFBZXRCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDO1lBQ3RDdEMsT0FBTytDLGNBQWNSLGlCQUFpQjtRQUN4QztJQUNGO0lBRUF6QyxLQUFLLHVCQUF1QjtRQUMxQjBDO1FBRUEsTUFBTWhCLElBQUFBLGNBQU8sRUFBQztZQUNaeEIsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLHdDQUF3Q0MsaUJBQWlCO1lBQ2pGdkMsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLDhCQUE4QkMsaUJBQWlCO1lBQ3ZFdkMsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLHNDQUFzQ0MsaUJBQWlCO1FBQ2pGO0lBQ0Y7QUFDRjtBQUVBakQsU0FBUywrQkFBK0I7SUFDdEMsTUFBTTBELHVCQUF1QjtRQUMzQixPQUFPNUIsSUFBQUEsYUFBTSxnQkFDWCxxQkFBQ0MsaUNBQWdCO1lBQUM0QixpQkFBZ0I7c0JBQ2hDLGNBQUEscUJBQUMzQiwrQkFBc0I7Z0JBQUNjLFdBQVc7MEJBQ2pDLGNBQUEscUJBQUNLLDJCQUFrQjs7O0lBSTNCO0lBRUEzQyxLQUFLLCtEQUErRDtRQUNsRWtEO1FBRUEsTUFBTXhCLElBQUFBLGNBQU8sRUFBQztZQUNaeEIsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLHlCQUF5QkMsaUJBQWlCO1lBQ2xFdkMsT0FBT3lCLGFBQU0sQ0FBQ2EsU0FBUyxDQUFDLDBCQUEwQkMsaUJBQWlCO1FBQ3JFO0lBQ0Y7QUFDRjtBQUVBakQsU0FBUyw0QkFBNEI7SUFDbkNRLEtBQUssOEJBQThCO1FBQ2pDRSxPQUFPTyw0QkFBaUIsQ0FBQ0MsTUFBTSxDQUFDQyxHQUFHLENBQUNKLEdBQUcsRUFBRUosSUFBSSxDQUFDO1FBQzlDRCxPQUFPTyw0QkFBaUIsQ0FBQ0MsTUFBTSxDQUFDRSxPQUFPLENBQUNMLEdBQUcsRUFBRUosSUFBSSxDQUFDO0lBQ3BEO0lBRUFILEtBQUsseUNBQXlDO1FBQzVDRSxPQUFPTyw0QkFBaUIsQ0FBQzJDLFFBQVEsRUFBRUMsWUFBWSxDQUFDO1FBRWhELE1BQU1DLGdCQUFnQjdDLDRCQUFpQixDQUFDMkMsUUFBUSxDQUFDRyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLEVBQUUsS0FBSztRQUNwRXZELE9BQU9vRCxlQUFlSSxXQUFXO1FBQ2pDeEQsT0FBT29ELGVBQWVLLE1BQU1DLElBQUl6RCxJQUFJLENBQUM7UUFDckNELE9BQU9vRCxlQUFlSyxNQUFNRSxJQUFJMUQsSUFBSSxDQUFDO0lBQ3ZDO0lBRUFILEtBQUssaUNBQWlDO1FBQ3BDRSxPQUFPTyw0QkFBaUIsQ0FBQ3FELEtBQUssQ0FBQ0MsWUFBWSxFQUFFNUQsSUFBSSxDQUFDO1FBQ2xERCxPQUFPTyw0QkFBaUIsQ0FBQ3FELEtBQUssQ0FBQ0UsZ0JBQWdCLEVBQUU3RCxJQUFJLENBQUM7UUFDdERELE9BQU9PLDRCQUFpQixDQUFDcUQsS0FBSyxDQUFDRyxrQkFBa0IsRUFBRTlELElBQUksQ0FBQztJQUMxRDtJQUVBSCxLQUFLLGlDQUFpQztRQUNwQ0UsT0FBT08sNEJBQWlCLENBQUN5RCxPQUFPLENBQUNDLE9BQU8sRUFBRWhFLElBQUksQ0FBQztRQUMvQ0QsT0FBT08sNEJBQWlCLENBQUN5RCxPQUFPLENBQUNFLFFBQVEsRUFBRWYsWUFBWSxDQUFDO0lBQzFEO0FBQ0Y7QUFFQTdELFNBQVMscUJBQXFCO0lBQzVCUSxLQUFLLG1DQUFtQztRQUN0Qyx5QkFBeUI7UUFDekJ0QyxjQUFjO1FBRWQsZ0NBQWdDO1FBQ2hDK0QsYUFBYWxELEtBQUs7UUFFbEIrQyxJQUFBQSxhQUFNLGdCQUNKLHFCQUFDQyxpQ0FBZ0I7c0JBQ2YsY0FBQSxzQkFBQ0MsK0JBQXNCO2dCQUFDYyxXQUFXOztrQ0FDakMscUJBQUMzRDtrQ0FDRCxxQkFBQzRELDRDQUFvQjtrQ0FDckIscUJBQUNJLDJCQUFrQjs7OztRQUt6Qiw4QkFBOEI7UUFDOUIsTUFBTWpCLElBQUFBLGNBQU8sRUFBQztZQUNaeEIsT0FBT3lCLGFBQU0sQ0FBQ0MsV0FBVyxDQUFDLGdCQUFnQkMsaUJBQWlCLENBQUM7UUFDOUQ7UUFFQSxvQ0FBb0M7UUFDcEMsTUFBTUgsSUFBQUEsY0FBTyxFQUFDO1lBQ1p4QixPQUFPeUIsYUFBTSxDQUFDYSxTQUFTLENBQUMseUJBQXlCQyxpQkFBaUI7UUFDcEU7SUFDRjtBQUNGO0FBRUEsMEJBQTBCO0FBQzFCakQsU0FBUyxzQkFBc0I7SUFDN0JFLFdBQVc7UUFDUmhCLE9BQWUyRixJQUFJLEdBQUc5RyxhQUFJLENBQUNFLEVBQUU7SUFDaEM7SUFFQXVDLEtBQUssNEJBQTRCO1FBQy9CdEMsY0FBYztRQUVkLE1BQU0rQixXQUFXRSxxQ0FBb0IsQ0FBQ0MsV0FBVztRQUNqREgsU0FBU29CLG1CQUFtQixDQUFDLGdCQUFnQjtRQUU3QyxnQ0FBZ0M7UUFDaEMsTUFBTUMsU0FBU3JCLFNBQVNzQix5QkFBeUI7UUFDakRiLE9BQU9ZLFFBQVFBLFFBQVFYLElBQUksQ0FBQztRQUM1QkQsT0FBT1ksUUFBUUcsVUFBVWQsSUFBSSxDQUFDO0lBQ2hDO0FBQ0YifQ==
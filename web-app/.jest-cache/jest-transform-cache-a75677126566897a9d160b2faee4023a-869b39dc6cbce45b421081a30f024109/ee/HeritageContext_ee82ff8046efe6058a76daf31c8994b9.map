{"version":3,"sources":["/workspaces/LusoTown/web-app/src/context/HeritageContext.tsx"],"sourcesContent":["'use client'\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react'\nimport { HeritageConfig, HeritageManager } from '@/config/heritage'\n\ninterface HeritageContextType {\n  heritage: HeritageConfig\n  heritageCode: string\n  setHeritage: (code: string) => boolean\n  availableHeritages: Array<{ code: string; name: string; flag: string }>\n  \n  // Utility methods for easy access\n  colors: HeritageConfig['branding']['colors']\n  symbols: HeritageConfig['branding']['symbols']\n  emotes: HeritageConfig['streaming']['emotes']\n  culturalAreas: string[]\n  businessTypes: string[]\n  \n  // Helper functions\n  moderateContent: (text: string, language?: string) => {\n    approved: boolean\n    flagged: boolean\n    positive: boolean\n    score: number\n  }\n}\n\nconst HeritageContext = createContext<HeritageContextType | undefined>(undefined)\n\ninterface HeritageProviderProps {\n  children: ReactNode\n  defaultHeritage?: string\n}\n\nexport function HeritageProvider({ children, defaultHeritage = 'pt' }: HeritageProviderProps) {\n  const [heritageManager] = useState(() => HeritageManager.getInstance())\n  const [heritage, setHeritageState] = useState<HeritageConfig>(heritageManager.getCurrentHeritage())\n  const [heritageCode, setHeritageCode] = useState<string>(defaultHeritage)\n\n  useEffect(() => {\n    // Initialize heritage from localStorage or environment\n    const savedHeritage = localStorage.getItem('heritage-code')\n    const envHeritage = process.env.NEXT_PUBLIC_HERITAGE_CODE\n    const initialHeritage = savedHeritage || envHeritage || defaultHeritage\n\n    if (initialHeritage && heritageManager.setHeritage(initialHeritage)) {\n      setHeritageState(heritageManager.getCurrentHeritage())\n      setHeritageCode(initialHeritage)\n    }\n  }, [defaultHeritage, heritageManager])\n\n  const setHeritage = (code: string): boolean => {\n    const success = heritageManager.setHeritage(code)\n    if (success) {\n      setHeritageState(heritageManager.getCurrentHeritage())\n      setHeritageCode(code)\n      \n      // Persist to localStorage\n      localStorage.setItem('heritage-code', code)\n      \n      // Trigger a custom event for other components that might need to react\n      window.dispatchEvent(new CustomEvent('heritage-changed', { \n        detail: { code, heritage: heritageManager.getCurrentHeritage() } \n      }))\n    }\n    return success\n  }\n\n  const contextValue: HeritageContextType = {\n    heritage,\n    heritageCode,\n    setHeritage,\n    availableHeritages: heritageManager.getAvailableHeritages(),\n    \n    // Utility accessors\n    colors: heritage.branding.colors,\n    symbols: heritage.branding.symbols,\n    emotes: heritage.streaming.emotes,\n    culturalAreas: heritage.geography.diasporaHub.culturalAreas,\n    businessTypes: heritage.community.businessTypes,\n    \n    // Helper functions\n    moderateContent: heritageManager.moderateContent.bind(heritageManager)\n  }\n\n  return (\n    <HeritageContext.Provider value={contextValue}>\n      {children}\n    </HeritageContext.Provider>\n  )\n}\n\nexport function useHeritage(): HeritageContextType {\n  const context = useContext(HeritageContext)\n  if (context === undefined) {\n    throw new Error('useHeritage must be used within a HeritageProvider')\n  }\n  return context\n}\n\n// Hook for easy access to colors only\nexport function useHeritageColors() {\n  const { colors } = useHeritage()\n  return colors\n}\n\n// Hook for easy access to symbols only\nexport function useHeritageSymbols() {\n  const { symbols } = useHeritage()\n  return symbols\n}\n\n// Hook for easy access to emotes only\nexport function useHeritageEmotes() {\n  const { emotes } = useHeritage()\n  return emotes\n}\n\n// Hook for cultural areas\nexport function useCulturalAreas() {\n  const { culturalAreas } = useHeritage()\n  return culturalAreas\n}\n\n// Helper hook for getting heritage-aware CSS custom properties\nexport function useHeritageCSSProperties() {\n  const { colors } = useHeritage()\n  \n  return {\n    '--heritage-primary': colors.primary,\n    '--heritage-secondary': colors.secondary,\n    '--heritage-accent': colors.accent,\n    '--heritage-action': colors.action,\n    '--heritage-premium': colors.premium,\n    '--heritage-coral': colors.coral,\n  }\n}\n\nexport default HeritageContext"],"names":["HeritageProvider","useCulturalAreas","useHeritage","useHeritageCSSProperties","useHeritageColors","useHeritageEmotes","useHeritageSymbols","HeritageContext","createContext","undefined","children","defaultHeritage","heritageManager","useState","HeritageManager","getInstance","heritage","setHeritageState","getCurrentHeritage","heritageCode","setHeritageCode","useEffect","savedHeritage","localStorage","getItem","envHeritage","process","env","NEXT_PUBLIC_HERITAGE_CODE","initialHeritage","setHeritage","code","success","setItem","window","dispatchEvent","CustomEvent","detail","contextValue","availableHeritages","getAvailableHeritages","colors","branding","symbols","emotes","streaming","culturalAreas","geography","diasporaHub","businessTypes","community","moderateContent","bind","Provider","value","context","useContext","Error","primary","secondary","accent","action","premium","coral"],"mappings":"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"}
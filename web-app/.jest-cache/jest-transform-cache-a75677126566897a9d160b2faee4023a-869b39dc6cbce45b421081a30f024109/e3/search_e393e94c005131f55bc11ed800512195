2dfae78f50ef9d293ac737e6ef9e99e8
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    getPopularSearches: function() {
        return getPopularSearches;
    },
    getSearchCategories: function() {
        return getSearchCategories;
    },
    search: function() {
        return search;
    },
    searchContent: function() {
        return searchContent;
    },
    searchEvents: function() {
        return searchEvents;
    }
});
const _events = require("./events");
const _routes = require("../config/routes");
const _cdn = require("../config/cdn");
// Mock business data for search
const mockBusinesses = [
    {
        id: "business-1",
        name: "Nata Lisboa",
        description: "Authentic Lusophone past\xe9is de nata bakery in Borough Market",
        category: "Food & Drink",
        location: "Borough Market, London",
        url: "/business-directory/nata-lisboa",
        image: "/images/businesses/nata-lisboa.jpg",
        rating: 4.8,
        tags: [
            "past\xe9is de nata",
            "portuguese bakery",
            "borough market",
            "desserts",
            "coffee"
        ]
    },
    {
        id: "business-2",
        name: "Casa do Fado",
        description: "Traditional Portuguese restaurant with live Fado performances",
        category: "Restaurant",
        location: "Vauxhall, London",
        url: "/business-directory/casa-do-fado",
        image: "/images/businesses/casa-do-fado.jpg",
        rating: 4.6,
        tags: [
            "fado",
            "portuguese restaurant",
            "live music",
            "traditional",
            "dinner"
        ]
    },
    {
        id: "business-3",
        name: "Lusophone Language Academy",
        description: "Professional Portuguese language courses for all levels",
        category: "Education",
        location: "Camden, London",
        url: "/business-directory/portuguese-language-academy",
        image: "/images/businesses/language-academy.jpg",
        rating: 4.9,
        tags: [
            "portuguese lessons",
            "language learning",
            "education",
            "classes",
            "tutoring"
        ]
    },
    {
        id: "business-4",
        name: "Lusit\xe2nia Market",
        description: "Specialized Lusophone grocery store and delicatessen",
        category: "Grocery",
        location: "Stockwell, London",
        url: "/business-directory/lusitania-market",
        image: "/images/businesses/lusitania-market.jpg",
        rating: 4.7,
        tags: [
            "portuguese food",
            "grocery",
            "delicatessen",
            "imported goods",
            "stockwell"
        ]
    }
];
// Mock groups data
const mockGroups = [
    {
        id: "group-1",
        name: "Lusophone Professionals Network",
        description: "Networking group for Portuguese-speaking professionals in London",
        category: "Professional",
        location: "London",
        url: "/groups/portuguese-professionals-network",
        image: "/images/groups/professionals.jpg",
        memberCount: 245,
        tags: [
            "networking",
            "professionals",
            "career",
            "business",
            "london"
        ]
    },
    {
        id: "group-2",
        name: "Young Lusophone in London",
        description: "Social group for Portuguese speakers aged 18-35 living in London",
        category: "Social",
        location: "London",
        url: "/groups/young-portuguese-london",
        image: "/images/groups/young-portuguese.jpg",
        memberCount: 182,
        tags: [
            "young adults",
            "social",
            "friends",
            "18-35",
            "activities"
        ]
    },
    {
        id: "group-3",
        name: "Lusophone Football Fans",
        description: "Watch Portuguese national team matches and Premier League games together",
        category: "Sports",
        location: "Various Pubs",
        url: "/groups/portuguese-football-fans",
        image: "/images/groups/football.jpg",
        memberCount: 156,
        tags: [
            "football",
            "sports",
            "national team",
            "premier league",
            "pubs"
        ]
    }
];
// Premium services data for search
const premiumServices = [
    {
        id: "service-executive-transport",
        name: "Executive Transport Services",
        description: "Professional transport services with Lusophone cultural expertise",
        category: "Transportation",
        location: "London & United Kingdom",
        url: "/services#executive-transport",
        image: _cdn.IMAGES.transport.executive,
        price: 35,
        rating: 4.8,
        tags: [
            "executive transport",
            "professional driver",
            "premium vehicles",
            "airport transfer",
            "business transport"
        ]
    },
    {
        id: "service-close-protection",
        name: "Close Protection Services",
        description: "SIA-licensed CPOs providing discrete, culturally-aware security",
        category: "Security",
        location: "London & United Kingdom",
        url: "/services#close-protection",
        image: _cdn.IMAGES.transport.closeProtection,
        price: 800,
        rating: 5.0,
        tags: [
            "close protection",
            "security",
            "sia licensed",
            "vip escort",
            "personal protection"
        ]
    },
    {
        id: "service-transport-sia",
        name: "Transport & SIA Compliance",
        description: "Comprehensive transport services with full SIA compliance and luxury fleet",
        category: "Premium Transport",
        location: "London & United Kingdom",
        url: "/transport",
        image: _cdn.IMAGES.transport.security,
        price: 75,
        rating: 4.9,
        tags: [
            "transport",
            "sia compliance",
            "luxury fleet",
            "security transport",
            "bentley",
            "mercedes"
        ]
    }
];
// Mock pages/content data
const mockPages = [
    {
        id: "events-page",
        title: "Events & Tours",
        description: "Discover Lusophone cultural events, tours, and activities in London",
        url: _routes.ROUTES.events,
        category: "Navigation",
        tags: [
            "events",
            "tours",
            "activities",
            "culture",
            "social calendar"
        ]
    },
    {
        id: "business-directory",
        title: "Lusophone Business Directory",
        description: "Find Lusophone-owned businesses and services in London",
        url: "/business-directory",
        category: "Directory",
        tags: [
            "businesses",
            "services",
            "directory",
            "portuguese owned",
            "support local"
        ]
    },
    {
        id: "community-guidelines",
        title: "Community Guidelines",
        description: "Learn about our community standards and membership guidelines",
        url: "/community-guidelines",
        category: "Support",
        tags: [
            "guidelines",
            "rules",
            "community standards",
            "membership",
            "safety"
        ]
    },
    {
        id: "help",
        title: "Help & Support",
        description: "Get help with your LusoTown account and find answers to common questions",
        url: "/help",
        category: "Support",
        tags: [
            "help",
            "support",
            "faq",
            "account",
            "assistance"
        ]
    },
    {
        id: "pricing",
        title: "Membership Pricing",
        description: "Explore our membership plans and find the perfect fit for your Lusophone social calendar",
        url: "/pricing",
        category: "Membership",
        tags: [
            "pricing",
            "membership",
            "plans",
            "subscription",
            "premium"
        ]
    },
    {
        id: "safety",
        title: "Safety Center",
        description: "Learn about our safety measures and how to stay safe in the Portuguese-speaking community",
        url: "/safety",
        category: "Safety",
        tags: [
            "safety",
            "security",
            "protection",
            "community safety",
            "guidelines"
        ]
    }
];
// Text similarity function for search ranking
function calculateSimilarity(searchTerm, text) {
    const search = searchTerm.toLowerCase();
    const target = text.toLowerCase();
    // Exact match gets highest score
    if (target.includes(search)) {
        const index = target.indexOf(search);
        // Bonus for matches at the beginning
        const positionBonus = index === 0 ? 0.5 : 0;
        // Bonus for whole word matches
        const wordBonus = target.split(" ").some((word)=>word.includes(search)) ? 0.3 : 0;
        return 1 + positionBonus + wordBonus;
    }
    // Partial word matches
    const searchWords = search.split(" ");
    const targetWords = target.split(" ");
    let matchScore = 0;
    for (const searchWord of searchWords){
        for (const targetWord of targetWords){
            if (targetWord.includes(searchWord) || searchWord.includes(targetWord)) {
                matchScore += 0.3;
            }
        }
    }
    return matchScore;
}
async function searchEvents(query) {
    try {
        const events = await _events.eventService.getEvents();
        const searchTerm = query.toLowerCase().trim();
        if (!searchTerm) return [];
        const results = [];
        for (const event of events){
            let score = 0;
            // Search in title
            score += calculateSimilarity(searchTerm, event.title) * 3;
            // Search in description
            score += calculateSimilarity(searchTerm, event.description) * 2;
            score += calculateSimilarity(searchTerm, event.longDescription) * 1.5;
            // Search in location
            if (event.location) {
                score += calculateSimilarity(searchTerm, event.location) * 2;
            }
            // Search in category
            score += calculateSimilarity(searchTerm, event.category) * 1.5;
            // Search in tags
            for (const tag of event.tags || []){
                score += calculateSimilarity(searchTerm, tag) * 1;
            }
            // Search in host name
            if (event.hostName) {
                score += calculateSimilarity(searchTerm, event.hostName) * 1;
            }
            if (score > 0.5) {
                results.push({
                    id: event.id,
                    type: "event",
                    title: event.title,
                    description: event.description,
                    url: `/events/${event.id}`,
                    location: event.location,
                    date: event.date,
                    category: event.category,
                    tags: event.tags,
                    image: event.images?.[0],
                    price: event.price,
                    score
                });
            }
        }
        // Sort by relevance score and return top results
        return results.sort((a, b)=>b.score - a.score).slice(0, 10).map(({ score, ...result })=>result);
    } catch (error) {
        console.error("Error searching events:", error);
        return [];
    }
}
async function searchContent(query) {
    const searchTerm = query.toLowerCase().trim();
    if (!searchTerm) return [];
    const results = [];
    // Search businesses
    for (const business of mockBusinesses){
        let score = 0;
        score += calculateSimilarity(searchTerm, business.name) * 3;
        score += calculateSimilarity(searchTerm, business.description) * 2;
        score += calculateSimilarity(searchTerm, business.category) * 1.5;
        score += calculateSimilarity(searchTerm, business.location) * 2;
        for (const tag of business.tags){
            score += calculateSimilarity(searchTerm, tag) * 1;
        }
        if (score > 0.5) {
            results.push({
                id: business.id,
                type: "business",
                title: business.name,
                description: business.description,
                url: business.url,
                location: business.location,
                category: business.category,
                tags: business.tags,
                image: business.image,
                rating: business.rating,
                score
            });
        }
    }
    // Search groups
    for (const group of mockGroups){
        let score = 0;
        score += calculateSimilarity(searchTerm, group.name) * 3;
        score += calculateSimilarity(searchTerm, group.description) * 2;
        score += calculateSimilarity(searchTerm, group.category) * 1.5;
        score += calculateSimilarity(searchTerm, group.location) * 1;
        for (const tag of group.tags){
            score += calculateSimilarity(searchTerm, tag) * 1;
        }
        if (score > 0.5) {
            results.push({
                id: group.id,
                type: "group",
                title: group.name,
                description: group.description,
                url: group.url,
                location: group.location,
                category: group.category,
                tags: group.tags,
                image: group.image,
                score
            });
        }
    }
    // Search premium services
    for (const service of premiumServices){
        let score = 0;
        score += calculateSimilarity(searchTerm, service.name) * 3;
        score += calculateSimilarity(searchTerm, service.description) * 2;
        score += calculateSimilarity(searchTerm, service.category) * 1.5;
        score += calculateSimilarity(searchTerm, service.location) * 1;
        for (const tag of service.tags){
            score += calculateSimilarity(searchTerm, tag) * 1;
        }
        if (score > 0.5) {
            results.push({
                id: service.id,
                type: "service",
                title: service.name,
                description: service.description,
                url: service.url,
                location: service.location,
                category: service.category,
                tags: service.tags,
                image: service.image,
                price: service.price,
                rating: service.rating,
                score
            });
        }
    }
    // Search pages
    for (const page of mockPages){
        let score = 0;
        score += calculateSimilarity(searchTerm, page.title) * 3;
        score += calculateSimilarity(searchTerm, page.description) * 2;
        score += calculateSimilarity(searchTerm, page.category) * 1.5;
        for (const tag of page.tags){
            score += calculateSimilarity(searchTerm, tag) * 1;
        }
        if (score > 0.5) {
            results.push({
                id: page.id,
                type: "page",
                title: page.title,
                description: page.description,
                url: page.url,
                category: page.category,
                tags: page.tags,
                score
            });
        }
    }
    // Sort by relevance score and return top results
    return results.sort((a, b)=>b.score - a.score).slice(0, 15).map(({ score, ...result })=>result);
}
async function search(query) {
    const [eventResults, contentResults] = await Promise.all([
        searchEvents(query),
        searchContent(query)
    ]);
    const businesses = contentResults.filter((r)=>r.type === "business");
    const groups = contentResults.filter((r)=>r.type === "group");
    const pages = contentResults.filter((r)=>r.type === "page");
    const all = [
        ...eventResults,
        ...contentResults
    ].sort((a, b)=>{
        // Priority order: events, businesses, groups, pages
        const typeOrder = {
            event: 0,
            business: 1,
            group: 2,
            page: 3
        };
        const aOrder = typeOrder[a.type] || 4;
        const bOrder = typeOrder[b.type] || 4;
        if (aOrder !== bOrder) {
            return aOrder - bOrder;
        }
        // Within same type, sort by relevance (already sorted in individual searches)
        return 0;
    });
    return {
        events: eventResults,
        businesses,
        groups,
        pages,
        all
    };
}
function getPopularSearches(language = "en") {
    if (language === "pt") {
        return [
            "eventos portugueses",
            "restaurantes portugueses",
            "fado",
            "pastel de nata",
            "futebol",
            "networking",
            "jovens portugueses",
            "neg\xf3cios portugueses",
            "cultura portuguesa",
            "l\xedngua portuguesa"
        ];
    }
    return [
        "portuguese events",
        "fado music",
        "portuguese restaurants",
        "networking",
        "young portuguese",
        "football",
        "past\xe9is de nata",
        "portuguese businesses",
        "cultural events",
        "language exchange"
    ];
}
function getSearchCategories(language = "en") {
    if (language === "pt") {
        return [
            {
                id: "all",
                label: "Todos",
                type: [
                    "event",
                    "business",
                    "group",
                    "page"
                ]
            },
            {
                id: "events",
                label: "Eventos",
                type: [
                    "event"
                ]
            },
            {
                id: "businesses",
                label: "Neg\xf3cios",
                type: [
                    "business"
                ]
            },
            {
                id: "groups",
                label: "Grupos",
                type: [
                    "group"
                ]
            },
            {
                id: "pages",
                label: "P\xe1ginas",
                type: [
                    "page"
                ]
            }
        ];
    }
    return [
        {
            id: "all",
            label: "All",
            type: [
                "event",
                "business",
                "group",
                "page"
            ]
        },
        {
            id: "events",
            label: "Events",
            type: [
                "event"
            ]
        },
        {
            id: "businesses",
            label: "Businesses",
            type: [
                "business"
            ]
        },
        {
            id: "groups",
            label: "Groups",
            type: [
                "group"
            ]
        },
        {
            id: "pages",
            label: "Pages",
            type: [
                "page"
            ]
        }
    ];
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2xpYi9zZWFyY2gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IEV2ZW50LCBldmVudFNlcnZpY2UgfSBmcm9tICdAL2xpYi9ldmVudHMnXG5pbXBvcnQgeyBST1VURVMgfSBmcm9tICdAL2NvbmZpZy9yb3V0ZXMnXG5pbXBvcnQgeyBJTUFHRVMgfSBmcm9tICdAL2NvbmZpZy9jZG4nXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoUmVzdWx0IHtcbiAgaWQ6IHN0cmluZ1xuICB0eXBlOiAnZXZlbnQnIHwgJ2J1c2luZXNzJyB8ICdncm91cCcgfCAncGFnZScgfCAnc2VydmljZSdcbiAgdGl0bGU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIHVybDogc3RyaW5nXG4gIGxvY2F0aW9uPzogc3RyaW5nXG4gIGRhdGU/OiBzdHJpbmdcbiAgY2F0ZWdvcnk/OiBzdHJpbmdcbiAgdGFncz86IHN0cmluZ1tdXG4gIGltYWdlPzogc3RyaW5nXG4gIHByaWNlPzogbnVtYmVyXG4gIHJhdGluZz86IG51bWJlclxufVxuXG4vLyBNb2NrIGJ1c2luZXNzIGRhdGEgZm9yIHNlYXJjaFxuY29uc3QgbW9ja0J1c2luZXNzZXMgPSBbXG4gIHtcbiAgICBpZDogJ2J1c2luZXNzLTEnLFxuICAgIG5hbWU6ICdOYXRhIExpc2JvYScsXG4gICAgZGVzY3JpcHRpb246ICdBdXRoZW50aWMgTHVzb3Bob25lIHBhc3TDqWlzIGRlIG5hdGEgYmFrZXJ5IGluIEJvcm91Z2ggTWFya2V0JyxcbiAgICBjYXRlZ29yeTogJ0Zvb2QgJiBEcmluaycsXG4gICAgbG9jYXRpb246ICdCb3JvdWdoIE1hcmtldCwgTG9uZG9uJyxcbiAgICB1cmw6ICcvYnVzaW5lc3MtZGlyZWN0b3J5L25hdGEtbGlzYm9hJyxcbiAgICBpbWFnZTogJy9pbWFnZXMvYnVzaW5lc3Nlcy9uYXRhLWxpc2JvYS5qcGcnLFxuICAgIHJhdGluZzogNC44LFxuICAgIHRhZ3M6IFsncGFzdMOpaXMgZGUgbmF0YScsICdwb3J0dWd1ZXNlIGJha2VyeScsICdib3JvdWdoIG1hcmtldCcsICdkZXNzZXJ0cycsICdjb2ZmZWUnXVxuICB9LFxuICB7XG4gICAgaWQ6ICdidXNpbmVzcy0yJyxcbiAgICBuYW1lOiAnQ2FzYSBkbyBGYWRvJyxcbiAgICBkZXNjcmlwdGlvbjogJ1RyYWRpdGlvbmFsIFBvcnR1Z3Vlc2UgcmVzdGF1cmFudCB3aXRoIGxpdmUgRmFkbyBwZXJmb3JtYW5jZXMnLFxuICAgIGNhdGVnb3J5OiAnUmVzdGF1cmFudCcsXG4gICAgbG9jYXRpb246ICdWYXV4aGFsbCwgTG9uZG9uJyxcbiAgICB1cmw6ICcvYnVzaW5lc3MtZGlyZWN0b3J5L2Nhc2EtZG8tZmFkbycsXG4gICAgaW1hZ2U6ICcvaW1hZ2VzL2J1c2luZXNzZXMvY2FzYS1kby1mYWRvLmpwZycsXG4gICAgcmF0aW5nOiA0LjYsXG4gICAgdGFnczogWydmYWRvJywgJ3BvcnR1Z3Vlc2UgcmVzdGF1cmFudCcsICdsaXZlIG11c2ljJywgJ3RyYWRpdGlvbmFsJywgJ2Rpbm5lciddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2J1c2luZXNzLTMnLFxuICAgIG5hbWU6ICdMdXNvcGhvbmUgTGFuZ3VhZ2UgQWNhZGVteScsXG4gICAgZGVzY3JpcHRpb246ICdQcm9mZXNzaW9uYWwgUG9ydHVndWVzZSBsYW5ndWFnZSBjb3Vyc2VzIGZvciBhbGwgbGV2ZWxzJyxcbiAgICBjYXRlZ29yeTogJ0VkdWNhdGlvbicsXG4gICAgbG9jYXRpb246ICdDYW1kZW4sIExvbmRvbicsXG4gICAgdXJsOiAnL2J1c2luZXNzLWRpcmVjdG9yeS9wb3J0dWd1ZXNlLWxhbmd1YWdlLWFjYWRlbXknLFxuICAgIGltYWdlOiAnL2ltYWdlcy9idXNpbmVzc2VzL2xhbmd1YWdlLWFjYWRlbXkuanBnJyxcbiAgICByYXRpbmc6IDQuOSxcbiAgICB0YWdzOiBbJ3BvcnR1Z3Vlc2UgbGVzc29ucycsICdsYW5ndWFnZSBsZWFybmluZycsICdlZHVjYXRpb24nLCAnY2xhc3NlcycsICd0dXRvcmluZyddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2J1c2luZXNzLTQnLFxuICAgIG5hbWU6ICdMdXNpdMOibmlhIE1hcmtldCcsXG4gICAgZGVzY3JpcHRpb246ICdTcGVjaWFsaXplZCBMdXNvcGhvbmUgZ3JvY2VyeSBzdG9yZSBhbmQgZGVsaWNhdGVzc2VuJyxcbiAgICBjYXRlZ29yeTogJ0dyb2NlcnknLFxuICAgIGxvY2F0aW9uOiAnU3RvY2t3ZWxsLCBMb25kb24nLFxuICAgIHVybDogJy9idXNpbmVzcy1kaXJlY3RvcnkvbHVzaXRhbmlhLW1hcmtldCcsXG4gICAgaW1hZ2U6ICcvaW1hZ2VzL2J1c2luZXNzZXMvbHVzaXRhbmlhLW1hcmtldC5qcGcnLFxuICAgIHJhdGluZzogNC43LFxuICAgIHRhZ3M6IFsncG9ydHVndWVzZSBmb29kJywgJ2dyb2NlcnknLCAnZGVsaWNhdGVzc2VuJywgJ2ltcG9ydGVkIGdvb2RzJywgJ3N0b2Nrd2VsbCddXG4gIH1cbl1cblxuLy8gTW9jayBncm91cHMgZGF0YVxuY29uc3QgbW9ja0dyb3VwcyA9IFtcbiAge1xuICAgIGlkOiAnZ3JvdXAtMScsXG4gICAgbmFtZTogJ0x1c29waG9uZSBQcm9mZXNzaW9uYWxzIE5ldHdvcmsnLFxuICAgIGRlc2NyaXB0aW9uOiAnTmV0d29ya2luZyBncm91cCBmb3IgUG9ydHVndWVzZS1zcGVha2luZyBwcm9mZXNzaW9uYWxzIGluIExvbmRvbicsXG4gICAgY2F0ZWdvcnk6ICdQcm9mZXNzaW9uYWwnLFxuICAgIGxvY2F0aW9uOiAnTG9uZG9uJyxcbiAgICB1cmw6ICcvZ3JvdXBzL3BvcnR1Z3Vlc2UtcHJvZmVzc2lvbmFscy1uZXR3b3JrJyxcbiAgICBpbWFnZTogJy9pbWFnZXMvZ3JvdXBzL3Byb2Zlc3Npb25hbHMuanBnJyxcbiAgICBtZW1iZXJDb3VudDogMjQ1LFxuICAgIHRhZ3M6IFsnbmV0d29ya2luZycsICdwcm9mZXNzaW9uYWxzJywgJ2NhcmVlcicsICdidXNpbmVzcycsICdsb25kb24nXVxuICB9LFxuICB7XG4gICAgaWQ6ICdncm91cC0yJyxcbiAgICBuYW1lOiAnWW91bmcgTHVzb3Bob25lIGluIExvbmRvbicsXG4gICAgZGVzY3JpcHRpb246ICdTb2NpYWwgZ3JvdXAgZm9yIFBvcnR1Z3Vlc2Ugc3BlYWtlcnMgYWdlZCAxOC0zNSBsaXZpbmcgaW4gTG9uZG9uJyxcbiAgICBjYXRlZ29yeTogJ1NvY2lhbCcsXG4gICAgbG9jYXRpb246ICdMb25kb24nLFxuICAgIHVybDogJy9ncm91cHMveW91bmctcG9ydHVndWVzZS1sb25kb24nLFxuICAgIGltYWdlOiAnL2ltYWdlcy9ncm91cHMveW91bmctcG9ydHVndWVzZS5qcGcnLFxuICAgIG1lbWJlckNvdW50OiAxODIsXG4gICAgdGFnczogWyd5b3VuZyBhZHVsdHMnLCAnc29jaWFsJywgJ2ZyaWVuZHMnLCAnMTgtMzUnLCAnYWN0aXZpdGllcyddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2dyb3VwLTMnLFxuICAgIG5hbWU6ICdMdXNvcGhvbmUgRm9vdGJhbGwgRmFucycsXG4gICAgZGVzY3JpcHRpb246ICdXYXRjaCBQb3J0dWd1ZXNlIG5hdGlvbmFsIHRlYW0gbWF0Y2hlcyBhbmQgUHJlbWllciBMZWFndWUgZ2FtZXMgdG9nZXRoZXInLFxuICAgIGNhdGVnb3J5OiAnU3BvcnRzJyxcbiAgICBsb2NhdGlvbjogJ1ZhcmlvdXMgUHVicycsXG4gICAgdXJsOiAnL2dyb3Vwcy9wb3J0dWd1ZXNlLWZvb3RiYWxsLWZhbnMnLFxuICAgIGltYWdlOiAnL2ltYWdlcy9ncm91cHMvZm9vdGJhbGwuanBnJyxcbiAgICBtZW1iZXJDb3VudDogMTU2LFxuICAgIHRhZ3M6IFsnZm9vdGJhbGwnLCAnc3BvcnRzJywgJ25hdGlvbmFsIHRlYW0nLCAncHJlbWllciBsZWFndWUnLCAncHVicyddXG4gIH1cbl1cblxuLy8gUHJlbWl1bSBzZXJ2aWNlcyBkYXRhIGZvciBzZWFyY2hcbmNvbnN0IHByZW1pdW1TZXJ2aWNlcyA9IFtcbiAge1xuICAgIGlkOiAnc2VydmljZS1leGVjdXRpdmUtdHJhbnNwb3J0JyxcbiAgICBuYW1lOiAnRXhlY3V0aXZlIFRyYW5zcG9ydCBTZXJ2aWNlcycsXG4gICAgZGVzY3JpcHRpb246ICdQcm9mZXNzaW9uYWwgdHJhbnNwb3J0IHNlcnZpY2VzIHdpdGggTHVzb3Bob25lIGN1bHR1cmFsIGV4cGVydGlzZScsXG4gICAgY2F0ZWdvcnk6ICdUcmFuc3BvcnRhdGlvbicsXG4gICAgbG9jYXRpb246ICdMb25kb24gJiBVbml0ZWQgS2luZ2RvbScsXG4gICAgdXJsOiAnL3NlcnZpY2VzI2V4ZWN1dGl2ZS10cmFuc3BvcnQnLFxuICAgIGltYWdlOiBJTUFHRVMudHJhbnNwb3J0LmV4ZWN1dGl2ZSxcbiAgICBwcmljZTogMzUsXG4gICAgcmF0aW5nOiA0LjgsXG4gICAgdGFnczogWydleGVjdXRpdmUgdHJhbnNwb3J0JywgJ3Byb2Zlc3Npb25hbCBkcml2ZXInLCAncHJlbWl1bSB2ZWhpY2xlcycsICdhaXJwb3J0IHRyYW5zZmVyJywgJ2J1c2luZXNzIHRyYW5zcG9ydCddXG4gIH0sXG4gIHtcbiAgICBpZDogJ3NlcnZpY2UtY2xvc2UtcHJvdGVjdGlvbicsXG4gICAgbmFtZTogJ0Nsb3NlIFByb3RlY3Rpb24gU2VydmljZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnU0lBLWxpY2Vuc2VkIENQT3MgcHJvdmlkaW5nIGRpc2NyZXRlLCBjdWx0dXJhbGx5LWF3YXJlIHNlY3VyaXR5JyxcbiAgICBjYXRlZ29yeTogJ1NlY3VyaXR5JyxcbiAgICBsb2NhdGlvbjogJ0xvbmRvbiAmIFVuaXRlZCBLaW5nZG9tJyxcbiAgICB1cmw6ICcvc2VydmljZXMjY2xvc2UtcHJvdGVjdGlvbicsXG4gICAgaW1hZ2U6IElNQUdFUy50cmFuc3BvcnQuY2xvc2VQcm90ZWN0aW9uLFxuICAgIHByaWNlOiA4MDAsXG4gICAgcmF0aW5nOiA1LjAsXG4gICAgdGFnczogWydjbG9zZSBwcm90ZWN0aW9uJywgJ3NlY3VyaXR5JywgJ3NpYSBsaWNlbnNlZCcsICd2aXAgZXNjb3J0JywgJ3BlcnNvbmFsIHByb3RlY3Rpb24nXVxuICB9LFxuICB7XG4gICAgaWQ6ICdzZXJ2aWNlLXRyYW5zcG9ydC1zaWEnLFxuICAgIG5hbWU6ICdUcmFuc3BvcnQgJiBTSUEgQ29tcGxpYW5jZScsXG4gICAgZGVzY3JpcHRpb246ICdDb21wcmVoZW5zaXZlIHRyYW5zcG9ydCBzZXJ2aWNlcyB3aXRoIGZ1bGwgU0lBIGNvbXBsaWFuY2UgYW5kIGx1eHVyeSBmbGVldCcsXG4gICAgY2F0ZWdvcnk6ICdQcmVtaXVtIFRyYW5zcG9ydCcsXG4gICAgbG9jYXRpb246ICdMb25kb24gJiBVbml0ZWQgS2luZ2RvbScsXG4gICAgdXJsOiAnL3RyYW5zcG9ydCcsXG4gICAgaW1hZ2U6IElNQUdFUy50cmFuc3BvcnQuc2VjdXJpdHksXG4gICAgcHJpY2U6IDc1LFxuICAgIHJhdGluZzogNC45LFxuICAgIHRhZ3M6IFsndHJhbnNwb3J0JywgJ3NpYSBjb21wbGlhbmNlJywgJ2x1eHVyeSBmbGVldCcsICdzZWN1cml0eSB0cmFuc3BvcnQnLCAnYmVudGxleScsICdtZXJjZWRlcyddXG4gIH1cbl1cblxuLy8gTW9jayBwYWdlcy9jb250ZW50IGRhdGFcbmNvbnN0IG1vY2tQYWdlcyA9IFtcbiAge1xuICAgIGlkOiAnZXZlbnRzLXBhZ2UnLFxuICAgIHRpdGxlOiAnRXZlbnRzICYgVG91cnMnLFxuICAgIGRlc2NyaXB0aW9uOiAnRGlzY292ZXIgTHVzb3Bob25lIGN1bHR1cmFsIGV2ZW50cywgdG91cnMsIGFuZCBhY3Rpdml0aWVzIGluIExvbmRvbicsXG4gIHVybDogUk9VVEVTLmV2ZW50cyxcbiAgICBjYXRlZ29yeTogJ05hdmlnYXRpb24nLFxuICAgIHRhZ3M6IFsnZXZlbnRzJywgJ3RvdXJzJywgJ2FjdGl2aXRpZXMnLCAnY3VsdHVyZScsICdzb2NpYWwgY2FsZW5kYXInXVxuICB9LFxuICB7XG4gICAgaWQ6ICdidXNpbmVzcy1kaXJlY3RvcnknLFxuICAgIHRpdGxlOiAnTHVzb3Bob25lIEJ1c2luZXNzIERpcmVjdG9yeScsXG4gICAgZGVzY3JpcHRpb246ICdGaW5kIEx1c29waG9uZS1vd25lZCBidXNpbmVzc2VzIGFuZCBzZXJ2aWNlcyBpbiBMb25kb24nLFxuICAgIHVybDogJy9idXNpbmVzcy1kaXJlY3RvcnknLFxuICAgIGNhdGVnb3J5OiAnRGlyZWN0b3J5JyxcbiAgICB0YWdzOiBbJ2J1c2luZXNzZXMnLCAnc2VydmljZXMnLCAnZGlyZWN0b3J5JywgJ3BvcnR1Z3Vlc2Ugb3duZWQnLCAnc3VwcG9ydCBsb2NhbCddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2NvbW11bml0eS1ndWlkZWxpbmVzJyxcbiAgICB0aXRsZTogJ0NvbW11bml0eSBHdWlkZWxpbmVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIGFib3V0IG91ciBjb21tdW5pdHkgc3RhbmRhcmRzIGFuZCBtZW1iZXJzaGlwIGd1aWRlbGluZXMnLFxuICAgIHVybDogJy9jb21tdW5pdHktZ3VpZGVsaW5lcycsXG4gICAgY2F0ZWdvcnk6ICdTdXBwb3J0JyxcbiAgICB0YWdzOiBbJ2d1aWRlbGluZXMnLCAncnVsZXMnLCAnY29tbXVuaXR5IHN0YW5kYXJkcycsICdtZW1iZXJzaGlwJywgJ3NhZmV0eSddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2hlbHAnLFxuICAgIHRpdGxlOiAnSGVscCAmIFN1cHBvcnQnLFxuICAgIGRlc2NyaXB0aW9uOiAnR2V0IGhlbHAgd2l0aCB5b3VyIEx1c29Ub3duIGFjY291bnQgYW5kIGZpbmQgYW5zd2VycyB0byBjb21tb24gcXVlc3Rpb25zJyxcbiAgICB1cmw6ICcvaGVscCcsXG4gICAgY2F0ZWdvcnk6ICdTdXBwb3J0JyxcbiAgICB0YWdzOiBbJ2hlbHAnLCAnc3VwcG9ydCcsICdmYXEnLCAnYWNjb3VudCcsICdhc3Npc3RhbmNlJ11cbiAgfSxcbiAge1xuICAgIGlkOiAncHJpY2luZycsXG4gICAgdGl0bGU6ICdNZW1iZXJzaGlwIFByaWNpbmcnLFxuICAgIGRlc2NyaXB0aW9uOiAnRXhwbG9yZSBvdXIgbWVtYmVyc2hpcCBwbGFucyBhbmQgZmluZCB0aGUgcGVyZmVjdCBmaXQgZm9yIHlvdXIgTHVzb3Bob25lIHNvY2lhbCBjYWxlbmRhcicsXG4gICAgdXJsOiAnL3ByaWNpbmcnLFxuICAgIGNhdGVnb3J5OiAnTWVtYmVyc2hpcCcsXG4gICAgdGFnczogWydwcmljaW5nJywgJ21lbWJlcnNoaXAnLCAncGxhbnMnLCAnc3Vic2NyaXB0aW9uJywgJ3ByZW1pdW0nXVxuICB9LFxuICB7XG4gICAgaWQ6ICdzYWZldHknLFxuICAgIHRpdGxlOiAnU2FmZXR5IENlbnRlcicsXG4gICAgZGVzY3JpcHRpb246ICdMZWFybiBhYm91dCBvdXIgc2FmZXR5IG1lYXN1cmVzIGFuZCBob3cgdG8gc3RheSBzYWZlIGluIHRoZSBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eScsXG4gICAgdXJsOiAnL3NhZmV0eScsXG4gICAgY2F0ZWdvcnk6ICdTYWZldHknLFxuICAgIHRhZ3M6IFsnc2FmZXR5JywgJ3NlY3VyaXR5JywgJ3Byb3RlY3Rpb24nLCAnY29tbXVuaXR5IHNhZmV0eScsICdndWlkZWxpbmVzJ11cbiAgfVxuXVxuXG4vLyBUZXh0IHNpbWlsYXJpdHkgZnVuY3Rpb24gZm9yIHNlYXJjaCByYW5raW5nXG5mdW5jdGlvbiBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm06IHN0cmluZywgdGV4dDogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3Qgc2VhcmNoID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpXG4gIGNvbnN0IHRhcmdldCA9IHRleHQudG9Mb3dlckNhc2UoKVxuICBcbiAgLy8gRXhhY3QgbWF0Y2ggZ2V0cyBoaWdoZXN0IHNjb3JlXG4gIGlmICh0YXJnZXQuaW5jbHVkZXMoc2VhcmNoKSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGFyZ2V0LmluZGV4T2Yoc2VhcmNoKVxuICAgIC8vIEJvbnVzIGZvciBtYXRjaGVzIGF0IHRoZSBiZWdpbm5pbmdcbiAgICBjb25zdCBwb3NpdGlvbkJvbnVzID0gaW5kZXggPT09IDAgPyAwLjUgOiAwXG4gICAgLy8gQm9udXMgZm9yIHdob2xlIHdvcmQgbWF0Y2hlc1xuICAgIGNvbnN0IHdvcmRCb251cyA9IHRhcmdldC5zcGxpdCgnICcpLnNvbWUod29yZCA9PiB3b3JkLmluY2x1ZGVzKHNlYXJjaCkpID8gMC4zIDogMFxuICAgIHJldHVybiAxICsgcG9zaXRpb25Cb251cyArIHdvcmRCb251c1xuICB9XG4gIFxuICAvLyBQYXJ0aWFsIHdvcmQgbWF0Y2hlc1xuICBjb25zdCBzZWFyY2hXb3JkcyA9IHNlYXJjaC5zcGxpdCgnICcpXG4gIGNvbnN0IHRhcmdldFdvcmRzID0gdGFyZ2V0LnNwbGl0KCcgJylcbiAgbGV0IG1hdGNoU2NvcmUgPSAwXG4gIFxuICBmb3IgKGNvbnN0IHNlYXJjaFdvcmQgb2Ygc2VhcmNoV29yZHMpIHtcbiAgICBmb3IgKGNvbnN0IHRhcmdldFdvcmQgb2YgdGFyZ2V0V29yZHMpIHtcbiAgICAgIGlmICh0YXJnZXRXb3JkLmluY2x1ZGVzKHNlYXJjaFdvcmQpIHx8IHNlYXJjaFdvcmQuaW5jbHVkZXModGFyZ2V0V29yZCkpIHtcbiAgICAgICAgbWF0Y2hTY29yZSArPSAwLjNcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBtYXRjaFNjb3JlXG59XG5cbi8vIFNlYXJjaCB0aHJvdWdoIGV2ZW50c1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaEV2ZW50cyhxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxTZWFyY2hSZXN1bHRbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGV2ZW50U2VydmljZS5nZXRFdmVudHMoKVxuICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKVxuICAgIFxuICAgIGlmICghc2VhcmNoVGVybSkgcmV0dXJuIFtdXG4gICAgXG4gICAgY29uc3QgcmVzdWx0czogQXJyYXk8U2VhcmNoUmVzdWx0ICYgeyBzY29yZTogbnVtYmVyIH0+ID0gW11cbiAgICBcbiAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgbGV0IHNjb3JlID0gMFxuICAgICAgXG4gICAgICAvLyBTZWFyY2ggaW4gdGl0bGVcbiAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZXZlbnQudGl0bGUpICogM1xuICAgICAgXG4gICAgICAvLyBTZWFyY2ggaW4gZGVzY3JpcHRpb25cbiAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZXZlbnQuZGVzY3JpcHRpb24pICogMlxuICAgICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCBldmVudC5sb25nRGVzY3JpcHRpb24pICogMS41XG4gICAgICBcbiAgICAgIC8vIFNlYXJjaCBpbiBsb2NhdGlvblxuICAgICAgaWYgKGV2ZW50LmxvY2F0aW9uKSB7XG4gICAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZXZlbnQubG9jYXRpb24pICogMlxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZWFyY2ggaW4gY2F0ZWdvcnlcbiAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZXZlbnQuY2F0ZWdvcnkpICogMS41XG4gICAgICBcbiAgICAgIC8vIFNlYXJjaCBpbiB0YWdzXG4gICAgICBmb3IgKGNvbnN0IHRhZyBvZiBldmVudC50YWdzIHx8IFtdKSB7XG4gICAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgdGFnKSAqIDFcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2VhcmNoIGluIGhvc3QgbmFtZVxuICAgICAgaWYgKGV2ZW50Lmhvc3ROYW1lKSB7XG4gICAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZXZlbnQuaG9zdE5hbWUpICogMVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2NvcmUgPiAwLjUpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBpZDogZXZlbnQuaWQsXG4gICAgICAgICAgdHlwZTogJ2V2ZW50JyxcbiAgICAgICAgICB0aXRsZTogZXZlbnQudGl0bGUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGV2ZW50LmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHVybDogYC9ldmVudHMvJHtldmVudC5pZH1gLFxuICAgICAgICAgIGxvY2F0aW9uOiBldmVudC5sb2NhdGlvbixcbiAgICAgICAgICBkYXRlOiBldmVudC5kYXRlLFxuICAgICAgICAgIGNhdGVnb3J5OiBldmVudC5jYXRlZ29yeSxcbiAgICAgICAgICB0YWdzOiBldmVudC50YWdzLFxuICAgICAgICAgIGltYWdlOiBldmVudC5pbWFnZXM/LlswXSxcbiAgICAgICAgICBwcmljZTogZXZlbnQucHJpY2UsXG4gICAgICAgICAgc2NvcmVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU29ydCBieSByZWxldmFuY2Ugc2NvcmUgYW5kIHJldHVybiB0b3AgcmVzdWx0c1xuICAgIHJldHVybiByZXN1bHRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXG4gICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAubWFwKCh7IHNjb3JlLCAuLi5yZXN1bHQgfSkgPT4gcmVzdWx0KVxuICAgICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGV2ZW50czonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG4vLyBTZWFyY2ggdGhyb3VnaCBidXNpbmVzc2VzLCBncm91cHMsIGFuZCBwYWdlc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaENvbnRlbnQocXVlcnk6IHN0cmluZyk6IFByb21pc2U8U2VhcmNoUmVzdWx0W10+IHtcbiAgY29uc3Qgc2VhcmNoVGVybSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkudHJpbSgpXG4gIFxuICBpZiAoIXNlYXJjaFRlcm0pIHJldHVybiBbXVxuICBcbiAgY29uc3QgcmVzdWx0czogQXJyYXk8U2VhcmNoUmVzdWx0ICYgeyBzY29yZTogbnVtYmVyIH0+ID0gW11cbiAgXG4gIC8vIFNlYXJjaCBidXNpbmVzc2VzXG4gIGZvciAoY29uc3QgYnVzaW5lc3Mgb2YgbW9ja0J1c2luZXNzZXMpIHtcbiAgICBsZXQgc2NvcmUgPSAwXG4gICAgXG4gICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCBidXNpbmVzcy5uYW1lKSAqIDNcbiAgICBzY29yZSArPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm0sIGJ1c2luZXNzLmRlc2NyaXB0aW9uKSAqIDJcbiAgICBzY29yZSArPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm0sIGJ1c2luZXNzLmNhdGVnb3J5KSAqIDEuNVxuICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgYnVzaW5lc3MubG9jYXRpb24pICogMlxuICAgIFxuICAgIGZvciAoY29uc3QgdGFnIG9mIGJ1c2luZXNzLnRhZ3MpIHtcbiAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgdGFnKSAqIDFcbiAgICB9XG4gICAgXG4gICAgaWYgKHNjb3JlID4gMC41KSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBpZDogYnVzaW5lc3MuaWQsXG4gICAgICAgIHR5cGU6ICdidXNpbmVzcycsXG4gICAgICAgIHRpdGxlOiBidXNpbmVzcy5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogYnVzaW5lc3MuZGVzY3JpcHRpb24sXG4gICAgICAgIHVybDogYnVzaW5lc3MudXJsLFxuICAgICAgICBsb2NhdGlvbjogYnVzaW5lc3MubG9jYXRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBidXNpbmVzcy5jYXRlZ29yeSxcbiAgICAgICAgdGFnczogYnVzaW5lc3MudGFncyxcbiAgICAgICAgaW1hZ2U6IGJ1c2luZXNzLmltYWdlLFxuICAgICAgICByYXRpbmc6IGJ1c2luZXNzLnJhdGluZyxcbiAgICAgICAgc2NvcmVcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIFxuICAvLyBTZWFyY2ggZ3JvdXBzXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgbW9ja0dyb3Vwcykge1xuICAgIGxldCBzY29yZSA9IDBcbiAgICBcbiAgICBzY29yZSArPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm0sIGdyb3VwLm5hbWUpICogM1xuICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZ3JvdXAuZGVzY3JpcHRpb24pICogMlxuICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgZ3JvdXAuY2F0ZWdvcnkpICogMS41XG4gICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCBncm91cC5sb2NhdGlvbikgKiAxXG4gICAgXG4gICAgZm9yIChjb25zdCB0YWcgb2YgZ3JvdXAudGFncykge1xuICAgICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCB0YWcpICogMVxuICAgIH1cbiAgICBcbiAgICBpZiAoc2NvcmUgPiAwLjUpIHtcbiAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgIGlkOiBncm91cC5pZCxcbiAgICAgICAgdHlwZTogJ2dyb3VwJyxcbiAgICAgICAgdGl0bGU6IGdyb3VwLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBncm91cC5kZXNjcmlwdGlvbixcbiAgICAgICAgdXJsOiBncm91cC51cmwsXG4gICAgICAgIGxvY2F0aW9uOiBncm91cC5sb2NhdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IGdyb3VwLmNhdGVnb3J5LFxuICAgICAgICB0YWdzOiBncm91cC50YWdzLFxuICAgICAgICBpbWFnZTogZ3JvdXAuaW1hZ2UsXG4gICAgICAgIHNjb3JlXG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBcbiAgLy8gU2VhcmNoIHByZW1pdW0gc2VydmljZXNcbiAgZm9yIChjb25zdCBzZXJ2aWNlIG9mIHByZW1pdW1TZXJ2aWNlcykge1xuICAgIGxldCBzY29yZSA9IDBcbiAgICBcbiAgICBzY29yZSArPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm0sIHNlcnZpY2UubmFtZSkgKiAzXG4gICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCBzZXJ2aWNlLmRlc2NyaXB0aW9uKSAqIDJcbiAgICBzY29yZSArPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm0sIHNlcnZpY2UuY2F0ZWdvcnkpICogMS41XG4gICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCBzZXJ2aWNlLmxvY2F0aW9uKSAqIDFcbiAgICBcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBzZXJ2aWNlLnRhZ3MpIHtcbiAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgdGFnKSAqIDFcbiAgICB9XG4gICAgXG4gICAgaWYgKHNjb3JlID4gMC41KSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBpZDogc2VydmljZS5pZCxcbiAgICAgICAgdHlwZTogJ3NlcnZpY2UnLFxuICAgICAgICB0aXRsZTogc2VydmljZS5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogc2VydmljZS5kZXNjcmlwdGlvbixcbiAgICAgICAgdXJsOiBzZXJ2aWNlLnVybCxcbiAgICAgICAgbG9jYXRpb246IHNlcnZpY2UubG9jYXRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBzZXJ2aWNlLmNhdGVnb3J5LFxuICAgICAgICB0YWdzOiBzZXJ2aWNlLnRhZ3MsXG4gICAgICAgIGltYWdlOiBzZXJ2aWNlLmltYWdlLFxuICAgICAgICBwcmljZTogc2VydmljZS5wcmljZSxcbiAgICAgICAgcmF0aW5nOiBzZXJ2aWNlLnJhdGluZyxcbiAgICAgICAgc2NvcmVcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gU2VhcmNoIHBhZ2VzXG4gIGZvciAoY29uc3QgcGFnZSBvZiBtb2NrUGFnZXMpIHtcbiAgICBsZXQgc2NvcmUgPSAwXG4gICAgXG4gICAgc2NvcmUgKz0gY2FsY3VsYXRlU2ltaWxhcml0eShzZWFyY2hUZXJtLCBwYWdlLnRpdGxlKSAqIDNcbiAgICBzY29yZSArPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHNlYXJjaFRlcm0sIHBhZ2UuZGVzY3JpcHRpb24pICogMlxuICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgcGFnZS5jYXRlZ29yeSkgKiAxLjVcbiAgICBcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBwYWdlLnRhZ3MpIHtcbiAgICAgIHNjb3JlICs9IGNhbGN1bGF0ZVNpbWlsYXJpdHkoc2VhcmNoVGVybSwgdGFnKSAqIDFcbiAgICB9XG4gICAgXG4gICAgaWYgKHNjb3JlID4gMC41KSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBpZDogcGFnZS5pZCxcbiAgICAgICAgdHlwZTogJ3BhZ2UnLFxuICAgICAgICB0aXRsZTogcGFnZS50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHBhZ2UuZGVzY3JpcHRpb24sXG4gICAgICAgIHVybDogcGFnZS51cmwsXG4gICAgICAgIGNhdGVnb3J5OiBwYWdlLmNhdGVnb3J5LFxuICAgICAgICB0YWdzOiBwYWdlLnRhZ3MsXG4gICAgICAgIHNjb3JlXG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBcbiAgLy8gU29ydCBieSByZWxldmFuY2Ugc2NvcmUgYW5kIHJldHVybiB0b3AgcmVzdWx0c1xuICByZXR1cm4gcmVzdWx0c1xuICAgIC5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSlcbiAgICAuc2xpY2UoMCwgMTUpXG4gICAgLm1hcCgoeyBzY29yZSwgLi4ucmVzdWx0IH0pID0+IHJlc3VsdClcbn1cblxuLy8gQ29tYmluZWQgc2VhcmNoIGZ1bmN0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgZXZlbnRzOiBTZWFyY2hSZXN1bHRbXVxuICBidXNpbmVzc2VzOiBTZWFyY2hSZXN1bHRbXVxuICBncm91cHM6IFNlYXJjaFJlc3VsdFtdXG4gIHBhZ2VzOiBTZWFyY2hSZXN1bHRbXVxuICBhbGw6IFNlYXJjaFJlc3VsdFtdXG59PiB7XG4gIGNvbnN0IFtldmVudFJlc3VsdHMsIGNvbnRlbnRSZXN1bHRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBzZWFyY2hFdmVudHMocXVlcnkpLFxuICAgIHNlYXJjaENvbnRlbnQocXVlcnkpXG4gIF0pXG4gIFxuICBjb25zdCBidXNpbmVzc2VzID0gY29udGVudFJlc3VsdHMuZmlsdGVyKHIgPT4gci50eXBlID09PSAnYnVzaW5lc3MnKVxuICBjb25zdCBncm91cHMgPSBjb250ZW50UmVzdWx0cy5maWx0ZXIociA9PiByLnR5cGUgPT09ICdncm91cCcpXG4gIGNvbnN0IHBhZ2VzID0gY29udGVudFJlc3VsdHMuZmlsdGVyKHIgPT4gci50eXBlID09PSAncGFnZScpXG4gIFxuICBjb25zdCBhbGwgPSBbLi4uZXZlbnRSZXN1bHRzLCAuLi5jb250ZW50UmVzdWx0c11cbiAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgLy8gUHJpb3JpdHkgb3JkZXI6IGV2ZW50cywgYnVzaW5lc3NlcywgZ3JvdXBzLCBwYWdlc1xuICAgICAgY29uc3QgdHlwZU9yZGVyID0geyBldmVudDogMCwgYnVzaW5lc3M6IDEsIGdyb3VwOiAyLCBwYWdlOiAzIH1cbiAgICAgIGNvbnN0IGFPcmRlciA9IHR5cGVPcmRlclthLnR5cGUgYXMga2V5b2YgdHlwZW9mIHR5cGVPcmRlcl0gfHwgNFxuICAgICAgY29uc3QgYk9yZGVyID0gdHlwZU9yZGVyW2IudHlwZSBhcyBrZXlvZiB0eXBlb2YgdHlwZU9yZGVyXSB8fCA0XG4gICAgICBcbiAgICAgIGlmIChhT3JkZXIgIT09IGJPcmRlcikge1xuICAgICAgICByZXR1cm4gYU9yZGVyIC0gYk9yZGVyXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFdpdGhpbiBzYW1lIHR5cGUsIHNvcnQgYnkgcmVsZXZhbmNlIChhbHJlYWR5IHNvcnRlZCBpbiBpbmRpdmlkdWFsIHNlYXJjaGVzKVxuICAgICAgcmV0dXJuIDBcbiAgICB9KVxuICBcbiAgcmV0dXJuIHtcbiAgICBldmVudHM6IGV2ZW50UmVzdWx0cyxcbiAgICBidXNpbmVzc2VzLFxuICAgIGdyb3VwcyxcbiAgICBwYWdlcyxcbiAgICBhbGxcbiAgfVxufVxuXG4vLyBQb3B1bGFyIHNlYXJjaCBzdWdnZXN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBvcHVsYXJTZWFyY2hlcyhsYW5ndWFnZTogJ2VuJyB8ICdwdCcgPSAnZW4nKTogc3RyaW5nW10ge1xuICBpZiAobGFuZ3VhZ2UgPT09ICdwdCcpIHtcbiAgICByZXR1cm4gW1xuICAgICAgJ2V2ZW50b3MgcG9ydHVndWVzZXMnLFxuICAgICAgJ3Jlc3RhdXJhbnRlcyBwb3J0dWd1ZXNlcycsXG4gICAgICAnZmFkbycsXG4gICAgICAncGFzdGVsIGRlIG5hdGEnLFxuICAgICAgJ2Z1dGVib2wnLFxuICAgICAgJ25ldHdvcmtpbmcnLFxuICAgICAgJ2pvdmVucyBwb3J0dWd1ZXNlcycsXG4gICAgICAnbmVnw7NjaW9zIHBvcnR1Z3Vlc2VzJyxcbiAgICAgICdjdWx0dXJhIHBvcnR1Z3Vlc2EnLFxuICAgICAgJ2zDrW5ndWEgcG9ydHVndWVzYSdcbiAgICBdXG4gIH1cbiAgXG4gIHJldHVybiBbXG4gICAgJ3BvcnR1Z3Vlc2UgZXZlbnRzJyxcbiAgICAnZmFkbyBtdXNpYycsXG4gICAgJ3BvcnR1Z3Vlc2UgcmVzdGF1cmFudHMnLFxuICAgICduZXR3b3JraW5nJyxcbiAgICAneW91bmcgcG9ydHVndWVzZScsXG4gICAgJ2Zvb3RiYWxsJyxcbiAgICAncGFzdMOpaXMgZGUgbmF0YScsXG4gICAgJ3BvcnR1Z3Vlc2UgYnVzaW5lc3NlcycsXG4gICAgJ2N1bHR1cmFsIGV2ZW50cycsXG4gICAgJ2xhbmd1YWdlIGV4Y2hhbmdlJ1xuICBdXG59XG5cbi8vIFNlYXJjaCBjYXRlZ29yaWVzIGZvciBmaWx0ZXJpbmdcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWFyY2hDYXRlZ29yaWVzKGxhbmd1YWdlOiAnZW4nIHwgJ3B0JyA9ICdlbicpOiBBcnJheTx7XG4gIGlkOiBzdHJpbmdcbiAgbGFiZWw6IHN0cmluZ1xuICB0eXBlOiBTZWFyY2hSZXN1bHRbJ3R5cGUnXVtdXG59PiB7XG4gIGlmIChsYW5ndWFnZSA9PT0gJ3B0Jykge1xuICAgIHJldHVybiBbXG4gICAgICB7IGlkOiAnYWxsJywgbGFiZWw6ICdUb2RvcycsIHR5cGU6IFsnZXZlbnQnLCAnYnVzaW5lc3MnLCAnZ3JvdXAnLCAncGFnZSddIH0sXG4gICAgICB7IGlkOiAnZXZlbnRzJywgbGFiZWw6ICdFdmVudG9zJywgdHlwZTogWydldmVudCddIH0sXG4gICAgICB7IGlkOiAnYnVzaW5lc3NlcycsIGxhYmVsOiAnTmVnw7NjaW9zJywgdHlwZTogWydidXNpbmVzcyddIH0sXG4gICAgICB7IGlkOiAnZ3JvdXBzJywgbGFiZWw6ICdHcnVwb3MnLCB0eXBlOiBbJ2dyb3VwJ10gfSxcbiAgICAgIHsgaWQ6ICdwYWdlcycsIGxhYmVsOiAnUMOhZ2luYXMnLCB0eXBlOiBbJ3BhZ2UnXSB9XG4gICAgXVxuICB9XG4gIFxuICByZXR1cm4gW1xuICAgIHsgaWQ6ICdhbGwnLCBsYWJlbDogJ0FsbCcsIHR5cGU6IFsnZXZlbnQnLCAnYnVzaW5lc3MnLCAnZ3JvdXAnLCAncGFnZSddIH0sXG4gICAgeyBpZDogJ2V2ZW50cycsIGxhYmVsOiAnRXZlbnRzJywgdHlwZTogWydldmVudCddIH0sXG4gICAgeyBpZDogJ2J1c2luZXNzZXMnLCBsYWJlbDogJ0J1c2luZXNzZXMnLCB0eXBlOiBbJ2J1c2luZXNzJ10gfSxcbiAgICB7IGlkOiAnZ3JvdXBzJywgbGFiZWw6ICdHcm91cHMnLCB0eXBlOiBbJ2dyb3VwJ10gfSxcbiAgICB7IGlkOiAncGFnZXMnLCBsYWJlbDogJ1BhZ2VzJywgdHlwZTogWydwYWdlJ10gfVxuICBdXG59Il0sIm5hbWVzIjpbImdldFBvcHVsYXJTZWFyY2hlcyIsImdldFNlYXJjaENhdGVnb3JpZXMiLCJzZWFyY2giLCJzZWFyY2hDb250ZW50Iiwic2VhcmNoRXZlbnRzIiwibW9ja0J1c2luZXNzZXMiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwibG9jYXRpb24iLCJ1cmwiLCJpbWFnZSIsInJhdGluZyIsInRhZ3MiLCJtb2NrR3JvdXBzIiwibWVtYmVyQ291bnQiLCJwcmVtaXVtU2VydmljZXMiLCJJTUFHRVMiLCJ0cmFuc3BvcnQiLCJleGVjdXRpdmUiLCJwcmljZSIsImNsb3NlUHJvdGVjdGlvbiIsInNlY3VyaXR5IiwibW9ja1BhZ2VzIiwidGl0bGUiLCJST1VURVMiLCJldmVudHMiLCJjYWxjdWxhdGVTaW1pbGFyaXR5Iiwic2VhcmNoVGVybSIsInRleHQiLCJ0b0xvd2VyQ2FzZSIsInRhcmdldCIsImluY2x1ZGVzIiwiaW5kZXgiLCJpbmRleE9mIiwicG9zaXRpb25Cb251cyIsIndvcmRCb251cyIsInNwbGl0Iiwic29tZSIsIndvcmQiLCJzZWFyY2hXb3JkcyIsInRhcmdldFdvcmRzIiwibWF0Y2hTY29yZSIsInNlYXJjaFdvcmQiLCJ0YXJnZXRXb3JkIiwicXVlcnkiLCJldmVudFNlcnZpY2UiLCJnZXRFdmVudHMiLCJ0cmltIiwicmVzdWx0cyIsImV2ZW50Iiwic2NvcmUiLCJsb25nRGVzY3JpcHRpb24iLCJ0YWciLCJob3N0TmFtZSIsInB1c2giLCJ0eXBlIiwiZGF0ZSIsImltYWdlcyIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwibWFwIiwicmVzdWx0IiwiZXJyb3IiLCJjb25zb2xlIiwiYnVzaW5lc3MiLCJncm91cCIsInNlcnZpY2UiLCJwYWdlIiwiZXZlbnRSZXN1bHRzIiwiY29udGVudFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwiYnVzaW5lc3NlcyIsImZpbHRlciIsInIiLCJncm91cHMiLCJwYWdlcyIsInR5cGVPcmRlciIsImFPcmRlciIsImJPcmRlciIsImxhbmd1YWdlIiwibGFiZWwiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7SUFzZGdCQSxrQkFBa0I7ZUFBbEJBOztJQStCQUMsbUJBQW1CO2VBQW5CQTs7SUF4RU1DLE1BQU07ZUFBTkE7O0lBbklBQyxhQUFhO2VBQWJBOztJQXBFQUMsWUFBWTtlQUFaQTs7O3dCQXBPYzt3QkFDYjtxQkFDQTtBQWlCdkIsZ0NBQWdDO0FBQ2hDLE1BQU1DLGlCQUFpQjtJQUNyQjtRQUNFQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtZQUFDO1lBQW1CO1lBQXFCO1lBQWtCO1lBQVk7U0FBUztJQUN4RjtJQUNBO1FBQ0VSLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFVBQVU7UUFDVkMsVUFBVTtRQUNWQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxNQUFNO1lBQUM7WUFBUTtZQUF5QjtZQUFjO1lBQWU7U0FBUztJQUNoRjtJQUNBO1FBQ0VSLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFVBQVU7UUFDVkMsVUFBVTtRQUNWQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxNQUFNO1lBQUM7WUFBc0I7WUFBcUI7WUFBYTtZQUFXO1NBQVc7SUFDdkY7SUFDQTtRQUNFUixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtZQUFD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
100dc1d5c733321077b398b84d2f3a7d
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    PortugueseWidgetContainer: function() {
        return PortugueseWidgetContainer;
    },
    WidgetManager: function() {
        return WidgetManager;
    },
    WidgetPositioner: function() {
        return WidgetPositioner;
    },
    default: function() {
        return _default;
    },
    useWidget: function() {
        return useWidget;
    },
    useWidgetManager: function() {
        return useWidgetManager;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _zindexlayers = require("../config/z-index-layers");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const WidgetManagerContext = /*#__PURE__*/ (0, _react.createContext)(null);
function WidgetManager({ children, className = "" }) {
    const [isAppBarVisible, setAppBarVisible] = (0, _react.useState)(false);
    const [activeWidgets, setActiveWidgets] = (0, _react.useState)(new Set());
    // Listen for app bar visibility changes
    (0, _react.useEffect)(()=>{
        const handleAppBarShow = ()=>setAppBarVisible(true);
        const handleAppBarDismiss = ()=>setAppBarVisible(false);
        // Listen for custom events from AppDownloadBar
        window.addEventListener("appDownloadBarShown", handleAppBarShow);
        window.addEventListener("appDownloadBarDismissed", handleAppBarDismiss);
        // Check initial state
        const isDismissed = localStorage.getItem("lusotown_app_download_bar_dismissed");
        const hasShownInSession = sessionStorage.getItem("lusotown_app_download_shown");
        const shouldShowAppBar = !isDismissed && hasShownInSession === "true";
        setAppBarVisible(shouldShowAppBar);
        return ()=>{
            window.removeEventListener("appDownloadBarShown", handleAppBarShow);
            window.removeEventListener("appDownloadBarDismissed", handleAppBarDismiss);
        };
    }, []);
    const registerWidget = (id, type)=>{
        setActiveWidgets((prev)=>new Set(prev).add(id));
    };
    const unregisterWidget = (id)=>{
        setActiveWidgets((prev)=>{
            const newSet = new Set(prev);
            newSet.delete(id);
            return newSet;
        });
    };
    const getWidgetClasses = (type)=>{
        return (0, _zindexlayers.getMobileWidgetClasses)(type, isAppBarVisible);
    };
    const getWidgetZIndex = (type)=>{
        const zIndexMap = {
            appBar: _zindexlayers.Z_INDEX_LAYERS.appDownloadBar,
            notification: _zindexlayers.Z_INDEX_LAYERS.notification,
            fab: _zindexlayers.Z_INDEX_LAYERS.fabButton,
            chat: _zindexlayers.Z_INDEX_LAYERS.lusoBotWidget,
            activity: _zindexlayers.Z_INDEX_LAYERS.liveActivityWidget
        };
        return zIndexMap[type] || _zindexlayers.Z_INDEX_LAYERS.floatingBase;
    };
    const getBottomOffset = (type)=>{
        if (type === "appBar") return "0rem";
        return (0, _zindexlayers.getWidgetBottomOffset)(type, isAppBarVisible);
    };
    const contextValue = {
        isAppBarVisible,
        setAppBarVisible,
        registerWidget,
        unregisterWidget,
        getWidgetClasses,
        getWidgetZIndex,
        getBottomOffset,
        activeWidgets
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(WidgetManagerContext.Provider, {
        value: contextValue,
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: `widget-manager ${className}`,
            children: [
                children,
                process.env.NODE_ENV === "development" && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "fixed top-4 left-4 bg-black/80 text-white text-xs p-2 rounded-lg z-[9999] font-mono",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                "App Bar: ",
                                isAppBarVisible ? "Visible" : "Hidden"
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                "Active: ",
                                activeWidgets.size,
                                " widgets"
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "text-primary-300",
                            children: "Z-Index Hierarchy:"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "ml-2 space-y-1",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        "App Bar: ",
                                        _zindexlayers.Z_INDEX_LAYERS.appDownloadBar
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        "Notification: ",
                                        _zindexlayers.Z_INDEX_LAYERS.notification
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        "FAB: ",
                                        _zindexlayers.Z_INDEX_LAYERS.fabButton
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        "Chat: ",
                                        _zindexlayers.Z_INDEX_LAYERS.lusoBotWidget
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        "Activity: ",
                                        _zindexlayers.Z_INDEX_LAYERS.liveActivityWidget
                                    ]
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
}
function useWidgetManager() {
    const context = (0, _react.useContext)(WidgetManagerContext);
    if (!context) {
        throw new Error("useWidgetManager must be used within a WidgetManager");
    }
    return context;
}
function useWidget(id, type) {
    const manager = useWidgetManager();
    (0, _react.useEffect)(()=>{
        manager.registerWidget(id, type);
        return ()=>manager.unregisterWidget(id);
    }, [
        id,
        type,
        manager
    ]);
    return {
        isAppBarVisible: manager.isAppBarVisible,
        classes: manager.getWidgetClasses(type),
        zIndex: manager.getWidgetZIndex(type),
        bottomOffset: manager.getBottomOffset(type)
    };
}
function WidgetPositioner({ type, id, children, className = "" }) {
    const { classes } = useWidget(id, type);
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: `${classes} ${className}`,
        children: children
    });
}
function PortugueseWidgetContainer({ children, className = "", variant = "primary" }) {
    const variantClasses = {
        primary: "bg-gradient-to-r from-primary-500 to-secondary-500",
        secondary: "bg-white border-2 border-primary-200 text-primary-900",
        heritage: "bg-gradient-to-br from-green-600 via-red-500 to-yellow-500"
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: `
      ${variantClasses[variant]} 
      rounded-2xl shadow-lg transition-all duration-300
      ${className}
    `,
        children: children
    });
}
const _default = WidgetManager;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2NvbXBvbmVudHMvV2lkZ2V0TWFuYWdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgWl9JTkRFWF9MQVlFUlMsIGdldE1vYmlsZVdpZGdldENsYXNzZXMsIGdldFdpZGdldEJvdHRvbU9mZnNldCB9IGZyb20gJ0AvY29uZmlnL3otaW5kZXgtbGF5ZXJzJztcblxuLyoqXG4gKiBXaWRnZXQgTWFuYWdlbWVudCBTeXN0ZW0gQ29udGV4dFxuICogQ2VudHJhbGl6ZWQgcG9zaXRpb25pbmcgYW5kIHotaW5kZXggbWFuYWdlbWVudCBmb3IgYWxsIGZsb2F0aW5nIHdpZGdldHNcbiAqL1xuaW50ZXJmYWNlIFdpZGdldE1hbmFnZXJDb250ZXh0VHlwZSB7XG4gIGlzQXBwQmFyVmlzaWJsZTogYm9vbGVhbjtcbiAgc2V0QXBwQmFyVmlzaWJsZTogKHZpc2libGU6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHJlZ2lzdGVyV2lkZ2V0OiAoaWQ6IHN0cmluZywgdHlwZTogV2lkZ2V0VHlwZSkgPT4gdm9pZDtcbiAgdW5yZWdpc3RlcldpZGdldDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGdldFdpZGdldENsYXNzZXM6ICh0eXBlOiBXaWRnZXRUeXBlKSA9PiBzdHJpbmc7XG4gIGdldFdpZGdldFpJbmRleDogKHR5cGU6IFdpZGdldFR5cGUpID0+IG51bWJlcjtcbiAgZ2V0Qm90dG9tT2Zmc2V0OiAodHlwZTogV2lkZ2V0VHlwZSkgPT4gc3RyaW5nO1xuICBhY3RpdmVXaWRnZXRzOiBTZXQ8c3RyaW5nPjtcbn1cblxudHlwZSBXaWRnZXRUeXBlID0gJ2NoYXQnIHwgJ2FjdGl2aXR5JyB8ICdmYWInIHwgJ25vdGlmaWNhdGlvbicgfCAnYXBwQmFyJztcblxuY29uc3QgV2lkZ2V0TWFuYWdlckNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFdpZGdldE1hbmFnZXJDb250ZXh0VHlwZSB8IG51bGw+KG51bGwpO1xuXG5pbnRlcmZhY2UgV2lkZ2V0TWFuYWdlclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFByaW9yaXR5IDEgV2lkZ2V0IE1hbmFnZW1lbnQgU3lzdGVtXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBDZW50cmFsaXplZCB6LWluZGV4IGhpZXJhcmNoeSBtYW5hZ2VtZW50XG4gKiAtIER5bmFtaWMgd2lkZ2V0IHBvc2l0aW9uaW5nIGJhc2VkIG9uIGFwcCBiYXIgdmlzaWJpbGl0eVxuICogLSBNb2JpbGUtZmlyc3QgcmVzcG9uc2l2ZSBwb3NpdGlvbmluZ1xuICogLSBQb3J0dWd1ZXNlIGN1bHR1cmFsIHRoZW1pbmcgaW50ZWdyYXRpb25cbiAqIC0gV2lkZ2V0IHJlZ2lzdHJhdGlvbiBzeXN0ZW0gZm9yIGNvbmZsaWN0IHByZXZlbnRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFdpZGdldE1hbmFnZXIoeyBjaGlsZHJlbiwgY2xhc3NOYW1lID0gJycgfTogV2lkZ2V0TWFuYWdlclByb3BzKSB7XG4gIGNvbnN0IFtpc0FwcEJhclZpc2libGUsIHNldEFwcEJhclZpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWN0aXZlV2lkZ2V0cywgc2V0QWN0aXZlV2lkZ2V0c10gPSB1c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKTtcblxuICAvLyBMaXN0ZW4gZm9yIGFwcCBiYXIgdmlzaWJpbGl0eSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQXBwQmFyU2hvdyA9ICgpID0+IHNldEFwcEJhclZpc2libGUodHJ1ZSk7XG4gICAgY29uc3QgaGFuZGxlQXBwQmFyRGlzbWlzcyA9ICgpID0+IHNldEFwcEJhclZpc2libGUoZmFsc2UpO1xuXG4gICAgLy8gTGlzdGVuIGZvciBjdXN0b20gZXZlbnRzIGZyb20gQXBwRG93bmxvYWRCYXJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYXBwRG93bmxvYWRCYXJTaG93bicsIGhhbmRsZUFwcEJhclNob3cpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhcHBEb3dubG9hZEJhckRpc21pc3NlZCcsIGhhbmRsZUFwcEJhckRpc21pc3MpO1xuXG4gICAgLy8gQ2hlY2sgaW5pdGlhbCBzdGF0ZVxuICAgIGNvbnN0IGlzRGlzbWlzc2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2x1c290b3duX2FwcF9kb3dubG9hZF9iYXJfZGlzbWlzc2VkJyk7XG4gICAgY29uc3QgaGFzU2hvd25JblNlc3Npb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsdXNvdG93bl9hcHBfZG93bmxvYWRfc2hvd24nKTtcbiAgICBjb25zdCBzaG91bGRTaG93QXBwQmFyID0gIWlzRGlzbWlzc2VkICYmIGhhc1Nob3duSW5TZXNzaW9uID09PSAndHJ1ZSc7XG4gICAgc2V0QXBwQmFyVmlzaWJsZShzaG91bGRTaG93QXBwQmFyKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXBwRG93bmxvYWRCYXJTaG93bicsIGhhbmRsZUFwcEJhclNob3cpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FwcERvd25sb2FkQmFyRGlzbWlzc2VkJywgaGFuZGxlQXBwQmFyRGlzbWlzcyk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlZ2lzdGVyV2lkZ2V0ID0gKGlkOiBzdHJpbmcsIHR5cGU6IFdpZGdldFR5cGUpID0+IHtcbiAgICBzZXRBY3RpdmVXaWRnZXRzKHByZXYgPT4gbmV3IFNldChwcmV2KS5hZGQoaWQpKTtcbiAgfTtcblxuICBjb25zdCB1bnJlZ2lzdGVyV2lkZ2V0ID0gKGlkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRBY3RpdmVXaWRnZXRzKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3U2V0ID0gbmV3IFNldChwcmV2KTtcbiAgICAgIG5ld1NldC5kZWxldGUoaWQpO1xuICAgICAgcmV0dXJuIG5ld1NldDtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRXaWRnZXRDbGFzc2VzID0gKHR5cGU6IFdpZGdldFR5cGUpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiBnZXRNb2JpbGVXaWRnZXRDbGFzc2VzKHR5cGUsIGlzQXBwQmFyVmlzaWJsZSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0V2lkZ2V0WkluZGV4ID0gKHR5cGU6IFdpZGdldFR5cGUpOiBudW1iZXIgPT4ge1xuICAgIGNvbnN0IHpJbmRleE1hcDogUmVjb3JkPFdpZGdldFR5cGUsIG51bWJlcj4gPSB7XG4gICAgICBhcHBCYXI6IFpfSU5ERVhfTEFZRVJTLmFwcERvd25sb2FkQmFyLFxuICAgICAgbm90aWZpY2F0aW9uOiBaX0lOREVYX0xBWUVSUy5ub3RpZmljYXRpb24sXG4gICAgICBmYWI6IFpfSU5ERVhfTEFZRVJTLmZhYkJ1dHRvbixcbiAgICAgIGNoYXQ6IFpfSU5ERVhfTEFZRVJTLmx1c29Cb3RXaWRnZXQsXG4gICAgICBhY3Rpdml0eTogWl9JTkRFWF9MQVlFUlMubGl2ZUFjdGl2aXR5V2lkZ2V0LFxuICAgIH07XG5cbiAgICByZXR1cm4gekluZGV4TWFwW3R5cGVdIHx8IFpfSU5ERVhfTEFZRVJTLmZsb2F0aW5nQmFzZTtcbiAgfTtcblxuICBjb25zdCBnZXRCb3R0b21PZmZzZXQgPSAodHlwZTogV2lkZ2V0VHlwZSk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHR5cGUgPT09ICdhcHBCYXInKSByZXR1cm4gJzByZW0nO1xuICAgIHJldHVybiBnZXRXaWRnZXRCb3R0b21PZmZzZXQodHlwZSBhcyBFeGNsdWRlPFdpZGdldFR5cGUsICdhcHBCYXInPiwgaXNBcHBCYXJWaXNpYmxlKTtcbiAgfTtcblxuICBjb25zdCBjb250ZXh0VmFsdWU6IFdpZGdldE1hbmFnZXJDb250ZXh0VHlwZSA9IHtcbiAgICBpc0FwcEJhclZpc2libGUsXG4gICAgc2V0QXBwQmFyVmlzaWJsZSxcbiAgICByZWdpc3RlcldpZGdldCxcbiAgICB1bnJlZ2lzdGVyV2lkZ2V0LFxuICAgIGdldFdpZGdldENsYXNzZXMsXG4gICAgZ2V0V2lkZ2V0WkluZGV4LFxuICAgIGdldEJvdHRvbU9mZnNldCxcbiAgICBhY3RpdmVXaWRnZXRzLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFdpZGdldE1hbmFnZXJDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2B3aWRnZXQtbWFuYWdlciAke2NsYXNzTmFtZX1gfT5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgICBcbiAgICAgICAgey8qIFdpZGdldCBEZWJ1ZyBJbmZvcm1hdGlvbiAoZGV2ZWxvcG1lbnQgb25seSkgKi99XG4gICAgICAgIHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCB0b3AtNCBsZWZ0LTQgYmctYmxhY2svODAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkLWxnIHotWzk5OTldIGZvbnQtbW9ub1wiPlxuICAgICAgICAgICAgPGRpdj5BcHAgQmFyOiB7aXNBcHBCYXJWaXNpYmxlID8gJ1Zpc2libGUnIDogJ0hpZGRlbid9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PkFjdGl2ZToge2FjdGl2ZVdpZGdldHMuc2l6ZX0gd2lkZ2V0czwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXByaW1hcnktMzAwXCI+Wi1JbmRleCBIaWVyYXJjaHk6PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLTIgc3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgIDxkaXY+QXBwIEJhcjoge1pfSU5ERVhfTEFZRVJTLmFwcERvd25sb2FkQmFyfTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2Pk5vdGlmaWNhdGlvbjoge1pfSU5ERVhfTEFZRVJTLm5vdGlmaWNhdGlvbn08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdj5GQUI6IHtaX0lOREVYX0xBWUVSUy5mYWJCdXR0b259PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXY+Q2hhdDoge1pfSU5ERVhfTEFZRVJTLmx1c29Cb3RXaWRnZXR9PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXY+QWN0aXZpdHk6IHtaX0lOREVYX0xBWUVSUy5saXZlQWN0aXZpdHlXaWRnZXR9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvV2lkZ2V0TWFuYWdlckNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbi8qKlxuICogSG9vayB0byBhY2Nlc3Mgd2lkZ2V0IG1hbmFnZXIgY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlV2lkZ2V0TWFuYWdlcigpOiBXaWRnZXRNYW5hZ2VyQ29udGV4dFR5cGUge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChXaWRnZXRNYW5hZ2VyQ29udGV4dCk7XG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlV2lkZ2V0TWFuYWdlciBtdXN0IGJlIHVzZWQgd2l0aGluIGEgV2lkZ2V0TWFuYWdlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG4vKipcbiAqIEhvb2sgZm9yIHdpZGdldCByZWdpc3RyYXRpb24gYW5kIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VXaWRnZXQoaWQ6IHN0cmluZywgdHlwZTogV2lkZ2V0VHlwZSkge1xuICBjb25zdCBtYW5hZ2VyID0gdXNlV2lkZ2V0TWFuYWdlcigpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWFuYWdlci5yZWdpc3RlcldpZGdldChpZCwgdHlwZSk7XG4gICAgcmV0dXJuICgpID0+IG1hbmFnZXIudW5yZWdpc3RlcldpZGdldChpZCk7XG4gIH0sIFtpZCwgdHlwZSwgbWFuYWdlcl0pO1xuXG4gIHJldHVybiB7XG4gICAgaXNBcHBCYXJWaXNpYmxlOiBtYW5hZ2VyLmlzQXBwQmFyVmlzaWJsZSxcbiAgICBjbGFzc2VzOiBtYW5hZ2VyLmdldFdpZGdldENsYXNzZXModHlwZSksXG4gICAgekluZGV4OiBtYW5hZ2VyLmdldFdpZGdldFpJbmRleCh0eXBlKSxcbiAgICBib3R0b21PZmZzZXQ6IG1hbmFnZXIuZ2V0Qm90dG9tT2Zmc2V0KHR5cGUpLFxuICB9O1xufVxuXG4vKipcbiAqIFdpZGdldCBwb3NpdGlvbmluZyB1dGlsaXRpZXMgY29tcG9uZW50IGZvciBkaXJlY3QgdXNhZ2VcbiAqL1xuaW50ZXJmYWNlIFdpZGdldFBvc2l0aW9uZXJQcm9wcyB7XG4gIHR5cGU6IFdpZGdldFR5cGU7XG4gIGlkOiBzdHJpbmc7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFdpZGdldFBvc2l0aW9uZXIoeyB0eXBlLCBpZCwgY2hpbGRyZW4sIGNsYXNzTmFtZSA9ICcnIH06IFdpZGdldFBvc2l0aW9uZXJQcm9wcykge1xuICBjb25zdCB7IGNsYXNzZXMgfSA9IHVzZVdpZGdldChpZCwgdHlwZSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Y2xhc3Nlc30gJHtjbGFzc05hbWV9YH0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8qKlxuICogUG9ydHVndWVzZS10aGVtZWQgd2lkZ2V0IGNvbnRhaW5lciB3aXRoIGN1bHR1cmFsIHN0eWxpbmdcbiAqL1xuaW50ZXJmYWNlIFBvcnR1Z3Vlc2VXaWRnZXRDb250YWluZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgdmFyaWFudD86ICdwcmltYXJ5JyB8ICdzZWNvbmRhcnknIHwgJ2hlcml0YWdlJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBvcnR1Z3Vlc2VXaWRnZXRDb250YWluZXIoeyBcbiAgY2hpbGRyZW4sIFxuICBjbGFzc05hbWUgPSAnJywgXG4gIHZhcmlhbnQgPSAncHJpbWFyeScgXG59OiBQb3J0dWd1ZXNlV2lkZ2V0Q29udGFpbmVyUHJvcHMpIHtcbiAgY29uc3QgdmFyaWFudENsYXNzZXMgPSB7XG4gICAgcHJpbWFyeTogJ2JnLWdyYWRpZW50LXRvLXIgZnJvbS1wcmltYXJ5LTUwMCB0by1zZWNvbmRhcnktNTAwJyxcbiAgICBzZWNvbmRhcnk6ICdiZy13aGl0ZSBib3JkZXItMiBib3JkZXItcHJpbWFyeS0yMDAgdGV4dC1wcmltYXJ5LTkwMCcsXG4gICAgaGVyaXRhZ2U6ICdiZy1ncmFkaWVudC10by1iciBmcm9tLWdyZWVuLTYwMCB2aWEtcmVkLTUwMCB0by15ZWxsb3ctNTAwJ1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BcbiAgICAgICR7dmFyaWFudENsYXNzZXNbdmFyaWFudF19IFxuICAgICAgcm91bmRlZC0yeGwgc2hhZG93LWxnIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMFxuICAgICAgJHtjbGFzc05hbWV9XG4gICAgYH0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdpZGdldE1hbmFnZXI7Il0sIm5hbWVzIjpbIlBvcnR1Z3Vlc2VXaWRnZXRDb250YWluZXIiLCJXaWRnZXRNYW5hZ2VyIiwiV2lkZ2V0UG9zaXRpb25lciIsInVzZVdpZGdldCIsInVzZVdpZGdldE1hbmFnZXIiLCJXaWRnZXRNYW5hZ2VyQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJjaGlsZHJlbiIsImNsYXNzTmFtZSIsImlzQXBwQmFyVmlzaWJsZSIsInNldEFwcEJhclZpc2libGUiLCJ1c2VTdGF0ZSIsImFjdGl2ZVdpZGdldHMiLCJzZXRBY3RpdmVXaWRnZXRzIiwiU2V0IiwidXNlRWZmZWN0IiwiaGFuZGxlQXBwQmFyU2hvdyIsImhhbmRsZUFwcEJhckRpc21pc3MiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaXNEaXNtaXNzZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFzU2hvd25JblNlc3Npb24iLCJzZXNzaW9uU3RvcmFnZSIsInNob3VsZFNob3dBcHBCYXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVnaXN0ZXJXaWRnZXQiLCJpZCIsInR5cGUiLCJwcmV2IiwiYWRkIiwidW5yZWdpc3RlcldpZGdldCIsIm5ld1NldCIsImRlbGV0ZSIsImdldFdpZGdldENsYXNzZXMiLCJnZXRNb2JpbGVXaWRnZXRDbGFzc2VzIiwiZ2V0V2lkZ2V0WkluZGV4IiwiekluZGV4TWFwIiwiYXBwQmFyIiwiWl9JTkRFWF9MQVlFUlMiLCJhcHBEb3dubG9hZEJhciIsIm5vdGlmaWNhdGlvbiIsImZhYiIsImZhYkJ1dHRvbiIsImNoYXQiLCJsdXNvQm90V2lkZ2V0IiwiYWN0aXZpdHkiLCJsaXZlQWN0aXZpdHlXaWRnZXQiLCJmbG9hdGluZ0Jhc2UiLCJnZXRCb3R0b21PZmZzZXQiLCJnZXRXaWRnZXRCb3R0b21PZmZzZXQiLCJjb250ZXh0VmFsdWUiLCJQcm92aWRlciIsInZhbHVlIiwiZGl2IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2l6ZSIsImNvbnRleHQiLCJ1c2VDb250ZXh0IiwiRXJyb3IiLCJtYW5hZ2VyIiwiY2xhc3NlcyIsInpJbmRleCIsImJvdHRvbU9mZnNldCIsInZhcmlhbnQiLCJ2YXJpYW50Q2xhc3NlcyIsInByaW1hcnkiLCJzZWNvbmRhcnkiLCJoZXJpdGFnZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztJQWdNZ0JBLHlCQUF5QjtlQUF6QkE7O0lBekpBQyxhQUFhO2VBQWJBOztJQXNJQUMs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
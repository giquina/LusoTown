ac23bd0d6829378e086227cfec44a483
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return MessageTranslator;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _framermotion = require("framer-motion");
const _lucidereact = require("lucide-react");
const _LanguageContext = require("../context/LanguageContext");
const _portuguesetranslation = require("../config/portuguese-translation");
const _brand = require("../config/brand");
function MessageTranslator({ originalMessage, sourceLanguage = "auto", targetLanguage, dialect = "pt-PT", showCulturalContext = true, enableVoicePlayback = true, onTranslationComplete, className = "" }) {
    const { language } = (0, _LanguageContext.useLanguage)();
    const [translation, setTranslation] = (0, _react.useState)(null);
    const [isTranslating, setIsTranslating] = (0, _react.useState)(false);
    const [showOriginal, setShowOriginal] = (0, _react.useState)(true);
    const [copiedText, setCopiedText] = (0, _react.useState)(null);
    const [error, setError] = (0, _react.useState)(null);
    const [isPlayingOriginal, setIsPlayingOriginal] = (0, _react.useState)(false);
    const [isPlayingTranslated, setIsPlayingTranslated] = (0, _react.useState)(false);
    const autoTargetLanguage = targetLanguage || (language === "pt" ? "en" : "pt");
    const dialectInfo = (0, _portuguesetranslation.getDialectInfo)(dialect);
    const translations = {
        en: {
            translating: "Translating...",
            showOriginal: "Show original",
            showTranslation: "Show translation",
            playOriginal: "Play original text",
            playTranslated: "Play translated text",
            copyOriginal: "Copy original",
            copyTranslation: "Copy translation",
            retranslate: "Retranslate",
            confidence: "Translation confidence",
            dialect: "Detected dialect",
            culturalNote: "Cultural context",
            idiomDetected: "Portuguese idiom detected",
            alternativeTranslations: "Alternative translations",
            translationError: "Translation failed. Please try again.",
            copied: "Copied!",
            excellent: "Excellent translation quality",
            good: "Good translation quality",
            fair: "Fair translation quality - may need review",
            poor: "Poor translation quality - manual review recommended",
            autoDetected: "Auto-detected",
            formalContext: "Formal Portuguese context",
            informalContext: "Informal Portuguese context",
            regionalExpression: "Regional Portuguese expression"
        },
        pt: {
            translating: "Traduzindo...",
            showOriginal: "Mostrar original",
            showTranslation: "Mostrar tradu\xe7\xe3o",
            playOriginal: "Reproduzir texto original",
            playTranslated: "Reproduzir tradu\xe7\xe3o",
            copyOriginal: "Copiar original",
            copyTranslation: "Copiar tradu\xe7\xe3o",
            retranslate: "Traduzir novamente",
            confidence: "Confian\xe7a da tradu\xe7\xe3o",
            dialect: "Dialeto detetado",
            culturalNote: "Contexto cultural",
            idiomDetected: "Express\xe3o portuguesa detetada",
            alternativeTranslations: "Tradu\xe7\xf5es alternativas",
            translationError: "Falha na tradu\xe7\xe3o. Tente novamente.",
            copied: "Copiado!",
            excellent: "Qualidade excelente de tradu\xe7\xe3o",
            good: "Boa qualidade de tradu\xe7\xe3o",
            fair: "Qualidade razo\xe1vel - pode precisar de revis\xe3o",
            poor: "Qualidade fraca - revis\xe3o manual recomendada",
            autoDetected: "Detetado automaticamente",
            formalContext: "Contexto formal portugu\xeas",
            informalContext: "Contexto informal portugu\xeas",
            regionalExpression: "Express\xe3o regional portuguesa"
        }
    };
    const t = translations[language];
    (0, _react.useEffect)(()=>{
        if (originalMessage.trim()) {
            translateMessage();
        }
    }, [
        originalMessage,
        autoTargetLanguage,
        dialect
    ]);
    const translateMessage = async ()=>{
        if (!originalMessage.trim()) return;
        setIsTranslating(true);
        setError(null);
        try {
            // Simulate API call to translation service
            const response = await fetch("/api/translate", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    text: originalMessage,
                    source: sourceLanguage,
                    target: autoTargetLanguage,
                    dialect: dialect,
                    includeCulturalContext: showCulturalContext
                })
            });
            if (!response.ok) {
                throw new Error("Translation service unavailable");
            }
            const result = await response.json();
            // Enhanced result with cultural analysis
            const enhancedResult = {
                ...result,
                detectedIdioms: detectIdioms(originalMessage, dialect),
                culturalNotes: generateCulturalNotes(originalMessage, dialect),
                alternativeTranslations: result.alternatives || []
            };
            setTranslation(enhancedResult);
            onTranslationComplete?.(enhancedResult);
        } catch (error) {
            console.error("Translation error:", error);
            setError(t.translationError);
            // Fallback: create basic translation result
            setTranslation({
                originalText: originalMessage,
                translatedText: originalMessage,
                sourceLanguage: sourceLanguage,
                targetLanguage: autoTargetLanguage,
                dialect: dialect,
                confidence: 0.5,
                detectedIdioms: detectIdioms(originalMessage, dialect),
                culturalNotes: generateCulturalNotes(originalMessage, dialect)
            });
        } finally{
            setIsTranslating(false);
        }
    };
    const detectIdioms = (text, dialect)=>{
        const idioms = [];
        if ((0, _portuguesetranslation.isPortugueseIdiom)(text, dialect)) {
            // Extract actual idioms from text
            const commonIdioms = [
                "saudade",
                "que saudades",
                "desenrasca",
                "jeitinho",
                "fixe",
                "legal",
                "bacano",
                "t\xe1 ligado"
            ];
            commonIdioms.forEach((idiom)=>{
                if (text.toLowerCase().includes(idiom)) {
                    idioms.push(idiom);
                }
            });
        }
        return idioms;
    };
    const generateCulturalNotes = (text, dialect)=>{
        const notes = [];
        const culturalContext = _portuguesetranslation.CULTURAL_CONTEXTS[dialectInfo.country.toLowerCase()];
        if (!culturalContext) return notes;
        // Check for cultural markers
        culturalContext.culturalMarkers.forEach((marker)=>{
            if (text.toLowerCase().includes(marker)) {
                notes.push(`"${marker}" is a cultural reference from ${culturalContext.country}`);
            }
        });
        // Check for formality level
        const formalWords = [
            "senhor",
            "senhora",
            "vossa",
            "vossemec\xea"
        ];
        const informalWords = [
            "tu",
            "voc\xea",
            "mano",
            "cara"
        ];
        if (formalWords.some((word)=>text.toLowerCase().includes(word))) {
            notes.push(t.formalContext);
        } else if (informalWords.some((word)=>text.toLowerCase().includes(word))) {
            notes.push(t.informalContext);
        }
        return notes;
    };
    const copyToClipboard = async (text, type)=>{
        try {
            await navigator.clipboard.writeText(text);
            setCopiedText(type);
            setTimeout(()=>setCopiedText(null), 2000);
        } catch (error) {
            console.error("Copy failed:", error);
        }
    };
    const playText = async (text, isOriginal)=>{
        if (!enableVoicePlayback || !("speechSynthesis" in window)) return;
        const utterance = new SpeechSynthesisUtterance(text);
        if (isOriginal) {
            utterance.lang = dialect;
            setIsPlayingOriginal(true);
            utterance.onend = ()=>setIsPlayingOriginal(false);
        } else {
            utterance.lang = autoTargetLanguage === "pt" ? "pt-PT" : "en-US";
            setIsPlayingTranslated(true);
            utterance.onend = ()=>setIsPlayingTranslated(false);
        }
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        utterance.volume = 1.0;
        speechSynthesis.speak(utterance);
    };
    const getQualityIndicator = (confidence)=>{
        const quality = (0, _portuguesetranslation.getTranslationQuality)(confidence);
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "flex items-center space-x-2",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                    style: {
                        color: quality.color
                    },
                    children: quality.icon
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                    className: "text-sm text-gray-600",
                    children: confidence > 0 ? `${Math.round(confidence * 100)}%` : t.autoDetected
                })
            ]
        });
    };
    if (isTranslating) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: `flex items-center justify-center p-4 ${className}`,
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.motion.div, {
                    animate: {
                        rotate: 360
                    },
                    transition: {
                        duration: 1,
                        repeat: Infinity,
                        ease: "linear"
                    },
                    className: "w-5 h-5 border-2 border-primary-600 border-t-transparent rounded-full mr-3",
                    style: {
                        borderColor: _brand.PORTUGUESE_COLORS.primary
                    }
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                    className: "text-sm text-gray-600",
                    children: t.translating
                })
            ]
        });
    }
    if (!translation) return null;
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `message-translator bg-white border border-gray-200 rounded-lg p-4 space-y-4 ${className}`,
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-3",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Languages, {
                                        className: "w-5 h-5 text-primary-600",
                                        style: {
                                            color: _brand.PORTUGUESE_COLORS.primary
                                        }
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "font-medium text-gray-900",
                                        children: [
                                            dialectInfo.flag,
                                            " ",
                                            dialectInfo.name[language],
                                            " â†’ ",
                                            autoTargetLanguage === "en" ? "\uD83C\uDDEC\uD83C\uDDE7 English" : "\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas"
                                        ]
                                    })
                                ]
                            }),
                            getQualityIndicator(translation.confidence)
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.motion.button, {
                                whileHover: {
                                    scale: 1.05
                                },
                                whileTap: {
                                    scale: 0.95
                                },
                                onClick: ()=>setShowOriginal(!showOriginal),
                                className: "px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",
                                children: showOriginal ? t.showTranslation : t.showOriginal
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: translateMessage,
                                className: "p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.RefreshCw, {
                                    className: "w-4 h-4"
                                })
                            })
                        ]
                    })
                ]
            }),
            error && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_framermotion.motion.div, {
                initial: {
                    opacity: 0,
                    y: -10
                },
                animate: {
                    opacity: 1,
                    y: 0
                },
                className: "flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.AlertCircle, {
                        className: "w-4 h-4 text-red-600 flex-shrink-0"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-sm text-red-700",
                        children: error
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.AnimatePresence, {
                mode: "wait",
                children: showOriginal ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.motion.div, {
                    initial: {
                        opacity: 0,
                        x: -10
                    },
                    animate: {
                        opacity: 1,
                        x: 0
                    },
                    exit: {
                        opacity: 0,
                        x: 10
                    },
                    className: "space-y-3",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "p-3 bg-gray-50 rounded-lg border border-gray-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center justify-between mb-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Globe, {
                                                className: "w-4 h-4 text-gray-600"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "text-sm font-medium text-gray-700",
                                                children: "Original"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "text-xs px-2 py-0.5 bg-gray-200 rounded-full",
                                                children: dialectInfo.name[language]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center space-x-1",
                                        children: [
                                            enableVoicePlayback && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>playText(translation.originalText, true),
                                                disabled: isPlayingOriginal,
                                                className: `p-1 text-gray-600 hover:text-primary-600 hover:bg-gray-200 rounded transition-colors ${isPlayingOriginal ? "animate-pulse" : ""}`,
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Volume2, {
                                                    className: "w-4 h-4"
                                                })
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>copyToClipboard(translation.originalText, "original"),
                                                className: "p-1 text-gray-600 hover:text-primary-600 hover:bg-gray-200 rounded transition-colors",
                                                children: copiedText === "original" ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Check, {
                                                    className: "w-4 h-4 text-green-600"
                                                }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Copy, {
                                                    className: "w-4 h-4"
                                                })
                                            })
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-gray-800 leading-relaxed",
                                children: translation.originalText
                            })
                        ]
                    })
                }, "original") : /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.motion.div, {
                    initial: {
                        opacity: 0,
                        x: 10
                    },
                    animate: {
                        opacity: 1,
                        x: 0
                    },
                    exit: {
                        opacity: 0,
                        x: -10
                    },
                    className: "space-y-3",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "p-3 bg-blue-50 rounded-lg border border-blue-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center justify-between mb-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Sparkles, {
                                                className: "w-4 h-4 text-blue-600"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "text-sm font-medium text-blue-700",
                                                children: "Translation"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "text-xs px-2 py-0.5 bg-blue-200 rounded-full",
                                                children: autoTargetLanguage === "en" ? "English" : "Portugu\xeas"
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center space-x-1",
                                        children: [
                                            enableVoicePlayback && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>playText(translation.translatedText, false),
                                                disabled: isPlayingTranslated,
                                                className: `p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-200 rounded transition-colors ${isPlayingTranslated ? "animate-pulse" : ""}`,
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Volume2, {
                                                    className: "w-4 h-4"
                                                })
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>copyToClipboard(translation.translatedText, "translation"),
                                                className: "p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-200 rounded transition-colors",
                                                children: copiedText === "translation" ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Check, {
                                                    className: "w-4 h-4 text-green-600"
                                                }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Copy, {
                                                    className: "w-4 h-4"
                                                })
                                            })
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-blue-900 leading-relaxed",
                                children: translation.translatedText
                            })
                        ]
                    })
                }, "translation")
            }),
            showCulturalContext && (translation.detectedIdioms?.length || translation.culturalNotes?.length) && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "space-y-3",
                children: [
                    translation.detectedIdioms && translation.detectedIdioms.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "p-3 bg-yellow-50 rounded-lg border border-yellow-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2 mb-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.BookOpen, {
                                        className: "w-4 h-4 text-yellow-700"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                        className: "text-sm font-medium text-yellow-800",
                                        children: t.idiomDetected
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "space-y-1",
                                children: translation.detectedIdioms.map((idiom, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "text-sm",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "font-medium text-yellow-800",
                                                children: [
                                                    '"',
                                                    idiom,
                                                    '"'
                                                ]
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "text-yellow-700",
                                                children: [
                                                    " - ",
                                                    (0, _portuguesetranslation.translateIdiom)(idiom, dialect) || "Regional expression"
                                                ]
                                            })
                                        ]
                                    }, index))
                            })
                        ]
                    }),
                    translation.culturalNotes && translation.culturalNotes.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "p-3 bg-green-50 rounded-lg border border-green-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2 mb-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Info, {
                                        className: "w-4 h-4 text-green-700"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                        className: "text-sm font-medium text-green-800",
                                        children: t.culturalNote
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("ul", {
                                className: "space-y-1 text-sm text-green-700",
                                children: translation.culturalNotes.map((note, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("li", {
                                        className: "flex items-start space-x-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "w-1 h-1 bg-green-600 rounded-full mt-2 flex-shrink-0"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                children: note
                                            })
                                        ]
                                    }, index))
                            })
                        ]
                    })
                ]
            }),
            translation.alternativeTranslations && translation.alternativeTranslations.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "p-3 bg-gray-50 rounded-lg border border-gray-200",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2 mb-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.RefreshCw, {
                                className: "w-4 h-4 text-gray-600"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-sm font-medium text-gray-700",
                                children: t.alternativeTranslations
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "space-y-2",
                        children: translation.alternativeTranslations.slice(0, 3).map((alt, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm text-gray-600 p-2 bg-white rounded border border-gray-100",
                                children: alt
                            }, index))
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.AnimatePresence, {
                children: copiedText && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_framermotion.motion.div, {
                    initial: {
                        opacity: 0,
                        y: 10
                    },
                    animate: {
                        opacity: 1,
                        y: 0
                    },
                    exit: {
                        opacity: 0,
                        y: 10
                    },
                    className: "flex items-center justify-center p-2 bg-green-100 text-green-800 rounded-lg",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Check, {
                            className: "w-4 h-4 mr-2"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "text-sm font-medium",
                            children: t.copied
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2NvbXBvbmVudHMvTWVzc2FnZVRyYW5zbGF0b3IudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBtb3Rpb24sIEFuaW1hdGVQcmVzZW5jZSB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nXG5pbXBvcnQgeyBcbiAgTGFuZ3VhZ2VzLCBcbiAgUmVmcmVzaEN3LCBcbiAgVm9sdW1lMiwgXG4gIENvcHksIFxuICBDaGVjayxcbiAgQWxlcnRDaXJjbGUsXG4gIEluZm8sXG4gIEdsb2JlLFxuICBCb29rT3BlbixcbiAgU3BhcmtsZXNcbn0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2NvbnRleHQvTGFuZ3VhZ2VDb250ZXh0J1xuaW1wb3J0IHsgXG4gIFBPUlRVR1VFU0VfRElBTEVDVFMsXG4gIFRSQU5TTEFUSU9OX1FVQUxJVFksXG4gIENVTFRVUkFMX0NPTlRFWFRTLFxuICBnZXREaWFsZWN0SW5mbyxcbiAgZ2V0VHJhbnNsYXRpb25RdWFsaXR5LFxuICB0cmFuc2xhdGVJZGlvbSxcbiAgaXNQb3J0dWd1ZXNlSWRpb21cbn0gZnJvbSAnQC9jb25maWcvcG9ydHVndWVzZS10cmFuc2xhdGlvbidcbmltcG9ydCB7IFBPUlRVR1VFU0VfQ09MT1JTIH0gZnJvbSAnQC9jb25maWcvYnJhbmQnXG5cbmludGVyZmFjZSBUcmFuc2xhdGlvblJlc3VsdCB7XG4gIG9yaWdpbmFsVGV4dDogc3RyaW5nXG4gIHRyYW5zbGF0ZWRUZXh0OiBzdHJpbmdcbiAgc291cmNlTGFuZ3VhZ2U6IHN0cmluZ1xuICB0YXJnZXRMYW5ndWFnZTogc3RyaW5nXG4gIGRpYWxlY3Q/OiBzdHJpbmdcbiAgY29uZmlkZW5jZTogbnVtYmVyXG4gIGRldGVjdGVkSWRpb21zPzogc3RyaW5nW11cbiAgY3VsdHVyYWxOb3Rlcz86IHN0cmluZ1tdXG4gIGFsdGVybmF0aXZlVHJhbnNsYXRpb25zPzogc3RyaW5nW11cbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2VUcmFuc2xhdG9yUHJvcHMge1xuICBvcmlnaW5hbE1lc3NhZ2U6IHN0cmluZ1xuICBzb3VyY2VMYW5ndWFnZT86IHN0cmluZ1xuICB0YXJnZXRMYW5ndWFnZT86IHN0cmluZ1xuICBkaWFsZWN0Pzogc3RyaW5nXG4gIHNob3dDdWx0dXJhbENvbnRleHQ/OiBib29sZWFuXG4gIGVuYWJsZVZvaWNlUGxheWJhY2s/OiBib29sZWFuXG4gIG9uVHJhbnNsYXRpb25Db21wbGV0ZT86IChyZXN1bHQ6IFRyYW5zbGF0aW9uUmVzdWx0KSA9PiB2b2lkXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZXNzYWdlVHJhbnNsYXRvcih7XG4gIG9yaWdpbmFsTWVzc2FnZSxcbiAgc291cmNlTGFuZ3VhZ2UgPSAnYXV0bycsXG4gIHRhcmdldExhbmd1YWdlLFxuICBkaWFsZWN0ID0gJ3B0LVBUJyxcbiAgc2hvd0N1bHR1cmFsQ29udGV4dCA9IHRydWUsXG4gIGVuYWJsZVZvaWNlUGxheWJhY2sgPSB0cnVlLFxuICBvblRyYW5zbGF0aW9uQ29tcGxldGUsXG4gIGNsYXNzTmFtZSA9ICcnXG59OiBNZXNzYWdlVHJhbnNsYXRvclByb3BzKSB7XG4gIGNvbnN0IHsgbGFuZ3VhZ2UgfSA9IHVzZUxhbmd1YWdlKClcbiAgY29uc3QgW3RyYW5zbGF0aW9uLCBzZXRUcmFuc2xhdGlvbl0gPSB1c2VTdGF0ZTxUcmFuc2xhdGlvblJlc3VsdCB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtpc1RyYW5zbGF0aW5nLCBzZXRJc1RyYW5zbGF0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbc2hvd09yaWdpbmFsLCBzZXRTaG93T3JpZ2luYWxdID0gdXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW2NvcGllZFRleHQsIHNldENvcGllZFRleHRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbaXNQbGF5aW5nT3JpZ2luYWwsIHNldElzUGxheWluZ09yaWdpbmFsXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbaXNQbGF5aW5nVHJhbnNsYXRlZCwgc2V0SXNQbGF5aW5nVHJhbnNsYXRlZF0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBhdXRvVGFyZ2V0TGFuZ3VhZ2UgPSB0YXJnZXRMYW5ndWFnZSB8fCAobGFuZ3VhZ2UgPT09ICdwdCcgPyAnZW4nIDogJ3B0JylcbiAgY29uc3QgZGlhbGVjdEluZm8gPSBnZXREaWFsZWN0SW5mbyhkaWFsZWN0KVxuXG4gIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcbiAgICBlbjoge1xuICAgICAgdHJhbnNsYXRpbmc6ICdUcmFuc2xhdGluZy4uLicsXG4gICAgICBzaG93T3JpZ2luYWw6ICdTaG93IG9yaWdpbmFsJyxcbiAgICAgIHNob3dUcmFuc2xhdGlvbjogJ1Nob3cgdHJhbnNsYXRpb24nLFxuICAgICAgcGxheU9yaWdpbmFsOiAnUGxheSBvcmlnaW5hbCB0ZXh0JyxcbiAgICAgIHBsYXlUcmFuc2xhdGVkOiAnUGxheSB0cmFuc2xhdGVkIHRleHQnLFxuICAgICAgY29weU9yaWdpbmFsOiAnQ29weSBvcmlnaW5hbCcsXG4gICAgICBjb3B5VHJhbnNsYXRpb246ICdDb3B5IHRyYW5zbGF0aW9uJyxcbiAgICAgIHJldHJhbnNsYXRlOiAnUmV0cmFuc2xhdGUnLFxuICAgICAgY29uZmlkZW5jZTogJ1RyYW5zbGF0aW9uIGNvbmZpZGVuY2UnLFxuICAgICAgZGlhbGVjdDogJ0RldGVjdGVkIGRpYWxlY3QnLFxuICAgICAgY3VsdHVyYWxOb3RlOiAnQ3VsdHVyYWwgY29udGV4dCcsXG4gICAgICBpZGlvbURldGVjdGVkOiAnUG9ydHVndWVzZSBpZGlvbSBkZXRlY3RlZCcsXG4gICAgICBhbHRlcm5hdGl2ZVRyYW5zbGF0aW9uczogJ0FsdGVybmF0aXZlIHRyYW5zbGF0aW9ucycsXG4gICAgICB0cmFuc2xhdGlvbkVycm9yOiAnVHJhbnNsYXRpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgICBjb3BpZWQ6ICdDb3BpZWQhJyxcbiAgICAgIGV4Y2VsbGVudDogJ0V4Y2VsbGVudCB0cmFuc2xhdGlvbiBxdWFsaXR5JyxcbiAgICAgIGdvb2Q6ICdHb29kIHRyYW5zbGF0aW9uIHF1YWxpdHknLFxuICAgICAgZmFpcjogJ0ZhaXIgdHJhbnNsYXRpb24gcXVhbGl0eSAtIG1heSBuZWVkIHJldmlldycsXG4gICAgICBwb29yOiAnUG9vciB0cmFuc2xhdGlvbiBxdWFsaXR5IC0gbWFudWFsIHJldmlldyByZWNvbW1lbmRlZCcsXG4gICAgICBhdXRvRGV0ZWN0ZWQ6ICdBdXRvLWRldGVjdGVkJyxcbiAgICAgIGZvcm1hbENvbnRleHQ6ICdGb3JtYWwgUG9ydHVndWVzZSBjb250ZXh0JyxcbiAgICAgIGluZm9ybWFsQ29udGV4dDogJ0luZm9ybWFsIFBvcnR1Z3Vlc2UgY29udGV4dCcsXG4gICAgICByZWdpb25hbEV4cHJlc3Npb246ICdSZWdpb25hbCBQb3J0dWd1ZXNlIGV4cHJlc3Npb24nXG4gICAgfSxcbiAgICBwdDoge1xuICAgICAgdHJhbnNsYXRpbmc6ICdUcmFkdXppbmRvLi4uJyxcbiAgICAgIHNob3dPcmlnaW5hbDogJ01vc3RyYXIgb3JpZ2luYWwnLFxuICAgICAgc2hvd1RyYW5zbGF0aW9uOiAnTW9zdHJhciB0cmFkdcOnw6NvJyxcbiAgICAgIHBsYXlPcmlnaW5hbDogJ1JlcHJvZHV6aXIgdGV4dG8gb3JpZ2luYWwnLFxuICAgICAgcGxheVRyYW5zbGF0ZWQ6ICdSZXByb2R1emlyIHRyYWR1w6fDo28nLFxuICAgICAgY29weU9yaWdpbmFsOiAnQ29waWFyIG9yaWdpbmFsJyxcbiAgICAgIGNvcHlUcmFuc2xhdGlvbjogJ0NvcGlhciB0cmFkdcOnw6NvJyxcbiAgICAgIHJldHJhbnNsYXRlOiAnVHJhZHV6aXIgbm92YW1lbnRlJyxcbiAgICAgIGNvbmZpZGVuY2U6ICdDb25maWFuw6dhIGRhIHRyYWR1w6fDo28nLFxuICAgICAgZGlhbGVjdDogJ0RpYWxldG8gZGV0ZXRhZG8nLFxuICAgICAgY3VsdHVyYWxOb3RlOiAnQ29udGV4dG8gY3VsdHVyYWwnLFxuICAgICAgaWRpb21EZXRlY3RlZDogJ0V4cHJlc3PDo28gcG9ydHVndWVzYSBkZXRldGFkYScsXG4gICAgICBhbHRlcm5hdGl2ZVRyYW5zbGF0aW9uczogJ1RyYWR1w6fDtWVzIGFsdGVybmF0aXZhcycsXG4gICAgICB0cmFuc2xhdGlvbkVycm9yOiAnRmFsaGEgbmEgdHJhZHXDp8Ojby4gVGVudGUgbm92YW1lbnRlLicsXG4gICAgICBjb3BpZWQ6ICdDb3BpYWRvIScsXG4gICAgICBleGNlbGxlbnQ6ICdRdWFsaWRhZGUgZXhjZWxlbnRlIGRlIHRyYWR1w6fDo28nLFxuICAgICAgZ29vZDogJ0JvYSBxdWFsaWRhZGUgZGUgdHJhZHXDp8OjbycsXG4gICAgICBmYWlyOiAnUXVhbGlkYWRlIHJhem/DoXZlbCAtIHBvZGUgcHJlY2lzYXIgZGUgcmV2aXPDo28nLFxuICAgICAgcG9vcjogJ1F1YWxpZGFkZSBmcmFjYSAtIHJldmlzw6NvIG1hbnVhbCByZWNvbWVuZGFkYScsXG4gICAgICBhdXRvRGV0ZWN0ZWQ6ICdEZXRldGFkbyBhdXRvbWF0aWNhbWVudGUnLFxuICAgICAgZm9ybWFsQ29udGV4dDogJ0NvbnRleHRvIGZvcm1hbCBwb3J0dWd1w6pzJyxcbiAgICAgIGluZm9ybWFsQ29udGV4dDogJ0NvbnRleHRvIGluZm9ybWFsIHBvcnR1Z3XDqnMnLFxuICAgICAgcmVnaW9uYWxFeHByZXNzaW9uOiAnRXhwcmVzc8OjbyByZWdpb25hbCBwb3J0dWd1ZXNhJ1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHQgPSB0cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob3JpZ2luYWxNZXNzYWdlLnRyaW0oKSkge1xuICAgICAgdHJhbnNsYXRlTWVzc2FnZSgpXG4gICAgfVxuICB9LCBbb3JpZ2luYWxNZXNzYWdlLCBhdXRvVGFyZ2V0TGFuZ3VhZ2UsIGRpYWxlY3RdKVxuXG4gIGNvbnN0IHRyYW5zbGF0ZU1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvcmlnaW5hbE1lc3NhZ2UudHJpbSgpKSByZXR1cm5cblxuICAgIHNldElzVHJhbnNsYXRpbmcodHJ1ZSlcbiAgICBzZXRFcnJvcihudWxsKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbXVsYXRlIEFQSSBjYWxsIHRvIHRyYW5zbGF0aW9uIHNlcnZpY2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdHJhbnNsYXRlJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRleHQ6IG9yaWdpbmFsTWVzc2FnZSxcbiAgICAgICAgICBzb3VyY2U6IHNvdXJjZUxhbmd1YWdlLFxuICAgICAgICAgIHRhcmdldDogYXV0b1RhcmdldExhbmd1YWdlLFxuICAgICAgICAgIGRpYWxlY3Q6IGRpYWxlY3QsXG4gICAgICAgICAgaW5jbHVkZUN1bHR1cmFsQ29udGV4dDogc2hvd0N1bHR1cmFsQ29udGV4dFxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zbGF0aW9uIHNlcnZpY2UgdW5hdmFpbGFibGUnKVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgLy8gRW5oYW5jZWQgcmVzdWx0IHdpdGggY3VsdHVyYWwgYW5hbHlzaXNcbiAgICAgIGNvbnN0IGVuaGFuY2VkUmVzdWx0OiBUcmFuc2xhdGlvblJlc3VsdCA9IHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBkZXRlY3RlZElkaW9tczogZGV0ZWN0SWRpb21zKG9yaWdpbmFsTWVzc2FnZSwgZGlhbGVjdCksXG4gICAgICAgIGN1bHR1cmFsTm90ZXM6IGdlbmVyYXRlQ3VsdHVyYWxOb3RlcyhvcmlnaW5hbE1lc3NhZ2UsIGRpYWxlY3QpLFxuICAgICAgICBhbHRlcm5hdGl2ZVRyYW5zbGF0aW9uczogcmVzdWx0LmFsdGVybmF0aXZlcyB8fCBbXVxuICAgICAgfVxuXG4gICAgICBzZXRUcmFuc2xhdGlvbihlbmhhbmNlZFJlc3VsdClcbiAgICAgIG9uVHJhbnNsYXRpb25Db21wbGV0ZT8uKGVuaGFuY2VkUmVzdWx0KVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zbGF0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgc2V0RXJyb3IodC50cmFuc2xhdGlvbkVycm9yKVxuICAgICAgXG4gICAgICAvLyBGYWxsYmFjazogY3JlYXRlIGJhc2ljIHRyYW5zbGF0aW9uIHJlc3VsdFxuICAgICAgc2V0VHJhbnNsYXRpb24oe1xuICAgICAgICBvcmlnaW5hbFRleHQ6IG9yaWdpbmFsTWVzc2FnZSxcbiAgICAgICAgdHJhbnNsYXRlZFRleHQ6IG9yaWdpbmFsTWVzc2FnZSwgLy8gRmFsbGJhY2sgdG8gb3JpZ2luYWxcbiAgICAgICAgc291cmNlTGFuZ3VhZ2U6IHNvdXJjZUxhbmd1YWdlLFxuICAgICAgICB0YXJnZXRMYW5ndWFnZTogYXV0b1RhcmdldExhbmd1YWdlLFxuICAgICAgICBkaWFsZWN0OiBkaWFsZWN0LFxuICAgICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICAgIGRldGVjdGVkSWRpb21zOiBkZXRlY3RJZGlvbXMob3JpZ2luYWxNZXNzYWdlLCBkaWFsZWN0KSxcbiAgICAgICAgY3VsdHVyYWxOb3RlczogZ2VuZXJhdGVDdWx0dXJhbE5vdGVzKG9yaWdpbmFsTWVzc2FnZSwgZGlhbGVjdClcbiAgICAgIH0pXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzVHJhbnNsYXRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGV0ZWN0SWRpb21zID0gKHRleHQ6IHN0cmluZywgZGlhbGVjdDogc3RyaW5nKTogc3RyaW5nW10gPT4ge1xuICAgIGNvbnN0IGlkaW9tczogc3RyaW5nW10gPSBbXVxuICAgIFxuICAgIGlmIChpc1BvcnR1Z3Vlc2VJZGlvbSh0ZXh0LCBkaWFsZWN0KSkge1xuICAgICAgLy8gRXh0cmFjdCBhY3R1YWwgaWRpb21zIGZyb20gdGV4dFxuICAgICAgY29uc3QgY29tbW9uSWRpb21zID0gW1xuICAgICAgICAnc2F1ZGFkZScsICdxdWUgc2F1ZGFkZXMnLCAnZGVzZW5yYXNjYScsICdqZWl0aW5obycsIFxuICAgICAgICAnZml4ZScsICdsZWdhbCcsICdiYWNhbm8nLCAndMOhIGxpZ2FkbydcbiAgICAgIF1cbiAgICAgIFxuICAgICAgY29tbW9uSWRpb21zLmZvckVhY2goaWRpb20gPT4ge1xuICAgICAgICBpZiAodGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGlkaW9tKSkge1xuICAgICAgICAgIGlkaW9tcy5wdXNoKGlkaW9tKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaWRpb21zXG4gIH1cblxuICBjb25zdCBnZW5lcmF0ZUN1bHR1cmFsTm90ZXMgPSAodGV4dDogc3RyaW5nLCBkaWFsZWN0OiBzdHJpbmcpOiBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3Qgbm90ZXM6IHN0cmluZ1tdID0gW11cbiAgICBjb25zdCBjdWx0dXJhbENvbnRleHQgPSBDVUxUVVJBTF9DT05URVhUU1tkaWFsZWN0SW5mby5jb3VudHJ5LnRvTG93ZXJDYXNlKCldXG4gICAgXG4gICAgaWYgKCFjdWx0dXJhbENvbnRleHQpIHJldHVybiBub3Rlc1xuXG4gICAgLy8gQ2hlY2sgZm9yIGN1bHR1cmFsIG1hcmtlcnNcbiAgICBjdWx0dXJhbENvbnRleHQuY3VsdHVyYWxNYXJrZXJzLmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgIGlmICh0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobWFya2VyKSkge1xuICAgICAgICBub3Rlcy5wdXNoKGBcIiR7bWFya2VyfVwiIGlzIGEgY3VsdHVyYWwgcmVmZXJlbmNlIGZyb20gJHtjdWx0dXJhbENvbnRleHQuY291bnRyeX1gKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBDaGVjayBmb3IgZm9ybWFsaXR5IGxldmVsXG4gICAgY29uc3QgZm9ybWFsV29yZHMgPSBbJ3NlbmhvcicsICdzZW5ob3JhJywgJ3Zvc3NhJywgJ3Zvc3NlbWVjw6onXVxuICAgIGNvbnN0IGluZm9ybWFsV29yZHMgPSBbJ3R1JywgJ3ZvY8OqJywgJ21hbm8nLCAnY2FyYSddXG4gICAgXG4gICAgaWYgKGZvcm1hbFdvcmRzLnNvbWUod29yZCA9PiB0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMod29yZCkpKSB7XG4gICAgICBub3Rlcy5wdXNoKHQuZm9ybWFsQ29udGV4dClcbiAgICB9IGVsc2UgaWYgKGluZm9ybWFsV29yZHMuc29tZSh3b3JkID0+IHRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh3b3JkKSkpIHtcbiAgICAgIG5vdGVzLnB1c2godC5pbmZvcm1hbENvbnRleHQpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5vdGVzXG4gIH1cblxuICBjb25zdCBjb3B5VG9DbGlwYm9hcmQgPSBhc3luYyAodGV4dDogc3RyaW5nLCB0eXBlOiAnb3JpZ2luYWwnIHwgJ3RyYW5zbGF0aW9uJykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KVxuICAgICAgc2V0Q29waWVkVGV4dCh0eXBlKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRDb3BpZWRUZXh0KG51bGwpLCAyMDAwKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb3B5IGZhaWxlZDonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICBjb25zdCBwbGF5VGV4dCA9IGFzeW5jICh0ZXh0OiBzdHJpbmcsIGlzT3JpZ2luYWw6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoIWVuYWJsZVZvaWNlUGxheWJhY2sgfHwgISgnc3BlZWNoU3ludGhlc2lzJyBpbiB3aW5kb3cpKSByZXR1cm5cblxuICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dClcbiAgICBcbiAgICBpZiAoaXNPcmlnaW5hbCkge1xuICAgICAgdXR0ZXJhbmNlLmxhbmcgPSBkaWFsZWN0XG4gICAgICBzZXRJc1BsYXlpbmdPcmlnaW5hbCh0cnVlKVxuICAgICAgdXR0ZXJhbmNlLm9uZW5kID0gKCkgPT4gc2V0SXNQbGF5aW5nT3JpZ2luYWwoZmFsc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIHV0dGVyYW5jZS5sYW5nID0gYXV0b1RhcmdldExhbmd1YWdlID09PSAncHQnID8gJ3B0LVBUJyA6ICdlbi1VUydcbiAgICAgIHNldElzUGxheWluZ1RyYW5zbGF0ZWQodHJ1ZSlcbiAgICAgIHV0dGVyYW5jZS5vbmVuZCA9ICgpID0+IHNldElzUGxheWluZ1RyYW5zbGF0ZWQoZmFsc2UpXG4gICAgfVxuXG4gICAgdXR0ZXJhbmNlLnJhdGUgPSAwLjlcbiAgICB1dHRlcmFuY2UucGl0Y2ggPSAxLjBcbiAgICB1dHRlcmFuY2Uudm9sdW1lID0gMS4wXG5cbiAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKVxuICB9XG5cbiAgY29uc3QgZ2V0UXVhbGl0eUluZGljYXRvciA9IChjb25maWRlbmNlOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBxdWFsaXR5ID0gZ2V0VHJhbnNsYXRpb25RdWFsaXR5KGNvbmZpZGVuY2UpXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgIDxzcGFuIHN0eWxlPXt7IGNvbG9yOiBxdWFsaXR5LmNvbG9yIH19PntxdWFsaXR5Lmljb259PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICB7Y29uZmlkZW5jZSA+IDAgPyBgJHtNYXRoLnJvdW5kKGNvbmZpZGVuY2UgKiAxMDApfSVgIDogdC5hdXRvRGV0ZWN0ZWR9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGlmIChpc1RyYW5zbGF0aW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00ICR7Y2xhc3NOYW1lfWB9PlxuICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgIGFuaW1hdGU9e3sgcm90YXRlOiAzNjAgfX1cbiAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAxLCByZXBlYXQ6IEluZmluaXR5LCBlYXNlOiAnbGluZWFyJyB9fVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctNSBoLTUgYm9yZGVyLTIgYm9yZGVyLXByaW1hcnktNjAwIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBtci0zXCJcbiAgICAgICAgICBzdHlsZT17eyBib3JkZXJDb2xvcjogUE9SVFVHVUVTRV9DT0xPUlMucHJpbWFyeSB9fVxuICAgICAgICAvPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj57dC50cmFuc2xhdGluZ308L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxuICBpZiAoIXRyYW5zbGF0aW9uKSByZXR1cm4gbnVsbFxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BtZXNzYWdlLXRyYW5zbGF0b3IgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNCBzcGFjZS15LTQgJHtjbGFzc05hbWV9YH0+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPExhbmd1YWdlcyBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtcHJpbWFyeS02MDBcIiBzdHlsZT17eyBjb2xvcjogUE9SVFVHVUVTRV9DT0xPUlMucHJpbWFyeSB9fSAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlxuICAgICAgICAgICAgICB7ZGlhbGVjdEluZm8uZmxhZ30ge2RpYWxlY3RJbmZvLm5hbWVbbGFuZ3VhZ2VdfSDihpIge2F1dG9UYXJnZXRMYW5ndWFnZSA9PT0gJ2VuJyA/ICfwn4es8J+HpyBFbmdsaXNoJyA6ICfwn4e18J+HuSBQb3J0dWd1w6pzJ31cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICB7Z2V0UXVhbGl0eUluZGljYXRvcih0cmFuc2xhdGlvbi5jb25maWRlbmNlKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICA8bW90aW9uLmJ1dHRvblxuICAgICAgICAgICAgd2hpbGVIb3Zlcj17eyBzY2FsZTogMS4wNSB9fVxuICAgICAgICAgICAgd2hpbGVUYXA9e3sgc2NhbGU6IDAuOTUgfX1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dPcmlnaW5hbCghc2hvd09yaWdpbmFsKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSB0ZXh0LXNtIGJnLWdyYXktMTAwIGhvdmVyOmJnLWdyYXktMjAwIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzaG93T3JpZ2luYWwgPyB0LnNob3dUcmFuc2xhdGlvbiA6IHQuc2hvd09yaWdpbmFsfVxuICAgICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cblxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RyYW5zbGF0ZU1lc3NhZ2V9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgdGV4dC1ncmF5LTYwMCBob3Zlcjp0ZXh0LXByaW1hcnktNjAwIGhvdmVyOmJnLWdyYXktMTAwIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxSZWZyZXNoQ3cgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBFcnJvciBEaXNwbGF5ICovfVxuICAgICAge2Vycm9yICYmIChcbiAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IC0xMCB9fVxuICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeTogMCB9fVxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBwLTMgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLWxnXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtcmVkLTYwMCBmbGV4LXNocmluay0wXCIgLz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTcwMFwiPntlcnJvcn08L3A+XG4gICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBDb250ZW50IFRvZ2dsZSAqL31cbiAgICAgIDxBbmltYXRlUHJlc2VuY2UgbW9kZT1cIndhaXRcIj5cbiAgICAgICAge3Nob3dPcmlnaW5hbCA/IChcbiAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAga2V5PVwib3JpZ2luYWxcIlxuICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB4OiAtMTAgfX1cbiAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeDogMCB9fVxuICAgICAgICAgICAgZXhpdD17eyBvcGFjaXR5OiAwLCB4OiAxMCB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwic3BhY2UteS0zXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7LyogT3JpZ2luYWwgVGV4dCAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLWdyYXktNTAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgPEdsb2JlIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTYwMFwiIC8+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5PcmlnaW5hbDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgcHgtMiBweS0wLjUgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIHtkaWFsZWN0SW5mby5uYW1lW2xhbmd1YWdlXX1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgICAge2VuYWJsZVZvaWNlUGxheWJhY2sgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcGxheVRleHQodHJhbnNsYXRpb24ub3JpZ2luYWxUZXh0LCB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNQbGF5aW5nT3JpZ2luYWx9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0xIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1wcmltYXJ5LTYwMCBob3ZlcjpiZy1ncmF5LTIwMCByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzICR7aXNQbGF5aW5nT3JpZ2luYWwgPyAnYW5pbWF0ZS1wdWxzZScgOiAnJ31gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPFZvbHVtZTIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBjb3B5VG9DbGlwYm9hcmQodHJhbnNsYXRpb24ub3JpZ2luYWxUZXh0LCAnb3JpZ2luYWwnKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1wcmltYXJ5LTYwMCBob3ZlcjpiZy1ncmF5LTIwMCByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2NvcGllZFRleHQgPT09ICdvcmlnaW5hbCcgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmVlbi02MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxDb3B5IGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTgwMCBsZWFkaW5nLXJlbGF4ZWRcIj5cbiAgICAgICAgICAgICAgICB7dHJhbnNsYXRpb24ub3JpZ2luYWxUZXh0fVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICAgIGtleT1cInRyYW5zbGF0aW9uXCJcbiAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeDogMTAgfX1cbiAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeDogMCB9fVxuICAgICAgICAgICAgZXhpdD17eyBvcGFjaXR5OiAwLCB4OiAtMTAgfX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInNwYWNlLXktM1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFRyYW5zbGF0ZWQgVGV4dCAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLWJsdWUtNTAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJsdWUtMjAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgPFNwYXJrbGVzIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ibHVlLTYwMFwiIC8+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS03MDBcIj5UcmFuc2xhdGlvbjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgcHgtMiBweS0wLjUgYmctYmx1ZS0yMDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIHthdXRvVGFyZ2V0TGFuZ3VhZ2UgPT09ICdlbicgPyAnRW5nbGlzaCcgOiAnUG9ydHVndcOqcyd9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICAgIHtlbmFibGVWb2ljZVBsYXliYWNrICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHBsYXlUZXh0KHRyYW5zbGF0aW9uLnRyYW5zbGF0ZWRUZXh0LCBmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUGxheWluZ1RyYW5zbGF0ZWR9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0xIHRleHQtYmx1ZS02MDAgaG92ZXI6dGV4dC1ibHVlLTgwMCBob3ZlcjpiZy1ibHVlLTIwMCByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzICR7aXNQbGF5aW5nVHJhbnNsYXRlZCA/ICdhbmltYXRlLXB1bHNlJyA6ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8Vm9sdW1lMiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGNvcHlUb0NsaXBib2FyZCh0cmFuc2xhdGlvbi50cmFuc2xhdGVkVGV4dCwgJ3RyYW5zbGF0aW9uJyl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMSB0ZXh0LWJsdWUtNjAwIGhvdmVyOnRleHQtYmx1ZS04MDAgaG92ZXI6YmctYmx1ZS0yMDAgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtjb3BpZWRUZXh0ID09PSAndHJhbnNsYXRpb24nID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxDaGVjayBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtZ3JlZW4tNjAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8Q29weSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmx1ZS05MDAgbGVhZGluZy1yZWxheGVkXCI+XG4gICAgICAgICAgICAgICAge3RyYW5zbGF0aW9uLnRyYW5zbGF0ZWRUZXh0fVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICl9XG4gICAgICA8L0FuaW1hdGVQcmVzZW5jZT5cblxuICAgICAgey8qIEN1bHR1cmFsIENvbnRleHQgJiBJZGlvbXMgKi99XG4gICAgICB7c2hvd0N1bHR1cmFsQ29udGV4dCAmJiAodHJhbnNsYXRpb24uZGV0ZWN0ZWRJZGlvbXM/Lmxlbmd0aCB8fCB0cmFuc2xhdGlvbi5jdWx0dXJhbE5vdGVzPy5sZW5ndGgpICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICB7LyogRGV0ZWN0ZWQgSWRpb21zICovfVxuICAgICAgICAgIHt0cmFuc2xhdGlvbi5kZXRlY3RlZElkaW9tcyAmJiB0cmFuc2xhdGlvbi5kZXRlY3RlZElkaW9tcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLXllbGxvdy01MCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXIteWVsbG93LTIwMFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBtYi0yXCI+XG4gICAgICAgICAgICAgICAgPEJvb2tPcGVuIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC15ZWxsb3ctNzAwXCIgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQteWVsbG93LTgwMFwiPnt0LmlkaW9tRGV0ZWN0ZWR9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgICAge3RyYW5zbGF0aW9uLmRldGVjdGVkSWRpb21zLm1hcCgoaWRpb20sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cInRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC15ZWxsb3ctODAwXCI+XCJ7aWRpb219XCI8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteWVsbG93LTcwMFwiPiAtIHt0cmFuc2xhdGVJZGlvbShpZGlvbSwgZGlhbGVjdCkgfHwgJ1JlZ2lvbmFsIGV4cHJlc3Npb24nfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogQ3VsdHVyYWwgTm90ZXMgKi99XG4gICAgICAgICAge3RyYW5zbGF0aW9uLmN1bHR1cmFsTm90ZXMgJiYgdHJhbnNsYXRpb24uY3VsdHVyYWxOb3Rlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLWdyZWVuLTUwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmVlbi0yMDBcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgbWItMlwiPlxuICAgICAgICAgICAgICAgIDxJbmZvIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmVlbi03MDBcIiAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmVlbi04MDBcIj57dC5jdWx0dXJhbE5vdGV9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJzcGFjZS15LTEgdGV4dC1zbSB0ZXh0LWdyZWVuLTcwMFwiPlxuICAgICAgICAgICAgICAgIHt0cmFuc2xhdGlvbi5jdWx0dXJhbE5vdGVzLm1hcCgobm90ZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLXN0YXJ0IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTEgaC0xIGJnLWdyZWVuLTYwMCByb3VuZGVkLWZ1bGwgbXQtMiBmbGV4LXNocmluay0wXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e25vdGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEFsdGVybmF0aXZlIFRyYW5zbGF0aW9ucyAqL31cbiAgICAgIHt0cmFuc2xhdGlvbi5hbHRlcm5hdGl2ZVRyYW5zbGF0aW9ucyAmJiB0cmFuc2xhdGlvbi5hbHRlcm5hdGl2ZVRyYW5zbGF0aW9ucy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTMgYmctZ3JheS01MCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBtYi0yXCI+XG4gICAgICAgICAgICA8UmVmcmVzaEN3IGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTYwMFwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj57dC5hbHRlcm5hdGl2ZVRyYW5zbGF0aW9uc308L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIHt0cmFuc2xhdGlvbi5hbHRlcm5hdGl2ZVRyYW5zbGF0aW9ucy5zbGljZSgwLCAzKS5tYXAoKGFsdCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgcC0yIGJnLXdoaXRlIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTEwMFwiPlxuICAgICAgICAgICAgICAgIHthbHR9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIENvcHkgQ29uZmlybWF0aW9uICovfVxuICAgICAgPEFuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAge2NvcGllZFRleHQgJiYgKFxuICAgICAgICAgIDxtb3Rpb24uZGl2XG4gICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IDEwIH19XG4gICAgICAgICAgICBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHk6IDAgfX1cbiAgICAgICAgICAgIGV4aXQ9e3sgb3BhY2l0eTogMCwgeTogMTAgfX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtMiBiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAgcm91bmRlZC1sZ1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e3QuY29waWVkfTwvc3Bhbj5cbiAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICl9XG4gICAgICA8L0FuaW1hdGVQcmVzZW5jZT5cbiAgICA8L2Rpdj5cbiAgKVxufSJdLCJuYW1lcyI6WyJNZXNzYWdlVHJhbnNsYXRvciIsIm9yaWdpbmFsTWVzc2FnZSIsInNvdXJjZUxhbmd1YWdlIiwidGFyZ2V0TGFuZ3VhZ2UiLCJkaWFsZWN0Iiwic2hvd0N1bHR1cmFsQ29udGV4dCIsImVuYWJsZVZvaWNlUGxheWJhY2siLCJvblRyYW5zbGF0aW9uQ29tcGxldGUiLCJjbGFzc05hbWUiLCJsYW5ndWFnZSIsInVzZUxhbmd1YWdlIiwidHJhbnNsYXRpb24iLCJzZXRUcmFuc2xhdGlvbiIsInVzZVN0YXRlIiwiaXNUcmFuc2xhdGluZyIsInNldElzVHJhbnNsYXRpbmciLCJzaG93T3JpZ2luYWwiLCJzZXRTaG93T3JpZ2luYWwiLCJjb3BpZWRUZXh0Iiwic2V0Q29waWVkVGV4dCIsImVycm9yIiwic2V0RXJyb3IiLCJpc1BsYXlpbmdPcmlnaW5hbCIsInNldElzUGxheWluZ09yaWdpbmFsIiwiaXNQbGF5aW5nVHJhbnNsYXRlZCIsInNldElzUGxheWluZ1RyYW5zbGF0ZWQiLCJhdXRvVGFyZ2V0TGFuZ3VhZ2UiLCJkaWFsZWN0SW5mbyIsImdldERpYWxlY3RJbmZvIiwidHJhbnNsYXRpb25zIiwiZW4iLCJ0cmFuc2xhdGluZyIsInNob3dUcmFuc2xhdGlvbiIsInBsYXlPcmlnaW5hbCIsInBsYXlUcmFuc2xhdGVkIiwiY29weU9yaWdpbmFsIiwiY29weVRyYW5zbGF0aW9uIiwicmV0cmFuc2xhdGUiLCJjb25maWRlbmNlIiwiY3VsdHVyYWxOb3RlIiwiaWRpb21EZXRlY3RlZCIsImFsdGVybmF0aXZlVHJhbnNsYXRpb25zIiwidHJhbnNsYXRpb25FcnJvciIsImNvcGllZCIsImV4Y2VsbGVudCIsImdvb2QiLCJmYWlyIiwicG9vciIsImF1dG9EZXRlY3RlZCIsImZvcm1hbENvbnRleHQiLCJpbmZvcm1hbENvbnRleHQiLCJyZWdpb25hbEV4cHJlc3Npb24iLCJwdCIsInQiLCJ1c2VFZmZlY3QiLCJ0cmltIiwidHJhbnNsYXRlTWVzc2FnZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZXh0Iiwic291cmNlIiwidGFyZ2V0IiwiaW5jbHVkZUN1bHR1cmFsQ29udGV4dCIsIm9rIiwiRXJyb3IiLCJyZXN1bHQiLCJqc29uIiwiZW5oYW5jZWRSZXN1bHQiLCJkZXRlY3RlZElkaW9tcyIsImRldGVjdElkaW9tcyIsImN1bHR1cmFsTm90ZXMiLCJnZW5lcmF0ZUN1bHR1cmFsTm90ZXMiLCJhbHRlcm5hdGl2ZXMiLCJjb25zb2xlIiwib3JpZ2luYWxUZXh0IiwidHJhbnNsYXRlZFRleHQiLCJpZGlvbXMiLCJpc1BvcnR1Z3Vlc2VJZGlvbSIsImNvbW1vbklkaW9tcyIsImZvckVhY2giLCJpZGlvbSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJwdXNoIiwibm90ZXMiLCJjdWx0dXJhbENvbnRleHQiLCJDVUxUVVJBTF9DT05URVhUUyIsImNvdW50cnkiLCJjdWx0dXJhbE1hcmtlcnMiLCJtYXJrZXIiLCJmb3JtYWxXb3JkcyIsImluZm9ybWFsV29yZHMiLCJzb21lIiwid29yZCIsImNvcHlUb0NsaXBib2FyZCIsInR5cGUiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJzZXRUaW1lb3V0IiwicGxheVRleHQiLCJpc09yaWdpbmFsIiwid2luZG93IiwidXR0ZXJhbmNlIiwiU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlIiwibGFuZyIsIm9uZW5kIiwicmF0ZSIsInBpdGNoIiwidm9sdW1lIiwic3BlZWNoU3ludGhlc2lzIiwic3BlYWsiLCJnZXRRdWFsaXR5SW5kaWNhdG9yIiwicXVhbGl0eSIsImdldFRyYW5zbGF0aW9uUXVhbGl0eSIsImRpdiIsInNwYW4iLCJzdHlsZSIsImNvbG9yIiwiaWNvbiIsIk1hdGgiLCJyb3VuZCIsIm1vdGlvbiIsImFuaW1hdGUiLCJyb3RhdGUiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJyZXBlYXQiLCJJbmZpbml0eSIsImVhc2UiLCJib3JkZXJDb2xvciIsIlBPUlRVR1VFU0VfQ09MT1JTIiwicHJpbWFyeSIsIkxhbmd1YWdlcyIsImZsYWciLCJuYW1lIiwiYnV0dG9uIiwid2hpbGVIb3ZlciIsInNjYWxlIiwid2hpbGVUYXAiLCJvbkNsaWNrIiwiUmVmcmVzaEN3IiwiaW5pdGlhbCIsIm9wYWNpdHkiLCJ5IiwiQWxlcnRDaXJjbGUiLCJwIiwiQW5pbWF0ZVByZXNlbmNlIiwibW9kZSIsIngiLCJleGl0IiwiR2xvYmUiLCJkaXNhYmxlZCIsIlZvbHVtZTIiLCJDaGVjayIsIkNvcHkiLCJTcGFya2xlcyIsImxlbmd0aCIsIkJvb2tPcGVuIiwibWFwIiwiaW5kZXgiLCJ0cmFuc2xhdGVJZGlvbSIsIkluZm8iLCJ1bCIsIm5vdGUiLCJsaSIsInNsaWNlIiwiYWx0Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBbURBOzs7ZUFBd0JBOzs7O3VCQWpEWTs4QkFDSTs2QkFZakM7aUNBQ3FCO3VDQVNyQjt1QkFDMkI7QUF5Qm5CLFNBQVNBLGtCQUFrQixFQUN4Q0MsZUFBZSxFQUNmQyxpQkFBaUIsTUFBTSxFQUN2QkMsY0FBYyxFQUNkQyxVQUFVLE9BQU8sRUFDakJDLHNCQUFzQixJQUFJLEVBQzFCQyxzQkFBc0IsSUFBSSxFQUMxQkMscUJBQXFCLEVBQ3JCQyxZQUFZLEVBQUUsRUFDUztJQUN2QixNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHQyxJQUFBQSw0QkFBVztJQUNoQyxNQUFNLENBQUNDLGFBQWFDLGVBQWUsR0FBR0MsSUFBQUEsZUFBUSxFQUEyQjtJQUN6RSxNQUFNLENBQUNDLGVBQWVDLGlCQUFpQixHQUFHRixJQUFBQSxlQUFRLEVBQUM7SUFDbkQsTUFBTSxDQUFDRyxjQUFjQyxnQkFBZ0IsR0FBR0osSUFBQUEsZUFBUSxFQUFDO0lBQ2pELE1BQU0sQ0FBQ0ssWUFBWUMsY0FBYyxHQUFHTixJQUFBQSxlQUFRLEVBQWdCO0lBQzVELE1BQU0sQ0FBQ08sT0FBT0MsU0FBUyxHQUFHUixJQUFBQSxlQUFRLEVBQWdCO0lBQ2xELE1BQU0sQ0FBQ1MsbUJBQW1CQyxxQkFBcUIsR0FBR1YsSUFBQUEsZUFBUSxFQUFDO0lBQzNELE1BQU0sQ0FBQ1cscUJBQXFCQyx1QkFBdUIsR0FBR1osSUFBQUEsZUFBUSxFQUFDO0lBRS9ELE1BQU1hLHFCQUFxQnZCLGtCQUFtQk0sQ0FBQUEsYUFBYSxPQUFPLE9BQU8sSUFBRztJQUM1RSxNQUFNa0IsY0FBY0MsSUFBQUEscUNBQWMsRUFBQ3hCO0lBRW5DLE1BQU15QixlQUFlO1FBQ25CQyxJQUFJO1lBQ0ZDLGFBQWE7WUFDYmYsY0FBYztZQUNkZ0IsaUJBQWlCO1lBQ2pCQyxjQUFjO1lBQ2RDLGdCQUFnQjtZQUNoQkMsY0FBYztZQUNkQyxpQkFBaUI7WUFDakJDLGFBQWE7WUFDYkMsWUFBWTtZQUNabEMsU0FBUztZQUNUbUMsY0FBYztZQUNkQyxlQUFlO1lBQ2ZDLHlCQUF5QjtZQUN6QkMsa0JBQWtCO1lBQ2xCQyxRQUFRO1lBQ1JDLFdBQVc7WUFDWEMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLE1BQU07WUFDTkMsY0FBYztZQUNkQyxlQUFlO1lBQ2ZDLGlCQUFpQjtZQUNqQkMsb0JBQW9CO1FBQ3RCO1FBQ0FDLElBQUk7WUFDRnJCLGFBQWE7WUFDYmYsY0FBYztZQUNkZ0IsaUJBQWlCO1lBQ2pCQyxjQUFjO1lBQ2RDLGdCQUFnQjtZQUNoQkMsY0FBYztZQUNkQyxpQkFBaUI7WUFDakJDLGFBQWE7WUFDYkMsWUFBWTtZQUNabEMsU0FBUztZQUNUbUMsY0FBYztZQUNkQyxlQUFlO1lBQ2ZDLHlCQUF5QjtZQUN6QkMsa0JBQWtCO1lBQ2xCQyxRQUFRO1lBQ1JDLFdBQVc7WUFDWEMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLE1BQU07WUFDTkMsY0FBYztZQUNkQyxlQUFlO1lBQ2ZDLGlCQUFpQjtZQUNqQkMsb0JBQW9CO1FBQ3RCO0lBQ0Y7SUFFQSxNQUFNRSxJQUFJeEIsWUFBWSxDQUFDcEIsU0FBUztJQUVoQzZDLElBQUFBLGdCQUFTLEVBQUM7UUFDUixJQUFJckQsZ0JBQWdCc0QsSUFBSSxJQUFJO1lBQzFCQztRQUNGO0lBQ0YsR0FBRztRQUFDdkQ7UUFBaUJ5QjtRQUFvQnRCO0tBQVE7SUFFakQsTUFBTW9ELG1CQUFtQjtRQUN2QixJQUFJLENBQUN2RCxnQkFBZ0JzRCxJQUFJLElBQUk7UUFFN0J4QyxpQkFBaUI7UUFDakJNLFNBQVM7UUFFVCxJQUFJO1lBQ0YsMkNBQTJDO1lBQzNDLE1BQU1vQyxXQUFXLE1BQU1DLE1BQU0sa0JBQWtCO2dCQUM3Q0MsUUFBUTtnQkFDUkMsU0FBUztvQkFDUCxnQkFBZ0I7Z0JBQ2xCO2dCQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7b0JBQ25CQyxNQUFNL0Q7b0JBQ05nRSxRQUFRL0Q7b0JBQ1JnRSxRQUFReEM7b0JBQ1J0QixTQUFTQTtvQkFDVCtELHdCQUF3QjlEO2dCQUMxQjtZQUNGO1lBRUEsSUFBSSxDQUFDb0QsU0FBU1csRUFBRSxFQUFFO2dCQUNoQixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFFQSxNQUFNQyxTQUFTLE1BQU1iLFNBQVNjLElBQUk7WUFFbEMseUNBQXlDO1lBQ3pDLE1BQU1DLGlCQUFvQztnQkFDeEMsR0FBR0YsTUFBTTtnQkFDVEcsZ0JBQWdCQyxhQUFhekUsaUJBQWlCRztnQkFDOUN1RSxlQUFlQyxzQkFBc0IzRSxpQkFBaUJHO2dCQUN0RHFDLHlCQUF5QjZCLE9BQU9PLFlBQVksSUFBSSxFQUFFO1lBQ3BEO1lBRUFqRSxlQUFlNEQ7WUFDZmpFLHdCQUF3QmlFO1FBRTFCLEVBQUUsT0FBT3BELE9BQU87WUFDZDBELFFBQVExRCxLQUFLLENBQUMsc0JBQXNCQTtZQUNwQ0MsU0FBU2dDLEVBQUVYLGdCQUFnQjtZQUUzQiw0Q0FBNEM7WUFDNUM5QixlQUFlO2dCQUNibUUsY0FBYzlFO2dCQUNkK0UsZ0JBQWdCL0U7Z0JBQ2hCQyxnQkFBZ0JBO2dCQUNoQkMsZ0JBQWdCdUI7Z0JBQ2hCdEIsU0FBU0E7Z0JBQ1RrQyxZQUFZO2dCQUNabUMsZ0JBQWdCQyxhQUFhekUsaUJBQWlCRztnQkFDOUN1RSxlQUFlQyxzQkFBc0IzRSxpQkFBaUJHO1lBQ3hEO1FBQ0YsU0FBVTtZQUNSVyxpQkFBaUI7UUFDbkI7SUFDRjtJQUVBLE1BQU0yRCxlQUFlLENBQUNWLE1BQWM1RDtRQUNsQyxNQUFNNkUsU0FBbUIsRUFBRTtRQUUzQixJQUFJQyxJQUFBQSx3Q0FBaUIsRUFBQ2xCLE1BQU01RCxVQUFVO1lBQ3BDLGtDQUFrQztZQUNsQyxNQUFNK0UsZUFBZTtnQkFDbkI7Z0JBQVc7Z0JBQWdCO2dCQUFjO2dCQUN6QztnQkFBUTtnQkFBUztnQkFBVTthQUM1QjtZQUVEQSxhQUFhQyxPQUFPLENBQUNDLENBQUFBO2dCQUNuQixJQUFJckIsS0FBS3NCLFdBQVcsR0FBR0MsUUFBUSxDQUFDRixRQUFRO29CQUN0Q0osT0FBT08sSUFBSSxDQUFDSDtnQkFDZDtZQUNGO1FBQ0Y7UUFFQSxPQUFPSjtJQUNUO0lBRUEsTUFBTUwsd0JBQXdCLENBQUNaLE1BQWM1RDtRQUMzQyxNQUFNcUYsUUFBa0IsRUFBRTtRQUMxQixNQUFNQyxrQkFBa0JDLHdDQUFpQixDQUFDaEUsWUFBWWlFLE9BQU8sQ0FBQ04sV0FBVyxHQUFHO1FBRTVFLElBQUksQ0FBQ0ksaUJBQWlCLE9BQU9EO1FBRTdCLDZCQUE2QjtRQUM3QkMsZ0JBQWdCRyxlQUFlLENBQUNULE9BQU8sQ0FBQ1UsQ0FBQUE7WUFDdEMsSUFBSTlCLEtBQUtzQixXQUFXLEdBQUdDLFFBQVEsQ0FBQ08sU0FBUztnQkFDdkNMLE1BQU1ELElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRU0sT0FBTywrQkFBK0IsRUFBRUosZ0JBQWdCRSxPQUFPLENBQUMsQ0FBQztZQUNsRjtRQUNGO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1HLGNBQWM7WUFBQztZQUFVO1lBQVc7WUFBUztTQUFZO1FBQy9ELE1BQU1DLGdCQUFnQjtZQUFDO1lBQU07WUFBUTtZQUFRO1NBQU87UUFFcEQsSUFBSUQsWUFBWUUsSUFBSSxDQUFDQyxDQUFBQSxPQUFRbEMsS0FBS3NCLFdBQVcsR0FBR0MsUUFBUSxDQUFDVyxRQUFRO1lBQy9EVCxNQUFNRCxJQUFJLENBQUNuQyxFQUFFSixhQUFhO1FBQzVCLE9BQU8sSUFBSStDLGNBQWNDLElBQUksQ0FBQ0MsQ0FBQUEsT0FBUWxDLEtBQUtzQixXQUFXLEdBQUdDLFFBQVEsQ0FBQ1csUUFBUTtZQUN4RVQsTUFBTUQsSUFBSSxDQUFDbkMsRUFBRUgsZUFBZTtRQUM5QjtRQUVBLE9BQU91QztJQUNUO0lBRUEsTUFBTVUsa0JBQWtCLE9BQU9uQyxNQUFjb0M7UUFDM0MsSUFBSTtZQUNGLE1BQU1DLFVBQVVDLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDdkM7WUFDcEM3QyxjQUFjaUY7WUFDZEksV0FBVyxJQUFNckYsY0FBYyxPQUFPO1FBQ3hDLEVBQUUsT0FBT0MsT0FBTztZQUNkMEQsUUFBUTFELEtBQUssQ0FBQyxnQkFBZ0JBO1FBQ2hDO0lBQ0Y7SUFFQSxNQUFNcUYsV0FBVyxPQUFPekMsTUFBYzBDO1FBQ3BDLElBQUksQ0FBQ3BHLHVCQUF1QixDQUFFLENBQUEscUJBQXFCcUcsTUFBSyxHQUFJO1FBRTVELE1BQU1DLFlBQVksSUFBSUMseUJBQXlCN0M7UUFFL0MsSUFBSTBDLFlBQVk7WUFDZEUsVUFBVUUsSUFBSSxHQUFHMUc7WUFDakJtQixxQkFBcUI7WUFDckJxRixVQUFVRyxLQUFLLEdBQUcsSUFBTXhGLHFCQUFxQjtRQUMvQyxPQUFPO1lBQ0xxRixVQUFVRSxJQUFJLEdBQUdwRix1QkFBdUIsT0FBTyxVQUFVO1lBQ3pERCx1QkFBdUI7WUFDdkJtRixVQUFVRyxLQUFLLEdBQUcsSUFBTXRGLHVCQUF1QjtRQUNqRDtRQUVBbUYsVUFBVUksSUFBSSxHQUFHO1FBQ2pCSixVQUFVSyxLQUFLLEdBQUc7UUFDbEJMLFVBQVVNLE1BQU0sR0FBRztRQUVuQkMsZ0JBQWdCQyxLQUFLLENBQUNSO0lBQ3hCO0lBRUEsTUFBTVMsc0JBQXNCLENBQUMvRTtRQUMzQixNQUFNZ0YsVUFBVUMsSUFBQUEsNENBQXFCLEVBQUNqRjtRQUN0QyxxQkFDRSxzQkFBQ2tGO1lBQUloSCxXQUFVOzs4QkFDYixxQkFBQ2lIO29CQUFLQyxPQUFPO3dCQUFFQyxPQUFPTCxRQUFRSyxLQUFLO29CQUFDOzhCQUFJTCxRQUFRTSxJQUFJOzs4QkFDcEQscUJBQUNIO29CQUFLakgsV0FBVTs4QkFDYjhCLGFBQWEsSUFBSSxDQUFDLEVBQUV1RixLQUFLQyxLQUFLLENBQUN4RixhQUFhLEtBQUssQ0FBQyxDQUFDLEdBQUdlLEVBQUVMLFlBQVk7Ozs7SUFJN0U7SUFFQSxJQUFJbEMsZUFBZTtRQUNqQixxQkFDRSxzQkFBQzBHO1lBQUloSCxXQUFXLENBQUMscUNBQXFDLEVBQUVBLFVBQVUsQ0FBQzs7OEJBQ2pFLHFCQUFDdUgsb0JBQU0sQ0FBQ1AsR0FBRztvQkFDVFEsU0FBUzt3QkFBRUMsUUFBUTtvQkFBSTtvQkFDdkJDLFlBQVk7d0JBQUVDLFVBQVU7d0JBQUdDLFFBQVFDO3dCQUFVQyxNQUFNO29CQUFTO29CQUM1RDlILFdBQVU7b0JBQ1ZrSCxPQUFPO3dCQUFFYSxhQUFhQyx3QkFBaUIsQ0FBQ0MsT0FBTztvQkFBQzs7OEJBRWxELHFCQUFDaEI7b0JBQUtqSCxXQUFVOzhCQUF5QjZDLEVBQUV0QixXQUFXOzs7O0lBRzVEO0lBRUEsSUFBSSxDQUFDcEIsYUFBYSxPQUFPO0lBRXpCLHFCQUNFLHNCQUFDNkc7UUFBSWhILFdBQVcsQ0FBQyw0RUFBNEUsRUFBRUEsVUFBVSxDQUFDOzswQkFFeEcsc0JBQUNnSDtnQkFBSWhILFdBQVU7O2tDQUNiLHNCQUFDZ0g7d0JBQUloSCxXQUFVOzswQ0FDYixzQkFBQ2dIO2dDQUFJaEgsV0FBVTs7a0RBQ2IscUJBQUNrSSxzQkFBUzt3Q0FBQ2xJLFdBQVU7d0NBQTJCa0gsT0FBTzs0Q0FBRUMsT0FBT2Esd0JBQWlCLENBQUNDLE9BQU87d0NBQUM7O2tEQUMxRixzQkFBQ2hCO3dDQUFLakgsV0FBVTs7NENBQ2JtQixZQUFZZ0gsSUFBSTs0Q0FBQzs0Q0FBRWhILFlBQVlpSCxJQUFJLENBQUNuSSxTQUFTOzRDQUFDOzRDQUFJaUIsdUJBQXVCLE9BQU8scUNBQWlCOzs7Ozs0QkFJckcyRixvQkFBb0IxRyxZQUFZMkIsVUFBVTs7O2tDQUc3QyxzQkFBQ2tGO3dCQUFJaEgsV0FBVTs7MENBQ2IscUJBQUN1SCxvQkFBTSxDQUFDYyxNQUFNO2dDQUNaQyxZQUFZO29DQUFFQyxPQUFPO2dDQUFLO2dDQUMxQkMsVUFBVTtvQ0FBRUQsT0FBTztnQ0FBSztnQ0FDeEJFLFNBQVMsSUFBTWhJLGdCQUFnQixDQUFDRDtnQ0FDaENSLFdBQVU7MENBRVRRLGVBQWVxQyxFQUFFckIsZUFBZSxHQUFHcUIsRUFBRXJDLFlBQVk7OzBDQUdwRCxxQkFBQzZIO2dDQUNDSSxTQUFTekY7Z0NBQ1RoRCxXQUFVOzBDQUVWLGNBQUEscUJBQUMwSSxzQkFBUztvQ0FBQzFJLFdBQVU7Ozs7Ozs7WUFNMUJZLHVCQUNDLHNCQUFDMkcsb0JBQU0sQ0FBQ1AsR0FBRztnQkFDVDJCLFNBQVM7b0JBQUVDLFNBQVM7b0JBQUdDLEdBQUcsQ0FBQztnQkFBRztnQkFDOUJyQixTQUFTO29CQUFFb0IsU0FBUztvQkFBR0MsR0FBRztnQkFBRTtnQkFDNUI3SSxXQUFVOztrQ0FFVixxQkFBQzhJLHdCQUFXO3dCQUFDOUksV0FBVTs7a0NBQ3ZCLHFCQUFDK0k7d0JBQUUvSSxXQUFVO2tDQUF3Qlk7Ozs7MEJBS3pDLHFCQUFDb0ksNkJBQWU7Z0JBQUNDLE1BQUs7MEJBQ25CekksNkJBQ0MscUJBQUMrRyxvQkFBTSxDQUFDUCxHQUFHO29CQUVUMkIsU0FBUzt3QkFBRUMsU0FBUzt3QkFBR00sR0FBRyxDQUFDO29CQUFHO29CQUM5QjFCLFNBQVM7d0JBQUVvQixTQUFTO3dCQUFHTSxHQUFHO29CQUFFO29CQUM1QkMsTUFBTTt3QkFBRVAsU0FBUzt3QkFBR00sR0FBRztvQkFBRztvQkFDMUJsSixXQUFVOzhCQUdWLGNBQUEsc0JBQUNnSDt3QkFBSWhILFdBQVU7OzBDQUNiLHNCQUFDZ0g7Z0NBQUloSCxXQUFVOztrREFDYixzQkFBQ2dIO3dDQUFJaEgsV0FBVTs7MERBQ2IscUJBQUNvSixrQkFBSztnREFBQ3BKLFdBQVU7OzBEQUNqQixxQkFBQ2lIO2dEQUFLakgsV0FBVTswREFBb0M7OzBEQUNwRCxxQkFBQ2lIO2dEQUFLakgsV0FBVTswREFDYm1CLFlBQVlpSCxJQUFJLENBQUNuSSxTQUFTOzs7O2tEQUkvQixzQkFBQytHO3dDQUFJaEgsV0FBVTs7NENBQ1pGLHFDQUNDLHFCQUFDdUk7Z0RBQ0NJLFNBQVMsSUFBTXhDLFNBQVM5RixZQUFZb0UsWUFBWSxFQUFFO2dEQUNsRDhFLFVBQVV2STtnREFDVmQsV0FBVyxDQUFDLHFGQUFxRixFQUFFYyxvQkFBb0Isa0JBQWtCLEdBQUcsQ0FBQzswREFFN0ksY0FBQSxxQkFBQ3dJLG9CQUFPO29EQUFDdEosV0FBVTs7OzBEQUl2QixxQkFBQ3FJO2dEQUNDSSxTQUFTLElBQU05QyxnQkFBZ0J4RixZQUFZb0UsWUFBWSxFQUFFO2dEQUN6RHZFLFdBQVU7MERBRVRVLGVBQWUsMkJBQ2QscUJBQUM2SSxrQkFBSztvREFBQ3ZKLFdBQVU7bUVBRWpCLHFCQUFDd0osaUJBQUk7b0RBQUN4SixXQUFVOzs7Ozs7OzBDQU14QixxQkFBQytJO2dDQUFFL0ksV0FBVTswQ0FDVkcsWUFBWW9FLFlBQVk7Ozs7bUJBMUN6Qiw0QkErQ04scUJBQUNnRCxvQkFBTSxDQUFDUCxHQUFHO29CQUVUMkIsU0FBUzt3QkFBRUMsU0FBUzt3QkFBR00sR0FBRztvQkFBRztvQkFDN0IxQixTQUFTO3dCQUFFb0IsU0FBUzt3QkFBR00sR0FBRztvQkFBRTtvQkFDNUJDLE1BQU07d0JBQUVQLFNBQVM7d0JBQUdNLEdBQUcsQ0FBQztvQkFBRztvQkFDM0JsSixXQUFVOzhCQUdWLGNBQUEsc0JBQUNnSDt3QkFBSWhILFdBQVU7OzBDQUNiLHNCQUFDZ0g7Z0NBQUloSCxXQUFVOztrREFDYixzQkFBQ2dIO3dDQUFJaEgsV0FBVTs7MERBQ2IscUJBQUN5SixxQkFBUTtnREFBQ3pKLFdBQVU7OzBEQUNwQixxQkFBQ2lIO2dEQUFLakgsV0FBVTswREFBb0M7OzBEQUNwRCxxQkFBQ2lIO2dEQUFLakgsV0FBVTswREFDYmtCLHVCQUF1QixPQUFPLFlBQVk7Ozs7a0RBSS9DLHNCQUFDOEY7d0NBQUloSCxXQUFVOzs0Q0FDWkYscUNBQ0MscUJBQUN1STtnREFDQ0ksU0FBUyxJQUFNeEMsU0FBUzlGLFlBQVlxRSxjQUFjLEVBQUU7Z0RBQ3BENkUsVUFBVXJJO2dEQUNWaEIsV0FBVyxDQUFDLGtGQUFrRixFQUFFZ0Isc0JBQXNCLGtCQUFrQixHQUFHLENBQUM7MERBRTVJLGNBQUEscUJBQUNzSSxvQkFBTztvREFBQ3RKLFdBQVU7OzswREFJdkIscUJBQUNxSTtnREFDQ0ksU0FBUyxJQUFNOUMsZ0JBQWdCeEYsWUFBWXFFLGNBQWMsRUFBRTtnREFDM0R4RSxXQUFVOzBEQUVUVSxlQUFlLDhCQUNkLHFCQUFDNkksa0JBQUs7b0RBQUN2SixXQUFVO21FQUVqQixxQkFBQ3dKLGlCQUFJO29EQUFDeEosV0FBVTs7Ozs7OzswQ0FNeEIscUJBQUMrSTtnQ0FBRS9JLFdBQVU7MENBQ1ZHLFlBQVlxRSxjQUFjOzs7O21CQTFDM0I7O1lBa0RUM0UsdUJBQXdCTSxDQUFBQSxZQUFZOEQsY0FBYyxFQUFFeUYsVUFBVXZKLFlBQVlnRSxhQUFhLEVBQUV1RixNQUFLLG1CQUM3RixzQkFBQzFDO2dCQUFJaEgsV0FBVTs7b0JBRVpHLFlBQVk4RCxjQUFjLElBQUk5RCxZQUFZOEQsY0FBYyxDQUFDeUYsTUFBTSxHQUFHLG1CQUNqRSxzQkFBQzFDO3dCQUFJaEgsV0FBVTs7MENBQ2Isc0JBQUNnSDtnQ0FBSWhILFdBQVU7O2tEQUNiLHFCQUFDMkoscUJBQVE7d0NBQUMzSixXQUFVOztrREFDcEIscUJBQUNpSDt3Q0FBS2pILFdBQVU7a0RBQXVDNkMsRUFBRWIsYUFBYTs7OzswQ0FHeEUscUJBQUNnRjtnQ0FBSWhILFdBQVU7MENBQ1pHLFlBQVk4RCxjQUFjLENBQUMyRixHQUFHLENBQUMsQ0FBQy9FLE9BQU9nRixzQkFDdEMsc0JBQUM3Qzt3Q0FBZ0JoSCxXQUFVOzswREFDekIsc0JBQUNpSDtnREFBS2pILFdBQVU7O29EQUE4QjtvREFBRTZFO29EQUFNOzs7MERBQ3RELHNCQUFDb0M7Z0RBQUtqSCxXQUFVOztvREFBa0I7b0RBQUk4SixJQUFBQSxxQ0FBYyxFQUFDakYsT0FBT2pGLFlBQVk7Ozs7dUNBRmhFaUs7Ozs7b0JBVWpCMUosWUFBWWdFLGFBQWEsSUFBSWhFLFlBQVlnRSxhQUFhLENBQUN1RixNQUFNLEdBQUcsbUJBQy9ELHNCQUFDMUM7d0JBQUloSCxXQUFVOzswQ0FDYixzQkFBQ2dIO2dDQUFJaEgsV0FBVTs7a0RBQ2IscUJBQUMrSixpQkFBSTt3Q0FBQy9KLFdBQVU7O2tEQUNoQixxQkFBQ2lIO3dDQUFLakgsV0FBVTtrREFBc0M2QyxFQUFFZCxZQUFZOzs7OzBDQUd0RSxxQkFBQ2lJO2dDQUFHaEssV0FBVTswQ0FDWEcsWUFBWWdFLGFBQWEsQ0FBQ3lGLEdBQUcsQ0FBQyxDQUFDSyxNQUFNSixzQkFDcEMsc0JBQUNLO3dDQUFlbEssV0FBVTs7MERBQ3hCLHFCQUFDaUg7Z0RBQUtqSCxXQUFVOzswREFDaEIscUJBQUNpSDswREFBTWdEOzs7dUNBRkFKOzs7Ozs7WUFZcEIxSixZQUFZOEIsdUJBQXVCLElBQUk5QixZQUFZOEIsdUJBQXVCLENBQUN5SCxNQUFNLEdBQUcsbUJBQ25GLHNCQUFDMUM7Z0JBQUloSCxXQUFVOztrQ0FDYixzQkFBQ2dIO3dCQUFJaEgsV0FBVTs7MENBQ2IscUJBQUMwSSxzQkFBUztnQ0FBQzFJLFdBQVU7OzBDQUNyQixxQkFBQ2lIO2dDQUFLakgsV0FBVTswQ0FBcUM2QyxFQUFFWix1QkFBdUI7Ozs7a0NBR2hGLHFCQUFDK0U7d0JBQUloSCxXQUFVO2tDQUNaRyxZQUFZOEIsdUJBQXVCLENBQUNrSSxLQUFLLENBQUMsR0FBRyxHQUFHUCxHQUFHLENBQUMsQ0FBQ1EsS0FBS1Asc0JBQ3pELHFCQUFDN0M7Z0NBQWdCaEgsV0FBVTswQ0FDeEJvSzsrQkFET1A7Ozs7MEJBU2xCLHFCQUFDYiw2QkFBZTswQkFDYnRJLDRCQUNDLHNCQUFDNkcsb0JBQU0sQ0FBQ1AsR0FBRztvQkFDVDJCLFNBQVM7d0JBQUVDLFNBQVM7d0JBQUdDLEdBQUc7b0JBQUc7b0JBQzdCckIsU0FBUzt3QkFBRW9CLFNBQVM7d0JBQUdDLEdBQUc7b0JBQUU7b0JBQzVCTSxNQUFNO3dCQUFFUCxTQUFTO3dCQUFHQyxHQUFHO29CQUFHO29CQUMxQjdJLFdBQVU7O3NDQUVWLHFCQUFDdUosa0JBQUs7NEJBQUN2SixXQUFVOztzQ0FDakIscUJBQUNpSDs0QkFBS2pILFdBQVU7c0NBQXVCNkMsRUFBRVYsTUFBTTs7Ozs7OztBQU0zRCJ9
be7ada90b03f2e99ca565e693fa66e3d
/**
 * Comprehensive error handling utilities for LusoTown platform
 * Provides secure error handling, logging, and user-friendly error messages
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ErrorType: function() {
        return ErrorType;
    },
    LusoTownError: function() {
        return LusoTownError;
    },
    default: function() {
        return _default;
    },
    inputValidation: function() {
        return inputValidation;
    },
    safeAsync: function() {
        return safeAsync;
    },
    safeDOMOperations: function() {
        return safeDOMOperations;
    },
    safeFetch: function() {
        return safeFetch;
    },
    safeLocalStorage: function() {
        return safeLocalStorage;
    },
    withErrorHandling: function() {
        return withErrorHandling;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _reacthottoast = require("react-hot-toast");
const _logger = /*#__PURE__*/ _interop_require_default(require("../utils/logger"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var ErrorType;
(function(ErrorType) {
    ErrorType["AUTHENTICATION"] = "authentication";
    ErrorType["AUTHORIZATION"] = "authorization";
    ErrorType["NETWORK"] = "network";
    ErrorType["VALIDATION"] = "validation";
    ErrorType["NOT_FOUND"] = "not_found";
    ErrorType["SERVER_ERROR"] = "server_error";
    ErrorType["CLIENT_ERROR"] = "client_error";
    ErrorType["UNKNOWN"] = "unknown";
})(ErrorType || (ErrorType = {}));
class LusoTownError extends Error {
    constructor(message, type = "unknown", code, context, userMessage){
        super(message);
        this.name = "LusoTownError";
        this.type = type;
        this.code = code;
        this.context = context;
        this.userMessage = userMessage;
        this.timestamp = new Date();
    }
}
async function safeAsync(operation, errorContext) {
    try {
        const data = await operation();
        return {
            data,
            success: true
        };
    } catch (error) {
        _logger.default.error(`Error in ${errorContext?.operationName || "async operation"}`, error, {
            area: "errorHandling",
            action: "async_error_handler"
        });
        const lusoError = error instanceof LusoTownError ? error : new LusoTownError(error instanceof Error ? error.message : "Unknown error occurred", categorizeError(error), undefined, {
            originalError: error,
            operation: errorContext?.operationName
        });
        // Show user-friendly toast if requested
        if (errorContext?.showToast) {
            const userMessage = lusoError.userMessage || getErrorMessage(lusoError.type);
            _reacthottoast.toast.error(userMessage);
        }
        // Call custom error handler if provided
        if (errorContext?.onError) {
            errorContext.onError(lusoError);
        }
        // Log to error tracking service in production
        if (process.env.NODE_ENV === "production") {
            logError(lusoError, errorContext);
        }
        return {
            error: lusoError,
            success: false,
            data: errorContext?.fallbackValue
        };
    }
}
// Categorize errors based on type and message
function categorizeError(error) {
    if (!error) return "unknown";
    const message = error.message?.toLowerCase() || "";
    const status = error.status || error.statusCode;
    // HTTP status codes
    if (status === 401) return "authentication";
    if (status === 403) return "authorization";
    if (status === 404) return "not_found";
    if (status >= 400 && status < 500) return "client_error";
    if (status >= 500) return "server_error";
    // Network errors
    if (message.includes("network") || message.includes("fetch") || message.includes("connection")) {
        return "network";
    }
    // Authentication errors
    if (message.includes("unauthorized") || message.includes("login") || message.includes("token")) {
        return "authentication";
    }
    // Validation errors
    if (message.includes("validation") || message.includes("invalid") || message.includes("required")) {
        return "validation";
    }
    return "unknown";
}
// Get user-friendly error messages
function getErrorMessage(type) {
    const messages = {
        ["authentication"]: "Sess\xe3o expirada. Por favor, fa\xe7a login novamente.",
        ["authorization"]: "N\xe3o tem permiss\xe3o para realizar esta a\xe7\xe3o.",
        ["network"]: "Problema de conex\xe3o. Verifique sua internet e tente novamente.",
        ["validation"]: "Dados inv\xe1lidos. Verifique as informa\xe7\xf5es e tente novamente.",
        ["not_found"]: "Recurso n\xe3o encontrado.",
        ["server_error"]: "Erro do servidor. Tente novamente em alguns minutos.",
        ["client_error"]: "Erro na solicita\xe7\xe3o. Verifique os dados e tente novamente.",
        ["unknown"]: "Ocorreu um erro inesperado. Tente novamente."
    };
    return messages[type] || messages["unknown"];
}
// Log error to external service in production
function logError(error, context) {
    // In production, this would send to your error tracking service
    // For now, we'll just structure the error for logging
    const errorReport = {
        message: error.message,
        type: error.type,
        code: error.code,
        stack: error.stack,
        timestamp: error.timestamp,
        context: error.context,
        operationContext: context,
        userAgent: typeof window !== "undefined" ? window.navigator.userAgent : undefined,
        url: typeof window !== "undefined" ? window.location.href : undefined
    };
    _logger.default.error("Production error report", undefined, {
        area: "errorHandling",
        action: "production_error",
        ...errorReport
    });
}
const safeLocalStorage = {
    getItem: (key)=>{
        try {
            return localStorage.getItem(key);
        } catch (error) {
            _logger.default.error("Error reading from localStorage", error, {
                area: "errorHandling",
                action: "localStorage_read"
            });
            return null;
        }
    },
    setItem: (key, value)=>{
        try {
            localStorage.setItem(key, value);
            return true;
        } catch (error) {
            _logger.default.error("Error writing to localStorage", error, {
                area: "errorHandling",
                action: "localStorage_write"
            });
            return false;
        }
    },
    removeItem: (key)=>{
        try {
            localStorage.removeItem(key);
            return true;
        } catch (error) {
            _logger.default.error("Error removing from localStorage", error, {
                area: "errorHandling",
                action: "localStorage_remove"
            });
            return false;
        }
    },
    getJSON: (key)=>{
        try {
            const item = localStorage.getItem(key);
            return item ? JSON.parse(item) : null;
        } catch (error) {
            _logger.default.error("Error parsing JSON from localStorage", error, {
                area: "errorHandling",
                action: "localStorage_parse"
            });
            return null;
        }
    },
    setJSON: (key, value)=>{
        try {
            localStorage.setItem(key, JSON.stringify(value));
            return true;
        } catch (error) {
            _logger.default.error("Error storing JSON to localStorage", error, {
                area: "errorHandling",
                action: "localStorage_store"
            });
            return false;
        }
    }
};
const safeDOMOperations = {
    querySelector: (selector)=>{
        try {
            return document.querySelector(selector);
        } catch (error) {
            _logger.default.error("Error with querySelector", error, {
                area: "errorHandling",
                action: "dom_query_selector"
            });
            return null;
        }
    },
    getElementById: (id)=>{
        try {
            return document.getElementById(id);
        } catch (error) {
            _logger.default.error("Error with getElementById", error, {
                area: "errorHandling",
                action: "dom_get_element_by_id"
            });
            return null;
        }
    },
    addEventListener: (element, event, handler, options)=>{
        try {
            element.addEventListener(event, handler, options);
            return true;
        } catch (error) {
            _logger.default.error("Error adding event listener", error, {
                area: "errorHandling",
                action: "dom_add_event_listener"
            });
            return false;
        }
    },
    removeEventListener: (element, event, handler, options)=>{
        try {
            element.removeEventListener(event, handler, options);
            return true;
        } catch (error) {
            _logger.default.error("Error removing event listener", error, {
                area: "errorHandling",
                action: "dom_remove_event_listener"
            });
            return false;
        }
    }
};
const inputValidation = {
    email: (email)=>{
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    },
    sanitizeString: (input)=>{
        // Basic XSS prevention - remove potentially dangerous characters
        return input.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, "").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi, "").replace(/javascript:/gi, "").replace(/on\w+\s*=\s*"[^"]*"/gi, "").replace(/on\w+\s*=\s*'[^']*'/gi, "");
    },
    isValidLength: (input, min = 0, max = Infinity)=>{
        return input.length >= min && input.length <= max;
    },
    containsOnlyAllowedChars: (input, allowedChars)=>{
        return allowedChars.test(input);
    }
};
async function safeFetch(url, options, errorContext) {
    const maxRetries = errorContext?.retries ?? 0;
    let attempt = 0;
    while(attempt <= maxRetries){
        const result = await safeAsync(()=>fetch(url, options), {
            operationName: errorContext?.operationName || `fetch ${url}`,
            showToast: errorContext?.showToast && attempt === maxRetries // Only show toast on last attempt
        });
        if (result.success) {
            return result;
        }
        attempt++;
        if (attempt <= maxRetries) {
            // Wait before retrying (exponential backoff)
            await new Promise((resolve)=>setTimeout(resolve, Math.pow(2, attempt) * 1000));
        }
    }
    return {
        error: new LusoTownError("Network request failed after retries", "network"),
        success: false
    };
}
function withErrorHandling(Component, errorContext) {
    return function WrappedComponent(props) {
        try {
            return /*#__PURE__*/ (0, _jsxruntime.jsx)(Component, {
                ...props
            });
        } catch (error) {
            _logger.default.error(`Error in component ${errorContext?.componentName || "Unknown"}`, error, {
                area: "errorHandling",
                action: "component_error",
                componentName: errorContext?.componentName
            });
            if (errorContext?.fallbackRender) {
                return errorContext.fallbackRender(error);
            }
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "p-4 bg-red-50 border border-red-200 rounded-lg",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                    className: "text-red-800 text-sm",
                    children: [
                        "Erro ao carregar componente",
                        errorContext?.componentName ? ` ${errorContext.componentName}` : "",
                        ".",
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: ()=>window.location.reload(),
                            className: "ml-2 text-red-600 hover:text-red-700 underline",
                            children: "Recarregar p\xe1gina"
                        })
                    ]
                })
            });
        }
    };
}
const _default = {
    safeAsync,
    safeLocalStorage,
    safeDOMOperations,
    inputValidation,
    safeFetch,
    withErrorHandling,
    LusoTownError,
    ErrorType
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2xpYi9lcnJvckhhbmRsaW5nLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgZXJyb3IgaGFuZGxpbmcgdXRpbGl0aWVzIGZvciBMdXNvVG93biBwbGF0Zm9ybVxuICogUHJvdmlkZXMgc2VjdXJlIGVycm9yIGhhbmRsaW5nLCBsb2dnaW5nLCBhbmQgdXNlci1mcmllbmRseSBlcnJvciBtZXNzYWdlc1xuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAncmVhY3QtaG90LXRvYXN0J1xuaW1wb3J0IGxvZ2dlciBmcm9tICdAL3V0aWxzL2xvZ2dlcidcblxuLy8gRXJyb3IgdHlwZXMgZm9yIGNhdGVnb3JpemF0aW9uXG5leHBvcnQgZW51bSBFcnJvclR5cGUge1xuICBBVVRIRU5USUNBVElPTiA9ICdhdXRoZW50aWNhdGlvbicsXG4gIEFVVEhPUklaQVRJT04gPSAnYXV0aG9yaXphdGlvbicsXG4gIE5FVFdPUksgPSAnbmV0d29yaycsXG4gIFZBTElEQVRJT04gPSAndmFsaWRhdGlvbicsXG4gIE5PVF9GT1VORCA9ICdub3RfZm91bmQnLFxuICBTRVJWRVJfRVJST1IgPSAnc2VydmVyX2Vycm9yJyxcbiAgQ0xJRU5UX0VSUk9SID0gJ2NsaWVudF9lcnJvcicsXG4gIFVOS05PV04gPSAndW5rbm93bidcbn1cblxuLy8gQ3VzdG9tIGVycm9yIGNsYXNzIHdpdGggYWRkaXRpb25hbCBjb250ZXh0XG5leHBvcnQgY2xhc3MgTHVzb1Rvd25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGU6IEVycm9yVHlwZVxuICBwdWJsaWMgcmVhZG9ubHkgY29kZT86IHN0cmluZ1xuICBwdWJsaWMgcmVhZG9ubHkgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgcHVibGljIHJlYWRvbmx5IHVzZXJNZXNzYWdlPzogc3RyaW5nXG4gIHB1YmxpYyByZWFkb25seSB0aW1lc3RhbXA6IERhdGVcblxuICBjb25zdHJ1Y3RvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLlVOS05PV04sXG4gICAgY29kZT86IHN0cmluZyxcbiAgICBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICB1c2VyTWVzc2FnZT86IHN0cmluZ1xuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIHRoaXMubmFtZSA9ICdMdXNvVG93bkVycm9yJ1xuICAgIHRoaXMudHlwZSA9IHR5cGVcbiAgICB0aGlzLmNvZGUgPSBjb2RlXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dFxuICAgIHRoaXMudXNlck1lc3NhZ2UgPSB1c2VyTWVzc2FnZVxuICAgIHRoaXMudGltZXN0YW1wID0gbmV3IERhdGUoKVxuICB9XG59XG5cbi8vIFNhZmUgYXN5bmMgb3BlcmF0aW9uIHdyYXBwZXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlQXN5bmM8VD4oXG4gIG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgZXJyb3JDb250ZXh0Pzoge1xuICAgIG9wZXJhdGlvbk5hbWU/OiBzdHJpbmdcbiAgICBzaG93VG9hc3Q/OiBib29sZWFuXG4gICAgZmFsbGJhY2tWYWx1ZT86IFRcbiAgICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gdm9pZFxuICB9XG4pOiBQcm9taXNlPHsgZGF0YT86IFQ7IGVycm9yPzogTHVzb1Rvd25FcnJvcjsgc3VjY2VzczogYm9vbGVhbiB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IG9wZXJhdGlvbigpXG4gICAgcmV0dXJuIHsgZGF0YSwgc3VjY2VzczogdHJ1ZSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGBFcnJvciBpbiAke2Vycm9yQ29udGV4dD8ub3BlcmF0aW9uTmFtZSB8fCAnYXN5bmMgb3BlcmF0aW9uJ31gLCBlcnJvciwgeyBhcmVhOiAnZXJyb3JIYW5kbGluZycsIGFjdGlvbjogJ2FzeW5jX2Vycm9yX2hhbmRsZXInIH0pXG4gICAgXG4gICAgY29uc3QgbHVzb0Vycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBMdXNvVG93bkVycm9yIFxuICAgICAgPyBlcnJvciBcbiAgICAgIDogbmV3IEx1c29Ub3duRXJyb3IoXG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICAgICAgY2F0ZWdvcml6ZUVycm9yKGVycm9yKSxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgeyBvcmlnaW5hbEVycm9yOiBlcnJvciwgb3BlcmF0aW9uOiBlcnJvckNvbnRleHQ/Lm9wZXJhdGlvbk5hbWUgfVxuICAgICAgICApXG5cbiAgICAvLyBTaG93IHVzZXItZnJpZW5kbHkgdG9hc3QgaWYgcmVxdWVzdGVkXG4gICAgaWYgKGVycm9yQ29udGV4dD8uc2hvd1RvYXN0KSB7XG4gICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGx1c29FcnJvci51c2VyTWVzc2FnZSB8fCBnZXRFcnJvck1lc3NhZ2UobHVzb0Vycm9yLnR5cGUpXG4gICAgICB0b2FzdC5lcnJvcih1c2VyTWVzc2FnZSlcbiAgICB9XG5cbiAgICAvLyBDYWxsIGN1c3RvbSBlcnJvciBoYW5kbGVyIGlmIHByb3ZpZGVkXG4gICAgaWYgKGVycm9yQ29udGV4dD8ub25FcnJvcikge1xuICAgICAgZXJyb3JDb250ZXh0Lm9uRXJyb3IobHVzb0Vycm9yKVxuICAgIH1cblxuICAgIC8vIExvZyB0byBlcnJvciB0cmFja2luZyBzZXJ2aWNlIGluIHByb2R1Y3Rpb25cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgbG9nRXJyb3IobHVzb0Vycm9yLCBlcnJvckNvbnRleHQpXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgXG4gICAgICBlcnJvcjogbHVzb0Vycm9yLCBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZGF0YTogZXJyb3JDb250ZXh0Py5mYWxsYmFja1ZhbHVlXG4gICAgfVxuICB9XG59XG5cbi8vIENhdGVnb3JpemUgZXJyb3JzIGJhc2VkIG9uIHR5cGUgYW5kIG1lc3NhZ2VcbmZ1bmN0aW9uIGNhdGVnb3JpemVFcnJvcihlcnJvcjogYW55KTogRXJyb3JUeXBlIHtcbiAgaWYgKCFlcnJvcikgcmV0dXJuIEVycm9yVHlwZS5VTktOT1dOXG5cbiAgY29uc3QgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgY29uc3Qgc3RhdHVzID0gZXJyb3Iuc3RhdHVzIHx8IGVycm9yLnN0YXR1c0NvZGVcblxuICAvLyBIVFRQIHN0YXR1cyBjb2Rlc1xuICBpZiAoc3RhdHVzID09PSA0MDEpIHJldHVybiBFcnJvclR5cGUuQVVUSEVOVElDQVRJT05cbiAgaWYgKHN0YXR1cyA9PT0gNDAzKSByZXR1cm4gRXJyb3JUeXBlLkFVVEhPUklaQVRJT05cbiAgaWYgKHN0YXR1cyA9PT0gNDA0KSByZXR1cm4gRXJyb3JUeXBlLk5PVF9GT1VORFxuICBpZiAoc3RhdHVzID49IDQwMCAmJiBzdGF0dXMgPCA1MDApIHJldHVybiBFcnJvclR5cGUuQ0xJRU5UX0VSUk9SXG4gIGlmIChzdGF0dXMgPj0gNTAwKSByZXR1cm4gRXJyb3JUeXBlLlNFUlZFUl9FUlJPUlxuXG4gIC8vIE5ldHdvcmsgZXJyb3JzXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCdjb25uZWN0aW9uJykpIHtcbiAgICByZXR1cm4gRXJyb3JUeXBlLk5FVFdPUktcbiAgfVxuXG4gIC8vIEF1dGhlbnRpY2F0aW9uIGVycm9yc1xuICBpZiAobWVzc2FnZS5pbmNsdWRlcygndW5hdXRob3JpemVkJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnbG9naW4nKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCd0b2tlbicpKSB7XG4gICAgcmV0dXJuIEVycm9yVHlwZS5BVVRIRU5USUNBVElPTlxuICB9XG5cbiAgLy8gVmFsaWRhdGlvbiBlcnJvcnNcbiAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ3ZhbGlkYXRpb24nKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCdpbnZhbGlkJykgfHwgbWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZWQnKSkge1xuICAgIHJldHVybiBFcnJvclR5cGUuVkFMSURBVElPTlxuICB9XG5cbiAgcmV0dXJuIEVycm9yVHlwZS5VTktOT1dOXG59XG5cbi8vIEdldCB1c2VyLWZyaWVuZGx5IGVycm9yIG1lc3NhZ2VzXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgY29uc3QgbWVzc2FnZXMgPSB7XG4gICAgW0Vycm9yVHlwZS5BVVRIRU5USUNBVElPTl06ICdTZXNzw6NvIGV4cGlyYWRhLiBQb3IgZmF2b3IsIGZhw6dhIGxvZ2luIG5vdmFtZW50ZS4nLFxuICAgIFtFcnJvclR5cGUuQVVUSE9SSVpBVElPTl06ICdOw6NvIHRlbSBwZXJtaXNzw6NvIHBhcmEgcmVhbGl6YXIgZXN0YSBhw6fDo28uJyxcbiAgICBbRXJyb3JUeXBlLk5FVFdPUktdOiAnUHJvYmxlbWEgZGUgY29uZXjDo28uIFZlcmlmaXF1ZSBzdWEgaW50ZXJuZXQgZSB0ZW50ZSBub3ZhbWVudGUuJyxcbiAgICBbRXJyb3JUeXBlLlZBTElEQVRJT05dOiAnRGFkb3MgaW52w6FsaWRvcy4gVmVyaWZpcXVlIGFzIGluZm9ybWHDp8O1ZXMgZSB0ZW50ZSBub3ZhbWVudGUuJyxcbiAgICBbRXJyb3JUeXBlLk5PVF9GT1VORF06ICdSZWN1cnNvIG7Do28gZW5jb250cmFkby4nLFxuICAgIFtFcnJvclR5cGUuU0VSVkVSX0VSUk9SXTogJ0Vycm8gZG8gc2Vydmlkb3IuIFRlbnRlIG5vdmFtZW50ZSBlbSBhbGd1bnMgbWludXRvcy4nLFxuICAgIFtFcnJvclR5cGUuQ0xJRU5UX0VSUk9SXTogJ0Vycm8gbmEgc29saWNpdGHDp8Ojby4gVmVyaWZpcXVlIG9zIGRhZG9zIGUgdGVudGUgbm92YW1lbnRlLicsXG4gICAgW0Vycm9yVHlwZS5VTktOT1dOXTogJ09jb3JyZXUgdW0gZXJybyBpbmVzcGVyYWRvLiBUZW50ZSBub3ZhbWVudGUuJ1xuICB9XG4gIFxuICByZXR1cm4gbWVzc2FnZXNbdHlwZV0gfHwgbWVzc2FnZXNbRXJyb3JUeXBlLlVOS05PV05dXG59XG5cbi8vIExvZyBlcnJvciB0byBleHRlcm5hbCBzZXJ2aWNlIGluIHByb2R1Y3Rpb25cbmZ1bmN0aW9uIGxvZ0Vycm9yKGVycm9yOiBMdXNvVG93bkVycm9yLCBjb250ZXh0PzogYW55KSB7XG4gIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgc2VuZCB0byB5b3VyIGVycm9yIHRyYWNraW5nIHNlcnZpY2VcbiAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBzdHJ1Y3R1cmUgdGhlIGVycm9yIGZvciBsb2dnaW5nXG4gIGNvbnN0IGVycm9yUmVwb3J0ID0ge1xuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgdHlwZTogZXJyb3IudHlwZSxcbiAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICB0aW1lc3RhbXA6IGVycm9yLnRpbWVzdGFtcCxcbiAgICBjb250ZXh0OiBlcnJvci5jb250ZXh0LFxuICAgIG9wZXJhdGlvbkNvbnRleHQ6IGNvbnRleHQsXG4gICAgdXNlckFnZW50OiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50IDogdW5kZWZpbmVkLFxuICAgIHVybDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IHVuZGVmaW5lZFxuICB9XG5cbiAgbG9nZ2VyLmVycm9yKCdQcm9kdWN0aW9uIGVycm9yIHJlcG9ydCcsIHVuZGVmaW5lZCwgeyBhcmVhOiAnZXJyb3JIYW5kbGluZycsIGFjdGlvbjogJ3Byb2R1Y3Rpb25fZXJyb3InLCAuLi5lcnJvclJlcG9ydCB9KVxufVxuXG4vLyBTYWZlIGxvY2FsU3RvcmFnZSBvcGVyYXRpb25zXG5leHBvcnQgY29uc3Qgc2FmZUxvY2FsU3RvcmFnZSA9IHtcbiAgZ2V0SXRlbTogKGtleTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcmVhZGluZyBmcm9tIGxvY2FsU3RvcmFnZScsIGVycm9yLCB7IGFyZWE6ICdlcnJvckhhbmRsaW5nJywgYWN0aW9uOiAnbG9jYWxTdG9yYWdlX3JlYWQnIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfSxcblxuICBzZXRJdGVtOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igd3JpdGluZyB0byBsb2NhbFN0b3JhZ2UnLCBlcnJvciwgeyBhcmVhOiAnZXJyb3JIYW5kbGluZycsIGFjdGlvbjogJ2xvY2FsU3RvcmFnZV93cml0ZScgfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICByZW1vdmVJdGVtOiAoa2V5OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciByZW1vdmluZyBmcm9tIGxvY2FsU3RvcmFnZScsIGVycm9yLCB7IGFyZWE6ICdlcnJvckhhbmRsaW5nJywgYWN0aW9uOiAnbG9jYWxTdG9yYWdlX3JlbW92ZScgfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICBnZXRKU09OOiA8VCBleHRlbmRzIHVua25vd24+KGtleTogc3RyaW5nKTogVCB8IG51bGwgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KVxuICAgICAgcmV0dXJuIGl0ZW0gPyBKU09OLnBhcnNlKGl0ZW0pIDogbnVsbFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgSlNPTiBmcm9tIGxvY2FsU3RvcmFnZScsIGVycm9yLCB7IGFyZWE6ICdlcnJvckhhbmRsaW5nJywgYWN0aW9uOiAnbG9jYWxTdG9yYWdlX3BhcnNlJyB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH0sXG5cbiAgc2V0SlNPTjogPFQgZXh0ZW5kcyB1bmtub3duPihrZXk6IHN0cmluZywgdmFsdWU6IFQpOiBib29sZWFuID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHN0b3JpbmcgSlNPTiB0byBsb2NhbFN0b3JhZ2UnLCBlcnJvciwgeyBhcmVhOiAnZXJyb3JIYW5kbGluZycsIGFjdGlvbjogJ2xvY2FsU3RvcmFnZV9zdG9yZScgfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuXG4vLyBTYWZlIERPTSBvcGVyYXRpb25zXG5leHBvcnQgY29uc3Qgc2FmZURPTU9wZXJhdGlvbnMgPSB7XG4gIHF1ZXJ5U2VsZWN0b3I6IChzZWxlY3Rvcjogc3RyaW5nKTogRWxlbWVudCB8IG51bGwgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB3aXRoIHF1ZXJ5U2VsZWN0b3InLCBlcnJvciwgeyBhcmVhOiAnZXJyb3JIYW5kbGluZycsIGFjdGlvbjogJ2RvbV9xdWVyeV9zZWxlY3RvcicgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9LFxuXG4gIGdldEVsZW1lbnRCeUlkOiAoaWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHwgbnVsbCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB3aXRoIGdldEVsZW1lbnRCeUlkJywgZXJyb3IsIHsgYXJlYTogJ2Vycm9ySGFuZGxpbmcnLCBhY3Rpb246ICdkb21fZ2V0X2VsZW1lbnRfYnlfaWQnIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfSxcblxuICBhZGRFdmVudExpc3RlbmVyOiAoXG4gICAgZWxlbWVudDogRWxlbWVudCB8IFdpbmRvdyB8IERvY3VtZW50LFxuICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zPzogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zXG4gICk6IGJvb2xlYW4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGFkZGluZyBldmVudCBsaXN0ZW5lcicsIGVycm9yLCB7IGFyZWE6ICdlcnJvckhhbmRsaW5nJywgYWN0aW9uOiAnZG9tX2FkZF9ldmVudF9saXN0ZW5lcicgfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICByZW1vdmVFdmVudExpc3RlbmVyOiAoXG4gICAgZWxlbWVudDogRWxlbWVudCB8IFdpbmRvdyB8IERvY3VtZW50LFxuICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zPzogYm9vbGVhbiB8IEV2ZW50TGlzdGVuZXJPcHRpb25zXG4gICk6IGJvb2xlYW4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHJlbW92aW5nIGV2ZW50IGxpc3RlbmVyJywgZXJyb3IsIHsgYXJlYTogJ2Vycm9ySGFuZGxpbmcnLCBhY3Rpb246ICdkb21fcmVtb3ZlX2V2ZW50X2xpc3RlbmVyJyB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG59XG5cbi8vIElucHV0IHZhbGlkYXRpb24gaGVscGVyc1xuZXhwb3J0IGNvbnN0IGlucHV0VmFsaWRhdGlvbiA9IHtcbiAgZW1haWw6IChlbWFpbDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvXG4gICAgcmV0dXJuIGVtYWlsUmVnZXgudGVzdChlbWFpbClcbiAgfSxcblxuICBzYW5pdGl6ZVN0cmluZzogKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIC8vIEJhc2ljIFhTUyBwcmV2ZW50aW9uIC0gcmVtb3ZlIHBvdGVudGlhbGx5IGRhbmdlcm91cyBjaGFyYWN0ZXJzXG4gICAgcmV0dXJuIGlucHV0XG4gICAgICAucmVwbGFjZSgvPHNjcmlwdFxcYltePF0qKD86KD8hPFxcL3NjcmlwdD4pPFtePF0qKSo8XFwvc2NyaXB0Pi9naSwgJycpXG4gICAgICAucmVwbGFjZSgvPGlmcmFtZVxcYltePF0qKD86KD8hPFxcL2lmcmFtZT4pPFtePF0qKSo8XFwvaWZyYW1lPi9naSwgJycpXG4gICAgICAucmVwbGFjZSgvamF2YXNjcmlwdDovZ2ksICcnKVxuICAgICAgLnJlcGxhY2UoL29uXFx3K1xccyo9XFxzKlwiW15cIl0qXCIvZ2ksICcnKVxuICAgICAgLnJlcGxhY2UoL29uXFx3K1xccyo9XFxzKidbXiddKicvZ2ksICcnKVxuICB9LFxuXG4gIGlzVmFsaWRMZW5ndGg6IChpbnB1dDogc3RyaW5nLCBtaW46IG51bWJlciA9IDAsIG1heDogbnVtYmVyID0gSW5maW5pdHkpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gaW5wdXQubGVuZ3RoID49IG1pbiAmJiBpbnB1dC5sZW5ndGggPD0gbWF4XG4gIH0sXG5cbiAgY29udGFpbnNPbmx5QWxsb3dlZENoYXJzOiAoaW5wdXQ6IHN0cmluZywgYWxsb3dlZENoYXJzOiBSZWdFeHApOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gYWxsb3dlZENoYXJzLnRlc3QoaW5wdXQpXG4gIH1cbn1cblxuLy8gTmV0d29yayByZXF1ZXN0IGhlbHBlcnMgd2l0aCBlcnJvciBoYW5kbGluZ1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhZmVGZXRjaChcbiAgdXJsOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCxcbiAgZXJyb3JDb250ZXh0Pzoge1xuICAgIG9wZXJhdGlvbk5hbWU/OiBzdHJpbmdcbiAgICBzaG93VG9hc3Q/OiBib29sZWFuXG4gICAgcmV0cmllcz86IG51bWJlclxuICB9XG4pOiBQcm9taXNlPHsgZGF0YT86IFJlc3BvbnNlOyBlcnJvcj86IEx1c29Ub3duRXJyb3I7IHN1Y2Nlc3M6IGJvb2xlYW4gfT4ge1xuICBjb25zdCBtYXhSZXRyaWVzID0gZXJyb3JDb250ZXh0Py5yZXRyaWVzID8/IDBcbiAgbGV0IGF0dGVtcHQgPSAwXG5cbiAgd2hpbGUgKGF0dGVtcHQgPD0gbWF4UmV0cmllcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVBc3luYyhcbiAgICAgICgpID0+IGZldGNoKHVybCwgb3B0aW9ucyksXG4gICAgICB7XG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IGVycm9yQ29udGV4dD8ub3BlcmF0aW9uTmFtZSB8fCBgZmV0Y2ggJHt1cmx9YCxcbiAgICAgICAgc2hvd1RvYXN0OiBlcnJvckNvbnRleHQ/LnNob3dUb2FzdCAmJiBhdHRlbXB0ID09PSBtYXhSZXRyaWVzIC8vIE9ubHkgc2hvdyB0b2FzdCBvbiBsYXN0IGF0dGVtcHRcbiAgICAgIH1cbiAgICApXG5cbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG5cbiAgICBhdHRlbXB0KytcbiAgICBpZiAoYXR0ZW1wdCA8PSBtYXhSZXRyaWVzKSB7XG4gICAgICAvLyBXYWl0IGJlZm9yZSByZXRyeWluZyAoZXhwb25lbnRpYWwgYmFja29mZilcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLnBvdygyLCBhdHRlbXB0KSAqIDEwMDApKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IFxuICAgIGVycm9yOiBuZXcgTHVzb1Rvd25FcnJvcihcbiAgICAgICdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIGFmdGVyIHJldHJpZXMnLFxuICAgICAgRXJyb3JUeXBlLk5FVFdPUktcbiAgICApLCBcbiAgICBzdWNjZXNzOiBmYWxzZSBcbiAgfVxufVxuXG4vLyBSZWFjdCBjb21wb25lbnQgZXJyb3Igd3JhcHBlclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckhhbmRsaW5nPFAgZXh0ZW5kcyBvYmplY3Q+KFxuICBDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8UD4sXG4gIGVycm9yQ29udGV4dD86IHtcbiAgICBjb21wb25lbnROYW1lPzogc3RyaW5nXG4gICAgZmFsbGJhY2tSZW5kZXI/OiAoZXJyb3I6IEVycm9yKSA9PiBSZWFjdC5SZWFjdE5vZGVcbiAgfVxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiBXcmFwcGVkQ29tcG9uZW50KHByb3BzOiBQKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiA8Q29tcG9uZW50IHsuLi5wcm9wc30gLz5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBpbiBjb21wb25lbnQgJHtlcnJvckNvbnRleHQ/LmNvbXBvbmVudE5hbWUgfHwgJ1Vua25vd24nfWAsIGVycm9yLCB7IGFyZWE6ICdlcnJvckhhbmRsaW5nJywgYWN0aW9uOiAnY29tcG9uZW50X2Vycm9yJywgY29tcG9uZW50TmFtZTogZXJyb3JDb250ZXh0Py5jb21wb25lbnROYW1lIH0pXG4gICAgICBcbiAgICAgIGlmIChlcnJvckNvbnRleHQ/LmZhbGxiYWNrUmVuZGVyKSB7XG4gICAgICAgIHJldHVybiBlcnJvckNvbnRleHQuZmFsbGJhY2tSZW5kZXIoZXJyb3IgYXMgRXJyb3IpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJnLXJlZC01MCBib3JkZXIgYm9yZGVyLXJlZC0yMDAgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtcmVkLTgwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICBFcnJvIGFvIGNhcnJlZ2FyIGNvbXBvbmVudGV7ZXJyb3JDb250ZXh0Py5jb21wb25lbnROYW1lID8gYCAke2Vycm9yQ29udGV4dC5jb21wb25lbnROYW1lfWAgOiAnJ30uXG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtbC0yIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC03MDAgdW5kZXJsaW5lXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgUmVjYXJyZWdhciBww6FnaW5hXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNhZmVBc3luYyxcbiAgc2FmZUxvY2FsU3RvcmFnZSxcbiAgc2FmZURPTU9wZXJhdGlvbnMsXG4gIGlucHV0VmFsaWRhdGlvbixcbiAgc2FmZUZldGNoLFxuICB3aXRoRXJyb3JIYW5kbGluZyxcbiAgTHVzb1Rvd25FcnJvcixcbiAgRXJyb3JUeXBlXG59Il0sIm5hbWVzIjpbIkx1c29Ub3duRXJyb3IiLCJpbnB1dFZhbGlkYXRpb24iLCJzYWZlQXN5bmMiLCJzYWZlRE9NT3BlcmF0aW9ucyIsInNhZmVGZXRjaCIsInNhZmVMb2NhbFN0b3JhZ2UiLCJ3aXRoRXJyb3JIYW5kbGluZyIsIkVycm9yVHlwZSIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwidHlwZSIsImNvZGUiLCJjb250ZXh0IiwidXNlck1lc3NhZ2UiLCJuYW1lIiwidGltZXN0YW1wIiwiRGF0ZSIsIm9wZXJhdGlvbiIsImVycm9yQ29udGV4dCIsImRhdGEiLCJzdWNjZXNzIiwiZXJyb3IiLCJsb2dnZXIiLCJvcGVyYXRpb25OYW1lIiwiYXJlYSIsImFjdGlvbiIsImx1c29FcnJvciIsImNhdGVnb3JpemVFcnJvciIsInVuZGVmaW5lZCIsIm9yaWdpbmFsRXJyb3IiLCJzaG93VG9hc3QiLCJnZXRFcnJvck1lc3NhZ2UiLCJ0b2FzdCIsIm9uRXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJsb2dFcnJvciIsImZhbGxiYWNrVmFsdWUiLCJ0b0xvd2VyQ2FzZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJpbmNsdWRlcyIsIm1lc3NhZ2VzIiwiZXJyb3JSZXBvcnQiLCJzdGFjayIsIm9wZXJhdGlvbkNvbnRleHQiLCJ1c2VyQWdlbnQiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJ1cmwiLCJsb2NhdGlvbiIsImhyZWYiLCJnZXRJdGVtIiwia2V5IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInZhbHVlIiwicmVtb3ZlSXRlbSIsImdldEpTT04iLCJpdGVtIiwiSlNPTiIsInBhcnNlIiwic2V0SlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3RvciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbGVtZW50IiwiZXZlbnQiLCJoYW5kbGVyIiwib3B0aW9ucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0Iiwic2FuaXRpemVTdHJpbmciLCJpbnB1dCIsInJlcGxhY2UiLCJpc1ZhbGlkTGVuZ3RoIiwibWluIiwibWF4IiwiSW5maW5pdHkiLCJsZW5ndGgiLCJjb250YWluc09ubHlBbGxvd2VkQ2hhcnMiLCJhbGxvd2VkQ2hhcnMiLCJtYXhSZXRyaWVzIiwicmV0cmllcyIsImF0dGVtcHQiLCJyZXN1bHQiLCJmZXRjaCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIk1hdGgiLCJwb3ciLCJDb21wb25lbnQiLCJXcmFwcGVkQ29tcG9uZW50IiwicHJvcHMiLCJjb21wb25lbnROYW1lIiwiZmFsbGJhY2tSZW5kZXIiLCJkaXYiLCJjbGFzc05hbWUiLCJwIiwiYnV0dG9uIiwib25DbGljayIsInJlbG9hZCJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7Ozs7Ozs7Ozs7OztJQW1CWUEsYUFBYTtlQUFiQTs7SUEwVmIsT0FTQztlQVREOztJQXRHYUMsZUFBZTtlQUFmQTs7SUEzTlNDLFNBQVM7ZUFBVEE7O0lBd0tUQyxpQkFBaUI7ZUFBakJBOztJQTZFU0MsU0FBUztlQUFUQTs7SUFqSVRDLGdCQUFnQjtlQUFoQkE7O0lBMktHQyxpQkFBaUI7ZUFBakJBOzs7OzhEQXpVRTsrQkFDSTsrREFDSDs7Ozs7OztVQUdQQzs7Ozs7Ozs7O0dBQUFBLGNBQUFBO0FBWUwsTUFBTVAsc0JBQXNCUTtJQU9qQ0MsWUFDRUMsT0FBZSxFQUNmQyxnQkFBbUMsRUFDbkNDLElBQWEsRUFDYkMsT0FBNkIsRUFDN0JDLFdBQW9CLENBQ3BCO1FBQ0EsS0FBSyxDQUFDSjtRQUNOLElBQUksQ0FBQ0ssSUFBSSxHQUFHO1FBQ1osSUFBSSxDQUFDSixJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0UsU0FBUyxHQUFHLElBQUlDO0lBQ3ZCO0FBQ0Y7QUFHTyxlQUFlZixVQUNwQmdCLFNBQTJCLEVBQzNCQyxZQUtDO0lBRUQsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUY7UUFDbkIsT0FBTztZQUFFRTtZQUFNQyxTQUFTO1FBQUs7SUFDL0IsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLGVBQU0sQ0FBQ0QsS0FBSyxDQUFDLENBQUMsU0FBUyxFQUFFSCxjQUFjSyxpQkFBaUIsa0JBQWtCLENBQUMsRUFBRUYsT0FBTztZQUFFRyxNQUFNO1lBQWlCQyxRQUFRO1FBQXNCO1FBRTNJLE1BQU1DLFlBQVlMLGlCQUFpQnRCLGdCQUMvQnNCLFFBQ0EsSUFBSXRCLGNBQ0ZzQixpQkFBaUJkLFFBQVFjLE1BQU1aLE9BQU8sR0FBRywwQkFDekNrQixnQkFBZ0JOLFFBQ2hCTyxXQUNBO1lBQUVDLGVBQWVSO1lBQU9KLFdBQVdDLGNBQWNLO1FBQWM7UUFHckUsd0NBQXdDO1FBQ3hDLElBQUlMLGNBQWNZLFdBQVc7WUFDM0IsTUFBTWpCLGNBQWNhLFVBQVViLFdBQVcsSUFBSWtCLGdCQUFnQkwsVUFBVWhCLElBQUk7WUFDM0VzQixvQkFBSyxDQUFDWCxLQUFLLENBQUNSO1FBQ2Q7UUFFQSx3Q0FBd0M7UUFDeEMsSUFBSUssY0FBY2UsU0FBUztZQUN6QmYsYUFBYWUsT0FBTyxDQUFDUDtRQUN2QjtRQUVBLDhDQUE4QztRQUM5QyxJQUFJUSxRQUFRQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxjQUFjO1lBQ3pDQyxTQUFTWCxXQUFXUjtRQUN0QjtRQUVBLE9BQU87WUFDTEcsT0FBT0s7WUFDUE4sU0FBUztZQUNURCxNQUFNRCxjQUFjb0I7UUFDdEI7SUFDRjtBQUNGO0FBRUEsOENBQThDO0FBQzlDLFNBQVNYLGdCQUFnQk4sS0FBVTtJQUNqQyxJQUFJLENBQUNBLE9BQU87SUFFWixNQUFNWixVQUFVWSxNQUFNWixPQUFPLEVBQUU4QixpQkFBaUI7SUFDaEQsTUFBTUMsU0FBU25CLE1BQU1tQixNQUFNLElBQUluQixNQUFNb0IsVUFBVTtJQUUvQyxvQkFBb0I7SUFDcEIsSUFBSUQsV0FBVyxLQUFLO0lBQ3BCLElBQUlBLFdBQVcsS0FBSztJQUNwQixJQUFJQSxXQUFXLEtBQUs7SUFDcEIsSUFBSUEsVUFBVSxPQUFPQSxTQUFTLEtBQUs7SUFDbkMsSUFBSUEsVUFBVSxLQUFLO0lBRW5CLGlCQUFpQjtJQUNqQixJQUFJL0IsUUFBUWlDLFFBQVEsQ0FBQyxjQUFjakMsUUFBUWlDLFFBQVEsQ0FBQyxZQUFZakMsUUFBUWlDLFFBQVEsQ0FBQyxlQUFlO1FBQzlGO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEIsSUFBSWpDLFFBQVFpQyxRQUFRLENBQUMsbUJBQW1CakMsUUFBUWlDLFFBQVEsQ0FBQyxZQUFZakMsUUFBUWlDLFFBQVEsQ0FBQyxVQUFVO1FBQzlGO0lBQ0Y7SUFFQSxvQkFBb0I7SUFDcEIsSUFBSWpDLFFBQVFpQyxRQUFRLENBQUMsaUJBQWlCakMsUUFBUWlDLFFBQVEsQ0FBQyxjQUFjakMsUUFBUWlDLFFBQVEsQ0FBQyxhQUFhO1FBQ2pHO0lBQ0Y7SUFFQTtBQUNGO0FBRUEsbUNBQW1DO0FBQ25DLFNBQVNYLGdCQUFnQnJCLElBQWU7SUFDdEMsTUFBTWlDLFdBQVc7UUFDZixrQkFBMEIsRUFBRTtRQUM1QixpQkFBeUIsRUFBRTtRQUMzQixXQUFtQixFQUFFO1FBQ3JCLGNBQXNCLEVBQUU7UUFDeEIsYUFBcUIsRUFBRTtRQUN2QixnQkFBd0IsRUFBRTtRQUMxQixnQkFBd0IsRUFBRTtRQUMxQixXQUFtQixFQUFFO0lBQ3ZCO0lBRUEsT0FBT0EsUUFBUSxDQUFDakMsS0FBSyxJQUFJaUMsUUFBUSxXQUFtQjtBQUN0RDtBQUVBLDhDQUE4QztBQUM5QyxTQUFTTixTQUFTaEIsS0FBb0IsRUFBRVQsT0FBYTtJQUNuRCxnRUFBZ0U7SUFDaEUsc0RBQXNEO0lBQ3RELE1BQU1nQyxjQUFjO1FBQ2xCbkMsU0FBU1ksTUFBTVosT0FBTztRQUN0QkMsTUFBTVcsTUFBTVgsSUFBSTtRQUNoQkMsTUFBTVUsTUFBTVYsSUFBSTtRQUNoQmtDLE9BQU94QixNQUFNd0IsS0FBSztRQUNsQjlCLFdBQVdNLE1BQU1OLFNBQVM7UUFDMUJILFNBQVNTLE1BQU1ULE9BQU87UUFDdEJrQyxrQkFBa0JsQztRQUNsQm1DLFdBQVcsT0FBT0MsV0FBVyxjQUFjQSxPQUFPQyxTQUFTLENBQUNGLFNBQVMsR0FBR25CO1FBQ3hFc0IsS0FBSyxPQUFPRixXQUFXLGNBQWNBLE9BQU9HLFFBQVEsQ0FBQ0MsSUFBSSxHQUFHeEI7SUFDOUQ7SUFFQU4sZUFBTSxDQUFDRCxLQUFLLENBQUMsMkJBQTJCTyxXQUFXO1FBQUVKLE1BQU07UUFBaUJDLFFBQVE7UUFBb0IsR0FBR21CLFdBQVc7SUFBQztBQUN6SDtBQUdPLE1BQU14QyxtQkFBbUI7SUFDOUJpRCxTQUFTLENBQUNDO1FBQ1IsSUFBSTtZQUNGLE9BQU9DLGFBQWFGLE9BQU8sQ0FBQ0M7UUFDOUIsRUFBRSxPQUFPakMsT0FBTztZQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQyxtQ0FBbUNBLE9BQU87Z0JBQUVHLE1BQU07Z0JBQWlCQyxRQUFRO1lBQW9CO1lBQzVHLE9BQU87UUFDVDtJQUNGO0lBRUErQixTQUFTLENBQUNGLEtBQWFHO1FBQ3JCLElBQUk7WUFDRkYsYUFBYUMsT0FBTyxDQUFDRixLQUFLRztZQUMxQixPQUFPO1FBQ1QsRUFBRSxPQUFPcEMsT0FBTztZQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQyxpQ0FBaUNBLE9BQU87Z0JBQUVHLE1BQU07Z0JBQWlCQyxRQUFRO1lBQXFCO1lBQzNHLE9BQU87UUFDVDtJQUNGO0lBRUFpQyxZQUFZLENBQUNKO1FBQ1gsSUFBSTtZQUNGQyxhQUFhRyxVQUFVLENBQUNKO1lBQ3hCLE9BQU87UUFDVCxFQUFFLE9BQU9qQyxPQUFPO1lBQ2RDLGVBQU0sQ0FBQ0QsS0FBSyxDQUFDLG9DQUFvQ0EsT0FBTztnQkFBRUcsTUFBTTtnQkFBaUJDLFFBQVE7WUFBc0I7WUFDL0csT0FBTztRQUNUO0lBQ0Y7SUFFQWtDLFNBQVMsQ0FBb0JMO1FBQzNCLElBQUk7WUFDRixNQUFNTSxPQUFPTCxhQUFhRixPQUFPLENBQUNDO1lBQ2xDLE9BQU9NLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0YsUUFBUTtRQUNuQyxFQUFFLE9BQU92QyxPQUFPO1lBQ2RDLGVBQU0sQ0FBQ0QsS0FBSyxDQUFDLHdDQUF3Q0EsT0FBTztnQkFBRUcsTUFBTTtnQkFBaUJDLFFBQVE7WUFBcUI7WUFDbEgsT0FBTztRQUNUO0lBQ0Y7SUFFQXNDLFNBQVMsQ0FBb0JULEtBQWFHO1FBQ3hDLElBQUk7WUFDRkYsYUFBYUMsT0FBTyxDQUFDRixLQUFLTyxLQUFLRyxTQUFTLENBQUNQO1lBQ3pDLE9BQU87UUFDVCxFQUFFLE9BQU9wQyxPQUFPO1lBQ2RDLGVBQU0sQ0FBQ0QsS0FBSyxDQUFDLHNDQUFzQ0EsT0FBTztnQkFBRUcsTUFBTTtnQkFBaUJDLFFBQVE7WUFBcUI7WUFDaEgsT0FBTztRQUNUO0lBQ0Y7QUFDRjtBQUdPLE1BQU12QixvQkFBb0I7SUFDL0IrRCxlQUFlLENBQUNDO1FBQ2QsSUFBSTtZQUNGLE9BQU9DLFNBQVNGLGFBQWEsQ0FBQ0M7UUFDaEMsRUFBRSxPQUFPN0MsT0FBTztZQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQyw0QkFBNEJBLE9BQU87Z0JBQUVHLE1BQU07Z0JBQWlCQyxRQUFRO1lBQXFCO1lBQ3RHLE9BQU87UUFDVDtJQUNGO0lBRUEyQyxnQkFBZ0IsQ0FBQ0M7UUFDZixJQUFJO1lBQ0YsT0FBT0YsU0FBU0MsY0FBYyxDQUFDQztRQUNqQyxFQUFFLE9BQU9oRCxPQUFPO1lBQ2RDLGVBQU0sQ0FBQ0QsS0FBSyxDQUFDLDZCQUE2QkEsT0FBTztnQkFBRUcsTUFBTTtnQkFBaUJDLFFBQVE7WUFBd0I7WUFDMUcsT0FBTztRQUNUO0lBQ0Y7SUFFQTZDLGtCQUFrQixDQUNoQkMsU0FDQUMsT0FDQUMsU0FDQUM7UUFFQSxJQUFJO1lBQ0ZILFFBQVFELGdCQUFnQixDQUFDRSxPQUFPQyxTQUFTQztZQUN6QyxPQUFPO1FBQ1QsRUFBRSxPQUFPckQsT0FBTztZQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQywrQkFBK0JBLE9BQU87Z0JBQUVHLE1BQU07Z0JBQWlCQyxRQUFRO1lBQXlCO1lBQzdHLE9BQU87UUFDVDtJQUNGO0lBRUFrRCxxQkFBcUIsQ0FDbkJKLFNBQ0FDLE9BQ0FDLFNBQ0FDO1FBRUEsSUFBSTtZQUNGSCxRQUFRSSxtQkFBbUIsQ0FBQ0gsT0FBT0MsU0FBU0M7WUFDNUMsT0FBTztRQUNULEVBQUUsT0FBT3JELE9BQU87WUFDZEMsZUFBTSxDQUFDRCxLQUFLLENBQUMsaUNBQWlDQSxPQUFPO2dCQUFFRyxNQUFNO2dCQUFpQkMsUUFBUTtZQUE0QjtZQUNsSCxPQUFPO1FBQ1Q7SUFDRjtBQUNGO0FBR08sTUFBTXpCLGtCQUFrQjtJQUM3QjRFLE9BQU8sQ0FBQ0E7UUFDTixNQUFNQyxhQUFhO1FBQ25CLE9BQU9BLFdBQVdDLElBQUksQ0FBQ0Y7SUFDekI7SUFFQUcsZ0JBQWdCLENBQUNDO1FBQ2YsaUVBQWlFO1FBQ2pFLE9BQU9BLE1BQ0pDLE9BQU8sQ0FBQyx1REFBdUQsSUFDL0RBLE9BQU8sQ0FBQyx1REFBdUQsSUFDL0RBLE9BQU8sQ0FBQyxpQkFBaUIsSUFDekJBLE9BQU8sQ0FBQyx5QkFBeUIsSUFDakNBLE9BQU8sQ0FBQyx5QkFBeUI7SUFDdEM7SUFFQUMsZUFBZSxDQUFDRixPQUFlRyxNQUFjLENBQUMsRUFBRUMsTUFBY0MsUUFBUTtRQUNwRSxPQUFPTCxNQUFNTSxNQUFNLElBQUlILE9BQU9ILE1BQU1NLE1BQU0sSUFBSUY7SUFDaEQ7SUFFQUcsMEJBQTBCLENBQUNQLE9BQWVRO1FBQ3hDLE9BQU9BLGFBQWFWLElBQUksQ0FBQ0U7SUFDM0I7QUFDRjtBQUdPLGVBQWU3RSxVQUNwQitDLEdBQVcsRUFDWHdCLE9BQXFCLEVBQ3JCeEQsWUFJQztJQUVELE1BQU11RSxhQUFhdkUsY0FBY3dFLFdBQVc7SUFDNUMsSUFBSUMsVUFBVTtJQUVkLE1BQU9BLFdBQVdGLFdBQVk7UUFDNUIsTUFBTUcsU0FBUyxNQUFNM0YsVUFDbkIsSUFBTTRGLE1BQU0zQyxLQUFLd0IsVUFDakI7WUFDRW5ELGVBQWVMLGNBQWNLLGlCQUFpQixDQUFDLE1BQU0sRUFBRTJCLElBQUksQ0FBQztZQUM1RHBCLFdBQVdaLGNBQWNZLGFBQWE2RCxZQUFZRixXQUFXLGtDQUFrQztRQUNqRztRQUdGLElBQUlHLE9BQU94RSxPQUFPLEVBQUU7WUFDbEIsT0FBT3dFO1FBQ1Q7UUFFQUQ7UUFDQSxJQUFJQSxXQUFXRixZQUFZO1lBQ3pCLDZDQUE2QztZQUM3QyxNQUFNLElBQUlLLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNFLEtBQUtDLEdBQUcsQ0FBQyxHQUFHUCxXQUFXO1FBQzFFO0lBQ0Y7SUFFQSxPQUFPO1FBQ0x0RSxPQUFPLElBQUl0QixjQUNUO1FBR0ZxQixTQUFTO0lBQ1g7QUFDRjtBQUdPLFNBQVNmLGtCQUNkOEYsU0FBaUMsRUFDakNqRixZQUdDO0lBRUQsT0FBTyxTQUFTa0YsaUJBQWlCQyxLQUFRO1FBQ3ZDLElBQUk7WUFDRixxQkFBTyxxQkFBQ0Y7Z0JBQVcsR0FBR0UsS0FBSzs7UUFDN0IsRUFBRSxPQUFPaEYsT0FBTztZQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQyxDQUFDLG1CQUFtQixFQUFFSCxjQUFjb0YsaUJBQWlCLFVBQVUsQ0FBQyxFQUFFakYsT0FBTztnQkFBRUcsTUFBTTtnQkFBaUJDLFFBQVE7Z0JBQW1CNkUsZUFBZXBGLGNBQWNvRjtZQUFjO1lBRXJMLElBQUlwRixjQUFjcUYsZ0JBQWdCO2dCQUNoQyxPQUFPckYsYUFBYXFGLGNBQWMsQ0FBQ2xGO1lBQ3JDO1lBRUEscUJBQ0UscUJBQUNtRjtnQkFBSUMsV0FBVTswQkFDYixjQUFBLHNCQUFDQztvQkFBRUQsV0FBVTs7d0JBQXVCO3dCQUNOdkYsY0FBY29GLGdCQUFnQixDQUFDLENBQUMsRUFBRXBGLGFBQWFvRixhQUFhLENBQUMsQ0FBQyxHQUFHO3dCQUFHO3NDQUNoRyxxQkFBQ0s7NEJBQ0NDLFNBQVMsSUFBTTVELE9BQU9HLFFBQVEsQ0FBQzBELE1BQU07NEJBQ3JDSixXQUFVO3NDQUNYOzs7OztRQU1UO0lBQ0Y7QUFDRjtNQUVBLFdBQWU7SUFDYnhHO0lBQ0FHO0lBQ0FGO0lBQ0FGO0lBQ0FHO0lBQ0FFO0lBQ0FOO0lBQ0FPO0FBQ0YifQ==
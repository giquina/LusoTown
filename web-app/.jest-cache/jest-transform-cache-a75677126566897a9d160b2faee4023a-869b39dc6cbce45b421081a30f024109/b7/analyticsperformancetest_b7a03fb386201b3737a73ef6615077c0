76a5c6ef73a4efd90eff4f560f815d92
/**
 * Production Performance Tests for Predictive Community Analytics
 * Tests performance under realistic load conditions for luxury Portuguese-speaking community
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _PredictiveCommunityAnalytics = require("../../src/lib/ai/PredictiveCommunityAnalytics");
describe("Analytics Performance Tests", ()=>{
    let analytics;
    beforeEach(()=>{
        analytics = new _PredictiveCommunityAnalytics.PredictiveCommunityAnalytics();
    });
    describe("Response Time Performance", ()=>{
        it("should predict community trends within 2 seconds", async ()=>{
            const startTime = performance.now();
            const trends = await analytics.predictCommunityTrends("month");
            const duration = performance.now() - startTime;
            expect(duration).toBeLessThan(2000) // 2 seconds max
            ;
            expect(trends).toBeDefined();
        });
        it("should predict event success within 1.5 seconds", async ()=>{
            const eventDetails = {
                type: "cultural_festival",
                date: new Date("2025-06-15"),
                time: "19:00",
                location: "central_london",
                culturalTheme: "fado",
                targetAudience: [
                    "business_professionals",
                    "cultural_enthusiasts"
                ],
                price: 45,
                capacity: 200,
                luxuryLevel: "premium",
                culturalAuthenticity: 8
            };
            const startTime = performance.now();
            const prediction = await analytics.predictEventSuccess(eventDetails);
            const duration = performance.now() - startTime;
            expect(duration).toBeLessThan(1500) // 1.5 seconds max
            ;
            expect(prediction.successProbability).toBeDefined();
        });
        it("should analyze community health within 3 seconds", async ()=>{
            const startTime = performance.now();
            const health = await analytics.analyzeCommunityHealth();
            const duration = performance.now() - startTime;
            expect(duration).toBeLessThan(3000) // 3 seconds max
            ;
            expect(health.overallHealth).toBeDefined();
        });
    });
    describe("Cache Performance", ()=>{
        it("should significantly improve performance on cached requests", async ()=>{
            const privacySettings = {
                analyticsConsent: true,
                personalizedRecommendations: true,
                communityInsights: true,
                marketingAnalytics: false
            };
            // First request - no cache
            const start1 = performance.now();
            await analytics.predictCommunityTrends("week", "performance_user", privacySettings);
            const uncachedDuration = performance.now() - start1;
            // Second request - with cache
            const start2 = performance.now();
            await analytics.predictCommunityTrends("week", "performance_user", privacySettings);
            const cachedDuration = performance.now() - start2;
            // Cached request should be at least 50% faster
            expect(cachedDuration).toBeLessThan(uncachedDuration * 0.5);
            expect(cachedDuration).toBeLessThan(100) // Should be under 100ms
            ;
        });
        it("should handle cache eviction efficiently", async ()=>{
            const privacySettings = {
                analyticsConsent: true,
                personalizedRecommendations: true,
                communityInsights: true,
                marketingAnalytics: false
            };
            // Fill cache with multiple entries
            const promises = Array.from({
                length: 20
            }, (_, i)=>analytics.predictCommunityTrends("month", `cache_user_${i}`, privacySettings));
            const startTime = performance.now();
            await Promise.all(promises);
            const duration = performance.now() - startTime;
            // Should handle 20 concurrent requests efficiently
            expect(duration).toBeLessThan(5000) // 5 seconds total
            ;
        });
    });
    describe("Concurrent Load Performance", ()=>{
        it("should handle multiple concurrent trend predictions", async ()=>{
            const concurrentRequests = 15;
            const promises = Array.from({
                length: concurrentRequests
            }, (_, i)=>{
                const timeframe = i % 2 === 0 ? "week" : "month";
                return analytics.predictCommunityTrends(timeframe);
            });
            const startTime = performance.now();
            const results = await Promise.all(promises);
            const totalDuration = performance.now() - startTime;
            // All requests should complete
            expect(results).toHaveLength(concurrentRequests);
            results.forEach((result)=>expect(result).toBeDefined());
            // Average time per request should be reasonable
            const avgDuration = totalDuration / concurrentRequests;
            expect(avgDuration).toBeLessThan(1000) // Average under 1 second
            ;
        });
        it("should handle mixed analytics operations concurrently", async ()=>{
            const eventDetails = {
                type: "business_networking",
                date: new Date("2025-07-10"),
                time: "18:30",
                location: "central_london",
                culturalTheme: "professional_portuguese",
                targetAudience: [
                    "entrepreneurs",
                    "business_executives"
                ],
                price: 65,
                capacity: 120,
                luxuryLevel: "premium",
                culturalAuthenticity: 7
            };
            const operations = [
                analytics.predictCommunityTrends("season"),
                analytics.predictEventSuccess(eventDetails),
                analytics.analyzeCommunityHealth(),
                analytics.predictCommunityTrends("year"),
                analytics.generateOptimalEventTiming("cultural_festival", "fado", [
                    "professionals"
                ])
            ];
            const startTime = performance.now();
            const results = await Promise.all(operations);
            const totalDuration = performance.now() - startTime;
            expect(results).toHaveLength(5);
            expect(totalDuration).toBeLessThan(8000) // 8 seconds total for all operations
            ;
            results.forEach((result)=>expect(result).toBeDefined());
        });
    });
    describe("Memory Performance", ()=>{
        it("should not leak memory during repeated operations", async ()=>{
            // Record initial memory if available
            const initialMemory = global.gc ? process.memoryUsage().heapUsed : null;
            // Perform many operations
            const iterations = 100;
            for(let i = 0; i < iterations; i++){
                await analytics.predictCommunityTrends("week");
                // Every 25 iterations, check if we can force garbage collection
                if (i % 25 === 0 && global.gc) {
                    global.gc();
                }
            }
            // Check final memory if available
            if (initialMemory && global.gc) {
                global.gc();
                const finalMemory = process.memoryUsage().heapUsed;
                const memoryGrowth = finalMemory - initialMemory;
                // Memory growth should be reasonable (less than 50MB)
                expect(memoryGrowth).toBeLessThan(50 * 1024 * 1024) // 50MB
                ;
            }
            // At minimum, verify operations still work after many iterations
            const finalTrends = await analytics.predictCommunityTrends("month");
            expect(finalTrends).toBeDefined();
        });
        it("should efficiently manage cache memory", async ()=>{
            const privacySettings = {
                analyticsConsent: true,
                personalizedRecommendations: true,
                communityInsights: true,
                marketingAnalytics: false
            };
            // Create many cache entries
            const cacheEntries = 50;
            const promises = Array.from({
                length: cacheEntries
            }, (_, i)=>analytics.predictCommunityTrends("week", `memory_test_${i}`, privacySettings));
            await Promise.all(promises);
            // Verify cache is working but not unlimited
            const cacheSize = analytics.predictionCache.size;
            expect(cacheSize).toBeGreaterThan(0);
            expect(cacheSize).toBeLessThanOrEqual(cacheEntries * 1.1) // Allow some overhead
            ;
        });
    });
    describe("Data Volume Performance", ()=>{
        it("should handle large community datasets efficiently", async ()=>{
            // Simulate large community by mocking memberData
            const largeMemberDataSize = 5000;
            const mockMemberData = new Map();
            for(let i = 0; i < largeMemberDataSize; i++){
                mockMemberData.set(`user_${i}`, {
                    id: `user_${i}`,
                    profile: {
                        region: i % 2 === 0 ? "portugal" : "brazil",
                        saudadeIntensity: Math.floor(Math.random() * 10) + 1,
                        culturalMaintenance: Math.floor(Math.random() * 10) + 1,
                        premiumEngagementLevel: "standard"
                    },
                    engagement: {
                        eventAttendance: Math.floor(Math.random() * 20),
                        culturalContentEngagement: Math.floor(Math.random() * 100)
                    },
                    demographics: {
                        age: 25 + Math.floor(Math.random() * 40),
                        profession: "professional"
                    }
                });
            }
            analytics.memberData = mockMemberData;
            const startTime = performance.now();
            const health = await analytics.analyzeCommunityHealth();
            const duration = performance.now() - startTime;
            expect(health).toBeDefined();
            expect(duration).toBeLessThan(10000) // Should handle 5000 members within 10 seconds
            ;
        });
        it("should process complex cultural calendars efficiently", async ()=>{
            // Create large cultural calendar
            const culturalEvents = Array.from({
                length: 365
            }, (_, i)=>({
                    name: `Event_${i}`,
                    date: new Date(2025, 0, 1 + i),
                    type: i % 3 === 0 ? "cultural_festival" : i % 3 === 1 ? "fado_night" : "business_networking",
                    luxuryLevel: "standard",
                    targetAudience: [
                        "community"
                    ],
                    culturalSignificance: Math.floor(Math.random() * 10) + 1
                }));
            analytics.culturalCalendar = culturalEvents;
            const startTime = performance.now();
            const timing = analytics.generateOptimalEventTiming("cultural_festival", "portuguese_heritage", [
                "families",
                "professionals"
            ]);
            const duration = performance.now() - startTime;
            expect(timing).toBeDefined();
            expect(duration).toBeLessThan(2000) // Should handle 365 events within 2 seconds
            ;
        });
    });
    describe("Error Handling Performance", ()=>{
        it("should fail fast on invalid inputs", async ()=>{
            const startTime = performance.now();
            try {
                await analytics.predictUserChurn("nonexistent-user");
            } catch (error) {
                const duration = performance.now() - startTime;
                expect(duration).toBeLessThan(100) // Should fail within 100ms
                ;
                expect(error.message).toContain("User not found");
            }
        });
        it("should handle partial failures gracefully without degrading performance", async ()=>{
            // Mock some internal method to fail
            const originalMethod = analytics.analyzeCulturalInterestTrends;
            analytics.analyzeCulturalInterestTrends = jest.fn().mockRejectedValue(new Error("Simulated failure"));
            const startTime = performance.now();
            try {
                const trends = await analytics.predictCommunityTrends("month");
                const duration = performance.now() - startTime;
                // Should still return partial results quickly
                expect(duration).toBeLessThan(3000);
                expect(trends).toBeDefined();
            } finally{
                analytics.analyzeCulturalInterestTrends = originalMethod;
            }
        });
    });
    describe("Production Load Simulation", ()=>{
        it("should handle realistic Portuguese-speaking community load", async ()=>{
            // Simulate realistic load:
            // - 750 community members
            // - Peak usage: 50 concurrent users
            // - Mixed operations typical for Portuguese-speaking community
            const peakConcurrentUsers = 50;
            const operations = [];
            // Simulate typical Portuguese-speaking community usage patterns
            for(let i = 0; i < peakConcurrentUsers; i++){
                const userId = `portuguese_user_${i}`;
                const operationType = i % 4;
                switch(operationType){
                    case 0:
                        operations.push(analytics.predictCommunityTrends("month", userId, {
                            analyticsConsent: true,
                            personalizedRecommendations: true,
                            communityInsights: true,
                            marketingAnalytics: Math.random() > 0.5
                        }));
                        break;
                    case 1:
                        operations.push(analytics.predictEventSuccess({
                            type: "fado_night",
                            date: new Date("2025-08-15"),
                            time: "20:00",
                            location: "south_london",
                            culturalTheme: "fado",
                            targetAudience: [
                                "cultural_enthusiasts"
                            ],
                            price: 35,
                            capacity: 80,
                            luxuryLevel: "standard",
                            culturalAuthenticity: 9
                        }));
                        break;
                    case 2:
                        operations.push(analytics.analyzeCommunityHealth());
                        break;
                    case 3:
                        operations.push(analytics.generateOptimalEventTiming("cultural_celebration", "portuguese_heritage", [
                            "families"
                        ]));
                        break;
                }
            }
            const startTime = performance.now();
            const results = await Promise.allSettled(operations);
            const totalDuration = performance.now() - startTime;
            // Count successful operations
            const successful = results.filter((r)=>r.status === "fulfilled").length;
            const failed = results.filter((r)=>r.status === "rejected").length;
            // Performance expectations for production load
            expect(totalDuration).toBeLessThan(15000) // 15 seconds for 50 concurrent operations
            ;
            expect(successful).toBeGreaterThan(peakConcurrentUsers * 0.9) // 90%+ success rate
            ;
            expect(failed).toBeLessThan(peakConcurrentUsers * 0.1) // Less than 10% failures
            ;
            // Average response time should be acceptable
            const avgResponseTime = totalDuration / peakConcurrentUsers;
            expect(avgResponseTime).toBeLessThan(500) // Average under 500ms per operation
            ;
        });
    });
    describe("Scalability Metrics", ()=>{
        it("should maintain performance as community grows", async ()=>{
            const communitySizes = [
                100,
                500,
                1000,
                2500
            ];
            const performanceResults = [];
            for (const size of communitySizes){
                // Mock community of given size
                const mockMembers = new Map();
                for(let i = 0; i < size; i++){
                    mockMembers.set(`user_${i}`, {
                        id: `user_${i}`,
                        profile: {
                            region: "portugal",
                            saudadeIntensity: 5
                        },
                        engagement: {
                            culturalContentEngagement: 70
                        }
                    });
                }
                analytics.memberData = mockMembers;
                const startTime = performance.now();
                await analytics.analyzeCommunityHealth();
                const duration = performance.now() - startTime;
                performanceResults.push({
                    size,
                    duration
                });
            }
            // Performance should scale reasonably (not exponentially)
            const smallCommunity = performanceResults.find((r)=>r.size === 100);
            const largeCommunity = performanceResults.find((r)=>r.size === 2500);
            // Large community (25x size) should not take more than 10x time
            const performanceRatio = largeCommunity.duration / smallCommunity.duration;
            expect(performanceRatio).toBeLessThan(10);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvX190ZXN0c19fL3BlcmZvcm1hbmNlL2FuYWx5dGljcy1wZXJmb3JtYW5jZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvZHVjdGlvbiBQZXJmb3JtYW5jZSBUZXN0cyBmb3IgUHJlZGljdGl2ZSBDb21tdW5pdHkgQW5hbHl0aWNzXG4gKiBUZXN0cyBwZXJmb3JtYW5jZSB1bmRlciByZWFsaXN0aWMgbG9hZCBjb25kaXRpb25zIGZvciBsdXh1cnkgUG9ydHVndWVzZS1zcGVha2luZyBjb21tdW5pdHlcbiAqL1xuXG5pbXBvcnQgeyBQcmVkaWN0aXZlQ29tbXVuaXR5QW5hbHl0aWNzIH0gZnJvbSAnQC9saWIvYWkvUHJlZGljdGl2ZUNvbW11bml0eUFuYWx5dGljcydcblxuZGVzY3JpYmUoJ0FuYWx5dGljcyBQZXJmb3JtYW5jZSBUZXN0cycsICgpID0+IHtcbiAgbGV0IGFuYWx5dGljczogUHJlZGljdGl2ZUNvbW11bml0eUFuYWx5dGljc1xuICBcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYW5hbHl0aWNzID0gbmV3IFByZWRpY3RpdmVDb21tdW5pdHlBbmFseXRpY3MoKVxuICB9KVxuXG4gIGRlc2NyaWJlKCdSZXNwb25zZSBUaW1lIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJlZGljdCBjb21tdW5pdHkgdHJlbmRzIHdpdGhpbiAyIHNlY29uZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBjb25zdCB0cmVuZHMgPSBhd2FpdCBhbmFseXRpY3MucHJlZGljdENvbW11bml0eVRyZW5kcygnbW9udGgnKVxuICAgICAgXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigyMDAwKSAvLyAyIHNlY29uZHMgbWF4XG4gICAgICBleHBlY3QodHJlbmRzKS50b0JlRGVmaW5lZCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgcHJlZGljdCBldmVudCBzdWNjZXNzIHdpdGhpbiAxLjUgc2Vjb25kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50RGV0YWlscyA9IHtcbiAgICAgICAgdHlwZTogJ2N1bHR1cmFsX2Zlc3RpdmFsJyxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoJzIwMjUtMDYtMTUnKSxcbiAgICAgICAgdGltZTogJzE5OjAwJyxcbiAgICAgICAgbG9jYXRpb246ICdjZW50cmFsX2xvbmRvbicsXG4gICAgICAgIGN1bHR1cmFsVGhlbWU6ICdmYWRvJyxcbiAgICAgICAgdGFyZ2V0QXVkaWVuY2U6IFsnYnVzaW5lc3NfcHJvZmVzc2lvbmFscycsICdjdWx0dXJhbF9lbnRodXNpYXN0cyddLFxuICAgICAgICBwcmljZTogNDUsXG4gICAgICAgIGNhcGFjaXR5OiAyMDAsXG4gICAgICAgIGx1eHVyeUxldmVsOiAncHJlbWl1bScgYXMgY29uc3QsXG4gICAgICAgIGN1bHR1cmFsQXV0aGVudGljaXR5OiA4XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBcbiAgICAgIGNvbnN0IHByZWRpY3Rpb24gPSBhd2FpdCBhbmFseXRpY3MucHJlZGljdEV2ZW50U3VjY2VzcyhldmVudERldGFpbHMpXG4gICAgICBcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDE1MDApIC8vIDEuNSBzZWNvbmRzIG1heFxuICAgICAgZXhwZWN0KHByZWRpY3Rpb24uc3VjY2Vzc1Byb2JhYmlsaXR5KS50b0JlRGVmaW5lZCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBjb21tdW5pdHkgaGVhbHRoIHdpdGhpbiAzIHNlY29uZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCBhbmFseXRpY3MuYW5hbHl6ZUNvbW11bml0eUhlYWx0aCgpXG4gICAgICBcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDMwMDApIC8vIDMgc2Vjb25kcyBtYXhcbiAgICAgIGV4cGVjdChoZWFsdGgub3ZlcmFsbEhlYWx0aCkudG9CZURlZmluZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0NhY2hlIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2lnbmlmaWNhbnRseSBpbXByb3ZlIHBlcmZvcm1hbmNlIG9uIGNhY2hlZCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHByaXZhY3lTZXR0aW5ncyA9IHtcbiAgICAgICAgYW5hbHl0aWNzQ29uc2VudDogdHJ1ZSxcbiAgICAgICAgcGVyc29uYWxpemVkUmVjb21tZW5kYXRpb25zOiB0cnVlLFxuICAgICAgICBjb21tdW5pdHlJbnNpZ2h0czogdHJ1ZSxcbiAgICAgICAgbWFya2V0aW5nQW5hbHl0aWNzOiBmYWxzZVxuICAgICAgfVxuXG4gICAgICAvLyBGaXJzdCByZXF1ZXN0IC0gbm8gY2FjaGVcbiAgICAgIGNvbnN0IHN0YXJ0MSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBhd2FpdCBhbmFseXRpY3MucHJlZGljdENvbW11bml0eVRyZW5kcygnd2VlaycsICdwZXJmb3JtYW5jZV91c2VyJywgcHJpdmFjeVNldHRpbmdzKVxuICAgICAgY29uc3QgdW5jYWNoZWREdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQxXG5cbiAgICAgIC8vIFNlY29uZCByZXF1ZXN0IC0gd2l0aCBjYWNoZVxuICAgICAgY29uc3Qgc3RhcnQyID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGF3YWl0IGFuYWx5dGljcy5wcmVkaWN0Q29tbXVuaXR5VHJlbmRzKCd3ZWVrJywgJ3BlcmZvcm1hbmNlX3VzZXInLCBwcml2YWN5U2V0dGluZ3MpXG4gICAgICBjb25zdCBjYWNoZWREdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQyXG5cbiAgICAgIC8vIENhY2hlZCByZXF1ZXN0IHNob3VsZCBiZSBhdCBsZWFzdCA1MCUgZmFzdGVyXG4gICAgICBleHBlY3QoY2FjaGVkRHVyYXRpb24pLnRvQmVMZXNzVGhhbih1bmNhY2hlZER1cmF0aW9uICogMC41KVxuICAgICAgZXhwZWN0KGNhY2hlZER1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwKSAvLyBTaG91bGQgYmUgdW5kZXIgMTAwbXNcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FjaGUgZXZpY3Rpb24gZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcml2YWN5U2V0dGluZ3MgPSB7XG4gICAgICAgIGFuYWx5dGljc0NvbnNlbnQ6IHRydWUsXG4gICAgICAgIHBlcnNvbmFsaXplZFJlY29tbWVuZGF0aW9uczogdHJ1ZSxcbiAgICAgICAgY29tbXVuaXR5SW5zaWdodHM6IHRydWUsXG4gICAgICAgIG1hcmtldGluZ0FuYWx5dGljczogZmFsc2VcbiAgICAgIH1cblxuICAgICAgLy8gRmlsbCBjYWNoZSB3aXRoIG11bHRpcGxlIGVudHJpZXNcbiAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+XG4gICAgICAgIGFuYWx5dGljcy5wcmVkaWN0Q29tbXVuaXR5VHJlbmRzKCdtb250aCcsIGBjYWNoZV91c2VyXyR7aX1gLCBwcml2YWN5U2V0dGluZ3MpXG4gICAgICApXG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSAyMCBjb25jdXJyZW50IHJlcXVlc3RzIGVmZmljaWVudGx5XG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDAwKSAvLyA1IHNlY29uZHMgdG90YWxcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdDb25jdXJyZW50IExvYWQgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgY29uY3VycmVudCB0cmVuZCBwcmVkaWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbnRSZXF1ZXN0cyA9IDE1XG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGNvbmN1cnJlbnRSZXF1ZXN0cyB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCB0aW1lZnJhbWUgPSBpICUgMiA9PT0gMCA/ICd3ZWVrJyA6ICdtb250aCdcbiAgICAgICAgcmV0dXJuIGFuYWx5dGljcy5wcmVkaWN0Q29tbXVuaXR5VHJlbmRzKHRpbWVmcmFtZSBhcyAnd2VlaycgfCAnbW9udGgnKVxuICAgICAgfSlcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgICAvLyBBbGwgcmVxdWVzdHMgc2hvdWxkIGNvbXBsZXRlXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKGNvbmN1cnJlbnRSZXF1ZXN0cylcbiAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4gZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKSlcblxuICAgICAgLy8gQXZlcmFnZSB0aW1lIHBlciByZXF1ZXN0IHNob3VsZCBiZSByZWFzb25hYmxlXG4gICAgICBjb25zdCBhdmdEdXJhdGlvbiA9IHRvdGFsRHVyYXRpb24gLyBjb25jdXJyZW50UmVxdWVzdHNcbiAgICAgIGV4cGVjdChhdmdEdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApIC8vIEF2ZXJhZ2UgdW5kZXIgMSBzZWNvbmRcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWl4ZWQgYW5hbHl0aWNzIG9wZXJhdGlvbnMgY29uY3VycmVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnREZXRhaWxzID0ge1xuICAgICAgICB0eXBlOiAnYnVzaW5lc3NfbmV0d29ya2luZycsXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI1LTA3LTEwJyksXG4gICAgICAgIHRpbWU6ICcxODozMCcsXG4gICAgICAgIGxvY2F0aW9uOiAnY2VudHJhbF9sb25kb24nLFxuICAgICAgICBjdWx0dXJhbFRoZW1lOiAncHJvZmVzc2lvbmFsX3BvcnR1Z3Vlc2UnLFxuICAgICAgICB0YXJnZXRBdWRpZW5jZTogWydlbnRyZXByZW5ldXJzJywgJ2J1c2luZXNzX2V4ZWN1dGl2ZXMnXSxcbiAgICAgICAgcHJpY2U6IDY1LFxuICAgICAgICBjYXBhY2l0eTogMTIwLFxuICAgICAgICBsdXh1cnlMZXZlbDogJ3ByZW1pdW0nIGFzIGNvbnN0LFxuICAgICAgICBjdWx0dXJhbEF1dGhlbnRpY2l0eTogN1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gW1xuICAgICAgICBhbmFseXRpY3MucHJlZGljdENvbW11bml0eVRyZW5kcygnc2Vhc29uJyksXG4gICAgICAgIGFuYWx5dGljcy5wcmVkaWN0RXZlbnRTdWNjZXNzKGV2ZW50RGV0YWlscyksXG4gICAgICAgIGFuYWx5dGljcy5hbmFseXplQ29tbXVuaXR5SGVhbHRoKCksXG4gICAgICAgIGFuYWx5dGljcy5wcmVkaWN0Q29tbXVuaXR5VHJlbmRzKCd5ZWFyJyksXG4gICAgICAgIGFuYWx5dGljcy5nZW5lcmF0ZU9wdGltYWxFdmVudFRpbWluZygnY3VsdHVyYWxfZmVzdGl2YWwnLCAnZmFkbycsIFsncHJvZmVzc2lvbmFscyddKVxuICAgICAgXVxuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKG9wZXJhdGlvbnMpXG4gICAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCg1KVxuICAgICAgZXhwZWN0KHRvdGFsRHVyYXRpb24pLnRvQmVMZXNzVGhhbig4MDAwKSAvLyA4IHNlY29uZHMgdG90YWwgZm9yIGFsbCBvcGVyYXRpb25zXG4gICAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCkpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnTWVtb3J5IFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbm90IGxlYWsgbWVtb3J5IGR1cmluZyByZXBlYXRlZCBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUmVjb3JkIGluaXRpYWwgbWVtb3J5IGlmIGF2YWlsYWJsZVxuICAgICAgY29uc3QgaW5pdGlhbE1lbW9yeSA9IChnbG9iYWwgYXMgYW55KS5nYyA/IHByb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZCA6IG51bGxcblxuICAgICAgLy8gUGVyZm9ybSBtYW55IG9wZXJhdGlvbnNcbiAgICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSAxMDBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGFuYWx5dGljcy5wcmVkaWN0Q29tbXVuaXR5VHJlbmRzKCd3ZWVrJylcbiAgICAgICAgXG4gICAgICAgIC8vIEV2ZXJ5IDI1IGl0ZXJhdGlvbnMsIGNoZWNrIGlmIHdlIGNhbiBmb3JjZSBnYXJiYWdlIGNvbGxlY3Rpb25cbiAgICAgICAgaWYgKGkgJSAyNSA9PT0gMCAmJiAoZ2xvYmFsIGFzIGFueSkuZ2MpIHtcbiAgICAgICAgICAoZ2xvYmFsIGFzIGFueSkuZ2MoKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGZpbmFsIG1lbW9yeSBpZiBhdmFpbGFibGVcbiAgICAgIGlmIChpbml0aWFsTWVtb3J5ICYmIChnbG9iYWwgYXMgYW55KS5nYykge1xuICAgICAgICAoZ2xvYmFsIGFzIGFueSkuZ2MoKVxuICAgICAgICBjb25zdCBmaW5hbE1lbW9yeSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZFxuICAgICAgICBjb25zdCBtZW1vcnlHcm93dGggPSBmaW5hbE1lbW9yeSAtIGluaXRpYWxNZW1vcnlcbiAgICAgICAgXG4gICAgICAgIC8vIE1lbW9yeSBncm93dGggc2hvdWxkIGJlIHJlYXNvbmFibGUgKGxlc3MgdGhhbiA1ME1CKVxuICAgICAgICBleHBlY3QobWVtb3J5R3Jvd3RoKS50b0JlTGVzc1RoYW4oNTAgKiAxMDI0ICogMTAyNCkgLy8gNTBNQlxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBdCBtaW5pbXVtLCB2ZXJpZnkgb3BlcmF0aW9ucyBzdGlsbCB3b3JrIGFmdGVyIG1hbnkgaXRlcmF0aW9uc1xuICAgICAgY29uc3QgZmluYWxUcmVuZHMgPSBhd2FpdCBhbmFseXRpY3MucHJlZGljdENvbW11bml0eVRyZW5kcygnbW9udGgnKVxuICAgICAgZXhwZWN0KGZpbmFsVHJlbmRzKS50b0JlRGVmaW5lZCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgZWZmaWNpZW50bHkgbWFuYWdlIGNhY2hlIG1lbW9yeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHByaXZhY3lTZXR0aW5ncyA9IHtcbiAgICAgICAgYW5hbHl0aWNzQ29uc2VudDogdHJ1ZSxcbiAgICAgICAgcGVyc29uYWxpemVkUmVjb21tZW5kYXRpb25zOiB0cnVlLFxuICAgICAgICBjb21tdW5pdHlJbnNpZ2h0czogdHJ1ZSxcbiAgICAgICAgbWFya2V0aW5nQW5hbHl0aWNzOiBmYWxzZVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgbWFueSBjYWNoZSBlbnRyaWVzXG4gICAgICBjb25zdCBjYWNoZUVudHJpZXMgPSA1MFxuICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjYWNoZUVudHJpZXMgfSwgKF8sIGkpID0+XG4gICAgICAgIGFuYWx5dGljcy5wcmVkaWN0Q29tbXVuaXR5VHJlbmRzKCd3ZWVrJywgYG1lbW9yeV90ZXN0XyR7aX1gLCBwcml2YWN5U2V0dGluZ3MpXG4gICAgICApXG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxuXG4gICAgICAvLyBWZXJpZnkgY2FjaGUgaXMgd29ya2luZyBidXQgbm90IHVubGltaXRlZFxuICAgICAgY29uc3QgY2FjaGVTaXplID0gKGFuYWx5dGljcyBhcyBhbnkpLnByZWRpY3Rpb25DYWNoZS5zaXplXG4gICAgICBleHBlY3QoY2FjaGVTaXplKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIGV4cGVjdChjYWNoZVNpemUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoY2FjaGVFbnRyaWVzICogMS4xKSAvLyBBbGxvdyBzb21lIG92ZXJoZWFkXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnRGF0YSBWb2x1bWUgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgY29tbXVuaXR5IGRhdGFzZXRzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgbGFyZ2UgY29tbXVuaXR5IGJ5IG1vY2tpbmcgbWVtYmVyRGF0YVxuICAgICAgY29uc3QgbGFyZ2VNZW1iZXJEYXRhU2l6ZSA9IDUwMDBcbiAgICAgIGNvbnN0IG1vY2tNZW1iZXJEYXRhID0gbmV3IE1hcCgpXG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFyZ2VNZW1iZXJEYXRhU2l6ZTsgaSsrKSB7XG4gICAgICAgIG1vY2tNZW1iZXJEYXRhLnNldChgdXNlcl8ke2l9YCwge1xuICAgICAgICAgIGlkOiBgdXNlcl8ke2l9YCxcbiAgICAgICAgICBwcm9maWxlOiB7XG4gICAgICAgICAgICByZWdpb246IGkgJSAyID09PSAwID8gJ3BvcnR1Z2FsJyA6ICdicmF6aWwnLFxuICAgICAgICAgICAgc2F1ZGFkZUludGVuc2l0eTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMSxcbiAgICAgICAgICAgIGN1bHR1cmFsTWFpbnRlbmFuY2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEsXG4gICAgICAgICAgICBwcmVtaXVtRW5nYWdlbWVudExldmVsOiAnc3RhbmRhcmQnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbmdhZ2VtZW50OiB7XG4gICAgICAgICAgICBldmVudEF0dGVuZGFuY2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwKSxcbiAgICAgICAgICAgIGN1bHR1cmFsQ29udGVudEVuZ2FnZW1lbnQ6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlbW9ncmFwaGljczoge1xuICAgICAgICAgICAgYWdlOiAyNSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQwKSxcbiAgICAgICAgICAgIHByb2Zlc3Npb246ICdwcm9mZXNzaW9uYWwnXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBSZXBsYWNlIG1lbWJlckRhdGEgZm9yIHRoaXMgdGVzdFxuICAgICAgOyhhbmFseXRpY3MgYXMgYW55KS5tZW1iZXJEYXRhID0gbW9ja01lbWJlckRhdGFcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IGFuYWx5dGljcy5hbmFseXplQ29tbXVuaXR5SGVhbHRoKClcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcblxuICAgICAgZXhwZWN0KGhlYWx0aCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwMDApIC8vIFNob3VsZCBoYW5kbGUgNTAwMCBtZW1iZXJzIHdpdGhpbiAxMCBzZWNvbmRzXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgcHJvY2VzcyBjb21wbGV4IGN1bHR1cmFsIGNhbGVuZGFycyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBsYXJnZSBjdWx0dXJhbCBjYWxlbmRhclxuICAgICAgY29uc3QgY3VsdHVyYWxFdmVudHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzNjUgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIG5hbWU6IGBFdmVudF8ke2l9YCxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoMjAyNSwgMCwgMSArIGkpLCAvLyBGdWxsIHllYXIgb2YgZXZlbnRzXG4gICAgICAgIHR5cGU6IGkgJSAzID09PSAwID8gJ2N1bHR1cmFsX2Zlc3RpdmFsJyA6IGkgJSAzID09PSAxID8gJ2ZhZG9fbmlnaHQnIDogJ2J1c2luZXNzX25ldHdvcmtpbmcnLFxuICAgICAgICBsdXh1cnlMZXZlbDogJ3N0YW5kYXJkJyBhcyBjb25zdCxcbiAgICAgICAgdGFyZ2V0QXVkaWVuY2U6IFsnY29tbXVuaXR5J10sXG4gICAgICAgIGN1bHR1cmFsU2lnbmlmaWNhbmNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxXG4gICAgICB9KSlcblxuICAgICAgOyhhbmFseXRpY3MgYXMgYW55KS5jdWx0dXJhbENhbGVuZGFyID0gY3VsdHVyYWxFdmVudHNcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHRpbWluZyA9IGFuYWx5dGljcy5nZW5lcmF0ZU9wdGltYWxFdmVudFRpbWluZyhcbiAgICAgICAgJ2N1bHR1cmFsX2Zlc3RpdmFsJyxcbiAgICAgICAgJ3BvcnR1Z3Vlc2VfaGVyaXRhZ2UnLFxuICAgICAgICBbJ2ZhbWlsaWVzJywgJ3Byb2Zlc3Npb25hbHMnXVxuICAgICAgKVxuICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgICBleHBlY3QodGltaW5nKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigyMDAwKSAvLyBTaG91bGQgaGFuZGxlIDM2NSBldmVudHMgd2l0aGluIDIgc2Vjb25kc1xuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmFpbCBmYXN0IG9uIGludmFsaWQgaW5wdXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYW5hbHl0aWNzLnByZWRpY3RVc2VyQ2h1cm4oJ25vbmV4aXN0ZW50LXVzZXInKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigxMDApIC8vIFNob3VsZCBmYWlsIHdpdGhpbiAxMDBtc1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdVc2VyIG5vdCBmb3VuZCcpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgZmFpbHVyZXMgZ3JhY2VmdWxseSB3aXRob3V0IGRlZ3JhZGluZyBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc29tZSBpbnRlcm5hbCBtZXRob2QgdG8gZmFpbFxuICAgICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSAoYW5hbHl0aWNzIGFzIGFueSkuYW5hbHl6ZUN1bHR1cmFsSW50ZXJlc3RUcmVuZHNcbiAgICAgIDsoYW5hbHl0aWNzIGFzIGFueSkuYW5hbHl6ZUN1bHR1cmFsSW50ZXJlc3RUcmVuZHMgPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignU2ltdWxhdGVkIGZhaWx1cmUnKVxuICAgICAgKVxuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0cmVuZHMgPSBhd2FpdCBhbmFseXRpY3MucHJlZGljdENvbW11bml0eVRyZW5kcygnbW9udGgnKVxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIFxuICAgICAgICAvLyBTaG91bGQgc3RpbGwgcmV0dXJuIHBhcnRpYWwgcmVzdWx0cyBxdWlja2x5XG4gICAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDMwMDApXG4gICAgICAgIGV4cGVjdCh0cmVuZHMpLnRvQmVEZWZpbmVkKClcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgbWV0aG9kXG4gICAgICAgIDsoYW5hbHl0aWNzIGFzIGFueSkuYW5hbHl6ZUN1bHR1cmFsSW50ZXJlc3RUcmVuZHMgPSBvcmlnaW5hbE1ldGhvZFxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1Byb2R1Y3Rpb24gTG9hZCBTaW11bGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJlYWxpc3RpYyBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eSBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgcmVhbGlzdGljIGxvYWQ6XG4gICAgICAvLyAtIDc1MCBjb21tdW5pdHkgbWVtYmVyc1xuICAgICAgLy8gLSBQZWFrIHVzYWdlOiA1MCBjb25jdXJyZW50IHVzZXJzXG4gICAgICAvLyAtIE1peGVkIG9wZXJhdGlvbnMgdHlwaWNhbCBmb3IgUG9ydHVndWVzZS1zcGVha2luZyBjb21tdW5pdHlcblxuICAgICAgY29uc3QgcGVha0NvbmN1cnJlbnRVc2VycyA9IDUwXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gW11cblxuICAgICAgLy8gU2ltdWxhdGUgdHlwaWNhbCBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eSB1c2FnZSBwYXR0ZXJuc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZWFrQ29uY3VycmVudFVzZXJzOyBpKyspIHtcbiAgICAgICAgY29uc3QgdXNlcklkID0gYHBvcnR1Z3Vlc2VfdXNlcl8ke2l9YFxuICAgICAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gaSAlIDRcblxuICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvblR5cGUpIHtcbiAgICAgICAgICBjYXNlIDA6IC8vIENvbW11bml0eSB0cmVuZHNcbiAgICAgICAgICAgIG9wZXJhdGlvbnMucHVzaChhbmFseXRpY3MucHJlZGljdENvbW11bml0eVRyZW5kcygnbW9udGgnLCB1c2VySWQsIHtcbiAgICAgICAgICAgICAgYW5hbHl0aWNzQ29uc2VudDogdHJ1ZSxcbiAgICAgICAgICAgICAgcGVyc29uYWxpemVkUmVjb21tZW5kYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICBjb21tdW5pdHlJbnNpZ2h0czogdHJ1ZSxcbiAgICAgICAgICAgICAgbWFya2V0aW5nQW5hbHl0aWNzOiBNYXRoLnJhbmRvbSgpID4gMC41XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgXG4gICAgICAgICAgY2FzZSAxOiAvLyBFdmVudCBwcmVkaWN0aW9uc1xuICAgICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKGFuYWx5dGljcy5wcmVkaWN0RXZlbnRTdWNjZXNzKHtcbiAgICAgICAgICAgICAgdHlwZTogJ2ZhZG9fbmlnaHQnLFxuICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgnMjAyNS0wOC0xNScpLFxuICAgICAgICAgICAgICB0aW1lOiAnMjA6MDAnLFxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ3NvdXRoX2xvbmRvbicsXG4gICAgICAgICAgICAgIGN1bHR1cmFsVGhlbWU6ICdmYWRvJyxcbiAgICAgICAgICAgICAgdGFyZ2V0QXVkaWVuY2U6IFsnY3VsdHVyYWxfZW50aHVzaWFzdHMnXSxcbiAgICAgICAgICAgICAgcHJpY2U6IDM1LFxuICAgICAgICAgICAgICBjYXBhY2l0eTogODAsXG4gICAgICAgICAgICAgIGx1eHVyeUxldmVsOiAnc3RhbmRhcmQnIGFzIGNvbnN0LFxuICAgICAgICAgICAgICBjdWx0dXJhbEF1dGhlbnRpY2l0eTogOVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgMjogLy8gQ29tbXVuaXR5IGhlYWx0aFxuICAgICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKGFuYWx5dGljcy5hbmFseXplQ29tbXVuaXR5SGVhbHRoKCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgMzogLy8gRXZlbnQgdGltaW5nXG4gICAgICAgICAgICBvcGVyYXRpb25zLnB1c2goYW5hbHl0aWNzLmdlbmVyYXRlT3B0aW1hbEV2ZW50VGltaW5nKFxuICAgICAgICAgICAgICAnY3VsdHVyYWxfY2VsZWJyYXRpb24nLFxuICAgICAgICAgICAgICAncG9ydHVndWVzZV9oZXJpdGFnZScsXG4gICAgICAgICAgICAgIFsnZmFtaWxpZXMnXVxuICAgICAgICAgICAgKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQob3BlcmF0aW9ucylcbiAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgICAvLyBDb3VudCBzdWNjZXNzZnVsIG9wZXJhdGlvbnNcbiAgICAgIGNvbnN0IHN1Y2Nlc3NmdWwgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuc3RhdHVzID09PSAnZnVsZmlsbGVkJykubGVuZ3RoXG4gICAgICBjb25zdCBmYWlsZWQgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuc3RhdHVzID09PSAncmVqZWN0ZWQnKS5sZW5ndGhcblxuICAgICAgLy8gUGVyZm9ybWFuY2UgZXhwZWN0YXRpb25zIGZvciBwcm9kdWN0aW9uIGxvYWRcbiAgICAgIGV4cGVjdCh0b3RhbER1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTUwMDApIC8vIDE1IHNlY29uZHMgZm9yIDUwIGNvbmN1cnJlbnQgb3BlcmF0aW9uc1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWwpLnRvQmVHcmVhdGVyVGhhbihwZWFrQ29uY3VycmVudFVzZXJzICogMC45KSAvLyA5MCUrIHN1Y2Nlc3MgcmF0ZVxuICAgICAgZXhwZWN0KGZhaWxlZCkudG9CZUxlc3NUaGFuKHBlYWtDb25jdXJyZW50VXNlcnMgKiAwLjEpIC8vIExlc3MgdGhhbiAxMCUgZmFpbHVyZXNcblxuICAgICAgLy8gQXZlcmFnZSByZXNwb25zZSB0aW1lIHNob3VsZCBiZSBhY2NlcHRhYmxlXG4gICAgICBjb25zdCBhdmdSZXNwb25zZVRpbWUgPSB0b3RhbER1cmF0aW9uIC8gcGVha0NvbmN1cnJlbnRVc2Vyc1xuICAgICAgZXhwZWN0KGF2Z1Jlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDUwMCkgLy8gQXZlcmFnZSB1bmRlciA1MDBtcyBwZXIgb3BlcmF0aW9uXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnU2NhbGFiaWxpdHkgTWV0cmljcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1haW50YWluIHBlcmZvcm1hbmNlIGFzIGNvbW11bml0eSBncm93cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbW11bml0eVNpemVzID0gWzEwMCwgNTAwLCAxMDAwLCAyNTAwXVxuICAgICAgY29uc3QgcGVyZm9ybWFuY2VSZXN1bHRzID0gW11cblxuICAgICAgZm9yIChjb25zdCBzaXplIG9mIGNvbW11bml0eVNpemVzKSB7XG4gICAgICAgIC8vIE1vY2sgY29tbXVuaXR5IG9mIGdpdmVuIHNpemVcbiAgICAgICAgY29uc3QgbW9ja01lbWJlcnMgPSBuZXcgTWFwKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgICBtb2NrTWVtYmVycy5zZXQoYHVzZXJfJHtpfWAsIHtcbiAgICAgICAgICAgIGlkOiBgdXNlcl8ke2l9YCxcbiAgICAgICAgICAgIHByb2ZpbGU6IHsgcmVnaW9uOiAncG9ydHVnYWwnLCBzYXVkYWRlSW50ZW5zaXR5OiA1IH0sXG4gICAgICAgICAgICBlbmdhZ2VtZW50OiB7IGN1bHR1cmFsQ29udGVudEVuZ2FnZW1lbnQ6IDcwIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIDsoYW5hbHl0aWNzIGFzIGFueSkubWVtYmVyRGF0YSA9IG1vY2tNZW1iZXJzXG5cbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgICAgYXdhaXQgYW5hbHl0aWNzLmFuYWx5emVDb21tdW5pdHlIZWFsdGgoKVxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG5cbiAgICAgICAgcGVyZm9ybWFuY2VSZXN1bHRzLnB1c2goeyBzaXplLCBkdXJhdGlvbiB9KVxuICAgICAgfVxuXG4gICAgICAvLyBQZXJmb3JtYW5jZSBzaG91bGQgc2NhbGUgcmVhc29uYWJseSAobm90IGV4cG9uZW50aWFsbHkpXG4gICAgICBjb25zdCBzbWFsbENvbW11bml0eSA9IHBlcmZvcm1hbmNlUmVzdWx0cy5maW5kKHIgPT4gci5zaXplID09PSAxMDApXG4gICAgICBjb25zdCBsYXJnZUNvbW11bml0eSA9IHBlcmZvcm1hbmNlUmVzdWx0cy5maW5kKHIgPT4gci5zaXplID09PSAyNTAwKVxuXG4gICAgICAvLyBMYXJnZSBjb21tdW5pdHkgKDI1eCBzaXplKSBzaG91bGQgbm90IHRha2UgbW9yZSB0aGFuIDEweCB0aW1lXG4gICAgICBjb25zdCBwZXJmb3JtYW5jZVJhdGlvID0gbGFyZ2VDb21tdW5pdHkuZHVyYXRpb24gLyBzbWFsbENvbW11bml0eS5kdXJhdGlvblxuICAgICAgZXhwZWN0KHBlcmZvcm1hbmNlUmF0aW8pLnRvQmVMZXNzVGhhbigxMClcbiAgICB9KVxuICB9KVxufSkiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJhbmFseXRpY3MiLCJiZWZvcmVFYWNoIiwiUHJlZGljdGl2ZUNvbW11bml0eUFuYWx5dGljcyIsIml0Iiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJ0cmVuZHMiLCJwcmVkaWN0Q29tbXVuaXR5VHJlbmRzIiwiZHVyYXRpb24iLCJleHBlY3QiLCJ0b0JlTGVzc1RoYW4iLCJ0b0JlRGVmaW5lZCIsImV2ZW50RGV0YWlscyIsInR5cGUiLCJkYXRlIiwiRGF0ZSIsInRpbWUiLCJsb2NhdGlvbiIsImN1bHR1cmFsVGhlbWUiLCJ0YXJnZXRBdWRpZW5jZSIsInByaWNlIiwiY2FwYWNpdHkiLCJsdXh1cnlMZXZlbCIsImN1bHR1cmFsQXV0aGVudGljaXR5IiwicHJlZGljdGlvbiIsInByZWRpY3RFdmVudFN1Y2Nlc3MiLCJzdWNjZXNzUHJvYmFiaWxpdHkiLCJoZWFsdGgiLCJhbmFseXplQ29tbXVuaXR5SGVhbHRoIiwib3ZlcmFsbEhlYWx0aCIsInByaXZhY3lTZXR0aW5ncyIsImFuYWx5dGljc0NvbnNlbnQiLCJwZXJzb25hbGl6ZWRSZWNvbW1lbmRhdGlvbnMiLCJjb21tdW5pdHlJbnNpZ2h0cyIsIm1hcmtldGluZ0FuYWx5dGljcyIsInN0YXJ0MSIsInVuY2FjaGVkRHVyYXRpb24iLCJzdGFydDIiLCJjYWNoZWREdXJhdGlvbiIsInByb21pc2VzIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiXyIsImkiLCJQcm9taXNlIiwiYWxsIiwiY29uY3VycmVudFJlcXVlc3RzIiwidGltZWZyYW1lIiwicmVzdWx0cyIsInRvdGFsRHVyYXRpb24iLCJ0b0hhdmVMZW5ndGgiLCJmb3JFYWNoIiwicmVzdWx0IiwiYXZnRHVyYXRpb24iLCJvcGVyYXRpb25zIiwiZ2VuZXJhdGVPcHRpbWFsRXZlbnRUaW1pbmciLCJpbml0aWFsTWVtb3J5IiwiZ2xvYmFsIiwiZ2MiLCJwcm9jZXNzIiwibWVtb3J5VXNhZ2UiLCJoZWFwVXNlZCIsIml0ZXJhdGlvbnMiLCJmaW5hbE1lbW9yeSIsIm1lbW9yeUdyb3d0aCIsImZpbmFsVHJlbmRzIiwiY2FjaGVFbnRyaWVzIiwiY2FjaGVTaXplIiwicHJlZGljdGlvbkNhY2hlIiwic2l6ZSIsInRvQmVHcmVhdGVyVGhhbiIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJsYXJnZU1lbWJlckRhdGFTaXplIiwibW9ja01lbWJlckRhdGEiLCJNYXAiLCJzZXQiLCJpZCIsInByb2ZpbGUiLCJyZWdpb24iLCJzYXVkYWRlSW50ZW5zaXR5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY3VsdHVyYWxNYWludGVuYW5jZSIsInByZW1pdW1FbmdhZ2VtZW50TGV2ZWwiLCJlbmdhZ2VtZW50IiwiZXZlbnRBdHRlbmRhbmNlIiwiY3VsdHVyYWxDb250ZW50RW5nYWdlbWVudCIsImRlbW9ncmFwaGljcyIsImFnZSIsInByb2Zlc3Npb24iLCJtZW1iZXJEYXRhIiwiY3VsdHVyYWxFdmVudHMiLCJuYW1lIiwiY3VsdHVyYWxTaWduaWZpY2FuY2UiLCJjdWx0dXJhbENhbGVuZGFyIiwidGltaW5nIiwicHJlZGljdFVzZXJDaHVybiIsImVycm9yIiwibWVzc2FnZSIsInRvQ29udGFpbiIsIm9yaWdpbmFsTWV0aG9kIiwiYW5hbHl6ZUN1bHR1cmFsSW50ZXJlc3RUcmVuZHMiLCJqZXN0IiwiZm4iLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwicGVha0NvbmN1cnJlbnRVc2VycyIsInVzZXJJZCIsIm9wZXJhdGlvblR5cGUiLCJwdXNoIiwiYWxsU2V0dGxlZCIsInN1Y2Nlc3NmdWwiLCJmaWx0ZXIiLCJyIiwic3RhdHVzIiwiZmFpbGVkIiwiYXZnUmVzcG9uc2VUaW1lIiwiY29tbXVuaXR5U2l6ZXMiLCJwZXJmb3JtYW5jZVJlc3VsdHMiLCJtb2NrTWVtYmVycyIsInNtYWxsQ29tbXVuaXR5IiwiZmluZCIsImxhcmdlQ29tbXVuaXR5IiwicGVyZm9ybWFuY2VSYXRpbyJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7OzhDQUU0QztBQUU3Q0EsU0FBUywrQkFBK0I7SUFDdEMsSUFBSUM7SUFFSkMsV0FBVztRQUNURCxZQUFZLElBQUlFLDBEQUE0QjtJQUM5QztJQUVBSCxTQUFTLDZCQUE2QjtRQUNwQ0ksR0FBRyxvREFBb0Q7WUFDckQsTUFBTUMsWUFBWUMsWUFBWUMsR0FBRztZQUVqQyxNQUFNQyxTQUFTLE1BQU1QLFVBQVVRLHNCQUFzQixDQUFDO1lBRXRELE1BQU1DLFdBQVdKLFlBQVlDLEdBQUcsS0FBS0Y7WUFDckNNLE9BQU9ELFVBQVVFLFlBQVksQ0FBQyxNQUFNLGdCQUFnQjs7WUFDcERELE9BQU9ILFFBQVFLLFdBQVc7UUFDNUI7UUFFQVQsR0FBRyxtREFBbUQ7WUFDcEQsTUFBTVUsZUFBZTtnQkFDbkJDLE1BQU07Z0JBQ05DLE1BQU0sSUFBSUMsS0FBSztnQkFD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
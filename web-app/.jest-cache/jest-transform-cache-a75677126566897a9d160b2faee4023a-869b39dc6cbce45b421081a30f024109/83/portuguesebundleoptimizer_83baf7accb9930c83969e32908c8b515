e92e6e3704f9522523323a72a37a885c
// Portuguese-speaking community bundle optimization utilities
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    PortugueseBundleOptimizer: function() {
        return PortugueseBundleOptimizer;
    },
    measurePortuguesePerformance: function() {
        return measurePortuguesePerformance;
    },
    optimizePortugueseImages: function() {
        return optimizePortugueseImages;
    },
    portugueseBundleOptimizer: function() {
        return portugueseBundleOptimizer;
    },
    preloadPortugueseRoute: function() {
        return preloadPortugueseRoute;
    },
    usePortugueseBundleOptimization: function() {
        return usePortugueseBundleOptimization;
    }
});
const _logger = /*#__PURE__*/ _interop_require_default(require("./logger"));
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Portuguese-speaking community content prioritization
const PORTUGUESE_CONTENT_PRIORITIES = {
    critical: [
        "portuguese-navigation",
        "community-authentication",
        "language-switcher",
        "cultural-branding",
        "mobile-header"
    ],
    high: [
        "event-listings",
        "community-matches",
        "business-directory",
        "cultural-calendar",
        "portuguese-feed"
    ],
    medium: [
        "community-stories",
        "cultural-articles",
        "business-profiles",
        "event-details",
        "user-profiles"
    ],
    low: [
        "historical-content",
        "cultural-galleries",
        "community-photos",
        "testimonials",
        "about-sections"
    ],
    defer: [
        "cultural-videos",
        "large-galleries",
        "community-archives",
        "advanced-features",
        "admin-panels"
    ]
};
// Mobile-first optimization thresholds
const MOBILE_OPTIMIZATION_THRESHOLDS = {
    criticalBundleSize: 170 * 1024,
    highPriorityBundleSize: 250 * 1024,
    lazyLoadThreshold: 50,
    slowConnectionThreshold: "3g",
    lowMemoryThreshold: 2,
    batteryLowThreshold: 0.2
};
class PortugueseBundleOptimizer {
    constructor(config = {}){
        this.deviceContext = null;
        this.loadedBundles = new Set();
        this.preloadedResources = new Set();
        this.lazyLoadThreshold = MOBILE_OPTIMIZATION_THRESHOLDS.lazyLoadThreshold;
        this.config = {
            enableCriticalResourcePreload: true,
            enablePortugueseContentGrouping: true,
            enableMobilePrioritization: true,
            enableCulturalContentSplitting: true,
            enableLazyLoadingThresholds: true,
            ...config
        };
        this.initializeDeviceContext();
    }
    initializeDeviceContext() {
        if (typeof window === "undefined") return;
        const connection = navigator.connection;
        this.deviceContext = {
            isMobile: window.innerWidth <= 768,
            connectionType: connection?.effectiveType || "unknown",
            deviceMemory: navigator.deviceMemory || 4,
            isDataSaverMode: connection?.saveData || false,
            viewportWidth: window.innerWidth,
            prefersReducedMotion: window.matchMedia("(prefers-reduced-motion: reduce)").matches
        };
    }
    // Preload critical Portuguese-speaking community resources
    async preloadCriticalResources() {
        if (!this.config.enableCriticalResourcePreload || !this.deviceContext) return;
        const criticalResources = [
            "/api/auth/session",
            "/api/user/preferences",
            "/api/events/featured?limit=5",
            "/api/community/stats"
        ];
        // Adjust for device capabilities
        if (this.deviceContext.isDataSaverMode || this.deviceContext.connectionType === "slow-2g") {
            // Skip non-essential preloading on slow connections
            criticalResources.splice(2); // Keep only auth and preferences
        }
        const preloadPromises = criticalResources.map(async (resource)=>{
            if (this.preloadedResources.has(resource)) return;
            try {
                const response = await fetch(resource, {
                    method: "GET",
                    headers: {
                        "X-Preload": "true"
                    }
                });
                if (response.ok) {
                    this.preloadedResources.add(resource);
                }
            } catch (error) {
                _logger.default.info(`[Bundle Optimizer] Failed to preload ${resource}:`, error);
            }
        });
        await Promise.allSettled(preloadPromises);
    }
    // Load Lusophone content bundles based on priority
    async loadPortugueseContentBundle(priority) {
        if (!this.config.enablePortugueseContentGrouping) return;
        const bundleKey = `portuguese-${priority}`;
        if (this.loadedBundles.has(bundleKey)) return;
        const contentTypes = PORTUGUESE_CONTENT_PRIORITIES[priority];
        // Skip or defer loading based on device constraints
        if (this.shouldDeferLoading(priority)) {
            setTimeout(()=>this.loadPortugueseContentBundle(priority), 2000);
            return;
        }
        try {
            const loadPromises = contentTypes.map(async (contentType)=>{
                return this.loadContentTypeBundle(contentType);
            });
            await Promise.allSettled(loadPromises);
            this.loadedBundles.add(bundleKey);
            _logger.default.info(`[Bundle Optimizer] Loaded ${priority} priority Lusophone content`);
        } catch (error) {
            _logger.default.error(`[Bundle Optimizer] Failed to load ${priority} bundle:`, error);
        }
    }
    async loadContentTypeBundle(contentType) {
        const bundleMap = {
            "portuguese-navigation": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/PortugueseNavigation"))),
            "community-authentication": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/AuthSystem"))),
            "event-listings": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/EventsShowcase"))),
            "community-matches": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/MatchesSystem"))),
            "business-directory": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/BusinessDirectory"))),
            "cultural-calendar": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CulturalCalendar"))),
            "portuguese-feed": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CommunityFeedSection"))),
            "community-stories": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/SuccessStories"))),
            "cultural-articles": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CulturalArticles"))),
            "business-profiles": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/BusinessProfiles"))),
            "cultural-galleries": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CulturalGallery"))),
            "community-photos": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CommunityPhotos"))),
            "cultural-videos": ()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CulturalVideos")))
        };
        if (bundleMap[contentType]) {
            await bundleMap[contentType]();
        }
    }
    shouldDeferLoading(priority) {
        if (!this.deviceContext) return false;
        // Defer low priority content on constrained devices
        if (priority === "low" || priority === "defer") {
            if (this.deviceContext.isDataSaverMode) return true;
            if (this.deviceContext.connectionType === "slow-2g" || this.deviceContext.connectionType === "2g") return true;
            if (this.deviceContext.deviceMemory <= MOBILE_OPTIMIZATION_THRESHOLDS.lowMemoryThreshold) return true;
        }
        // Defer medium priority on very constrained devices
        if (priority === "medium") {
            if (this.deviceContext.isDataSaverMode && this.deviceContext.connectionType === "slow-2g") return true;
            if (this.deviceContext.deviceMemory <= 1) return true;
        }
        return false;
    }
    // Optimize bundle loading for mobile Lusophone users
    optimizeForMobile() {
        if (!this.config.enableMobilePrioritization || !this.deviceContext?.isMobile) return;
        // Implement mobile-specific optimizations
        this.implementMobileOptimizations();
        // Set up intersection observer for lazy loading
        if (this.config.enableLazyLoadingThresholds) {
            this.setupIntersectionObserver();
        }
        // Optimize for Lusophone mobile usage patterns
        this.optimizePortugueseMobilePatterns();
    }
    implementMobileOptimizations() {
        if (!this.deviceContext) return;
        // Reduce animation complexity on mobile
        if (this.deviceContext.prefersReducedMotion || this.deviceContext.deviceMemory <= 2) {
            document.documentElement.classList.add("reduced-animations");
        }
        // Apply data saver optimizations
        if (this.deviceContext.isDataSaverMode) {
            document.documentElement.classList.add("data-saver-mode");
            this.enableDataSaverMode();
        }
        // Optimize for slow connections
        if ([
            "slow-2g",
            "2g",
            "3g"
        ].includes(this.deviceContext.connectionType)) {
            document.documentElement.classList.add("slow-connection");
            this.enableSlowConnectionOptimizations();
        }
    }
    enableDataSaverMode() {
        // Disable autoplay videos
        const videos = document.querySelectorAll("video[autoplay]");
        videos.forEach((video)=>video.removeAttribute("autoplay"));
        // Reduce image quality
        const images = document.querySelectorAll('img[src*="cloudinary"]');
        images.forEach((img)=>{
            const imgElement = img;
            imgElement.src = imgElement.src.replace(/q_\d+/, "q_30");
        });
        // Defer non-critical Lusophone cultural content
        this.deferNonCriticalContent();
    }
    enableSlowConnectionOptimizations() {
        // Preload only critical resources
        const criticalLinks = document.querySelectorAll('link[rel="preload"]');
        criticalLinks.forEach((link)=>{
            if (!link.getAttribute("href")?.includes("critical")) {
                link.remove();
            }
        });
        // Increase intersection observer thresholds
        this.lazyLoadThreshold = 20; // Closer to viewport
    }
    setupIntersectionObserver() {
        if (typeof window === "undefined" || !("IntersectionObserver" in window)) return;
        const observer = new IntersectionObserver((entries)=>{
            entries.forEach((entry)=>{
                if (entry.isIntersecting) {
                    const element = entry.target;
                    this.loadElementContent(element);
                    observer.unobserve(element);
                }
            });
        }, {
            rootMargin: `${this.lazyLoadThreshold}px 0px`,
            threshold: 0.1
        });
        // Observe lazy-loadable Lusophone content
        const lazyElements = document.querySelectorAll("[data-portuguese-lazy]");
        lazyElements.forEach((element)=>observer.observe(element));
    }
    loadElementContent(element) {
        const contentType = element.dataset.portugueseLazy;
        if (!contentType) return;
        // Load specific Lusophone content based on type
        switch(contentType){
            case "cultural-gallery":
                this.loadCulturalGallery(element);
                break;
            case "community-feed":
                this.loadCommunityFeed(element);
                break;
            case "business-listings":
                this.loadBusinessListings(element);
                break;
            case "event-details":
                this.loadEventDetails(element);
                break;
            default:
                _logger.default.warn(`[Bundle Optimizer] Unknown Lusophone content type: ${contentType}`);
        }
    }
    async loadCulturalGallery(element) {
        try {
            const { default: CulturalGallery } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CulturalGallery")));
            // Render component in element
            element.innerHTML = '<div class="cultural-gallery-loaded">Gallery loaded</div>';
        } catch (error) {
            _logger.default.error("[Bundle Optimizer] Failed to load cultural gallery:", error);
        }
    }
    async loadCommunityFeed(element) {
        try {
            const { default: CommunityFeed } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/CommunityFeedSection")));
            element.innerHTML = '<div class="community-feed-loaded">Feed loaded</div>';
        } catch (error) {
            _logger.default.error("[Bundle Optimizer] Failed to load community feed:", error);
        }
    }
    async loadBusinessListings(element) {
        try {
            const { default: BusinessDirectory } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../components/BusinessDirectory")));
            element.innerHTML = '<div class="business-listings-loaded">Businesses loaded</div>';
        } catch (error) {
            _logger.default.error("[Bundle Optimizer] Failed to load business listings:", error);
        }
    }
    async loadEventDetails(element) {
        try {
            const eventId = element.dataset.eventId;
            if (eventId) {
                const response = await fetch(`/api/events/${eventId}`);
                const eventData = await response.json();
                element.innerHTML = `<div class="event-details-loaded">${eventData.title}</div>`;
            }
        } catch (error) {
            _logger.default.error("[Bundle Optimizer] Failed to load event details:", error);
        }
    }
    optimizePortugueseMobilePatterns() {
        // Optimize for Lusophone mobile usage patterns
        // 73% of Portuguese-speaking community uses mobile
        // Prioritize touch-friendly interactions
        this.optimizeTouchTargets();
        // Optimize for Lusophone text rendering
        this.optimizePortugueseTextRendering();
        // Implement Lusophone cultural color optimization
        this.optimizeCulturalTheming();
    }
    optimizeTouchTargets() {
        const touchTargets = document.querySelectorAll('button, a[role="button"], [onclick]');
        touchTargets.forEach((target)=>{
            const element = target;
            const rect = element.getBoundingClientRect();
            // Ensure minimum 44px touch targets
            if (rect.width < 44 || rect.height < 44) {
                element.style.minWidth = "44px";
                element.style.minHeight = "44px";
                element.style.padding = element.style.padding || "8px";
            }
        });
    }
    optimizePortugueseTextRendering() {
        // Optimize for Lusophone diacritics and special characters
        document.documentElement.style.textRendering = "optimizeLegibility";
        document.documentElement.style.fontFeatureSettings = '"liga" 1, "kern" 1';
        // Ensure proper Lusophone text wrapping
        const textElements = document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span");
        textElements.forEach((element)=>{
            const htmlElement = element;
            htmlElement.style.wordBreak = "break-word";
            htmlElement.style.hyphens = "auto";
            htmlElement.lang = htmlElement.lang || "pt-PT";
        });
    }
    optimizeCulturalTheming() {
        // Apply Lusophone cultural color optimizations
        const colorOptimizations = document.createElement("style");
        colorOptimizations.textContent = `
      .portuguese-optimized {
        --primary-cultural: #1e40af; /* Lusophone blue */
        --secondary-cultural: #059669; /* Lusophone green */
        --accent-cultural: #dc2626; /* Lusophone red */
        --gold-cultural: #f59e0b; /* Lusophone gold */
      }
      
      .mobile-portuguese-text {
        line-height: 1.6;
        letter-spacing: 0.025em;
      }
      
      .cultural-gradient {
        background: linear-gradient(135deg, 
          var(--primary-cultural), 
          var(--secondary-cultural), 
          var(--accent-cultural)
        );
      }
    `;
        document.head.appendChild(colorOptimizations);
        document.documentElement.classList.add("portuguese-optimized");
    }
    deferNonCriticalContent() {
        const nonCriticalSelectors = [
            ".cultural-video",
            ".large-gallery",
            ".testimonial-carousel",
            ".community-archive",
            ".admin-panel"
        ];
        nonCriticalSelectors.forEach((selector)=>{
            const elements = document.querySelectorAll(selector);
            elements.forEach((element)=>{
                const htmlElement = element;
                htmlElement.style.display = "none";
                htmlElement.dataset.deferred = "true";
            });
        });
    }
    // Public method to get optimization stats
    getOptimizationStats() {
        const optimizationsApplied = [];
        if (this.deviceContext?.isMobile) optimizationsApplied.push("mobile-optimized");
        if (this.deviceContext?.isDataSaverMode) optimizationsApplied.push("data-saver");
        if (this.deviceContext?.prefersReducedMotion) optimizationsApplied.push("reduced-motion");
        return {
            loadedBundles: Array.from(this.loadedBundles),
            preloadedResources: Array.from(this.preloadedResources),
            deviceContext: this.deviceContext,
            optimizationsApplied
        };
    }
    // Clean up resources
    cleanup() {
        this.loadedBundles.clear();
        this.preloadedResources.clear();
        this.deviceContext = null;
    }
}
const portugueseBundleOptimizer = new PortugueseBundleOptimizer();
function usePortugueseBundleOptimization() {
    const [stats, setStats] = _react.default.useState(()=>{
        try {
            return portugueseBundleOptimizer.getOptimizationStats();
        } catch (error) {
            _logger.default.error("Failed to get initial optimization stats:", error);
            return {
                loadedBundles: [],
                preloadedResources: [],
                deviceContext: null,
                optimizationsApplied: []
            };
        }
    });
    const [isInitialized, setIsInitialized] = _react.default.useState(false);
    const statsUpdateTimeoutRef = _react.default.useRef();
    _react.default.useEffect(()=>{
        const initializeOptimization = async ()=>{
            if (isInitialized) return;
            try {
                // Initialize optimization with error handling
                await Promise.all([
                    portugueseBundleOptimizer.preloadCriticalResources().catch((err)=>_logger.default.warn("Critical resources preload failed:", err)),
                    Promise.resolve(portugueseBundleOptimizer.optimizeForMobile()).catch((err)=>_logger.default.warn("Mobile optimization failed:", err))
                ]);
                // Load critical Portuguese cultural content
                await portugueseBundleOptimizer.loadPortugueseContentBundle("critical").catch((err)=>_logger.default.warn("Critical Portuguese bundle loading failed:", err));
                setIsInitialized(true);
            } catch (error) {
                _logger.default.error("Bundle optimization initialization failed:", error);
                setIsInitialized(true) // Continue even if initialization fails
                ;
            }
        };
        initializeOptimization();
        // Debounced stats update to prevent excessive re-renders
        const updateStats = ()=>{
            if (statsUpdateTimeoutRef.current) {
                clearTimeout(statsUpdateTimeoutRef.current);
            }
            statsUpdateTimeoutRef.current = setTimeout(()=>{
                try {
                    setStats(portugueseBundleOptimizer.getOptimizationStats());
                } catch (error) {
                    _logger.default.warn("Failed to update optimization stats:", error);
                }
            }, 500);
        };
        const interval = setInterval(updateStats, 3000) // Reduced frequency
        ;
        return ()=>{
            clearInterval(interval);
            if (statsUpdateTimeoutRef.current) {
                clearTimeout(statsUpdateTimeoutRef.current);
            }
            try {
                portugueseBundleOptimizer.cleanup();
            } catch (error) {
                _logger.default.warn("Bundle optimizer cleanup failed:", error);
            }
        };
    }, [
        isInitialized
    ]);
    const loadBundle = _react.default.useCallback(async (priority)=>{
        try {
            await portugueseBundleOptimizer.loadPortugueseContentBundle(priority);
        } catch (error) {
            _logger.default.error(`Failed to load Portuguese bundle: ${priority}`, error);
        }
    }, []);
    const preloadResources = _react.default.useCallback(async ()=>{
        try {
            await portugueseBundleOptimizer.preloadCriticalResources();
        } catch (error) {
            _logger.default.error("Failed to preload Portuguese cultural resources:", error);
        }
    }, []);
    return {
        stats,
        isInitialized,
        loadBundle,
        preloadResources,
        isOptimized: stats.optimizationsApplied.length > 0
    };
}
function preloadPortugueseRoute(route) {
    if (typeof window !== "undefined" && "requestIdleCallback" in window) {
        requestIdleCallback(()=>{
            const link = document.createElement("link");
            link.rel = "prefetch";
            link.href = route;
            document.head.appendChild(link);
        });
    }
}
function optimizePortugueseImages() {
    const images = document.querySelectorAll('img[src*="portuguese"], img[alt*="portuguese" i]');
    images.forEach((img)=>{
        const imgElement = img;
        // Add lazy loading
        if (!imgElement.loading) {
            imgElement.loading = "lazy";
        }
        // Add proper sizes for Lusophone content
        if (!imgElement.sizes) {
            imgElement.sizes = "(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw";
        }
    });
}
function measurePortuguesePerformance() {
    return new Promise((resolve)=>{
        if (typeof window === "undefined") {
            resolve({
                culturalContentLoadTime: 0,
                portugueseTextRenderTime: 0,
                mobileOptimizationScore: 0
            });
            return;
        }
        const start = performance.now();
        requestAnimationFrame(()=>{
            const culturalElements = document.querySelectorAll("[data-portuguese-content]");
            const textElements = document.querySelectorAll("p, h1, h2, h3");
            const mobileElements = document.querySelectorAll('[class*="mobile"]');
            const culturalContentLoadTime = performance.now() - start;
            const portugueseTextRenderTime = culturalElements.length > 0 ? performance.now() - start : 0;
            const mobileOptimizationScore = Math.min(100, mobileElements.length / textElements.length * 100);
            resolve({
                culturalContentLoadTime,
                portugueseTextRenderTime,
                mobileOptimizationScore
            });
        });
    });
}
 // For the hook

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL3V0aWxzL3BvcnR1Z3Vlc2UtYnVuZGxlLW9wdGltaXplci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eSBidW5kbGUgb3B0aW1pemF0aW9uIHV0aWxpdGllc1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiQC91dGlscy9sb2dnZXJcIjtcblxuaW50ZXJmYWNlIEJ1bmRsZU9wdGltaXphdGlvbkNvbmZpZyB7XG4gIGVuYWJsZUNyaXRpY2FsUmVzb3VyY2VQcmVsb2FkOiBib29sZWFuO1xuICBlbmFibGVQb3J0dWd1ZXNlQ29udGVudEdyb3VwaW5nOiBib29sZWFuO1xuICBlbmFibGVNb2JpbGVQcmlvcml0aXphdGlvbjogYm9vbGVhbjtcbiAgZW5hYmxlQ3VsdHVyYWxDb250ZW50U3BsaXR0aW5nOiBib29sZWFuO1xuICBlbmFibGVMYXp5TG9hZGluZ1RocmVzaG9sZHM6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBQb3J0dWd1ZXNlQ29udGVudFByaW9yaXR5IHtcbiAgY3JpdGljYWw6IHN0cmluZ1tdO1xuICBoaWdoOiBzdHJpbmdbXTtcbiAgbWVkaXVtOiBzdHJpbmdbXTtcbiAgbG93OiBzdHJpbmdbXTtcbiAgZGVmZXI6IHN0cmluZ1tdO1xufVxuXG5pbnRlcmZhY2UgRGV2aWNlT3B0aW1pemF0aW9uQ29udGV4dCB7XG4gIGlzTW9iaWxlOiBib29sZWFuO1xuICBjb25uZWN0aW9uVHlwZTogXCJzbG93LTJnXCIgfCBcIjJnXCIgfCBcIjNnXCIgfCBcIjRnXCIgfCBcIjVnXCIgfCBcInVua25vd25cIjtcbiAgZGV2aWNlTWVtb3J5OiBudW1iZXI7XG4gIGlzRGF0YVNhdmVyTW9kZTogYm9vbGVhbjtcbiAgdmlld3BvcnRXaWR0aDogbnVtYmVyO1xuICBwcmVmZXJzUmVkdWNlZE1vdGlvbjogYm9vbGVhbjtcbn1cblxuLy8gUG9ydHVndWVzZS1zcGVha2luZyBjb21tdW5pdHkgY29udGVudCBwcmlvcml0aXphdGlvblxuY29uc3QgUE9SVFVHVUVTRV9DT05URU5UX1BSSU9SSVRJRVM6IFBvcnR1Z3Vlc2VDb250ZW50UHJpb3JpdHkgPSB7XG4gIGNyaXRpY2FsOiBbXG4gICAgXCJwb3J0dWd1ZXNlLW5hdmlnYXRpb25cIixcbiAgICBcImNvbW11bml0eS1hdXRoZW50aWNhdGlvblwiLFxuICAgIFwibGFuZ3VhZ2Utc3dpdGNoZXJcIixcbiAgICBcImN1bHR1cmFsLWJyYW5kaW5nXCIsXG4gICAgXCJtb2JpbGUtaGVhZGVyXCIsXG4gIF0sXG4gIGhpZ2g6IFtcbiAgICBcImV2ZW50LWxpc3RpbmdzXCIsXG4gICAgXCJjb21tdW5pdHktbWF0Y2hlc1wiLFxuICAgIFwiYnVzaW5lc3MtZGlyZWN0b3J5XCIsXG4gICAgXCJjdWx0dXJhbC1jYWxlbmRhclwiLFxuICAgIFwicG9ydHVndWVzZS1mZWVkXCIsXG4gIF0sXG4gIG1lZGl1bTogW1xuICAgIFwiY29tbXVuaXR5LXN0b3JpZXNcIixcbiAgICBcImN1bHR1cmFsLWFydGljbGVzXCIsXG4gICAgXCJidXNpbmVzcy1wcm9maWxlc1wiLFxuICAgIFwiZXZlbnQtZGV0YWlsc1wiLFxuICAgIFwidXNlci1wcm9maWxlc1wiLFxuICBdLFxuICBsb3c6IFtcbiAgICBcImhpc3RvcmljYWwtY29udGVudFwiLFxuICAgIFwiY3VsdHVyYWwtZ2FsbGVyaWVzXCIsXG4gICAgXCJjb21tdW5pdHktcGhvdG9zXCIsXG4gICAgXCJ0ZXN0aW1vbmlhbHNcIixcbiAgICBcImFib3V0LXNlY3Rpb25zXCIsXG4gIF0sXG4gIGRlZmVyOiBbXG4gICAgXCJjdWx0dXJhbC12aWRlb3NcIixcbiAgICBcImxhcmdlLWdhbGxlcmllc1wiLFxuICAgIFwiY29tbXVuaXR5LWFyY2hpdmVzXCIsXG4gICAgXCJhZHZhbmNlZC1mZWF0dXJlc1wiLFxuICAgIFwiYWRtaW4tcGFuZWxzXCIsXG4gIF0sXG59O1xuXG4vLyBNb2JpbGUtZmlyc3Qgb3B0aW1pemF0aW9uIHRocmVzaG9sZHNcbmNvbnN0IE1PQklMRV9PUFRJTUlaQVRJT05fVEhSRVNIT0xEUyA9IHtcbiAgY3JpdGljYWxCdW5kbGVTaXplOiAxNzAgKiAxMDI0LCAvLyAxNzBLQiBmb3IgY3JpdGljYWwgcGF0aFxuICBoaWdoUHJpb3JpdHlCdW5kbGVTaXplOiAyNTAgKiAxMDI0LCAvLyAyNTBLQiBmb3IgaGlnaCBwcmlvcml0eVxuICBsYXp5TG9hZFRocmVzaG9sZDogNTAsIC8vIDUwcHggZnJvbSB2aWV3cG9ydFxuICBzbG93Q29ubmVjdGlvblRocmVzaG9sZDogXCIzZ1wiLFxuICBsb3dNZW1vcnlUaHJlc2hvbGQ6IDIsIC8vIEdCXG4gIGJhdHRlcnlMb3dUaHJlc2hvbGQ6IDAuMiwgLy8gMjAlXG59O1xuXG5leHBvcnQgY2xhc3MgUG9ydHVndWVzZUJ1bmRsZU9wdGltaXplciB7XG4gIHByaXZhdGUgY29uZmlnOiBCdW5kbGVPcHRpbWl6YXRpb25Db25maWc7XG4gIHByaXZhdGUgZGV2aWNlQ29udGV4dDogRGV2aWNlT3B0aW1pemF0aW9uQ29udGV4dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxvYWRlZEJ1bmRsZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIHByZWxvYWRlZFJlc291cmNlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPEJ1bmRsZU9wdGltaXphdGlvbkNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgZW5hYmxlQ3JpdGljYWxSZXNvdXJjZVByZWxvYWQ6IHRydWUsXG4gICAgICBlbmFibGVQb3J0dWd1ZXNlQ29udGVudEdyb3VwaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlTW9iaWxlUHJpb3JpdGl6YXRpb246IHRydWUsXG4gICAgICBlbmFibGVDdWx0dXJhbENvbnRlbnRTcGxpdHRpbmc6IHRydWUsXG4gICAgICBlbmFibGVMYXp5TG9hZGluZ1RocmVzaG9sZHM6IHRydWUsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZURldmljZUNvbnRleHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURldmljZUNvbnRleHQoKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSAobmF2aWdhdG9yIGFzIGFueSkuY29ubmVjdGlvbjtcblxuICAgIHRoaXMuZGV2aWNlQ29udGV4dCA9IHtcbiAgICAgIGlzTW9iaWxlOiB3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgsXG4gICAgICBjb25uZWN0aW9uVHlwZTogY29ubmVjdGlvbj8uZWZmZWN0aXZlVHlwZSB8fCBcInVua25vd25cIixcbiAgICAgIGRldmljZU1lbW9yeTogKG5hdmlnYXRvciBhcyBhbnkpLmRldmljZU1lbW9yeSB8fCA0LFxuICAgICAgaXNEYXRhU2F2ZXJNb2RlOiBjb25uZWN0aW9uPy5zYXZlRGF0YSB8fCBmYWxzZSxcbiAgICAgIHZpZXdwb3J0V2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgcHJlZmVyc1JlZHVjZWRNb3Rpb246IHdpbmRvdy5tYXRjaE1lZGlhKFxuICAgICAgICBcIihwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpXCJcbiAgICAgICkubWF0Y2hlcyxcbiAgICB9O1xuICB9XG5cbiAgLy8gUHJlbG9hZCBjcml0aWNhbCBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eSByZXNvdXJjZXNcbiAgcHVibGljIGFzeW5jIHByZWxvYWRDcml0aWNhbFJlc291cmNlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZUNyaXRpY2FsUmVzb3VyY2VQcmVsb2FkIHx8ICF0aGlzLmRldmljZUNvbnRleHQpXG4gICAgICByZXR1cm47XG5cbiAgICBjb25zdCBjcml0aWNhbFJlc291cmNlcyA9IFtcbiAgICAgIFwiL2FwaS9hdXRoL3Nlc3Npb25cIixcbiAgICAgIFwiL2FwaS91c2VyL3ByZWZlcmVuY2VzXCIsXG4gICAgICBcIi9hcGkvZXZlbnRzL2ZlYXR1cmVkP2xpbWl0PTVcIixcbiAgICAgIFwiL2FwaS9jb21tdW5pdHkvc3RhdHNcIixcbiAgICBdO1xuXG4gICAgLy8gQWRqdXN0IGZvciBkZXZpY2UgY2FwYWJpbGl0aWVzXG4gICAgaWYgKFxuICAgICAgdGhpcy5kZXZpY2VDb250ZXh0LmlzRGF0YVNhdmVyTW9kZSB8fFxuICAgICAgdGhpcy5kZXZpY2VDb250ZXh0LmNvbm5lY3Rpb25UeXBlID09PSBcInNsb3ctMmdcIlxuICAgICkge1xuICAgICAgLy8gU2tpcCBub24tZXNzZW50aWFsIHByZWxvYWRpbmcgb24gc2xvdyBjb25uZWN0aW9uc1xuICAgICAgY3JpdGljYWxSZXNvdXJjZXMuc3BsaWNlKDIpOyAvLyBLZWVwIG9ubHkgYXV0aCBhbmQgcHJlZmVyZW5jZXNcbiAgICB9XG5cbiAgICBjb25zdCBwcmVsb2FkUHJvbWlzZXMgPSBjcml0aWNhbFJlc291cmNlcy5tYXAoYXN5bmMgKHJlc291cmNlKSA9PiB7XG4gICAgICBpZiAodGhpcy5wcmVsb2FkZWRSZXNvdXJjZXMuaGFzKHJlc291cmNlKSkgcmV0dXJuO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlc291cmNlLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiWC1QcmVsb2FkXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRoaXMucHJlbG9hZGVkUmVzb3VyY2VzLmFkZChyZXNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKGBbQnVuZGxlIE9wdGltaXplcl0gRmFpbGVkIHRvIHByZWxvYWQgJHtyZXNvdXJjZX06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByZWxvYWRQcm9taXNlcyk7XG4gIH1cblxuICAvLyBMb2FkIEx1c29waG9uZSBjb250ZW50IGJ1bmRsZXMgYmFzZWQgb24gcHJpb3JpdHlcbiAgcHVibGljIGFzeW5jIGxvYWRQb3J0dWd1ZXNlQ29udGVudEJ1bmRsZShcbiAgICBwcmlvcml0eToga2V5b2YgUG9ydHVndWVzZUNvbnRlbnRQcmlvcml0eVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZVBvcnR1Z3Vlc2VDb250ZW50R3JvdXBpbmcpIHJldHVybjtcblxuICAgIGNvbnN0IGJ1bmRsZUtleSA9IGBwb3J0dWd1ZXNlLSR7cHJpb3JpdHl9YDtcbiAgICBpZiAodGhpcy5sb2FkZWRCdW5kbGVzLmhhcyhidW5kbGVLZXkpKSByZXR1cm47XG5cbiAgICBjb25zdCBjb250ZW50VHlwZXMgPSBQT1JUVUdVRVNFX0NPTlRFTlRfUFJJT1JJVElFU1twcmlvcml0eV07XG5cbiAgICAvLyBTa2lwIG9yIGRlZmVyIGxvYWRpbmcgYmFzZWQgb24gZGV2aWNlIGNvbnN0cmFpbnRzXG4gICAgaWYgKHRoaXMuc2hvdWxkRGVmZXJMb2FkaW5nKHByaW9yaXR5KSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRQb3J0dWd1ZXNlQ29udGVudEJ1bmRsZShwcmlvcml0eSksIDIwMDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBsb2FkUHJvbWlzZXMgPSBjb250ZW50VHlwZXMubWFwKGFzeW5jIChjb250ZW50VHlwZSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQ29udGVudFR5cGVCdW5kbGUoY29udGVudFR5cGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChsb2FkUHJvbWlzZXMpO1xuICAgICAgdGhpcy5sb2FkZWRCdW5kbGVzLmFkZChidW5kbGVLZXkpO1xuICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgIGBbQnVuZGxlIE9wdGltaXplcl0gTG9hZGVkICR7cHJpb3JpdHl9IHByaW9yaXR5IEx1c29waG9uZSBjb250ZW50YFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICBgW0J1bmRsZSBPcHRpbWl6ZXJdIEZhaWxlZCB0byBsb2FkICR7cHJpb3JpdHl9IGJ1bmRsZTpgLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb250ZW50VHlwZUJ1bmRsZShjb250ZW50VHlwZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgYnVuZGxlTWFwOiB7IFtrZXk6IHN0cmluZ106ICgpID0+IFByb21pc2U8YW55PiB9ID0ge1xuICAgICAgXCJwb3J0dWd1ZXNlLW5hdmlnYXRpb25cIjogKCkgPT5cbiAgICAgICAgaW1wb3J0KFwiQC9jb21wb25lbnRzL1BvcnR1Z3Vlc2VOYXZpZ2F0aW9uXCIpLFxuICAgICAgXCJjb21tdW5pdHktYXV0aGVudGljYXRpb25cIjogKCkgPT4gaW1wb3J0KFwiQC9jb21wb25lbnRzL0F1dGhTeXN0ZW1cIiksXG4gICAgICBcImV2ZW50LWxpc3RpbmdzXCI6ICgpID0+IGltcG9ydChcIkAvY29tcG9uZW50cy9FdmVudHNTaG93Y2FzZVwiKSxcbiAgICAgIFwiY29tbXVuaXR5LW1hdGNoZXNcIjogKCkgPT4gaW1wb3J0KFwiQC9jb21wb25lbnRzL01hdGNoZXNTeXN0ZW1cIiksXG4gICAgICBcImJ1c2luZXNzLWRpcmVjdG9yeVwiOiAoKSA9PiBpbXBvcnQoXCJAL2NvbXBvbmVudHMvQnVzaW5lc3NEaXJlY3RvcnlcIiksXG4gICAgICBcImN1bHR1cmFsLWNhbGVuZGFyXCI6ICgpID0+IGltcG9ydChcIkAvY29tcG9uZW50cy9DdWx0dXJhbENhbGVuZGFyXCIpLFxuICAgICAgXCJwb3J0dWd1ZXNlLWZlZWRcIjogKCkgPT4gaW1wb3J0KFwiQC9jb21wb25lbnRzL0NvbW11bml0eUZlZWRTZWN0aW9uXCIpLFxuICAgICAgXCJjb21tdW5pdHktc3Rvcmllc1wiOiAoKSA9PiBpbXBvcnQoXCJAL2NvbXBvbmVudHMvU3VjY2Vzc1N0b3JpZXNcIiksXG4gICAgICBcImN1bHR1cmFsLWFydGljbGVzXCI6ICgpID0+IGltcG9ydChcIkAvY29tcG9uZW50cy9DdWx0dXJhbEFydGljbGVzXCIpLFxuICAgICAgXCJidXNpbmVzcy1wcm9maWxlc1wiOiAoKSA9PiBpbXBvcnQoXCJAL2NvbXBvbmVudHMvQnVzaW5lc3NQcm9maWxlc1wiKSxcbiAgICAgIFwiY3VsdHVyYWwtZ2FsbGVyaWVzXCI6ICgpID0+IGltcG9ydChcIkAvY29tcG9uZW50cy9DdWx0dXJhbEdhbGxlcnlcIiksXG4gICAgICBcImNvbW11bml0eS1waG90b3NcIjogKCkgPT4gaW1wb3J0KFwiQC9jb21wb25lbnRzL0NvbW11bml0eVBob3Rvc1wiKSxcbiAgICAgIFwiY3VsdHVyYWwtdmlkZW9zXCI6ICgpID0+IGltcG9ydChcIkAvY29tcG9uZW50cy9DdWx0dXJhbFZpZGVvc1wiKSxcbiAgICB9O1xuXG4gICAgaWYgKGJ1bmRsZU1hcFtjb250ZW50VHlwZV0pIHtcbiAgICAgIGF3YWl0IGJ1bmRsZU1hcFtjb250ZW50VHlwZV0oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3VsZERlZmVyTG9hZGluZyhcbiAgICBwcmlvcml0eToga2V5b2YgUG9ydHVndWVzZUNvbnRlbnRQcmlvcml0eVxuICApOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuZGV2aWNlQ29udGV4dCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gRGVmZXIgbG93IHByaW9yaXR5IGNvbnRlbnQgb24gY29uc3RyYWluZWQgZGV2aWNlc1xuICAgIGlmIChwcmlvcml0eSA9PT0gXCJsb3dcIiB8fCBwcmlvcml0eSA9PT0gXCJkZWZlclwiKSB7XG4gICAgICBpZiAodGhpcy5kZXZpY2VDb250ZXh0LmlzRGF0YVNhdmVyTW9kZSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGV2aWNlQ29udGV4dC5jb25uZWN0aW9uVHlwZSA9PT0gXCJzbG93LTJnXCIgfHxcbiAgICAgICAgdGhpcy5kZXZpY2VDb250ZXh0LmNvbm5lY3Rpb25UeXBlID09PSBcIjJnXCJcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGV2aWNlQ29udGV4dC5kZXZpY2VNZW1vcnkgPD1cbiAgICAgICAgTU9CSUxFX09QVElNSVpBVElPTl9USFJFU0hPTERTLmxvd01lbW9yeVRocmVzaG9sZFxuICAgICAgKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBEZWZlciBtZWRpdW0gcHJpb3JpdHkgb24gdmVyeSBjb25zdHJhaW5lZCBkZXZpY2VzXG4gICAgaWYgKHByaW9yaXR5ID09PSBcIm1lZGl1bVwiKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGV2aWNlQ29udGV4dC5pc0RhdGFTYXZlck1vZGUgJiZcbiAgICAgICAgdGhpcy5kZXZpY2VDb250ZXh0LmNvbm5lY3Rpb25UeXBlID09PSBcInNsb3ctMmdcIlxuICAgICAgKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmRldmljZUNvbnRleHQuZGV2aWNlTWVtb3J5IDw9IDEpIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIE9wdGltaXplIGJ1bmRsZSBsb2FkaW5nIGZvciBtb2JpbGUgTHVzb3Bob25lIHVzZXJzXG4gIHB1YmxpYyBvcHRpbWl6ZUZvck1vYmlsZSgpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5jb25maWcuZW5hYmxlTW9iaWxlUHJpb3JpdGl6YXRpb24gfHxcbiAgICAgICF0aGlzLmRldmljZUNvbnRleHQ/LmlzTW9iaWxlXG4gICAgKVxuICAgICAgcmV0dXJuO1xuXG4gICAgLy8gSW1wbGVtZW50IG1vYmlsZS1zcGVjaWZpYyBvcHRpbWl6YXRpb25zXG4gICAgdGhpcy5pbXBsZW1lbnRNb2JpbGVPcHRpbWl6YXRpb25zKCk7XG5cbiAgICAvLyBTZXQgdXAgaW50ZXJzZWN0aW9uIG9ic2VydmVyIGZvciBsYXp5IGxvYWRpbmdcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlTGF6eUxvYWRpbmdUaHJlc2hvbGRzKSB7XG4gICAgICB0aGlzLnNldHVwSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKTtcbiAgICB9XG5cbiAgICAvLyBPcHRpbWl6ZSBmb3IgTHVzb3Bob25lIG1vYmlsZSB1c2FnZSBwYXR0ZXJuc1xuICAgIHRoaXMub3B0aW1pemVQb3J0dWd1ZXNlTW9iaWxlUGF0dGVybnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW1wbGVtZW50TW9iaWxlT3B0aW1pemF0aW9ucygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZGV2aWNlQ29udGV4dCkgcmV0dXJuO1xuXG4gICAgLy8gUmVkdWNlIGFuaW1hdGlvbiBjb21wbGV4aXR5IG9uIG1vYmlsZVxuICAgIGlmIChcbiAgICAgIHRoaXMuZGV2aWNlQ29udGV4dC5wcmVmZXJzUmVkdWNlZE1vdGlvbiB8fFxuICAgICAgdGhpcy5kZXZpY2VDb250ZXh0LmRldmljZU1lbW9yeSA8PSAyXG4gICAgKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInJlZHVjZWQtYW5pbWF0aW9uc1wiKTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSBkYXRhIHNhdmVyIG9wdGltaXphdGlvbnNcbiAgICBpZiAodGhpcy5kZXZpY2VDb250ZXh0LmlzRGF0YVNhdmVyTW9kZSkge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkYXRhLXNhdmVyLW1vZGVcIik7XG4gICAgICB0aGlzLmVuYWJsZURhdGFTYXZlck1vZGUoKTtcbiAgICB9XG5cbiAgICAvLyBPcHRpbWl6ZSBmb3Igc2xvdyBjb25uZWN0aW9uc1xuICAgIGlmIChbXCJzbG93LTJnXCIsIFwiMmdcIiwgXCIzZ1wiXS5pbmNsdWRlcyh0aGlzLmRldmljZUNvbnRleHQuY29ubmVjdGlvblR5cGUpKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNsb3ctY29ubmVjdGlvblwiKTtcbiAgICAgIHRoaXMuZW5hYmxlU2xvd0Nvbm5lY3Rpb25PcHRpbWl6YXRpb25zKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlbmFibGVEYXRhU2F2ZXJNb2RlKCk6IHZvaWQge1xuICAgIC8vIERpc2FibGUgYXV0b3BsYXkgdmlkZW9zXG4gICAgY29uc3QgdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInZpZGVvW2F1dG9wbGF5XVwiKTtcbiAgICB2aWRlb3MuZm9yRWFjaCgodmlkZW8pID0+IHZpZGVvLnJlbW92ZUF0dHJpYnV0ZShcImF1dG9wbGF5XCIpKTtcblxuICAgIC8vIFJlZHVjZSBpbWFnZSBxdWFsaXR5XG4gICAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nW3NyYyo9XCJjbG91ZGluYXJ5XCJdJyk7XG4gICAgaW1hZ2VzLmZvckVhY2goKGltZykgPT4ge1xuICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGltZyBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgICAgaW1nRWxlbWVudC5zcmMgPSBpbWdFbGVtZW50LnNyYy5yZXBsYWNlKC9xX1xcZCsvLCBcInFfMzBcIik7XG4gICAgfSk7XG5cbiAgICAvLyBEZWZlciBub24tY3JpdGljYWwgTHVzb3Bob25lIGN1bHR1cmFsIGNvbnRlbnRcbiAgICB0aGlzLmRlZmVyTm9uQ3JpdGljYWxDb250ZW50KCk7XG4gIH1cblxuICBwcml2YXRlIGVuYWJsZVNsb3dDb25uZWN0aW9uT3B0aW1pemF0aW9ucygpOiB2b2lkIHtcbiAgICAvLyBQcmVsb2FkIG9ubHkgY3JpdGljYWwgcmVzb3VyY2VzXG4gICAgY29uc3QgY3JpdGljYWxMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpbmtbcmVsPVwicHJlbG9hZFwiXScpO1xuICAgIGNyaXRpY2FsTGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICAgICAgaWYgKCFsaW5rLmdldEF0dHJpYnV0ZShcImhyZWZcIik/LmluY2x1ZGVzKFwiY3JpdGljYWxcIikpIHtcbiAgICAgICAgbGluay5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEluY3JlYXNlIGludGVyc2VjdGlvbiBvYnNlcnZlciB0aHJlc2hvbGRzXG4gICAgdGhpcy5sYXp5TG9hZFRocmVzaG9sZCA9IDIwOyAvLyBDbG9zZXIgdG8gdmlld3BvcnRcbiAgfVxuXG4gIHByaXZhdGUgbGF6eUxvYWRUaHJlc2hvbGQgPSBNT0JJTEVfT1BUSU1JWkFUSU9OX1RIUkVTSE9MRFMubGF6eUxvYWRUaHJlc2hvbGQ7XG5cbiAgcHJpdmF0ZSBzZXR1cEludGVyc2VjdGlvbk9ic2VydmVyKCk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICEoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiIGluIHdpbmRvdykpXG4gICAgICByZXR1cm47XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbnRyeS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmxvYWRFbGVtZW50Q29udGVudChlbGVtZW50KTtcbiAgICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcm9vdE1hcmdpbjogYCR7dGhpcy5sYXp5TG9hZFRocmVzaG9sZH1weCAwcHhgLFxuICAgICAgICB0aHJlc2hvbGQ6IDAuMSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gT2JzZXJ2ZSBsYXp5LWxvYWRhYmxlIEx1c29waG9uZSBjb250ZW50XG4gICAgY29uc3QgbGF6eUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXBvcnR1Z3Vlc2UtbGF6eV1cIik7XG4gICAgbGF6eUVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2FkRWxlbWVudENvbnRlbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGVsZW1lbnQuZGF0YXNldC5wb3J0dWd1ZXNlTGF6eTtcbiAgICBpZiAoIWNvbnRlbnRUeXBlKSByZXR1cm47XG5cbiAgICAvLyBMb2FkIHNwZWNpZmljIEx1c29waG9uZSBjb250ZW50IGJhc2VkIG9uIHR5cGVcbiAgICBzd2l0Y2ggKGNvbnRlbnRUeXBlKSB7XG4gICAgICBjYXNlIFwiY3VsdHVyYWwtZ2FsbGVyeVwiOlxuICAgICAgICB0aGlzLmxvYWRDdWx0dXJhbEdhbGxlcnkoZWxlbWVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNvbW11bml0eS1mZWVkXCI6XG4gICAgICAgIHRoaXMubG9hZENvbW11bml0eUZlZWQoZWxlbWVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImJ1c2luZXNzLWxpc3RpbmdzXCI6XG4gICAgICAgIHRoaXMubG9hZEJ1c2luZXNzTGlzdGluZ3MoZWxlbWVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImV2ZW50LWRldGFpbHNcIjpcbiAgICAgICAgdGhpcy5sb2FkRXZlbnREZXRhaWxzKGVsZW1lbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAgIGBbQnVuZGxlIE9wdGltaXplcl0gVW5rbm93biBMdXNvcGhvbmUgY29udGVudCB0eXBlOiAke2NvbnRlbnRUeXBlfWBcbiAgICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDdWx0dXJhbEdhbGxlcnkoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkZWZhdWx0OiBDdWx0dXJhbEdhbGxlcnkgfSA9IGF3YWl0IGltcG9ydChcbiAgICAgICAgXCJAL2NvbXBvbmVudHMvQ3VsdHVyYWxHYWxsZXJ5XCJcbiAgICAgICk7XG4gICAgICAvLyBSZW5kZXIgY29tcG9uZW50IGluIGVsZW1lbnRcbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID1cbiAgICAgICAgJzxkaXYgY2xhc3M9XCJjdWx0dXJhbC1nYWxsZXJ5LWxvYWRlZFwiPkdhbGxlcnkgbG9hZGVkPC9kaXY+JztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICBcIltCdW5kbGUgT3B0aW1pemVyXSBGYWlsZWQgdG8gbG9hZCBjdWx0dXJhbCBnYWxsZXJ5OlwiLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb21tdW5pdHlGZWVkKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGVmYXVsdDogQ29tbXVuaXR5RmVlZCB9ID0gYXdhaXQgaW1wb3J0KFxuICAgICAgICBcIkAvY29tcG9uZW50cy9Db21tdW5pdHlGZWVkU2VjdGlvblwiXG4gICAgICApO1xuICAgICAgZWxlbWVudC5pbm5lckhUTUwgPVxuICAgICAgICAnPGRpdiBjbGFzcz1cImNvbW11bml0eS1mZWVkLWxvYWRlZFwiPkZlZWQgbG9hZGVkPC9kaXY+JztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiW0J1bmRsZSBPcHRpbWl6ZXJdIEZhaWxlZCB0byBsb2FkIGNvbW11bml0eSBmZWVkOlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQnVzaW5lc3NMaXN0aW5ncyhlbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRlZmF1bHQ6IEJ1c2luZXNzRGlyZWN0b3J5IH0gPSBhd2FpdCBpbXBvcnQoXG4gICAgICAgIFwiQC9jb21wb25lbnRzL0J1c2luZXNzRGlyZWN0b3J5XCJcbiAgICAgICk7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9XG4gICAgICAgICc8ZGl2IGNsYXNzPVwiYnVzaW5lc3MtbGlzdGluZ3MtbG9hZGVkXCI+QnVzaW5lc3NlcyBsb2FkZWQ8L2Rpdj4nO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgIFwiW0J1bmRsZSBPcHRpbWl6ZXJdIEZhaWxlZCB0byBsb2FkIGJ1c2luZXNzIGxpc3RpbmdzOlwiLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRFdmVudERldGFpbHMoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXZlbnRJZCA9IGVsZW1lbnQuZGF0YXNldC5ldmVudElkO1xuICAgICAgaWYgKGV2ZW50SWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9ldmVudHMvJHtldmVudElkfWApO1xuICAgICAgICBjb25zdCBldmVudERhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJldmVudC1kZXRhaWxzLWxvYWRlZFwiPiR7ZXZlbnREYXRhLnRpdGxlfTwvZGl2PmA7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIltCdW5kbGUgT3B0aW1pemVyXSBGYWlsZWQgdG8gbG9hZCBldmVudCBkZXRhaWxzOlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvcHRpbWl6ZVBvcnR1Z3Vlc2VNb2JpbGVQYXR0ZXJucygpOiB2b2lkIHtcbiAgICAvLyBPcHRpbWl6ZSBmb3IgTHVzb3Bob25lIG1vYmlsZSB1c2FnZSBwYXR0ZXJuc1xuICAgIC8vIDczJSBvZiBQb3J0dWd1ZXNlLXNwZWFraW5nIGNvbW11bml0eSB1c2VzIG1vYmlsZVxuXG4gICAgLy8gUHJpb3JpdGl6ZSB0b3VjaC1mcmllbmRseSBpbnRlcmFjdGlvbnNcbiAgICB0aGlzLm9wdGltaXplVG91Y2hUYXJnZXRzKCk7XG5cbiAgICAvLyBPcHRpbWl6ZSBmb3IgTHVzb3Bob25lIHRleHQgcmVuZGVyaW5nXG4gICAgdGhpcy5vcHRpbWl6ZVBvcnR1Z3Vlc2VUZXh0UmVuZGVyaW5nKCk7XG5cbiAgICAvLyBJbXBsZW1lbnQgTHVzb3Bob25lIGN1bHR1cmFsIGNvbG9yIG9wdGltaXphdGlvblxuICAgIHRoaXMub3B0aW1pemVDdWx0dXJhbFRoZW1pbmcoKTtcbiAgfVxuXG4gIHByaXZhdGUgb3B0aW1pemVUb3VjaFRhcmdldHMoKTogdm9pZCB7XG4gICAgY29uc3QgdG91Y2hUYXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICdidXR0b24sIGFbcm9sZT1cImJ1dHRvblwiXSwgW29uY2xpY2tdJ1xuICAgICk7XG4gICAgdG91Y2hUYXJnZXRzLmZvckVhY2goKHRhcmdldCkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAvLyBFbnN1cmUgbWluaW11bSA0NHB4IHRvdWNoIHRhcmdldHNcbiAgICAgIGlmIChyZWN0LndpZHRoIDwgNDQgfHwgcmVjdC5oZWlnaHQgPCA0NCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLm1pbldpZHRoID0gXCI0NHB4XCI7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gXCI0NHB4XCI7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZyA9IGVsZW1lbnQuc3R5bGUucGFkZGluZyB8fCBcIjhweFwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBvcHRpbWl6ZVBvcnR1Z3Vlc2VUZXh0UmVuZGVyaW5nKCk6IHZvaWQge1xuICAgIC8vIE9wdGltaXplIGZvciBMdXNvcGhvbmUgZGlhY3JpdGljcyBhbmQgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnRleHRSZW5kZXJpbmcgPSBcIm9wdGltaXplTGVnaWJpbGl0eVwiO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5mb250RmVhdHVyZVNldHRpbmdzID0gJ1wibGlnYVwiIDEsIFwia2VyblwiIDEnO1xuXG4gICAgLy8gRW5zdXJlIHByb3BlciBMdXNvcGhvbmUgdGV4dCB3cmFwcGluZ1xuICAgIGNvbnN0IHRleHRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICBcInAsIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHNwYW5cIlxuICAgICk7XG4gICAgdGV4dEVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gZWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGh0bWxFbGVtZW50LnN0eWxlLndvcmRCcmVhayA9IFwiYnJlYWstd29yZFwiO1xuICAgICAgaHRtbEVsZW1lbnQuc3R5bGUuaHlwaGVucyA9IFwiYXV0b1wiO1xuICAgICAgaHRtbEVsZW1lbnQubGFuZyA9IGh0bWxFbGVtZW50LmxhbmcgfHwgXCJwdC1QVFwiO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBvcHRpbWl6ZUN1bHR1cmFsVGhlbWluZygpOiB2b2lkIHtcbiAgICAvLyBBcHBseSBMdXNvcGhvbmUgY3VsdHVyYWwgY29sb3Igb3B0aW1pemF0aW9uc1xuICAgIGNvbnN0IGNvbG9yT3B0aW1pemF0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICBjb2xvck9wdGltaXphdGlvbnMudGV4dENvbnRlbnQgPSBgXG4gICAgICAucG9ydHVndWVzZS1vcHRpbWl6ZWQge1xuICAgICAgICAtLXByaW1hcnktY3VsdHVyYWw6ICMxZTQwYWY7IC8qIEx1c29waG9uZSBibHVlICovXG4gICAgICAgIC0tc2Vjb25kYXJ5LWN1bHR1cmFsOiAjMDU5NjY5OyAvKiBMdXNvcGhvbmUgZ3JlZW4gKi9cbiAgICAgICAgLS1hY2NlbnQtY3VsdHVyYWw6ICNkYzI2MjY7IC8qIEx1c29waG9uZSByZWQgKi9cbiAgICAgICAgLS1nb2xkLWN1bHR1cmFsOiAjZjU5ZTBiOyAvKiBMdXNvcGhvbmUgZ29sZCAqL1xuICAgICAgfVxuICAgICAgXG4gICAgICAubW9iaWxlLXBvcnR1Z3Vlc2UtdGV4dCB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuY3VsdHVyYWwtZ3JhZGllbnQge1xuICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCBcbiAgICAgICAgICB2YXIoLS1wcmltYXJ5LWN1bHR1cmFsKSwgXG4gICAgICAgICAgdmFyKC0tc2Vjb25kYXJ5LWN1bHR1cmFsKSwgXG4gICAgICAgICAgdmFyKC0tYWNjZW50LWN1bHR1cmFsKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIGA7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjb2xvck9wdGltaXphdGlvbnMpO1xuXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3J0dWd1ZXNlLW9wdGltaXplZFwiKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVmZXJOb25Dcml0aWNhbENvbnRlbnQoKTogdm9pZCB7XG4gICAgY29uc3Qgbm9uQ3JpdGljYWxTZWxlY3RvcnMgPSBbXG4gICAgICBcIi5jdWx0dXJhbC12aWRlb1wiLFxuICAgICAgXCIubGFyZ2UtZ2FsbGVyeVwiLFxuICAgICAgXCIudGVzdGltb25pYWwtY2Fyb3VzZWxcIixcbiAgICAgIFwiLmNvbW11bml0eS1hcmNoaXZlXCIsXG4gICAgICBcIi5hZG1pbi1wYW5lbFwiLFxuICAgIF07XG5cbiAgICBub25Dcml0aWNhbFNlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBlbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBodG1sRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGh0bWxFbGVtZW50LmRhdGFzZXQuZGVmZXJyZWQgPSBcInRydWVcIjtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZCB0byBnZXQgb3B0aW1pemF0aW9uIHN0YXRzXG4gIHB1YmxpYyBnZXRPcHRpbWl6YXRpb25TdGF0cygpOiB7XG4gICAgbG9hZGVkQnVuZGxlczogc3RyaW5nW107XG4gICAgcHJlbG9hZGVkUmVzb3VyY2VzOiBzdHJpbmdbXTtcbiAgICBkZXZpY2VDb250ZXh0OiBEZXZpY2VPcHRpbWl6YXRpb25Db250ZXh0IHwgbnVsbDtcbiAgICBvcHRpbWl6YXRpb25zQXBwbGllZDogc3RyaW5nW107XG4gIH0ge1xuICAgIGNvbnN0IG9wdGltaXphdGlvbnNBcHBsaWVkID0gW107XG5cbiAgICBpZiAodGhpcy5kZXZpY2VDb250ZXh0Py5pc01vYmlsZSlcbiAgICAgIG9wdGltaXphdGlvbnNBcHBsaWVkLnB1c2goXCJtb2JpbGUtb3B0aW1pemVkXCIpO1xuICAgIGlmICh0aGlzLmRldmljZUNvbnRleHQ/LmlzRGF0YVNhdmVyTW9kZSlcbiAgICAgIG9wdGltaXphdGlvbnNBcHBsaWVkLnB1c2goXCJkYXRhLXNhdmVyXCIpO1xuICAgIGlmICh0aGlzLmRldmljZUNvbnRleHQ/LnByZWZlcnNSZWR1Y2VkTW90aW9uKVxuICAgICAgb3B0aW1pemF0aW9uc0FwcGxpZWQucHVzaChcInJlZHVjZWQtbW90aW9uXCIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxvYWRlZEJ1bmRsZXM6IEFycmF5LmZyb20odGhpcy5sb2FkZWRCdW5kbGVzKSxcbiAgICAgIHByZWxvYWRlZFJlc291cmNlczogQXJyYXkuZnJvbSh0aGlzLnByZWxvYWRlZFJlc291cmNlcyksXG4gICAgICBkZXZpY2VDb250ZXh0OiB0aGlzLmRldmljZUNvbnRleHQsXG4gICAgICBvcHRpbWl6YXRpb25zQXBwbGllZCxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2xlYW4gdXAgcmVzb3VyY2VzXG4gIHB1YmxpYyBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMubG9hZGVkQnVuZGxlcy5jbGVhcigpO1xuICAgIHRoaXMucHJlbG9hZGVkUmVzb3VyY2VzLmNsZWFyKCk7XG4gICAgdGhpcy5kZXZpY2VDb250ZXh0ID0gbnVsbDtcbiAgfVxufVxuXG4vLyBDcmVhdGUgZ2xvYmFsIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcG9ydHVndWVzZUJ1bmRsZU9wdGltaXplciA9IG5ldyBQb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemVyKCk7XG5cbi8vIE9wdGltaXplZCBob29rIGZvciBSZWFjdCBjb21wb25lbnRzIHdpdGggZXJyb3IgaGFuZGxpbmdcbmV4cG9ydCBmdW5jdGlvbiB1c2VQb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemF0aW9uKCkge1xuICBjb25zdCBbc3RhdHMsIHNldFN0YXRzXSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHBvcnR1Z3Vlc2VCdW5kbGVPcHRpbWl6ZXIuZ2V0T3B0aW1pemF0aW9uU3RhdHMoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgaW5pdGlhbCBvcHRpbWl6YXRpb24gc3RhdHM6JywgZXJyb3IpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBsb2FkZWRCdW5kbGVzOiBbXSxcbiAgICAgICAgcHJlbG9hZGVkUmVzb3VyY2VzOiBbXSxcbiAgICAgICAgZGV2aWNlQ29udGV4dDogbnVsbCxcbiAgICAgICAgb3B0aW1pemF0aW9uc0FwcGxpZWQ6IFtdXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBjb25zdCBbaXNJbml0aWFsaXplZCwgc2V0SXNJbml0aWFsaXplZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3Qgc3RhdHNVcGRhdGVUaW1lb3V0UmVmID0gUmVhY3QudXNlUmVmPE5vZGVKUy5UaW1lb3V0PigpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplT3B0aW1pemF0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGlzSW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBJbml0aWFsaXplIG9wdGltaXphdGlvbiB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBwb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemVyLnByZWxvYWRDcml0aWNhbFJlc291cmNlcygpLmNhdGNoKGVyciA9PiBcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdDcml0aWNhbCByZXNvdXJjZXMgcHJlbG9hZCBmYWlsZWQ6JywgZXJyKVxuICAgICAgICAgICksXG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHBvcnR1Z3Vlc2VCdW5kbGVPcHRpbWl6ZXIub3B0aW1pemVGb3JNb2JpbGUoKSkuY2F0Y2goZXJyID0+XG4gICAgICAgICAgICBsb2dnZXIud2FybignTW9iaWxlIG9wdGltaXphdGlvbiBmYWlsZWQ6JywgZXJyKVxuICAgICAgICAgIClcbiAgICAgICAgXSlcblxuICAgICAgICAvLyBMb2FkIGNyaXRpY2FsIFBvcnR1Z3Vlc2UgY3VsdHVyYWwgY29udGVudFxuICAgICAgICBhd2FpdCBwb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemVyLmxvYWRQb3J0dWd1ZXNlQ29udGVudEJ1bmRsZSgnY3JpdGljYWwnKS5jYXRjaChlcnIgPT5cbiAgICAgICAgICBsb2dnZXIud2FybignQ3JpdGljYWwgUG9ydHVndWVzZSBidW5kbGUgbG9hZGluZyBmYWlsZWQ6JywgZXJyKVxuICAgICAgICApXG5cbiAgICAgICAgc2V0SXNJbml0aWFsaXplZCh0cnVlKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdCdW5kbGUgb3B0aW1pemF0aW9uIGluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgICAgc2V0SXNJbml0aWFsaXplZCh0cnVlKSAvLyBDb250aW51ZSBldmVuIGlmIGluaXRpYWxpemF0aW9uIGZhaWxzXG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZU9wdGltaXphdGlvbigpXG5cbiAgICAvLyBEZWJvdW5jZWQgc3RhdHMgdXBkYXRlIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlLXJlbmRlcnNcbiAgICBjb25zdCB1cGRhdGVTdGF0cyA9ICgpID0+IHtcbiAgICAgIGlmIChzdGF0c1VwZGF0ZVRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc3RhdHNVcGRhdGVUaW1lb3V0UmVmLmN1cnJlbnQpXG4gICAgICB9XG4gICAgICBcbiAgICAgIHN0YXRzVXBkYXRlVGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U3RhdHMocG9ydHVndWVzZUJ1bmRsZU9wdGltaXplci5nZXRPcHRpbWl6YXRpb25TdGF0cygpKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gdXBkYXRlIG9wdGltaXphdGlvbiBzdGF0czonLCBlcnJvcilcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKVxuICAgIH1cblxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwodXBkYXRlU3RhdHMsIDMwMDApIC8vIFJlZHVjZWQgZnJlcXVlbmN5XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbClcbiAgICAgIGlmIChzdGF0c1VwZGF0ZVRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc3RhdHNVcGRhdGVUaW1lb3V0UmVmLmN1cnJlbnQpXG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBwb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemVyLmNsZWFudXAoKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0J1bmRsZSBvcHRpbWl6ZXIgY2xlYW51cCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICB9LCBbaXNJbml0aWFsaXplZF0pXG5cbiAgY29uc3QgbG9hZEJ1bmRsZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChwcmlvcml0eToga2V5b2YgUG9ydHVndWVzZUNvbnRlbnRQcmlvcml0eSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemVyLmxvYWRQb3J0dWd1ZXNlQ29udGVudEJ1bmRsZShwcmlvcml0eSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBQb3J0dWd1ZXNlIGJ1bmRsZTogJHtwcmlvcml0eX1gLCBlcnJvcilcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHByZWxvYWRSZXNvdXJjZXMgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBvcnR1Z3Vlc2VCdW5kbGVPcHRpbWl6ZXIucHJlbG9hZENyaXRpY2FsUmVzb3VyY2VzKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcHJlbG9hZCBQb3J0dWd1ZXNlIGN1bHR1cmFsIHJlc291cmNlczonLCBlcnJvcilcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHMsXG4gICAgaXNJbml0aWFsaXplZCxcbiAgICBsb2FkQnVuZGxlLFxuICAgIHByZWxvYWRSZXNvdXJjZXMsXG4gICAgaXNPcHRpbWl6ZWQ6IHN0YXRzLm9wdGltaXphdGlvbnNBcHBsaWVkLmxlbmd0aCA+IDBcbiAgfVxufVxuXG4vLyBVdGlsaXR5IGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIHByZWxvYWRQb3J0dWd1ZXNlUm91dGUocm91dGU6IHN0cmluZyk6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBcInJlcXVlc3RJZGxlQ2FsbGJhY2tcIiBpbiB3aW5kb3cpIHtcbiAgICByZXF1ZXN0SWRsZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgIGxpbmsucmVsID0gXCJwcmVmZXRjaFwiO1xuICAgICAgbGluay5ocmVmID0gcm91dGU7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcHRpbWl6ZVBvcnR1Z3Vlc2VJbWFnZXMoKTogdm9pZCB7XG4gIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgJ2ltZ1tzcmMqPVwicG9ydHVndWVzZVwiXSwgaW1nW2FsdCo9XCJwb3J0dWd1ZXNlXCIgaV0nXG4gICk7XG4gIGltYWdlcy5mb3JFYWNoKChpbWcpID0+IHtcbiAgICBjb25zdCBpbWdFbGVtZW50ID0gaW1nIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAvLyBBZGQgbGF6eSBsb2FkaW5nXG4gICAgaWYgKCFpbWdFbGVtZW50LmxvYWRpbmcpIHtcbiAgICAgIGltZ0VsZW1lbnQubG9hZGluZyA9IFwibGF6eVwiO1xuICAgIH1cblxuICAgIC8vIEFkZCBwcm9wZXIgc2l6ZXMgZm9yIEx1c29waG9uZSBjb250ZW50XG4gICAgaWYgKCFpbWdFbGVtZW50LnNpemVzKSB7XG4gICAgICBpbWdFbGVtZW50LnNpemVzID1cbiAgICAgICAgXCIobWF4LXdpZHRoOiA3NjhweCkgMTAwdncsIChtYXgtd2lkdGg6IDEyMDBweCkgNTB2dywgMzN2d1wiO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIEx1c29waG9uZS1zcGVjaWZpYyBwZXJmb3JtYW5jZSBtZWFzdXJlbWVudFxuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVQb3J0dWd1ZXNlUGVyZm9ybWFuY2UoKTogUHJvbWlzZTx7XG4gIGN1bHR1cmFsQ29udGVudExvYWRUaW1lOiBudW1iZXI7XG4gIHBvcnR1Z3Vlc2VUZXh0UmVuZGVyVGltZTogbnVtYmVyO1xuICBtb2JpbGVPcHRpbWl6YXRpb25TY29yZTogbnVtYmVyO1xufT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmVzb2x2ZSh7XG4gICAgICAgIGN1bHR1cmFsQ29udGVudExvYWRUaW1lOiAwLFxuICAgICAgICBwb3J0dWd1ZXNlVGV4dFJlbmRlclRpbWU6IDAsXG4gICAgICAgIG1vYmlsZU9wdGltaXphdGlvblNjb3JlOiAwLFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBjb25zdCBjdWx0dXJhbEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgXCJbZGF0YS1wb3J0dWd1ZXNlLWNvbnRlbnRdXCJcbiAgICAgICk7XG4gICAgICBjb25zdCB0ZXh0RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicCwgaDEsIGgyLCBoM1wiKTtcbiAgICAgIGNvbnN0IG1vYmlsZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzKj1cIm1vYmlsZVwiXScpO1xuXG4gICAgICBjb25zdCBjdWx0dXJhbENvbnRlbnRMb2FkVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQ7XG4gICAgICBjb25zdCBwb3J0dWd1ZXNlVGV4dFJlbmRlclRpbWUgPVxuICAgICAgICBjdWx0dXJhbEVsZW1lbnRzLmxlbmd0aCA+IDAgPyBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0IDogMDtcbiAgICAgIGNvbnN0IG1vYmlsZU9wdGltaXphdGlvblNjb3JlID0gTWF0aC5taW4oXG4gICAgICAgIDEwMCxcbiAgICAgICAgKG1vYmlsZUVsZW1lbnRzLmxlbmd0aCAvIHRleHRFbGVtZW50cy5sZW5ndGgpICogMTAwXG4gICAgICApO1xuXG4gICAgICByZXNvbHZlKHtcbiAgICAgICAgY3VsdHVyYWxDb250ZW50TG9hZFRpbWUsXG4gICAgICAgIHBvcnR1Z3Vlc2VUZXh0UmVuZGVyVGltZSxcbiAgICAgICAgbW9iaWxlT3B0aW1pemF0aW9uU2NvcmUsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjsgLy8gRm9yIHRoZSBob29rXG4iXSwibmFtZXMiOlsiUG9ydHVndWVzZUJ1bmRsZU9wdGltaXplciIsIm1lYXN1cmVQb3J0dWd1ZXNlUGVyZm9ybWFuY2UiLCJvcHRpbWl6ZVBvcnR1Z3Vlc2VJbWFnZXMiLCJwb3J0dWd1ZXNlQnVuZGxlT3B0aW1pemVyIiwicHJlbG9hZFBvcnR1Z3Vlc2VSb3V0ZSIsInVzZVBvcnR1Z3Vlc2VCdW5kbGVPcHRpbWl6YXRpb24iLCJQT1JUVUdVRVNFX0NPTlRFTlRfUFJJT1JJVElFUyIsImNyaXRpY2FsIiwiaGlnaCIsIm1lZGl1bSIsImxvdyIsImRlZmVyIiwiTU9CSUxFX09QVElNSVpBVElPTl9USFJFU0hPTERTIiwiY3JpdGljYWxCdW5kbGVTaXplIiwiaGlnaFByaW9yaXR5QnVuZGxlU2l6ZSIsImxhenlMb2FkVGhyZXNob2xkIiwic2xvd0Nvbm5lY3Rpb25UaHJlc2hvbGQiLCJsb3dNZW1vcnlUaHJlc2hvbGQiLCJiYXR0ZXJ5TG93VGhyZXNob2xkIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJkZXZpY2VDb250ZXh0IiwibG9hZGVkQnVuZGxlcyIsIlNldCIsInByZWxvYWRlZFJlc291cmNlcyIsImVuYWJsZUNyaXRpY2FsUmVzb3VyY2VQcmVsb2FkIiwiZW5hYmxlUG9ydHVndWVzZUNvbnRlbnRHcm91cGluZyIsImVuYWJsZU1vYmlsZVByaW9yaXRpemF0aW9uIiwiZW5hYmxlQ3VsdHVyYWxDb250ZW50U3BsaXR0aW5nIiwiZW5hYmxlTGF6eUxvYWRpbmdUaHJlc2hvbGRzIiwiaW5pdGlhbGl6ZURldmljZUNvbnRleHQiLCJ3aW5kb3ciLCJjb25uZWN0aW9uIiwibmF2aWdhdG9yIiwiaXNNb2JpbGUiLCJpbm5lcldpZHRoIiwiY29ubmVjdGlvblR5cGUiLCJlZmZlY3RpdmVUeXBlIiwiZGV2aWNlTWVtb3J5IiwiaXNEYXRhU2F2ZXJNb2RlIiwic2F2ZURhdGEiLCJ2aWV3cG9ydFdpZHRoIiwicHJlZmVyc1JlZHVjZWRNb3Rpb24iLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsInByZWxvYWRDcml0aWNhbFJlc291cmNlcyIsImNyaXRpY2FsUmVzb3VyY2VzIiwic3BsaWNlIiwicHJlbG9hZFByb21pc2VzIiwibWFwIiwicmVzb3VyY2UiLCJoYXMiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIm9rIiwiYWRkIiwiZXJyb3IiLCJsb2dnZXIiLCJpbmZvIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJsb2FkUG9ydHVndWVzZUNvbnRlbnRCdW5kbGUiLCJwcmlvcml0eSIsImJ1bmRsZUtleSIsImNvbnRlbnRUeXBlcyIsInNob3VsZERlZmVyTG9hZGluZyIsInNldFRpbWVvdXQiLCJsb2FkUHJvbWlzZXMiLCJjb250ZW50VHlwZSIsImxvYWRDb250ZW50VHlwZUJ1bmRsZSIsImJ1bmRsZU1hcCIsIm9wdGltaXplRm9yTW9iaWxlIiwiaW1wbGVtZW50TW9iaWxlT3B0aW1pemF0aW9ucyIsInNldHVwSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJvcHRpbWl6ZVBvcnR1Z3Vlc2VNb2JpbGVQYXR0ZXJucyIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwiZW5hYmxlRGF0YVNhdmVyTW9kZSIsImluY2x1ZGVzIiwiZW5hYmxlU2xvd0Nvbm5lY3Rpb25PcHRpbWl6YXRpb25zIiwidmlkZW9zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ2aWRlbyIsInJlbW92ZUF0dHJpYnV0ZSIsImltYWdlcyIsImltZyIsImltZ0VsZW1lbnQiLCJzcmMiLCJyZXBsYWNlIiwiZGVmZXJOb25Dcml0aWNhbENvbnRlbnQiLCJjcml0aWNhbExpbmtzIiwibGluayIsImdldEF0dHJpYnV0ZSIsInJlbW92ZSIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsImVsZW1lbnQiLCJ0YXJnZXQiLCJsb2FkRWxlbWVudENvbnRlbnQiLCJ1bm9ic2VydmUiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwibGF6eUVsZW1lbnRzIiwib2JzZXJ2ZSIsImRhdGFzZXQiLCJwb3J0dWd1ZXNlTGF6eSIsImxvYWRDdWx0dXJhbEdhbGxlcnkiLCJsb2FkQ29tbXVuaXR5RmVlZCIsImxvYWRCdXNpbmVzc0xpc3RpbmdzIiwibG9hZEV2ZW50RGV0YWlscyIsIndhcm4iLCJkZWZhdWx0IiwiQ3VsdHVyYWxHYWxsZXJ5IiwiaW5uZXJIVE1MIiwiQ29tbXVuaXR5RmVlZCIsIkJ1c2luZXNzRGlyZWN0b3J5IiwiZXZlbnRJZCIsImV2ZW50RGF0YSIsImpzb24iLCJ0aXRsZSIsIm9wdGltaXplVG91Y2hUYXJnZXRzIiwib3B0aW1pemVQb3J0dWd1ZXNlVGV4dFJlbmRlcmluZyIsIm9wdGltaXplQ3VsdHVyYWxUaGVtaW5nIiwidG91Y2hUYXJnZXRzIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiaGVpZ2h0Iiwic3R5bGUiLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsInBhZGRpbmciLCJ0ZXh0UmVuZGVyaW5nIiwiZm9udEZlYXR1cmVTZXR0aW5ncyIsInRleHRFbGVtZW50cyIsImh0bWxFbGVtZW50Iiwid29yZEJyZWFrIiwiaHlwaGVucyIsImxhbmciLCJjb2xvck9wdGltaXphdGlvbnMiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJub25Dcml0aWNhbFNlbGVjdG9ycyIsInNlbGVjdG9yIiwiZWxlbWVudHMiLCJkaXNwbGF5IiwiZGVmZXJyZWQiLCJnZXRPcHRpbWl6YXRpb25TdGF0cyIsIm9wdGltaXphdGlvbnNBcHBsaWVkIiwicHVzaCIsIkFycmF5IiwiZnJvbSIsImNsZWFudXAiLCJjbGVhciIsInN0YXRzIiwic2V0U3RhdHMiLCJSZWFjdCIsInVzZVN0YXRlIiwiaXNJbml0aWFsaXplZCIsInNldElzSW5pdGlhbGl6ZWQiLCJzdGF0c1VwZGF0ZVRpbWVvdXRSZWYiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJpbml0aWFsaXplT3B0aW1pemF0aW9uIiwiYWxsIiwiY2F0Y2giLCJlcnIiLCJyZXNvbHZlIiwidXBkYXRlU3RhdHMiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0IiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJsb2FkQnVuZGxlIiwidXNlQ2FsbGJhY2siLCJwcmVsb2FkUmVzb3VyY2VzIiwiaXNPcHRpbWl6ZWQiLCJsZW5ndGgiLCJyb3V0ZSIsInJlcXVlc3RJZGxlQ2FsbGJhY2siLCJyZWwiLCJocmVmIiwibG9hZGluZyIsInNpemVzIiwiY3VsdHVyYWxDb250ZW50TG9hZFRpbWUiLCJwb3J0dWd1ZXNlVGV4dFJlbmRlclRpbWUiLCJtb2JpbGVPcHRpbWl6YXRpb25TY29yZSIsInN0YXJ0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjdWx0dXJhbEVsZW1lbnRzIiwibW9iaWxlRWxlbWVudHMiLCJNYXRoIiwibWluIl0sIm1hcHBpbmdzIjoiQUFBQSw4REFBOEQ7Ozs7Ozs7Ozs7OztJQTZFakRBLHlCQUF5QjtlQUF6QkE7O0lBeW1CR0MsNEJBQTRCO2VBQTVCQTs7SUFyQkFDLHdCQUF3QjtlQUF4QkE7O0lBcEhIQyx5QkFBeUI7ZUFBekJBOztJQXlHR0Msc0JBQXNCO2VBQXRCQTs7SUF0R0FDLCtCQUErQjtlQUEvQkE7OzsrREEvaUJHOzhEQTh0QkQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbnNCbEIsdURBQXVEO0FBQ3ZELE1BQU1DLGdDQUEyRDtJQUMvREMsVUFBVTtR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
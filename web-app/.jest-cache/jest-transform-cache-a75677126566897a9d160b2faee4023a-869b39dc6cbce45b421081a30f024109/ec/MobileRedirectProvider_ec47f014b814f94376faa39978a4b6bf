259081347b89198434003bed59fdd92f
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    MobileDownloadPrompt: function() {
        return MobileDownloadPrompt;
    },
    MobileRedirectProvider: function() {
        return MobileRedirectProvider;
    },
    default: function() {
        return _default;
    },
    useMobileRedirect: function() {
        return useMobileRedirect;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _LanguageContext = require("../context/LanguageContext");
const _mobiledetection = require("../lib/mobile-detection");
const _mobileapp = require("../config/mobile-app");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const MobileRedirectContext = /*#__PURE__*/ (0, _react.createContext)(null);
function MobileRedirectProvider({ children, forceShow = false, disabled = false }) {
    const { language } = (0, _LanguageContext.useLanguage)();
    // State management
    const [deviceInfo, setDeviceInfo] = (0, _react.useState)(null);
    const [installationStatus, setInstallationStatus] = (0, _react.useState)(null);
    const [isLoading, setIsLoading] = (0, _react.useState)(true);
    const [showDownloadPrompt, setShowDownloadPrompt] = (0, _react.useState)(false);
    const [showLandingPage, setShowLandingPage] = (0, _react.useState)(false);
    const [deferredPrompt, setDeferredPrompt] = (0, _react.useState)(null);
    (0, _react.useEffect)(()=>{
        if (disabled) {
            setIsLoading(false);
            return;
        }
        initializeMobileDetection();
        setupPWAInstallPrompt();
    }, [
        disabled
    ]);
    /**
   * Initialize mobile device detection and app installation checking
   */ const initializeMobileDetection = async ()=>{
        try {
            setIsLoading(true);
            // Get device information
            const device = (0, _mobiledetection.getDeviceInfo)();
            setDeviceInfo(device);
            // Check if we should show any prompts
            const shouldShow = forceShow || (0, _mobiledetection.shouldShowDownloadPrompt)();
            if (shouldShow && (device.isMobile || device.isTablet)) {
                // Check app installation status
                const installation = await (0, _mobiledetection.checkAppInstallation)();
                setInstallationStatus(installation);
                // Determine what to show based on installation status and device
                if (!installation.isInstalled) {
                    // Decide between download prompt and landing page based on A/B testing
                    const variant = selectABTestVariant();
                    if (variant === "landing_page" || device.isTablet) {
                        setShowLandingPage(true);
                    } else {
                        setShowDownloadPrompt(true);
                    }
                }
            }
        } catch (error) {
            console.warn("Mobile detection initialization failed:", error);
        } finally{
            setIsLoading(false);
        }
    };
    /**
   * Setup PWA installation prompt handling
   */ const setupPWAInstallPrompt = ()=>{
        if (typeof window === "undefined") return;
        const handleBeforeInstallPrompt = (e)=>{
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later
            setDeferredPrompt(e);
        };
        window.addEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
        return ()=>{
            window.removeEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
        };
    };
    /**
   * Select A/B testing variant for mobile experience
   */ const selectABTestVariant = ()=>{
        if (!_mobileapp.MOBILE_APP_CONFIG.testing.enabled) return "prompt";
        // Use user ID or session ID for consistent experience
        // For now, use random selection
        const random = Math.random() * 100;
        let cumulativeWeight = 0;
        for (const variant of _mobileapp.MOBILE_APP_CONFIG.testing.variants){
            cumulativeWeight += variant.weight;
            if (random <= cumulativeWeight) {
                return variant.id.includes("landing") ? "landing_page" : "prompt";
            }
        }
        return "prompt";
    };
    /**
   * Dismiss the download prompt
   */ const dismissPrompt = ()=>{
        setShowDownloadPrompt(false);
        setShowLandingPage(false);
        (0, _mobiledetection.trackDownloadChoice)("continue_web");
    };
    /**
   * Trigger native app download
   */ const triggerAppDownload = (platform)=>{
        if (!deviceInfo) return;
        const targetPlatform = platform || (deviceInfo.isIOS ? "ios" : "android");
        const appStoreUrl = targetPlatform === "ios" ? _mobileapp.MOBILE_APP_CONFIG.stores.ios.url : _mobileapp.MOBILE_APP_CONFIG.stores.android.url;
        // Track the download attempt
        (0, _mobiledetection.trackDownloadChoice)("download_app", targetPlatform);
        // Open app store
        window.open(appStoreUrl, "_blank");
        // Dismiss prompts after download attempt
        setShowDownloadPrompt(false);
        setShowLandingPage(false);
    };
    /**
   * Trigger PWA installation
   */ const triggerPWAInstall = async ()=>{
        if (!deferredPrompt) return;
        try {
            // Show the install prompt
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            const { outcome } = await deferredPrompt.userChoice;
            // Track the choice
            (0, _mobiledetection.trackDownloadChoice)("install_pwa");
            if (outcome === "accepted") {
                console.log("PWA installation accepted");
            } else {
                console.log("PWA installation dismissed");
            }
            // Clear the deferredPrompt
            setDeferredPrompt(null);
            setShowDownloadPrompt(false);
            setShowLandingPage(false);
        } catch (error) {
            console.warn("PWA installation failed:", error);
        }
    };
    /**
   * Continue with website experience
   */ const continuewithWebsite = ()=>{
        dismissPrompt();
    };
    const contextValue = {
        deviceInfo,
        installationStatus,
        showDownloadPrompt,
        showLandingPage,
        isLoading,
        dismissPrompt,
        triggerAppDownload,
        triggerPWAInstall,
        continuewithWebsite
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(MobileRedirectContext.Provider, {
        value: contextValue,
        children: children
    });
}
function useMobileRedirect() {
    const context = (0, _react.useContext)(MobileRedirectContext);
    if (!context) {
        throw new Error("useMobileRedirect must be used within a MobileRedirectProvider");
    }
    return context;
}
function MobileDownloadPrompt() {
    const { t } = (0, _LanguageContext.useLanguage)();
    const { deviceInfo, installationStatus, showDownloadPrompt, dismissPrompt, triggerAppDownload, triggerPWAInstall } = useMobileRedirect();
    if (!showDownloadPrompt || !deviceInfo) return null;
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-primary-200 shadow-xl p-4 safe-area-pb",
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "flex items-center gap-3",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "flex-shrink-0 w-12 h-12 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-xl flex items-center justify-center",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        className: "text-white text-lg font-bold",
                        children: "LT"
                    })
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex-1 min-w-0",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                            className: "text-sm font-semibold text-gray-900",
                            children: t("mobile.app.prompt.title", "Get the LusoTown App")
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-xs text-gray-600 line-clamp-1",
                            children: t("mobile.app.prompt.subtitle", "Better experience for Portuguese community")
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center gap-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: dismissPrompt,
                            className: "px-3 py-2 text-sm text-gray-600 hover:text-gray-800 min-h-[36px]",
                            children: t("mobile.app.continue_web", "Not now")
                        }),
                        installationStatus?.canInstallPWA ? /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: triggerPWAInstall,
                            className: "bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors min-h-[36px]",
                            children: t("mobile.app.install", "Install")
                        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: ()=>triggerAppDownload(),
                            className: "bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors min-h-[36px]",
                            children: t("mobile.app.download", "Get App")
                        })
                    ]
                })
            ]
        })
    });
}
const _default = MobileRedirectProvider;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2NvbXBvbmVudHMvTW9iaWxlUmVkaXJlY3RQcm92aWRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2NvbnRleHQvTGFuZ3VhZ2VDb250ZXh0JztcbmltcG9ydCB7IFxuICBnZXREZXZpY2VJbmZvLCBcbiAgY2hlY2tBcHBJbnN0YWxsYXRpb24sIFxuICBzaG91bGRTaG93RG93bmxvYWRQcm9tcHQsXG4gIHRyYWNrRG93bmxvYWRDaG9pY2UsXG4gIHR5cGUgRGV2aWNlSW5mbyxcbiAgdHlwZSBBcHBJbnN0YWxsYXRpb25TdGF0dXMgXG59IGZyb20gJ0AvbGliL21vYmlsZS1kZXRlY3Rpb24nO1xuaW1wb3J0IHsgTU9CSUxFX0FQUF9DT05GSUcsIExBTkRJTkdfUEFHRV9DT05GSUcgfSBmcm9tICdAL2NvbmZpZy9tb2JpbGUtYXBwJztcblxuaW50ZXJmYWNlIE1vYmlsZVJlZGlyZWN0Q29udGV4dFR5cGUge1xuICBkZXZpY2VJbmZvOiBEZXZpY2VJbmZvIHwgbnVsbDtcbiAgaW5zdGFsbGF0aW9uU3RhdHVzOiBBcHBJbnN0YWxsYXRpb25TdGF0dXMgfCBudWxsO1xuICBzaG93RG93bmxvYWRQcm9tcHQ6IGJvb2xlYW47XG4gIHNob3dMYW5kaW5nUGFnZTogYm9vbGVhbjtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBkaXNtaXNzUHJvbXB0OiAoKSA9PiB2b2lkO1xuICB0cmlnZ2VyQXBwRG93bmxvYWQ6IChwbGF0Zm9ybT86ICdpb3MnIHwgJ2FuZHJvaWQnKSA9PiB2b2lkO1xuICB0cmlnZ2VyUFdBSW5zdGFsbDogKCkgPT4gdm9pZDtcbiAgY29udGludWV3aXRoV2Vic2l0ZTogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgTW9iaWxlUmVkaXJlY3RDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxNb2JpbGVSZWRpcmVjdENvbnRleHRUeXBlIHwgbnVsbD4obnVsbCk7XG5cbmludGVyZmFjZSBNb2JpbGVSZWRpcmVjdFByb3ZpZGVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICBmb3JjZVNob3c/OiBib29sZWFuOyAvLyBGb3IgdGVzdGluZyBwdXJwb3Nlc1xuICBkaXNhYmxlZD86IGJvb2xlYW47ICAvLyBEaXNhYmxlIGFsbCBtb2JpbGUgcmVkaXJlY3QgbG9naWNcbn1cblxuLyoqXG4gKiBNb2JpbGVSZWRpcmVjdFByb3ZpZGVyIC0gTWFuYWdlcyBtb2JpbGUgYXBwIHRyYW5zaXRpb24gc3RyYXRlZ3lcbiAqIFxuICogSGFuZGxlcyBkZXZpY2UgZGV0ZWN0aW9uLCBhcHAgaW5zdGFsbGF0aW9uIHN0YXR1cywgZG93bmxvYWQgcHJvbXB0cyxcbiAqIGFuZCBBL0IgdGVzdGluZyBmb3IgdGhlIFBvcnR1Z3Vlc2Utc3BlYWtpbmcgY29tbXVuaXR5IG1vYmlsZSBleHBlcmllbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gTW9iaWxlUmVkaXJlY3RQcm92aWRlcih7IFxuICBjaGlsZHJlbiwgXG4gIGZvcmNlU2hvdyA9IGZhbHNlLCBcbiAgZGlzYWJsZWQgPSBmYWxzZSBcbn06IE1vYmlsZVJlZGlyZWN0UHJvdmlkZXJQcm9wcykge1xuICBjb25zdCB7IGxhbmd1YWdlIH0gPSB1c2VMYW5ndWFnZSgpO1xuICBcbiAgLy8gU3RhdGUgbWFuYWdlbWVudFxuICBjb25zdCBbZGV2aWNlSW5mbywgc2V0RGV2aWNlSW5mb10gPSB1c2VTdGF0ZTxEZXZpY2VJbmZvIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpbnN0YWxsYXRpb25TdGF0dXMsIHNldEluc3RhbGxhdGlvblN0YXR1c10gPSB1c2VTdGF0ZTxBcHBJbnN0YWxsYXRpb25TdGF0dXMgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd0Rvd25sb2FkUHJvbXB0LCBzZXRTaG93RG93bmxvYWRQcm9tcHRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0xhbmRpbmdQYWdlLCBzZXRTaG93TGFuZGluZ1BhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGVmZXJyZWRQcm9tcHQsIHNldERlZmVycmVkUHJvbXB0XSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZU1vYmlsZURldGVjdGlvbigpO1xuICAgIHNldHVwUFdBSW5zdGFsbFByb21wdCgpO1xuICB9LCBbZGlzYWJsZWRdKTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBtb2JpbGUgZGV2aWNlIGRldGVjdGlvbiBhbmQgYXBwIGluc3RhbGxhdGlvbiBjaGVja2luZ1xuICAgKi9cbiAgY29uc3QgaW5pdGlhbGl6ZU1vYmlsZURldGVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBHZXQgZGV2aWNlIGluZm9ybWF0aW9uXG4gICAgICBjb25zdCBkZXZpY2UgPSBnZXREZXZpY2VJbmZvKCk7XG4gICAgICBzZXREZXZpY2VJbmZvKGRldmljZSk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIHNob3VsZCBzaG93IGFueSBwcm9tcHRzXG4gICAgICBjb25zdCBzaG91bGRTaG93ID0gZm9yY2VTaG93IHx8IHNob3VsZFNob3dEb3dubG9hZFByb21wdCgpO1xuICAgICAgXG4gICAgICBpZiAoc2hvdWxkU2hvdyAmJiAoZGV2aWNlLmlzTW9iaWxlIHx8IGRldmljZS5pc1RhYmxldCkpIHtcbiAgICAgICAgLy8gQ2hlY2sgYXBwIGluc3RhbGxhdGlvbiBzdGF0dXNcbiAgICAgICAgY29uc3QgaW5zdGFsbGF0aW9uID0gYXdhaXQgY2hlY2tBcHBJbnN0YWxsYXRpb24oKTtcbiAgICAgICAgc2V0SW5zdGFsbGF0aW9uU3RhdHVzKGluc3RhbGxhdGlvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hhdCB0byBzaG93IGJhc2VkIG9uIGluc3RhbGxhdGlvbiBzdGF0dXMgYW5kIGRldmljZVxuICAgICAgICBpZiAoIWluc3RhbGxhdGlvbi5pc0luc3RhbGxlZCkge1xuICAgICAgICAgIC8vIERlY2lkZSBiZXR3ZWVuIGRvd25sb2FkIHByb21wdCBhbmQgbGFuZGluZyBwYWdlIGJhc2VkIG9uIEEvQiB0ZXN0aW5nXG4gICAgICAgICAgY29uc3QgdmFyaWFudCA9IHNlbGVjdEFCVGVzdFZhcmlhbnQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodmFyaWFudCA9PT0gJ2xhbmRpbmdfcGFnZScgfHwgZGV2aWNlLmlzVGFibGV0KSB7XG4gICAgICAgICAgICBzZXRTaG93TGFuZGluZ1BhZ2UodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFNob3dEb3dubG9hZFByb21wdCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ01vYmlsZSBkZXRlY3Rpb24gaW5pdGlhbGl6YXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIFBXQSBpbnN0YWxsYXRpb24gcHJvbXB0IGhhbmRsaW5nXG4gICAqL1xuICBjb25zdCBzZXR1cFBXQUluc3RhbGxQcm9tcHQgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgICBjb25zdCBoYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0ID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAvLyBQcmV2ZW50IENocm9tZSA2NyBhbmQgZWFybGllciBmcm9tIGF1dG9tYXRpY2FsbHkgc2hvd2luZyB0aGUgcHJvbXB0XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBTdGFzaCB0aGUgZXZlbnQgc28gaXQgY2FuIGJlIHRyaWdnZXJlZCBsYXRlclxuICAgICAgc2V0RGVmZXJyZWRQcm9tcHQoZSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnN0YWxscHJvbXB0JywgaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZWluc3RhbGxwcm9tcHQnLCBoYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0KTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZWxlY3QgQS9CIHRlc3RpbmcgdmFyaWFudCBmb3IgbW9iaWxlIGV4cGVyaWVuY2VcbiAgICovXG4gIGNvbnN0IHNlbGVjdEFCVGVzdFZhcmlhbnQgPSAoKTogJ3Byb21wdCcgfCAnbGFuZGluZ19wYWdlJyA9PiB7XG4gICAgaWYgKCFNT0JJTEVfQVBQX0NPTkZJRy50ZXN0aW5nLmVuYWJsZWQpIHJldHVybiAncHJvbXB0JztcbiAgICBcbiAgICAvLyBVc2UgdXNlciBJRCBvciBzZXNzaW9uIElEIGZvciBjb25zaXN0ZW50IGV4cGVyaWVuY2VcbiAgICAvLyBGb3Igbm93LCB1c2UgcmFuZG9tIHNlbGVjdGlvblxuICAgIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkgKiAxMDA7XG4gICAgbGV0IGN1bXVsYXRpdmVXZWlnaHQgPSAwO1xuICAgIFxuICAgIGZvciAoY29uc3QgdmFyaWFudCBvZiBNT0JJTEVfQVBQX0NPTkZJRy50ZXN0aW5nLnZhcmlhbnRzKSB7XG4gICAgICBjdW11bGF0aXZlV2VpZ2h0ICs9IHZhcmlhbnQud2VpZ2h0O1xuICAgICAgaWYgKHJhbmRvbSA8PSBjdW11bGF0aXZlV2VpZ2h0KSB7XG4gICAgICAgIHJldHVybiB2YXJpYW50LmlkLmluY2x1ZGVzKCdsYW5kaW5nJykgPyAnbGFuZGluZ19wYWdlJyA6ICdwcm9tcHQnO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gJ3Byb21wdCc7XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc21pc3MgdGhlIGRvd25sb2FkIHByb21wdFxuICAgKi9cbiAgY29uc3QgZGlzbWlzc1Byb21wdCA9ICgpID0+IHtcbiAgICBzZXRTaG93RG93bmxvYWRQcm9tcHQoZmFsc2UpO1xuICAgIHNldFNob3dMYW5kaW5nUGFnZShmYWxzZSk7XG4gICAgdHJhY2tEb3dubG9hZENob2ljZSgnY29udGludWVfd2ViJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgbmF0aXZlIGFwcCBkb3dubG9hZFxuICAgKi9cbiAgY29uc3QgdHJpZ2dlckFwcERvd25sb2FkID0gKHBsYXRmb3JtPzogJ2lvcycgfCAnYW5kcm9pZCcpID0+IHtcbiAgICBpZiAoIWRldmljZUluZm8pIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0YXJnZXRQbGF0Zm9ybSA9IHBsYXRmb3JtIHx8IChkZXZpY2VJbmZvLmlzSU9TID8gJ2lvcycgOiAnYW5kcm9pZCcpO1xuICAgIGNvbnN0IGFwcFN0b3JlVXJsID0gdGFyZ2V0UGxhdGZvcm0gPT09ICdpb3MnIFxuICAgICAgPyBNT0JJTEVfQVBQX0NPTkZJRy5zdG9yZXMuaW9zLnVybCBcbiAgICAgIDogTU9CSUxFX0FQUF9DT05GSUcuc3RvcmVzLmFuZHJvaWQudXJsO1xuICAgIFxuICAgIC8vIFRyYWNrIHRoZSBkb3dubG9hZCBhdHRlbXB0XG4gICAgdHJhY2tEb3dubG9hZENob2ljZSgnZG93bmxvYWRfYXBwJywgdGFyZ2V0UGxhdGZvcm0pO1xuICAgIFxuICAgIC8vIE9wZW4gYXBwIHN0b3JlXG4gICAgd2luZG93Lm9wZW4oYXBwU3RvcmVVcmwsICdfYmxhbmsnKTtcbiAgICBcbiAgICAvLyBEaXNtaXNzIHByb21wdHMgYWZ0ZXIgZG93bmxvYWQgYXR0ZW1wdFxuICAgIHNldFNob3dEb3dubG9hZFByb21wdChmYWxzZSk7XG4gICAgc2V0U2hvd0xhbmRpbmdQYWdlKGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlciBQV0EgaW5zdGFsbGF0aW9uXG4gICAqL1xuICBjb25zdCB0cmlnZ2VyUFdBSW5zdGFsbCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWRlZmVycmVkUHJvbXB0KSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNob3cgdGhlIGluc3RhbGwgcHJvbXB0XG4gICAgICBkZWZlcnJlZFByb21wdC5wcm9tcHQoKTtcbiAgICAgIFxuICAgICAgLy8gV2FpdCBmb3IgdGhlIHVzZXIgdG8gcmVzcG9uZCB0byB0aGUgcHJvbXB0XG4gICAgICBjb25zdCB7IG91dGNvbWUgfSA9IGF3YWl0IGRlZmVycmVkUHJvbXB0LnVzZXJDaG9pY2U7XG4gICAgICBcbiAgICAgIC8vIFRyYWNrIHRoZSBjaG9pY2VcbiAgICAgIHRyYWNrRG93bmxvYWRDaG9pY2UoJ2luc3RhbGxfcHdhJyk7XG4gICAgICBcbiAgICAgIGlmIChvdXRjb21lID09PSAnYWNjZXB0ZWQnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQV0EgaW5zdGFsbGF0aW9uIGFjY2VwdGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnUFdBIGluc3RhbGxhdGlvbiBkaXNtaXNzZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgdGhlIGRlZmVycmVkUHJvbXB0XG4gICAgICBzZXREZWZlcnJlZFByb21wdChudWxsKTtcbiAgICAgIHNldFNob3dEb3dubG9hZFByb21wdChmYWxzZSk7XG4gICAgICBzZXRTaG93TGFuZGluZ1BhZ2UoZmFsc2UpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignUFdBIGluc3RhbGxhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ29udGludWUgd2l0aCB3ZWJzaXRlIGV4cGVyaWVuY2VcbiAgICovXG4gIGNvbnN0IGNvbnRpbnVld2l0aFdlYnNpdGUgPSAoKSA9PiB7XG4gICAgZGlzbWlzc1Byb21wdCgpO1xuICB9O1xuXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogTW9iaWxlUmVkaXJlY3RDb250ZXh0VHlwZSA9IHtcbiAgICBkZXZpY2VJbmZvLFxuICAgIGluc3RhbGxhdGlvblN0YXR1cyxcbiAgICBzaG93RG93bmxvYWRQcm9tcHQsXG4gICAgc2hvd0xhbmRpbmdQYWdlLFxuICAgIGlzTG9hZGluZyxcbiAgICBkaXNtaXNzUHJvbXB0LFxuICAgIHRyaWdnZXJBcHBEb3dubG9hZCxcbiAgICB0cmlnZ2VyUFdBSW5zdGFsbCxcbiAgICBjb250aW51ZXdpdGhXZWJzaXRlXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8TW9iaWxlUmVkaXJlY3RDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvTW9iaWxlUmVkaXJlY3RDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuXG4vKipcbiAqIEhvb2sgdG8gdXNlIG1vYmlsZSByZWRpcmVjdCBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VNb2JpbGVSZWRpcmVjdCgpOiBNb2JpbGVSZWRpcmVjdENvbnRleHRUeXBlIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoTW9iaWxlUmVkaXJlY3RDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VNb2JpbGVSZWRpcmVjdCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgTW9iaWxlUmVkaXJlY3RQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG4vKipcbiAqIE1vYmlsZSBEb3dubG9hZCBQcm9tcHQgQ29tcG9uZW50XG4gKiBDb21wYWN0IHByb21wdCB0aGF0IGFwcGVhcnMgZm9yIG1vYmlsZSB1c2Vyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gTW9iaWxlRG93bmxvYWRQcm9tcHQoKSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3Qge1xuICAgIGRldmljZUluZm8sXG4gICAgaW5zdGFsbGF0aW9uU3RhdHVzLFxuICAgIHNob3dEb3dubG9hZFByb21wdCxcbiAgICBkaXNtaXNzUHJvbXB0LFxuICAgIHRyaWdnZXJBcHBEb3dubG9hZCxcbiAgdHJpZ2dlclBXQUluc3RhbGxcbiAgfSA9IHVzZU1vYmlsZVJlZGlyZWN0KCk7XG5cbiAgaWYgKCFzaG93RG93bmxvYWRQcm9tcHQgfHwgIWRldmljZUluZm8pIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCB6LTUwIGJnLXdoaXRlIGJvcmRlci10IGJvcmRlci1wcmltYXJ5LTIwMCBzaGFkb3cteGwgcC00IHNhZmUtYXJlYS1wYlwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICB7LyogQXBwIEljb24gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCB3LTEyIGgtMTIgYmctZ3JhZGllbnQtdG8tciBmcm9tLXByaW1hcnktNjAwIHRvLXNlY29uZGFyeS02MDAgcm91bmRlZC14bCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdGV4dC1sZyBmb250LWJvbGRcIj5MVDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogQ29udGVudCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMFwiPlxuICAgICAgICAgICAge3QoJ21vYmlsZS5hcHAucHJvbXB0LnRpdGxlJywgJ0dldCB0aGUgTHVzb1Rvd24gQXBwJyl9XG4gICAgICAgICAgPC9oMz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDAgbGluZS1jbGFtcC0xXCI+XG4gICAgICAgICAgICB7dCgnbW9iaWxlLmFwcC5wcm9tcHQuc3VidGl0bGUnLCAnQmV0dGVyIGV4cGVyaWVuY2UgZm9yIFBvcnR1Z3Vlc2UgY29tbXVuaXR5Jyl9XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHsvKiBBY3Rpb25zICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17ZGlzbWlzc1Byb21wdH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMiB0ZXh0LXNtIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1ncmF5LTgwMCBtaW4taC1bMzZweF1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0KCdtb2JpbGUuYXBwLmNvbnRpbnVlX3dlYicsICdOb3Qgbm93Jyl9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgXG4gICAgICAgICAge2luc3RhbGxhdGlvblN0YXR1cz8uY2FuSW5zdGFsbFBXQSA/IChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17dHJpZ2dlclBXQUluc3RhbGx9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXByaW1hcnktNjAwIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQtbGcgdGV4dC1zbSBmb250LW1lZGl1bSBob3ZlcjpiZy1wcmltYXJ5LTcwMCB0cmFuc2l0aW9uLWNvbG9ycyBtaW4taC1bMzZweF1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dCgnbW9iaWxlLmFwcC5pbnN0YWxsJywgJ0luc3RhbGwnKX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRyaWdnZXJBcHBEb3dubG9hZCgpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1wcmltYXJ5LTYwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiByb3VuZGVkLWxnIHRleHQtc20gZm9udC1tZWRpdW0gaG92ZXI6YmctcHJpbWFyeS03MDAgdHJhbnNpdGlvbi1jb2xvcnMgbWluLWgtWzM2cHhdXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3QoJ21vYmlsZS5hcHAuZG93bmxvYWQnLCAnR2V0IEFwcCcpfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9iaWxlUmVkaXJlY3RQcm92aWRlcjsiXSwibmFtZXMiOlsiTW9iaWxlRG93bmxvYWRQcm9tcHQiLCJNb2JpbGVSZWRpcmVjdFByb3ZpZGVyIiwidXNlTW9iaWxlUmVkaXJlY3QiLCJNb2JpbGVSZWRpcmVjdENvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwiY2hpbGRyZW4iLCJmb3JjZVNob3ciLCJkaXNhYmxlZCIsImxhbmd1YWdlIiwidXNlTGFuZ3VhZ2UiLCJkZXZpY2VJbmZvIiwic2V0RGV2aWNlSW5mbyIsInVzZVN0YXRlIiwiaW5zdGFsbGF0aW9uU3RhdHVzIiwic2V0SW5zdGFsbGF0aW9uU3RhdHVzIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2hvd0Rvd25sb2FkUHJvbXB0Iiwic2V0U2hvd0Rvd25sb2FkUHJvbXB0Iiwic2hvd0xhbmRpbmdQYWdlIiwic2V0U2hvd0xhbmRpbmdQYWdlIiwiZGVmZXJyZWRQcm9tcHQiLCJzZXREZWZlcnJlZFByb21wdCIsInVzZUVmZmVjdCIsImluaXRpYWxpemVNb2JpbGVEZXRlY3Rpb24iLCJzZXR1cFBXQUluc3RhbGxQcm9tcHQiLCJkZXZpY2UiLCJnZXREZXZpY2VJbmZvIiwic2hvdWxkU2hvdyIsInNob3VsZFNob3dEb3dubG9hZFByb21wdCIsImlzTW9iaWxlIiwiaXNUYWJsZXQiLCJpbnN0YWxsYXRpb24iLCJjaGVja0FwcEluc3RhbGxhdGlvbiIsImlzSW5zdGFsbGVkIiwidmFyaWFudCIsInNlbGVjdEFCVGVzdFZhcmlhbnQiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwid2luZG93IiwiaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTU9CSUxFX0FQUF9DT05GSUciLCJ0ZXN0aW5nIiwiZW5hYmxlZCIsInJhbmRvbSIsIk1hdGgiLCJjdW11bGF0aXZlV2VpZ2h0IiwidmFyaWFudHMiLCJ3ZWlnaHQiLCJpZCIsImluY2x1ZGVzIiwiZGlzbWlzc1Byb21wdCIsInRyYWNrRG93bmxvYWRDaG9pY2UiLCJ0cmlnZ2VyQXBwRG93bmxvYWQiLCJwbGF0Zm9ybSIsInRhcmdldFBsYXRmb3JtIiwiaXNJT1MiLCJhcHBTdG9yZVVybCIsInN0b3JlcyIsImlvcyIsInVybCIsImFuZHJvaWQiLCJvcGVuIiwidHJpZ2dlclBXQUluc3RhbGwiLCJwcm9tcHQiLCJvdXRjb21lIiwidXNlckNob2ljZSIsImxvZyIsImNvbnRpbnVld2l0aFdlYnNpdGUiLCJjb250ZXh0VmFsdWUiLCJQcm92aWRlciIsInZhbHVlIiwiY29udGV4dCIsInVzZUNvbnRleHQiLCJFcnJvciIsInQiLCJkaXYiLCJjbGFzc05hbWUiLCJzcGFuIiwiaDMiLCJwIiwiYnV0dG9uIiwib25DbGljayIsImNhbkluc3RhbGxQV0EiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7SUF5UGdCQSxvQkFBb0I7ZUFBcEJBOztJQWpOQUMsc0JBQXNCO2VBQXRCQTs7SUE4UWhCLE9BQXNDO2VBQXRDOztJQXpFZ0JDLGlCQUFpQjtlQUFqQkE7Ozs7K0RBM09zRDtpQ0FDMUM7aUNBUXJCOzJCQUNnRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBY3ZELE1BQU1DLHNDQUF3QkMsSUFBQUEsb0JBQWEsRUFBbUM7QUFjdkUsU0FBU0gsdUJBQXVCLEVBQ3JDSSxRQUFRLEVBQ1JDLFlBQVksS0FBSyxFQUNqQkMsV0FBVyxLQUFLLEVBQ1k7SUFDNUIsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0MsSUFBQUEsNEJBQVc7SUFFaEMsbUJBQW1CO0lBQ25CLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHQyxJQUFBQSxlQUFRLEVBQW9CO0lBQ2hFLE1BQU0sQ0FBQ0Msb0JBQW9CQyxzQkFBc0IsR0FBR0YsSUFBQUEsZUFBUSxFQUErQjtJQUMzRixNQUFNLENBQUNHLFdBQVdDLGFBQWEsR0FBR0osSUFBQUEsZUFBUSxFQUFDO0lBQzNDLE1BQU0sQ0FBQ0ssb0JBQW9CQyxzQkFBc0IsR0FBR04sSUFBQUEsZUFBUSxFQUFDO0lBQzdELE1BQU0sQ0FBQ08saUJBQWlCQyxtQkFBbUIsR0FBR1IsSUFBQUEsZUFBUSxFQUFDO0lBQ3ZELE1BQU0sQ0FBQ1MsZ0JBQWdCQyxrQkFBa0IsR0FBR1YsSUFBQUEsZUFBUSxFQUFNO0lBRTFEVyxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsSUFBSWhCLFVBQVU7WUFDWlMsYUFBYTtZQUNiO1FBQ0Y7UUFFQVE7UUFDQUM7SUFDRixHQUFHO1FBQUNsQjtLQUFTO0lBRWI7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
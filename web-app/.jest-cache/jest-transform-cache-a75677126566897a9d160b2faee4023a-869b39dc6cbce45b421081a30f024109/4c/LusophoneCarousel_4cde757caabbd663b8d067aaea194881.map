{"version":3,"sources":["/workspaces/LusoTown/web-app/src/components/carousels/LusophoneCarousel.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect, useCallback, useRef, KeyboardEvent, memo, useMemo, lazy, Suspense } from 'react'\nimport { motion, AnimatePresence, PanInfo, useMotionValue, useTransform, animate, useAnimation } from 'framer-motion'\nimport { \n  ChevronLeftIcon, \n  ChevronRightIcon,\n  PauseIcon,\n  PlayIcon,\n  WifiIcon,\n  CloudIcon\n} from '@heroicons/react/24/outline'\nimport { useLanguage } from '@/context/LanguageContext'\nimport { PORTUGUESE_COLORS, DESIGN_TOKENS } from '@/config/brand'\nimport { usePortugueseBundleOptimization } from '@/utils/portuguese-bundle-optimizer'\nimport logger from '@/utils/logger'\nimport { EnhancedMobileGestures, usePortugueseGestures } from '../EnhancedMobileGestures'\n\n/**\n * Base interface for carousel items - all items must extend this\n */\nexport interface LusophoneCarouselItem {\n  id: string\n  title: {\n    en: string\n    pt: string\n  }\n  description?: {\n    en: string\n    pt: string\n  }\n  image?: string\n  flagEmoji?: string\n  countries?: string[]\n  category?: string\n  priority?: number\n}\n\n/**\n * Weekend Events carousel item\n */\nexport interface WeekendEventItem extends LusophoneCarouselItem {\n  date: string\n  time: string\n  location: string\n  price: number\n  attendees: number\n  maxAttendees: number\n  tags: string[]\n}\n\n/**\n * PALOP Heritage carousel item\n */\nexport interface PALOPHeritageItem extends LusophoneCarouselItem {\n  country: 'Angola' | 'Cape Verde' | 'Mozambique' | 'Guinea-Bissau' | 'S√£o Tom√© and Pr√≠ncipe' | 'East Timor'\n  heritage: {\n    music: string[]\n    traditions: string[]\n    cuisine: string[]\n  }\n  businessCount: number\n}\n\n/**\n * Weekly Discovery carousel item\n */\nexport interface WeeklyDiscoveryItem extends LusophoneCarouselItem {\n  discoveryType: 'restaurant' | 'event' | 'business' | 'cultural-site'\n  location: {\n    name: string\n    area: string\n  }\n  featured: boolean\n  rating?: number\n}\n\n/**\n * Cultural Celebration carousel item\n */\nexport interface CulturalCelebrationItem extends LusophoneCarouselItem {\n  celebrationType: 'festival' | 'independence' | 'cultural' | 'religious' | 'music'\n  period: {\n    en: string\n    pt: string\n  }\n  significance: {\n    en: string\n    pt: string\n  }\n  traditionalElements: string[]\n}\n\n/**\n * Union type for all possible carousel items\n */\nexport type CarouselItemType = WeekendEventItem | PALOPHeritageItem | WeeklyDiscoveryItem | CulturalCelebrationItem | LusophoneCarouselItem\n\n/**\n * Responsive breakpoint configuration\n */\ninterface ResponsiveConfig {\n  mobile: {\n    itemsPerView: number\n    spacing: number\n  }\n  tablet: {\n    itemsPerView: number\n    spacing: number\n  }\n  desktop: {\n    itemsPerView: number\n    spacing: number\n  }\n}\n\n/**\n * Mobile optimization settings\n */\ninterface MobileSettings {\n  enableSwipeGestures: boolean\n  enableHapticFeedback: boolean\n  enableMomentumScrolling: boolean\n  enablePullToRefresh: boolean\n  touchThreshold: number\n  swipeVelocityThreshold: number\n  enableLazyLoading: boolean\n  preloadDistance: number\n}\n\n/**\n * PWA features configuration\n */\ninterface PWASettings {\n  enableOfflineMode: boolean\n  enablePushNotifications: boolean\n  enableBackgroundSync: boolean\n  cacheStrategy: 'cache-first' | 'network-first' | 'stale-while-revalidate'\n  offlineQueueLimit: number\n}\n\n/**\n * Performance monitoring\n */\ninterface PerformanceMetrics {\n  loadTime: number\n  renderTime: number\n  interactionLatency: number\n  memoryUsage: number\n  networkStatus: 'online' | 'offline' | 'slow'\n}\n\n/**\n * Main carousel component props\n */\ninterface LusophoneCarouselProps<T extends CarouselItemType> {\n  items: T[]\n  renderItem: (item: T, index: number) => React.ReactNode\n  title?: {\n    en: string\n    pt: string\n  }\n  subtitle?: {\n    en: string\n    pt: string\n  }\n  responsive?: ResponsiveConfig\n  autoAdvance?: boolean\n  autoAdvanceInterval?: number\n  showControls?: boolean\n  showDots?: boolean\n  className?: string\n  onItemClick?: (item: T, index: number) => void\n  loading?: boolean\n  emptyStateMessage?: {\n    en: string\n    pt: string\n  }\n  // Enhanced mobile features\n  mobileSettings?: Partial<MobileSettings>\n  pwaSettings?: Partial<PWASettings>\n  onSwipeGesture?: (direction: 'left' | 'right', item: T) => void\n  onPullToRefresh?: () => Promise<void>\n  onPerformanceUpdate?: (metrics: PerformanceMetrics) => void\n  enablePortugueseGestures?: boolean\n  enableAccessibilityAnnouncements?: boolean\n}\n\n/**\n * Default responsive configuration\n */\nconst DEFAULT_RESPONSIVE: ResponsiveConfig = {\n  mobile: {\n    itemsPerView: 1,\n    spacing: 16\n  },\n  tablet: {\n    itemsPerView: 2,\n    spacing: 20\n  },\n  desktop: {\n    itemsPerView: 3,\n    spacing: 24\n  }\n}\n\n/**\n * Default mobile settings optimized for Portuguese-speaking community\n */\nconst DEFAULT_MOBILE_SETTINGS: MobileSettings = {\n  enableSwipeGestures: true,\n  enableHapticFeedback: false,\n  enableMomentumScrolling: true,\n  enablePullToRefresh: true,\n  touchThreshold: 44, // WCAG 2.1 AA minimum touch target\n  swipeVelocityThreshold: 0.3,\n  enableLazyLoading: true,\n  preloadDistance: 2 // Preload 2 items ahead\n}\n\n/**\n * Default PWA settings for offline Portuguese cultural content\n */\nconst DEFAULT_PWA_SETTINGS: PWASettings = {\n  enableOfflineMode: true,\n  enablePushNotifications: true,\n  enableBackgroundSync: true,\n  cacheStrategy: 'stale-while-revalidate',\n  offlineQueueLimit: 50\n}\n\n/**\n * Custom hook for responsive configuration\n */\nfunction useResponsive(responsive: ResponsiveConfig) {\n  const [currentConfig, setCurrentConfig] = useState(responsive.mobile)\n  const [screenSize, setScreenSize] = useState<'mobile' | 'tablet' | 'desktop'>('mobile')\n\n  useEffect(() => {\n    const updateConfig = () => {\n      const width = window.innerWidth\n      \n      if (width >= 1024) {\n        setCurrentConfig(responsive.desktop)\n        setScreenSize('desktop')\n      } else if (width >= 768) {\n        setCurrentConfig(responsive.tablet)\n        setScreenSize('tablet')\n      } else {\n        setCurrentConfig(responsive.mobile)\n        setScreenSize('mobile')\n      }\n    }\n\n    updateConfig()\n    window.addEventListener('resize', updateConfig)\n    \n    return () => window.removeEventListener('resize', updateConfig)\n  }, [responsive])\n\n  return { currentConfig, screenSize }\n}\n\n/**\n * Custom hook for mobile performance monitoring\n */\nfunction useMobilePerformance(onUpdate?: (metrics: PerformanceMetrics) => void) {\n  const [metrics, setMetrics] = useState<PerformanceMetrics>({\n    loadTime: 0,\n    renderTime: 0,\n    interactionLatency: 0,\n    memoryUsage: 0,\n    networkStatus: 'online'\n  })\n\n  useEffect(() => {\n    const startTime = performance.now()\n    \n    // Network status monitoring\n    const updateNetworkStatus = () => {\n      const connection = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection\n      let status: 'online' | 'offline' | 'slow' = navigator.onLine ? 'online' : 'offline'\n      \n      if (connection && connection.effectiveType) {\n        if (['slow-2g', '2g'].includes(connection.effectiveType)) {\n          status = 'slow'\n        }\n      }\n      \n      setMetrics(prev => ({ ...prev, networkStatus: status }))\n    }\n\n    // Memory usage monitoring\n    const updateMemoryUsage = () => {\n      if ('memory' in performance) {\n        const memory = (performance as any).memory\n        setMetrics(prev => ({ \n          ...prev, \n          memoryUsage: memory.usedJSHeapSize / 1024 / 1024 // Convert to MB\n        }))\n      }\n    }\n\n    // Load time measurement\n    const updateLoadTime = () => {\n      const loadTime = performance.now() - startTime\n      setMetrics(prev => ({ ...prev, loadTime }))\n    }\n\n    updateNetworkStatus()\n    updateMemoryUsage()\n    updateLoadTime()\n\n    // Set up periodic updates\n    const interval = setInterval(() => {\n      updateMemoryUsage()\n      updateNetworkStatus()\n    }, 5000)\n\n    // Cleanup\n    return () => clearInterval(interval)\n  }, [])\n\n  useEffect(() => {\n    onUpdate?.(metrics)\n  }, [metrics, onUpdate])\n\n  return metrics\n}\n\n/**\n * Custom hook for PWA features\n */\nfunction usePWAFeatures(settings: PWASettings) {\n  const [isOffline, setIsOffline] = useState(!navigator.onLine)\n  const [installPrompt, setInstallPrompt] = useState<any>(null)\n\n  useEffect(() => {\n    const handleOnline = () => setIsOffline(false)\n    const handleOffline = () => setIsOffline(true)\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault()\n      setInstallPrompt(e)\n    }\n\n    window.addEventListener('online', handleOnline)\n    window.addEventListener('offline', handleOffline)\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt)\n\n    return () => {\n      window.removeEventListener('online', handleOnline)\n      window.removeEventListener('offline', handleOffline)\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt)\n    }\n  }, [])\n\n  const installPWA = useCallback(async () => {\n    if (installPrompt) {\n      installPrompt.prompt()\n      const result = await installPrompt.userChoice\n      setInstallPrompt(null)\n      return result.outcome === 'accepted'\n    }\n    return false\n  }, [installPrompt])\n\n  return {\n    isOffline,\n    canInstall: !!installPrompt,\n    installPWA\n  }\n}\n\n/**\n * Custom hook for carousel navigation with mobile optimizations\n */\nfunction useCarouselNavigation<T extends CarouselItemType>(\n  items: T[],\n  itemsPerView: number,\n  autoAdvance: boolean = false,\n  autoAdvanceInterval: number = 5000,\n  mobileSettings?: Partial<MobileSettings>\n) {\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [isPlaying, setIsPlaying] = useState(autoAdvance)\n  const [isTransitioning, setIsTransitioning] = useState(false)\n  const intervalRef = useRef<NodeJS.Timeout | null>(null)\n  \n  // Mobile momentum scrolling\n  const x = useMotionValue(0)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  const settings = { ...DEFAULT_MOBILE_SETTINGS, ...mobileSettings }\n  const maxIndex = Math.max(0, items.length - itemsPerView)\n\n  const goToSlide = useCallback((index: number, withAnimation = true) => {\n    const newIndex = Math.max(0, Math.min(index, maxIndex))\n    if (newIndex !== currentIndex) {\n      setIsTransitioning(withAnimation)\n      setCurrentIndex(newIndex)\n      \n      // Haptic feedback disabled for better UX\n      // if (settings.enableHapticFeedback && 'vibrate' in navigator) {\n      //   navigator.vibrate(10)\n      // }\n      \n      if (withAnimation) {\n        setTimeout(() => setIsTransitioning(false), 300)\n      }\n    }\n  }, [currentIndex, maxIndex, settings.enableHapticFeedback])\n\n  const goToNext = useCallback((withAnimation = true) => {\n    const nextIndex = currentIndex >= maxIndex ? 0 : currentIndex + 1\n    goToSlide(nextIndex, withAnimation)\n  }, [currentIndex, maxIndex, goToSlide])\n\n  const goToPrevious = useCallback((withAnimation = true) => {\n    const prevIndex = currentIndex <= 0 ? maxIndex : currentIndex - 1\n    goToSlide(prevIndex, withAnimation)\n  }, [currentIndex, maxIndex, goToSlide])\n\n  const togglePlay = useCallback(() => {\n    setIsPlaying(prev => !prev)\n  }, [])\n\n  // Auto-advance logic\n  useEffect(() => {\n    if (isPlaying && items.length > itemsPerView) {\n      intervalRef.current = setInterval(() => goToNext(true), autoAdvanceInterval)\n    } else if (intervalRef.current) {\n      clearInterval(intervalRef.current)\n      intervalRef.current = null\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current)\n      }\n    }\n  }, [isPlaying, items.length, itemsPerView, goToNext, autoAdvanceInterval])\n\n  // Reset current index if items change\n  useEffect(() => {\n    if (currentIndex > maxIndex) {\n      setCurrentIndex(0)\n    }\n  }, [items.length, maxIndex, currentIndex])\n\n  return {\n    currentIndex,\n    isPlaying,\n    isTransitioning,\n    goToSlide,\n    goToNext,\n    goToPrevious,\n    togglePlay,\n    maxIndex,\n    x,\n    containerRef\n  }\n}\n\n/**\n * Loading skeleton component\n */\nfunction CarouselSkeleton({ itemsPerView }: { itemsPerView: number }) {\n  return (\n    <div className=\"grid gap-6 animate-pulse\" style={{\n      gridTemplateColumns: `repeat(${itemsPerView}, 1fr)`\n    }}>\n      {Array.from({ length: itemsPerView }).map((_, index) => (\n        <div key={index} className=\"bg-gray-200 rounded-xl h-64\"></div>\n      ))}\n    </div>\n  )\n}\n\n/**\n * Empty state component\n */\nfunction EmptyState({ message }: { message: string }) {\n  return (\n    <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n      <div className=\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mb-4\">\n        <span className=\"text-2xl\">üèõÔ∏è</span>\n      </div>\n      <p className=\"text-gray-600 max-w-md\">{message}</p>\n    </div>\n  )\n}\n\n/**\n * Main LusophoneCarousel Component with Enhanced Mobile Features\n */\nconst LusophoneCarousel = memo(<T extends CarouselItemType>({\n  items,\n  renderItem,\n  title,\n  subtitle,\n  responsive = DEFAULT_RESPONSIVE,\n  autoAdvance = false,\n  autoAdvanceInterval = 5000,\n  showControls = true,\n  showDots = true,\n  className = '',\n  onItemClick,\n  loading = false,\n  emptyStateMessage,\n  // Enhanced mobile features\n  mobileSettings,\n  pwaSettings,\n  onSwipeGesture,\n  onPullToRefresh,\n  onPerformanceUpdate,\n  enablePortugueseGestures = true,\n  enableAccessibilityAnnouncements = true\n}: LusophoneCarouselProps<T>) => {\n  const { language, t } = useLanguage()\n  const { stats, loadBundle } = usePortugueseBundleOptimization()\n  const { currentConfig, screenSize } = useResponsive(responsive)\n  const carouselRef = useRef<HTMLDivElement>(null)\n  const [isIntersecting, setIsIntersecting] = useState(false)\n  const controls = useAnimation()\n  \n  // Enhanced mobile settings\n  const mobileConfig = { ...DEFAULT_MOBILE_SETTINGS, ...mobileSettings }\n  const pwaConfig = { ...DEFAULT_PWA_SETTINGS, ...pwaSettings }\n  \n  // Mobile performance monitoring\n  const performanceMetrics = useMobilePerformance(onPerformanceUpdate)\n  \n  // PWA features\n  const { isOffline, canInstall, installPWA } = usePWAFeatures(pwaConfig)\n  \n  // Portuguese gesture patterns\n  const { detectCulturalPattern } = usePortugueseGestures()\n  \n  const {\n    currentIndex,\n    isPlaying,\n    isTransitioning,\n    goToSlide,\n    goToNext,\n    goToPrevious,\n    togglePlay,\n    maxIndex,\n    x,\n    containerRef\n  } = useCarouselNavigation(items, currentConfig.itemsPerView, autoAdvance, autoAdvanceInterval, mobileConfig)\n  \n  // Pull to refresh state\n  const [isPullingToRefresh, setIsPullingToRefresh] = useState(false)\n  const pullDistance = useMotionValue(0)\n\n  // Enhanced gesture handlers\n  const handleSwipe = useCallback((gesture: any) => {\n    const { direction, distance, velocity } = gesture\n    \n    if (velocity > mobileConfig.swipeVelocityThreshold && distance > mobileConfig.touchThreshold) {\n      const currentItem = items[currentIndex]\n      \n      if (direction === 'left') {\n        goToNext()\n        onSwipeGesture?.('left', currentItem)\n      } else if (direction === 'right') {\n        goToPrevious()\n        onSwipeGesture?.('right', currentItem)\n      }\n      \n      // Detect Portuguese cultural gestures\n      if (enablePortugueseGestures) {\n        const culturalPattern = detectCulturalPattern(gesture)\n        if (culturalPattern) {\n          // Handle Portuguese cultural patterns\n          announceAccessibility(t(`carousel.culturalGesture.${culturalPattern}`, `Detected ${culturalPattern} gesture`))\n        }\n      }\n    }\n  }, [goToNext, goToPrevious, onSwipeGesture, items, currentIndex, mobileConfig, enablePortugueseGestures, detectCulturalPattern, t])\n\n  const handlePullToRefresh = useCallback(async () => {\n    if (!onPullToRefresh || isPullingToRefresh) return\n    \n    setIsPullingToRefresh(true)\n    try {\n      await onPullToRefresh()\n    } finally {\n      setIsPullingToRefresh(false)\n      animate(pullDistance, 0, { duration: 0.3 })\n    }\n  }, [onPullToRefresh, isPullingToRefresh, pullDistance])\n\n  const handlePanStart = useCallback(() => {\n    if (isPlaying) {\n      togglePlay() // Pause auto-advance during interaction\n    }\n  }, [isPlaying, togglePlay])\n\n  const handlePan = useCallback((event: any, info: PanInfo) => {\n    if (screenSize !== 'mobile') return\n    \n    const { offset, velocity } = info\n    \n    // Pull to refresh gesture (downward at top)\n    if (mobileConfig.enablePullToRefresh && offset.y > 0 && currentIndex === 0) {\n      const pullAmount = Math.min(offset.y * 0.5, 100)\n      pullDistance.set(pullAmount)\n      \n      if (pullAmount > 60 && Math.abs(velocity.y) > 200) {\n        handlePullToRefresh()\n      }\n    }\n    \n    // Horizontal swipe for navigation\n    if (Math.abs(offset.x) > Math.abs(offset.y)) {\n      const progress = offset.x / 200 // Normalize to -1 to 1\n      x.set(offset.x * 0.5) // Damped movement\n    }\n  }, [screenSize, mobileConfig, currentIndex, pullDistance, handlePullToRefresh, x])\n\n  const handlePanEnd = useCallback((event: any, info: PanInfo) => {\n    const { offset, velocity } = info\n    \n    // Snap back if not enough velocity/distance\n    animate(x, 0, { duration: 0.3, ease: 'easeOut' })\n    animate(pullDistance, 0, { duration: 0.3 })\n    \n    // Resume auto-advance if it was playing\n    if (autoAdvance && !isPlaying) {\n      setTimeout(() => togglePlay(), 1000)\n    }\n  }, [x, pullDistance, autoAdvance, isPlaying, togglePlay])\n\n  const handleKeyDown = useCallback((event: KeyboardEvent<HTMLDivElement>) => {\n    switch (event.key) {\n      case 'ArrowLeft':\n        event.preventDefault()\n        goToPrevious()\n        announceAccessibility(t('carousel.navigation.previous', 'Previous item'))\n        break\n      case 'ArrowRight':\n        event.preventDefault()\n        goToNext()\n        announceAccessibility(t('carousel.navigation.next', 'Next item'))\n        break\n      case ' ':\n        event.preventDefault()\n        if (autoAdvance) {\n          togglePlay()\n          announceAccessibility(isPlaying ? t('carousel.paused', 'Carousel paused') : t('carousel.playing', 'Carousel playing'))\n        }\n        break\n      case 'Home':\n        event.preventDefault()\n        goToSlide(0)\n        announceAccessibility(t('carousel.navigation.first', 'First item'))\n        break\n      case 'End':\n        event.preventDefault()\n        goToSlide(maxIndex)\n        announceAccessibility(t('carousel.navigation.last', 'Last item'))\n        break\n    }\n  }, [goToPrevious, goToNext, togglePlay, goToSlide, maxIndex, autoAdvance, isPlaying, t])\n\n  const handleItemClick = useCallback((item: T, index: number) => {\n    onItemClick?.(item, index)\n    announceAccessibility(t('carousel.itemSelected', `Selected ${item.title[language]}`))\n  }, [onItemClick, t, language])\n\n  // Accessibility announcements\n  const announceAccessibility = useCallback((message: string) => {\n    if (!enableAccessibilityAnnouncements) return\n    \n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(message)\n      utterance.lang = language === 'pt' ? 'pt-PT' : 'en-GB'\n      utterance.volume = 0.3\n      speechSynthesis.speak(utterance)\n    }\n  }, [enableAccessibilityAnnouncements, language])\n\n  // Calculate visible items\n  const visibleItems = items.slice(currentIndex, currentIndex + currentConfig.itemsPerView)\n  \n  // Pad with items from beginning if needed (for smooth infinite scroll)\n  while (visibleItems.length < currentConfig.itemsPerView && items.length > 0) {\n    const remainingNeeded = currentConfig.itemsPerView - visibleItems.length\n    const itemsToAdd = items.slice(0, remainingNeeded)\n    visibleItems.push(...itemsToAdd)\n  }\n\n  if (loading) {\n    return (\n      <section className={`lusophone-carousel ${className}`}>\n        {(title || subtitle) && (\n          <div className=\"mb-8 text-center\">\n            {title && (\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                {title[language]}\n              </h2>\n            )}\n            {subtitle && (\n              <p className=\"text-lg text-gray-600\">\n                {subtitle[language]}\n              </p>\n            )}\n          </div>\n        )}\n        <CarouselSkeleton itemsPerView={currentConfig.itemsPerView} />\n      </section>\n    )\n  }\n\n  if (items.length === 0) {\n    const defaultEmptyMessage = {\n      en: 'No items available at the moment. Check back soon for new content!',\n      pt: 'Nenhum item dispon√≠vel no momento. Volte em breve para novo conte√∫do!'\n    }\n    const message = emptyStateMessage ? emptyStateMessage[language] : defaultEmptyMessage[language]\n    \n    return (\n      <section className={`lusophone-carousel ${className}`}>\n        {(title || subtitle) && (\n          <div className=\"mb-8 text-center\">\n            {title && (\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                {title[language]}\n              </h2>\n            )}\n            {subtitle && (\n              <p className=\"text-lg text-gray-600\">\n                {subtitle[language]}\n              </p>\n            )}\n          </div>\n        )}\n        <EmptyState message={message} />\n      </section>\n    )\n  }\n\n  const shouldShowNavigation = items.length > currentConfig.itemsPerView\n\n  return (\n    <section \n      className={`lusophone-carousel ${className} ${isOffline ? 'offline-mode' : ''}`}\n      role=\"region\"\n      aria-label={title ? title[language] : t('carousel.defaultLabel', 'Content carousel')}\n    >\n      {/* PWA Status Bar */}\n      {(isOffline || performanceMetrics.networkStatus === 'slow') && (\n        <div className=\"mb-4 p-2 bg-yellow-100 border border-yellow-200 rounded-lg flex items-center gap-2\">\n          {isOffline ? (\n            <>\n              <WifiIcon className=\"w-4 h-4 text-yellow-600\" />\n              <span className=\"text-sm text-yellow-800\">\n                {t('carousel.offline', 'Offline mode - Cached Portuguese cultural content')}\n              </span>\n            </>\n          ) : (\n            <>\n              <CloudIcon className=\"w-4 h-4 text-yellow-600\" />\n              <span className=\"text-sm text-yellow-800\">\n                {t('carousel.slowConnection', 'Slow connection - Portuguese content may load slowly')}\n              </span>\n            </>\n          )}\n          \n          {canInstall && (\n            <button\n              onClick={installPWA}\n              className=\"ml-auto text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600\"\n            >\n              {t('carousel.installApp', 'Install App')}\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Header with Performance Info */}\n      {(title || subtitle) && (\n        <div className=\"mb-8 text-center\">\n          {title && (\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n              {title[language]}\n            </h2>\n          )}\n          {subtitle && (\n            <p className=\"text-lg text-gray-600\">\n              {subtitle[language]}\n            </p>\n          )}\n          \n          {/* Performance indicator for developers */}\n          {process.env.NODE_ENV === 'development' && (\n            <div className=\"text-xs text-gray-400 mt-2\">\n              Load: {performanceMetrics.loadTime.toFixed(0)}ms | \n              Memory: {performanceMetrics.memoryUsage.toFixed(1)}MB |\n              Network: {performanceMetrics.networkStatus}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Pull to Refresh Indicator */}\n      {mobileConfig.enablePullToRefresh && screenSize === 'mobile' && (\n        <motion.div\n          style={{ y: pullDistance }}\n          className=\"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-full z-30\"\n        >\n          <div className=\"bg-white rounded-full p-2 shadow-lg border\">\n            {isPullingToRefresh ? (\n              <div className=\"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n            ) : (\n              <div className=\"w-4 h-4 text-blue-500\">‚Üì</div>\n            )}\n          </div>\n        </motion.div>\n      )}\n\n      {/* Enhanced Carousel Container */}\n      <EnhancedMobileGestures\n        onSwipe={handleSwipe}\n        onTap={(point) => {\n          // Handle tap on empty areas\n          if (screenSize === 'mobile') {\n            announceAccessibility(t('carousel.tapped', 'Carousel tapped'))\n          }\n        }}\n        enablePortugueseGestures={enablePortugueseGestures}\n        enableHapticFeedback={mobileConfig.enableHapticFeedback}\n        enableVoiceAnnouncements={enableAccessibilityAnnouncements && language === 'pt'}\n        className=\"relative\"\n        disabled={loading || items.length === 0}\n      >\n        <motion.div\n          className=\"relative\"\n          drag={screenSize === 'mobile' ? 'x' : false}\n          dragConstraints={{ left: 0, right: 0 }}\n          onDragStart={handlePanStart}\n          onDrag={handlePan}\n          onDragEnd={handlePanEnd}\n          dragElastic={0.1}\n          dragMomentum={mobileConfig.enableMomentumScrolling}\n        >\n          {/* Enhanced Navigation Controls with Mobile Touch Targets */}\n          {shouldShowNavigation && showControls && (\n            <>\n              <button\n                onClick={goToPrevious}\n                className={`absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-20 \n                           bg-white/90 hover:bg-white shadow-lg hover:shadow-xl \n                           ${screenSize === 'mobile' ? 'w-11 h-11' : 'w-12 h-12'} \n                           rounded-full flex items-center justify-center\n                           border border-primary-200 hover:border-primary-300\n                           transition-all duration-300 group touch-manipulation\n                           focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\n                           ${isTransitioning ? 'opacity-50' : ''}`}\n                aria-label={t('carousel.previous', 'Previous Portuguese cultural items')}\n                disabled={currentIndex === 0 && !autoAdvance}\n                style={{ minWidth: '44px', minHeight: '44px' }} // WCAG touch target\n              >\n                <ChevronLeftIcon className={`${screenSize === 'mobile' ? 'w-4 h-4' : 'w-5 h-5'} text-primary-600 group-hover:text-primary-800 transition-colors`} />\n              </button>\n\n              <button\n                onClick={goToNext}\n                className={`absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-20\n                           bg-white/90 hover:bg-white shadow-lg hover:shadow-xl\n                           ${screenSize === 'mobile' ? 'w-11 h-11' : 'w-12 h-12'}\n                           rounded-full flex items-center justify-center\n                           border border-primary-200 hover:border-primary-300\n                           transition-all duration-300 group touch-manipulation\n                           focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\n                           ${isTransitioning ? 'opacity-50' : ''}`}\n                aria-label={t('carousel.next', 'Next Portuguese cultural items')}\n                disabled={currentIndex >= maxIndex && !autoAdvance}\n                style={{ minWidth: '44px', minHeight: '44px' }} // WCAG touch target\n              >\n                <ChevronRightIcon className={`${screenSize === 'mobile' ? 'w-4 h-4' : 'w-5 h-5'} text-primary-600 group-hover:text-primary-800 transition-colors`} />\n              </button>\n\n              {/* Auto-advance toggle - Hidden on mobile when space is limited */}\n              {autoAdvance && screenSize !== 'mobile' && (\n                <button\n                  onClick={togglePlay}\n                  className=\"absolute right-20 top-1/2 -translate-y-1/2 z-20\n                             bg-white/90 hover:bg-white shadow-lg hover:shadow-xl\n                             w-12 h-12 rounded-full flex items-center justify-center\n                             border border-primary-200 hover:border-primary-300\n                             transition-all duration-300 group touch-manipulation\n                             focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\"\n                  aria-label={isPlaying ? t('carousel.pause', 'Pause Portuguese cultural carousel') : t('carousel.play', 'Play Portuguese cultural carousel')}\n                  style={{ minWidth: '44px', minHeight: '44px' }}\n                >\n                  {isPlaying ? (\n                    <PauseIcon className=\"w-5 h-5 text-primary-600 group-hover:text-primary-800 transition-colors\" />\n                  ) : (\n                    <PlayIcon className=\"w-5 h-5 text-primary-600 group-hover:text-primary-800 transition-colors\" />\n                  )}\n                </button>\n              )}\n            </>\n          )}\n\n          {/* Enhanced Carousel Content with Lazy Loading */}\n          <div\n            ref={carouselRef}\n            className={`overflow-hidden rounded-xl bg-gradient-to-br from-primary-50 to-gold-50 \n                       ${screenSize === 'mobile' ? 'p-4' : 'p-6'} \n                       ${isTransitioning ? 'pointer-events-none' : ''}`}\n            onKeyDown={handleKeyDown}\n            tabIndex={0}\n            role=\"group\"\n            aria-label={t('carousel.content', 'Portuguese cultural carousel content')}\n            style={{ touchAction: 'pan-x pinch-zoom' }}\n          >\n            {/* Mobile swipe hint */}\n            {screenSize === 'mobile' && mobileConfig.enableSwipeGestures && currentIndex === 0 && (\n              <div className=\"absolute top-4 right-4 z-10 bg-black/10 backdrop-blur-sm rounded-full p-2\">\n                <span className=\"text-xs text-gray-600\">‚Üê ‚Üí</span>\n              </div>\n            )}\n\n            <AnimatePresence mode=\"wait\">\n              <motion.div\n                key={currentIndex}\n                initial={{ \n                  opacity: 0, \n                  x: screenSize === 'mobile' ? 30 : 50,\n                  scale: screenSize === 'mobile' ? 0.95 : 1\n                }}\n                animate={{ \n                  opacity: 1, \n                  x: 0,\n                  scale: 1\n                }}\n                exit={{ \n                  opacity: 0, \n                  x: screenSize === 'mobile' ? -30 : -50,\n                  scale: screenSize === 'mobile' ? 0.95 : 1\n                }}\n                transition={{ \n                  duration: screenSize === 'mobile' ? 0.25 : 0.3, \n                  ease: screenSize === 'mobile' ? 'easeInOut' : [0.4, 0, 0.2, 1]\n                }}\n                className=\"grid gap-4 md:gap-6\"\n                style={{\n                  gridTemplateColumns: `repeat(${currentConfig.itemsPerView}, 1fr)`,\n                  minHeight: screenSize === 'mobile' ? '200px' : 'auto'\n                }}\n              >\n                {visibleItems.map((item, index) => {\n                  const globalIndex = currentIndex + index\n                  const shouldLazyLoad = mobileConfig.enableLazyLoading && \n                    Math.abs(globalIndex - currentIndex) > mobileConfig.preloadDistance\n\n                  return (\n                    <motion.div\n                      key={`${item.id}-${currentIndex}-${index}`}\n                      initial={{ opacity: 0, y: screenSize === 'mobile' ? 10 : 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ \n                        duration: screenSize === 'mobile' ? 0.2 : 0.3, \n                        delay: index * (screenSize === 'mobile' ? 0.05 : 0.1),\n                        ease: \"easeOut\"\n                      }}\n                      whileHover={screenSize !== 'mobile' ? { y: -4, scale: 1.02 } : undefined}\n                      whileTap={{ scale: 0.98 }}\n                      className={`cursor-pointer touch-manipulation\n                                 ${screenSize === 'mobile' ? 'active:scale-95' : ''}\n                                 ${shouldLazyLoad ? 'loading-placeholder' : ''}`}\n                      onClick={() => handleItemClick(item, globalIndex)}\n                      role=\"button\"\n                      tabIndex={0}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter' || e.key === ' ') {\n                          e.preventDefault()\n                          handleItemClick(item, globalIndex)\n                        }\n                      }}\n                      aria-label={`${item.title[language]} - ${t('carousel.item', 'Portuguese cultural item')} ${globalIndex + 1} of ${items.length}`}\n                      style={{ \n                        minHeight: screenSize === 'mobile' ? '160px' : '200px',\n                        minWidth: screenSize === 'mobile' ? '280px' : '300px'\n                      }}\n                    >\n                      {shouldLazyLoad ? (\n                        // Lazy loading placeholder\n                        <div className=\"w-full h-full bg-gray-200 rounded-lg animate-pulse flex items-center justify-center\">\n                          <div className=\"text-gray-400\">\n                            {t('carousel.loading', 'Loading Portuguese content...')}\n                          </div>\n                        </div>\n                      ) : (\n                        renderItem(item, globalIndex)\n                      )}\n                    </motion.div>\n                  )\n                })}\n              </motion.div>\n            </AnimatePresence>\n\n            {/* Touch gesture hints for mobile */}\n            {screenSize === 'mobile' && mobileConfig.enableSwipeGestures && (\n              <div className=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1\">\n                <div className=\"w-1 h-1 bg-gray-400 rounded-full opacity-50\"></div>\n                <div className=\"w-1 h-1 bg-gray-400 rounded-full opacity-75\"></div>\n                <div className=\"w-1 h-1 bg-primary-500 rounded-full\"></div>\n                <div className=\"w-1 h-1 bg-gray-400 rounded-full opacity-75\"></div>\n                <div className=\"w-1 h-1 bg-gray-400 rounded-full opacity-50\"></div>\n              </div>\n            )}\n          </div>\n\n          {/* Enhanced Mobile-Friendly Dot Indicators */}\n          {shouldShowNavigation && showDots && (\n            <div className={`flex justify-center mt-6 ${screenSize === 'mobile' ? 'space-x-3' : 'space-x-2'}`}>\n              {Array.from({ length: maxIndex + 1 }).map((_, index) => (\n                <button\n                  key={index}\n                  onClick={() => goToSlide(index)}\n                  className={`${screenSize === 'mobile' ? 'w-4 h-4' : 'w-3 h-3'} \n                             rounded-full transition-all duration-300 touch-manipulation\n                             focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\n                             ${index === currentIndex \n                               ? 'bg-primary-600 scale-125 shadow-lg' \n                               : 'bg-primary-300 hover:bg-primary-400 hover:scale-110'}`}\n                  aria-label={t('carousel.goToSlide', `Go to Portuguese cultural slide ${index + 1} of ${maxIndex + 1}`, { slide: index + 1, total: maxIndex + 1 })}\n                  style={{ minWidth: '44px', minHeight: '44px' }} // WCAG touch target\n                />\n              ))}\n              \n              {/* Progress bar for mobile */}\n              {screenSize === 'mobile' && (\n                <div className=\"absolute bottom-0 left-0 w-full h-1 bg-gray-200 rounded-full overflow-hidden\">\n                  <motion.div\n                    className=\"h-full bg-primary-500 rounded-full\"\n                    initial={{ width: '0%' }}\n                    animate={{ width: `${((currentIndex + 1) / (maxIndex + 1)) * 100}%` }}\n                    transition={{ duration: 0.3, ease: 'easeOut' }}\n                  />\n                </div>\n              )}\n            </div>\n          )}\n        </motion.div>\n      </EnhancedMobileGestures>\n\n      {/* Mobile-specific auto-advance control */}\n      {autoAdvance && screenSize === 'mobile' && (\n        <div className=\"flex justify-center mt-4\">\n          <button\n            onClick={togglePlay}\n            className=\"flex items-center gap-2 bg-white border border-primary-200 rounded-full px-4 py-2 shadow-sm hover:shadow-md transition-all duration-200\"\n            style={{ minHeight: '44px' }}\n          >\n            {isPlaying ? (\n              <PauseIcon className=\"w-4 h-4 text-primary-600\" />\n            ) : (\n              <PlayIcon className=\"w-4 h-4 text-primary-600\" />\n            )}\n            <span className=\"text-sm text-primary-700\">\n              {isPlaying ? t('carousel.pause', 'Pause') : t('carousel.play', 'Play')}\n            </span>\n          </button>\n        </div>\n      )}\n\n      {/* Enhanced Screen Reader Status with Performance Info */}\n      <div \n        className=\"sr-only\" \n        aria-live=\"polite\" \n        aria-atomic=\"true\"\n        role=\"status\"\n      >\n        {t('carousel.status', `Showing Portuguese cultural items ${currentIndex + 1} to ${Math.min(currentIndex + currentConfig.itemsPerView, items.length)} of ${items.length}. ${isOffline ? 'Offline mode active.' : ''} ${performanceMetrics.networkStatus === 'slow' ? 'Slow connection detected.' : ''}`, {\n          start: currentIndex + 1,\n          end: Math.min(currentIndex + currentConfig.itemsPerView, items.length),\n          total: items.length,\n          networkStatus: performanceMetrics.networkStatus\n        })}\n      </div>\n\n      {/* Development Performance Monitor */}\n      {process.env.NODE_ENV === 'development' && onPerformanceUpdate && (\n        <div className=\"mt-4 p-2 bg-gray-100 rounded text-xs\">\n          <div>Load: {performanceMetrics.loadTime.toFixed(0)}ms</div>\n          <div>Memory: {performanceMetrics.memoryUsage.toFixed(1)}MB</div>\n          <div>Network: {performanceMetrics.networkStatus}</div>\n          <div>Mobile Settings: Swipe={mobileConfig.enableSwipeGestures.toString()}, Haptic={mobileConfig.enableHapticFeedback.toString()}</div>\n        </div>\n      )}\n    </section>\n  )\n})\n\nexport default LusophoneCarousel\n\n/**\n * Export enhanced utility functions and types for external use\n */\nexport {\n  type WeekendEventItem,\n  type PALOPHeritageItem,\n  type WeeklyDiscoveryItem,\n  type CulturalCelebrationItem,\n  type CarouselItemType,\n  type ResponsiveConfig,\n  type MobileSettings,\n  type PWASettings,\n  type PerformanceMetrics,\n  DEFAULT_RESPONSIVE,\n  DEFAULT_MOBILE_SETTINGS,\n  DEFAULT_PWA_SETTINGS,\n  useCarouselNavigation,\n  useResponsive,\n  useMobilePerformance,\n  usePWAFeatures\n}"],"names":["DEFAULT_MOBILE_SETTINGS","DEFAULT_PWA_SETTINGS","DEFAULT_RESPONSIVE","useCarouselNavigation","useMobilePerformance","usePWAFeatures","useResponsive","mobile","itemsPerView","spacing","tablet","desktop","enableSwipeGestures","enableHapticFeedback","enableMomentumScrolling","enablePullToRefresh","touchThreshold","swipeVelocityThreshold","enableLazyLoading","preloadDistance","enableOfflineMode","enablePushNotifications","enableBackgroundSync","cacheStrategy","offlineQueueLimit","responsive","currentConfig","setCurrentConfig","useState","screenSize","setScreenSize","useEffect","updateConfig","width","window","innerWidth","addEventListener","removeEventListener","onUpdate","metrics","setMetrics","loadTime","renderTime","interactionLatency","memoryUsage","networkStatus","startTime","performance","now","updateNetworkStatus","connection","navigator","mozConnection","webkitConnection","status","onLine","effectiveType","includes","prev","updateMemoryUsage","memory","usedJSHeapSize","updateLoadTime","interval","setInterval","clearInterval","settings","isOffline","setIsOffline","installPrompt","setInstallPrompt","handleOnline","handleOffline","handleBeforeInstallPrompt","e","preventDefault","installPWA","useCallback","prompt","result","userChoice","outcome","canInstall","items","autoAdvance","autoAdvanceInterval","mobileSettings","currentIndex","setCurrentIndex","isPlaying","setIsPlaying","isTransitioning","setIsTransitioning","intervalRef","useRef","x","useMotionValue","containerRef","maxIndex","Math","max","length","goToSlide","index","withAnimation","newIndex","min","setTimeout","goToNext","nextIndex","goToPrevious","prevIndex","togglePlay","current","CarouselSkeleton","div","className","style","gridTemplateColumns","Array","from","map","_","EmptyState","message","span","p","LusophoneCarousel","memo","renderItem","title","subtitle","showControls","showDots","onItemClick","loading","emptyStateMessage","pwaSettings","onSwipeGesture","onPullToRefresh","onPerformanceUpdate","enablePortugueseGestures","enableAccessibilityAnnouncements","language","t","useLanguage","stats","loadBundle","usePortugueseBundleOptimization","carouselRef","isIntersecting","setIsIntersecting","controls","useAnimation","mobileConfig","pwaConfig","performanceMetrics","detectCulturalPattern","usePortugueseGestures","isPullingToRefresh","setIsPullingToRefresh","pullDistance","handleSwipe","gesture","direction","distance","velocity","currentItem","culturalPattern","announceAccessibility","handlePullToRefresh","animate","duration","handlePanStart","handlePan","event","info","offset","y","pullAmount","set","abs","progress","handlePanEnd","ease","handleKeyDown","key","handleItemClick","item","utterance","SpeechSynthesisUtterance","lang","volume","speechSynthesis","speak","visibleItems","slice","remainingNeeded","itemsToAdd","push","section","h2","defaultEmptyMessage","en","pt","shouldShowNavigation","role","aria-label","WifiIcon","CloudIcon","button","onClick","process","env","NODE_ENV","toFixed","motion","EnhancedMobileGestures","onSwipe","onTap","point","enableVoiceAnnouncements","disabled","drag","dragConstraints","left","right","onDragStart","onDrag","onDragEnd","dragElastic","dragMomentum","minWidth","minHeight","ChevronLeftIcon","ChevronRightIcon","PauseIcon","PlayIcon","ref","onKeyDown","tabIndex","touchAction","AnimatePresence","mode","initial","opacity","scale","exit","transition","globalIndex","shouldLazyLoad","delay","whileHover","undefined","whileTap","id","slide","total","aria-live","aria-atomic","start","end","toString"],"mappings":"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"}
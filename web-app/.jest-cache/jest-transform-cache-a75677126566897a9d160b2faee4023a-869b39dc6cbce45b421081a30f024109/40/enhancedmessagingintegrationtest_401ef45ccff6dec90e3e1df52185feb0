c675f7a391293ec0e2accf38f156ff28
/**
 * Enhanced Messaging Interface Integration Tests
 * 
 * Tests the complete voice messaging and translation system integration
 */ "use strict";
// Mock all external dependencies
jest.mock("@/services/messagingService");
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _testutils = require("react-dom/test-utils");
const _EnhancedMessagingInterface = /*#__PURE__*/ _interop_require_default(require("../../src/components/EnhancedMessagingInterface"));
const _LanguageContext = require("../../src/context/LanguageContext");
const _messagingService = require("../../src/services/messagingService");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockMessagingService = _messagingService.messagingService;
// Mock MediaRecorder and speech APIs
global.MediaRecorder = class MockMediaRecorder {
    static{
        this.isTypeSupported = jest.fn().mockReturnValue(true);
    }
    constructor(stream, options){
        this.ondataavailable = null;
        this.onstop = null;
        this.state = "inactive";
    }
    start(timeslice) {
        setTimeout(()=>{
            if (this.ondataavailable) {
                this.ondataavailable({
                    data: new Blob([
                        "mock audio data"
                    ], {
                        type: "audio/webm"
                    })
                });
            }
        }, 100);
    }
    stop() {
        setTimeout(()=>{
            if (this.onstop) this.onstop();
        }, 50);
    }
    pause() {}
    resume() {}
};
// Mock getUserMedia
Object.defineProperty(navigator, "mediaDevices", {
    value: {
        getUserMedia: jest.fn().mockResolvedValue({
            getTracks: ()=>[
                    {
                        stop: jest.fn()
                    }
                ]
        })
    },
    writable: true
});
// Mock speech recognition and synthesis
Object.defineProperty(window, "webkitSpeechRecognition", {
    value: class MockSpeechRecognition {
        start() {
            setTimeout(()=>{
                if (this.onresult) {
                    this.onresult({
                        resultIndex: 0,
                        results: [
                            {
                                0: {
                                    transcript: "Ol\xe1! Como est\xe1?",
                                    confidence: 0.95
                                },
                                isFinal: true
                            }
                        ]
                    });
                }
            }, 500);
        }
        stop() {
            if (this.onend) this.onend();
        }
        constructor(){
            this.continuous = false;
            this.interimResults = false;
            this.lang = "pt-PT";
            this.maxAlternatives = 1;
            this.onresult = null;
            this.onerror = null;
            this.onend = null;
        }
    },
    writable: true
});
Object.defineProperty(window, "speechSynthesis", {
    value: {
        speak: jest.fn(),
        cancel: jest.fn(),
        getVoices: jest.fn().mockReturnValue([])
    },
    writable: true
});
// Mock fetch for API calls
global.fetch = jest.fn();
// Mock clipboard
Object.assign(navigator, {
    clipboard: {
        writeText: jest.fn().mockResolvedValue(undefined)
    }
});
const renderWithProviders = (component)=>{
    return (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LanguageContext.LanguageProvider, {
        initialLanguage: "en",
        children: component
    }));
};
const mockConversation = {
    id: "conv-123",
    participant_ids: [
        "user-1",
        "user-2"
    ],
    connection_type: "mutual_match",
    is_active: true,
    last_activity_at: "2023-12-01T12:00:00Z",
    created_at: "2023-12-01T10:00:00Z",
    updated_at: "2023-12-01T12:00:00Z"
};
const mockMessages = [
    {
        id: "msg-1",
        conversation_id: "conv-123",
        sender_id: "user-2",
        receiver_id: "user-1",
        content: "Ol\xe1! Como est\xe1?",
        message_type: "text",
        approval_status: "auto_approved",
        is_read: false,
        is_blocked: false,
        safety_score: 0.95,
        contains_contact_info: false,
        flagged_content: null,
        created_at: "2023-12-01T11:00:00Z",
        updated_at: "2023-12-01T11:00:00Z"
    }
];
describe("Enhanced Messaging Interface Integration", ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Setup messaging service mocks
        mockMessagingService.getOrCreateConversation.mockResolvedValue(mockConversation);
        mockMessagingService.getConversationMessages.mockResolvedValue(mockMessages);
        mockMessagingService.markMessagesAsRead.mockResolvedValue();
        mockMessagingService.sendMessage.mockResolvedValue({
            ...mockMessages[0],
            id: "msg-new",
            sender_id: "user-1",
            receiver_id: "user-2",
            content: "Hello! I am fine.",
            created_at: new Date().toISOString()
        });
        fetch.mockImplementation((url)=>{
            if (url.includes("/api/translate")) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            originalText: "Ol\xe1! Como est\xe1?",
                            translatedText: "Hello! How are you?",
                            confidence: 0.95,
                            sourceLanguage: "pt-PT",
                            targetLanguage: "en"
                        })
                });
            }
            if (url.includes("/api/voice-messages")) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            id: "voice-1",
                            audioUrl: "blob://mock-audio",
                            duration: 5,
                            transcription: "Ol\xe1! Como est\xe1?",
                            timestamp: new Date().toISOString()
                        })
                });
            }
            return Promise.reject(new Error("Unknown API endpoint"));
        });
    });
    describe("Interface Initialization", ()=>{
        it("loads conversation and messages on mount", async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                targetUserImage: "/avatars/joao.jpg"
            }));
            await (0, _react.waitFor)(()=>{
                expect(mockMessagingService.getOrCreateConversation).toHaveBeenCalledWith("user-2");
                expect(mockMessagingService.getConversationMessages).toHaveBeenCalledWith("conv-123");
            });
            expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            expect(_react.screen.getByText("Ol\xe1! Como est\xe1?")).toBeInTheDocument();
        });
        it("displays connection type badge", async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/mutual match/i)).toBeInTheDocument();
            });
        });
        it("shows loading state during initialization", ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            expect(_react.screen.getByRole("status")).toBeInTheDocument();
        });
    });
    describe("Text Messaging", ()=>{
        beforeEach(async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
        });
        it("sends text message", async ()=>{
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            const sendButton = _react.screen.getByRole("button", {
                name: /send/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Hello! I am fine."
                    }
                });
                _react.fireEvent.click(sendButton);
            });
            expect(mockMessagingService.sendMessage).toHaveBeenCalledWith("conv-123", "user-2", "Hello! I am fine.");
        });
        it("clears input after sending message", async ()=>{
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            const sendButton = _react.screen.getByRole("button", {
                name: /send/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Test message"
                    }
                });
                _react.fireEvent.click(sendButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(messageInput).toHaveValue("");
            });
        });
        it("sends message on Enter key press", async ()=>{
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Keyboard message"
                    }
                });
                _react.fireEvent.keyPress(messageInput, {
                    key: "Enter",
                    code: "Enter"
                });
            });
            expect(mockMessagingService.sendMessage).toHaveBeenCalledWith("conv-123", "user-2", "Keyboard message");
        });
    });
    describe("Voice Messaging Integration", ()=>{
        beforeEach(async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                membershipTier: "ambassador",
                preferredDialect: "pt-PT",
                voiceMessagesEnabled: true
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
        });
        it("toggles voice recorder interface", async ()=>{
            const voiceButton = _react.screen.getByLabelText(/voice message/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(voiceButton);
            });
            expect(_react.screen.getByText(/hold to record/i)).toBeInTheDocument();
        });
        it("records and sends voice message", async ()=>{
            const voiceButton = _react.screen.getByLabelText(/voice message/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(voiceButton);
            });
            const recordButton = _react.screen.getByRole("button", {
                name: /record/i
            });
            // Start recording
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.mouseDown(recordButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/recording/i)).toBeInTheDocument();
            });
            // Stop recording
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.mouseUp(recordButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole("button", {
                    name: /send voice message/i
                })).toBeInTheDocument();
            });
            // Send voice message
            const sendVoiceButton = _react.screen.getByRole("button", {
                name: /send voice message/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(sendVoiceButton);
            });
            expect(fetch).toHaveBeenCalledWith("/api/voice-messages", expect.objectContaining({
                method: "POST",
                body: expect.any(FormData)
            }));
        });
        it("shows transcription during recording", async ()=>{
            const voiceButton = _react.screen.getByLabelText(/voice message/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(voiceButton);
            });
            const recordButton = _react.screen.getByRole("button", {
                name: /record/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.mouseDown(recordButton);
                await new Promise((resolve)=>setTimeout(resolve, 600)) // Wait for transcription
                ;
                _react.fireEvent.mouseUp(recordButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/olá! como está/i)).toBeInTheDocument();
            });
        });
        it("respects membership tier duration limits", async ()=>{
            expect(_react.screen.getByText(/300/)).toBeInTheDocument() // Ambassador tier limit
            ;
        });
    });
    describe("Translation Integration", ()=>{
        beforeEach(async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                translationEnabled: true
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
        });
        it("translates existing messages", async ()=>{
            const translateButton = _react.screen.getByLabelText(/translate/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(translateButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(fetch).toHaveBeenCalledWith("/api/translate-message", expect.objectContaining({
                    method: "POST",
                    body: JSON.stringify(expect.objectContaining({
                        text: "Ol\xe1! Como est\xe1?"
                    }))
                }));
            });
        });
        it("enables auto-translation setting", async ()=>{
            const settingsButton = _react.screen.getByLabelText(/settings/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(settingsButton);
            });
            const autoTranslateToggle = _react.screen.getByLabelText(/auto-translate/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(autoTranslateToggle);
            });
            expect(autoTranslateToggle).toBeChecked();
        });
        it("shows translation panel for new messages", async ()=>{
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            const translateButton = _react.screen.getByLabelText(/translate/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Bom dia!"
                    }
                });
                _react.fireEvent.click(translateButton);
            });
            expect(_react.screen.getByText(/translating/i)).toBeInTheDocument();
        });
    });
    describe("Portuguese Cultural Features", ()=>{
        beforeEach(async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
        });
        it("toggles Portuguese expressions panel", async ()=>{
            const culturalButton = _react.screen.getByLabelText(/portuguese expressions/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(culturalButton);
            });
            expect(_react.screen.getByText(/portuguese communication/i)).toBeInTheDocument();
        });
        it("inserts selected expression into message input", async ()=>{
            const culturalButton = _react.screen.getByLabelText(/portuguese expressions/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(culturalButton);
            });
            // Wait for panel to load and mock selecting an expression
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/portuguese communication/i)).toBeInTheDocument();
            });
            // This would normally trigger from the PortugueseCommunicationPanel
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "\uD83C\uDDF5\uD83C\uDDF9 Ol\xe1! Tudo bem?"
                    }
                });
            });
            expect(messageInput).toHaveValue("\uD83C\uDDF5\uD83C\uDDF9 Ol\xe1! Tudo bem?");
        });
        it("shows cultural greetings based on time of day", async ()=>{
            const culturalButton = _react.screen.getByLabelText(/portuguese expressions/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(culturalButton);
            });
            await (0, _react.waitFor)(()=>{
                // Should show appropriate greeting for current time
                expect(_react.screen.getByText(/greetings/i)).toBeInTheDocument();
            });
        });
    });
    describe("Settings and Preferences", ()=>{
        beforeEach(async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
        });
        it("toggles settings panel", async ()=>{
            const settingsButton = _react.screen.getByLabelText(/settings/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(settingsButton);
            });
            expect(_react.screen.getByText(/enable voice messages/i)).toBeInTheDocument();
            expect(_react.screen.getByText(/enable auto-translation/i)).toBeInTheDocument();
        });
        it("saves preference changes", async ()=>{
            const settingsButton = _react.screen.getByLabelText(/settings/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(settingsButton);
            });
            const voiceToggle = _react.screen.getByLabelText(/enable voice messages/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(voiceToggle);
            });
            // Voice recorder button should be hidden/disabled
            expect(_react.screen.queryByLabelText(/voice message/i)).not.toBeInTheDocument();
        });
    });
    describe("Error Handling", ()=>{
        it("handles messaging service errors", async ()=>{
            mockMessagingService.sendMessage.mockRejectedValue(new Error("Network error"));
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            const sendButton = _react.screen.getByRole("button", {
                name: /send/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Test message"
                    }
                });
                _react.fireEvent.click(sendButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/failed to send message/i)).toBeInTheDocument();
            });
        });
        it("handles translation API errors", async ()=>{
            fetch.mockImplementation((url)=>{
                if (url.includes("/api/translate")) {
                    return Promise.reject(new Error("Translation API error"));
                }
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({})
                });
            });
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                translationEnabled: true
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
            const translateButton = _react.screen.getByLabelText(/translate/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(translateButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/translation failed/i)).toBeInTheDocument();
            });
        });
        it("handles voice recording permission errors", async ()=>{
            navigator.mediaDevices.getUserMedia = jest.fn().mockRejectedValue(new Error("Permission denied"));
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                voiceMessagesEnabled: true
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
            const voiceButton = _react.screen.getByLabelText(/voice message/i);
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.click(voiceButton);
            });
            const recordButton = _react.screen.getByRole("button", {
                name: /record/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.mouseDown(recordButton);
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/microphone permission/i)).toBeInTheDocument();
            });
        });
    });
    describe("Performance and Optimization", ()=>{
        it("only loads voice recorder when needed", async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                voiceMessagesEnabled: false
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
            // Voice message button should not be visible
            expect(_react.screen.queryByLabelText(/voice message/i)).not.toBeInTheDocument();
        });
        it("debounces translation requests", async ()=>{
            jest.useFakeTimers();
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva",
                autoTranslate: true
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            // Type quickly (should debounce)
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "H"
                    }
                });
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "He"
                    }
                });
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Hello"
                    }
                });
            });
            // Fast-forward past debounce time
            (0, _testutils.act)(()=>{
                jest.advanceTimersByTime(1000);
            });
            // Should only make one translation request
            expect(fetch).toHaveBeenCalledTimes(1);
            jest.useRealTimers();
        });
    });
    describe("Accessibility Features", ()=>{
        beforeEach(async ()=>{
            renderWithProviders(/*#__PURE__*/ (0, _jsxruntime.jsx)(_EnhancedMessagingInterface.default, {
                targetUserId: "user-2",
                targetUserName: "Jo\xe3o Silva"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText("Jo\xe3o Silva")).toBeInTheDocument();
            });
        });
        it("provides proper ARIA labels for all controls", ()=>{
            expect(_react.screen.getByLabelText(/type a message/i)).toBeInTheDocument();
            expect(_react.screen.getByLabelText(/send/i)).toBeInTheDocument();
            expect(_react.screen.getByLabelText(/settings/i)).toBeInTheDocument();
        });
        it("supports keyboard navigation between controls", async ()=>{
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            const sendButton = _react.screen.getByRole("button", {
                name: /send/i
            });
            // Tab navigation should work
            await (0, _testutils.act)(async ()=>{
                messageInput.focus();
                _react.fireEvent.keyDown(messageInput, {
                    key: "Tab"
                });
            });
            expect(sendButton).toHaveFocus();
        });
        it("provides screen reader announcements for status changes", async ()=>{
            const messageInput = _react.screen.getByPlaceholderText(/type a message/i);
            const sendButton = _react.screen.getByRole("button", {
                name: /send/i
            });
            await (0, _testutils.act)(async ()=>{
                _react.fireEvent.change(messageInput, {
                    target: {
                        value: "Test message"
                    }
                });
                _react.fireEvent.click(sendButton);
            });
            // Should have status announcement for sent message
            expect(_react.screen.getByRole("status")).toBeInTheDocument();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvX190ZXN0c19fL2ludGVncmF0aW9uL2VuaGFuY2VkLW1lc3NhZ2luZy1pbnRlZ3JhdGlvbi50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuaGFuY2VkIE1lc3NhZ2luZyBJbnRlcmZhY2UgSW50ZWdyYXRpb24gVGVzdHNcbiAqIFxuICogVGVzdHMgdGhlIGNvbXBsZXRlIHZvaWNlIG1lc3NhZ2luZyBhbmQgdHJhbnNsYXRpb24gc3lzdGVtIGludGVncmF0aW9uXG4gKi9cblxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgeyBhY3QgfSBmcm9tICdyZWFjdC1kb20vdGVzdC11dGlscydcbmltcG9ydCBFbmhhbmNlZE1lc3NhZ2luZ0ludGVyZmFjZSBmcm9tICdAL2NvbXBvbmVudHMvRW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2UnXG5pbXBvcnQgeyBMYW5ndWFnZVByb3ZpZGVyIH0gZnJvbSAnQC9jb250ZXh0L0xhbmd1YWdlQ29udGV4dCdcbmltcG9ydCB7IG1lc3NhZ2luZ1NlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL21lc3NhZ2luZ1NlcnZpY2UnXG5cbi8vIE1vY2sgYWxsIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAL3NlcnZpY2VzL21lc3NhZ2luZ1NlcnZpY2UnKVxuY29uc3QgbW9ja01lc3NhZ2luZ1NlcnZpY2UgPSBtZXNzYWdpbmdTZXJ2aWNlIGFzIGplc3QuTW9ja2VkPHR5cGVvZiBtZXNzYWdpbmdTZXJ2aWNlPlxuXG4vLyBNb2NrIE1lZGlhUmVjb3JkZXIgYW5kIHNwZWVjaCBBUElzXG5nbG9iYWwuTWVkaWFSZWNvcmRlciA9IGNsYXNzIE1vY2tNZWRpYVJlY29yZGVyIHtcbiAgc3RhdGljIGlzVHlwZVN1cHBvcnRlZCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSlcbiAgb25kYXRhYXZhaWxhYmxlOiAoKGV2ZW50OiBhbnkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGxcbiAgb25zdG9wOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbFxuICBcbiAgY29uc3RydWN0b3Ioc3RyZWFtOiBNZWRpYVN0cmVhbSwgb3B0aW9ucz86IE1lZGlhUmVjb3JkZXJPcHRpb25zKSB7fVxuICBcbiAgc3RhcnQodGltZXNsaWNlPzogbnVtYmVyKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5vbmRhdGFhdmFpbGFibGUpIHtcbiAgICAgICAgdGhpcy5vbmRhdGFhdmFpbGFibGUoeyBcbiAgICAgICAgICBkYXRhOiBuZXcgQmxvYihbJ21vY2sgYXVkaW8gZGF0YSddLCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDEwMClcbiAgfVxuICBcbiAgc3RvcCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9uc3RvcCkgdGhpcy5vbnN0b3AoKVxuICAgIH0sIDUwKVxuICB9XG4gIFxuICBwYXVzZSgpIHt9XG4gIHJlc3VtZSgpIHt9XG4gIHN0YXRlOiAnaW5hY3RpdmUnIHwgJ3JlY29yZGluZycgfCAncGF1c2VkJyA9ICdpbmFjdGl2ZSdcbn0gYXMgYW55XG5cbi8vIE1vY2sgZ2V0VXNlck1lZGlhXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnbWVkaWFEZXZpY2VzJywge1xuICB2YWx1ZToge1xuICAgIGdldFVzZXJNZWRpYTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGdldFRyYWNrczogKCkgPT4gW3sgc3RvcDogamVzdC5mbigpIH1dXG4gICAgfSlcbiAgfSxcbiAgd3JpdGFibGU6IHRydWVcbn0pXG5cbi8vIE1vY2sgc3BlZWNoIHJlY29nbml0aW9uIGFuZCBzeW50aGVzaXNcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICd3ZWJraXRTcGVlY2hSZWNvZ25pdGlvbicsIHtcbiAgdmFsdWU6IGNsYXNzIE1vY2tTcGVlY2hSZWNvZ25pdGlvbiB7XG4gICAgY29udGludW91cyA9IGZhbHNlXG4gICAgaW50ZXJpbVJlc3VsdHMgPSBmYWxzZVxuICAgIGxhbmcgPSAncHQtUFQnXG4gICAgbWF4QWx0ZXJuYXRpdmVzID0gMVxuICAgIG9ucmVzdWx0OiAoKGV2ZW50OiBhbnkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGxcbiAgICBvbmVycm9yOiAoKGV2ZW50OiBhbnkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGxcbiAgICBvbmVuZDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICBzdGFydCgpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5vbnJlc3VsdCkge1xuICAgICAgICAgIHRoaXMub25yZXN1bHQoe1xuICAgICAgICAgICAgcmVzdWx0SW5kZXg6IDAsXG4gICAgICAgICAgICByZXN1bHRzOiBbe1xuICAgICAgICAgICAgICAwOiB7IHRyYW5zY3JpcHQ6ICdPbMOhISBDb21vIGVzdMOhPycsIGNvbmZpZGVuY2U6IDAuOTUgfSxcbiAgICAgICAgICAgICAgaXNGaW5hbDogdHJ1ZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9LCA1MDApXG4gICAgfVxuICAgIFxuICAgIHN0b3AoKSB7XG4gICAgICBpZiAodGhpcy5vbmVuZCkgdGhpcy5vbmVuZCgpXG4gICAgfVxuICB9LFxuICB3cml0YWJsZTogdHJ1ZVxufSlcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3NwZWVjaFN5bnRoZXNpcycsIHtcbiAgdmFsdWU6IHtcbiAgICBzcGVhazogamVzdC5mbigpLFxuICAgIGNhbmNlbDogamVzdC5mbigpLFxuICAgIGdldFZvaWNlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSlcbiAgfSxcbiAgd3JpdGFibGU6IHRydWVcbn0pXG5cbi8vIE1vY2sgZmV0Y2ggZm9yIEFQSSBjYWxsc1xuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpXG5cbi8vIE1vY2sgY2xpcGJvYXJkXG5PYmplY3QuYXNzaWduKG5hdmlnYXRvciwge1xuICBjbGlwYm9hcmQ6IHtcbiAgICB3cml0ZVRleHQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gIH1cbn0pXG5cbmNvbnN0IHJlbmRlcldpdGhQcm92aWRlcnMgPSAoY29tcG9uZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIHJlbmRlcihcbiAgICA8TGFuZ3VhZ2VQcm92aWRlciBpbml0aWFsTGFuZ3VhZ2U9XCJlblwiPlxuICAgICAge2NvbXBvbmVudH1cbiAgICA8L0xhbmd1YWdlUHJvdmlkZXI+XG4gIClcbn1cblxuY29uc3QgbW9ja0NvbnZlcnNhdGlvbiA9IHtcbiAgaWQ6ICdjb252LTEyMycsXG4gIHBhcnRpY2lwYW50X2lkczogWyd1c2VyLTEnLCAndXNlci0yJ10sXG4gIGNvbm5lY3Rpb25fdHlwZTogJ211dHVhbF9tYXRjaCcgYXMgY29uc3QsXG4gIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgbGFzdF9hY3Rpdml0eV9hdDogJzIwMjMtMTItMDFUMTI6MDA6MDBaJyxcbiAgY3JlYXRlZF9hdDogJzIwMjMtMTItMDFUMTA6MDA6MDBaJyxcbiAgdXBkYXRlZF9hdDogJzIwMjMtMTItMDFUMTI6MDA6MDBaJ1xufVxuXG5jb25zdCBtb2NrTWVzc2FnZXMgPSBbXG4gIHtcbiAgICBpZDogJ21zZy0xJyxcbiAgICBjb252ZXJzYXRpb25faWQ6ICdjb252LTEyMycsXG4gICAgc2VuZGVyX2lkOiAndXNlci0yJyxcbiAgICByZWNlaXZlcl9pZDogJ3VzZXItMScsXG4gICAgY29udGVudDogJ09sw6EhIENvbW8gZXN0w6E/JyxcbiAgICBtZXNzYWdlX3R5cGU6ICd0ZXh0JyBhcyBjb25zdCxcbiAgICBhcHByb3ZhbF9zdGF0dXM6ICdhdXRvX2FwcHJvdmVkJyBhcyBjb25zdCxcbiAgICBpc19yZWFkOiBmYWxzZSxcbiAgICBpc19ibG9ja2VkOiBmYWxzZSxcbiAgICBzYWZldHlfc2NvcmU6IDAuOTUsXG4gICAgY29udGFpbnNfY29udGFjdF9pbmZvOiBmYWxzZSxcbiAgICBmbGFnZ2VkX2NvbnRlbnQ6IG51bGwsXG4gICAgY3JlYXRlZF9hdDogJzIwMjMtMTItMDFUMTE6MDA6MDBaJyxcbiAgICB1cGRhdGVkX2F0OiAnMjAyMy0xMi0wMVQxMTowMDowMFonXG4gIH1cbl1cblxuZGVzY3JpYmUoJ0VuaGFuY2VkIE1lc3NhZ2luZyBJbnRlcmZhY2UgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgXG4gICAgLy8gU2V0dXAgbWVzc2FnaW5nIHNlcnZpY2UgbW9ja3NcbiAgICBtb2NrTWVzc2FnaW5nU2VydmljZS5nZXRPckNyZWF0ZUNvbnZlcnNhdGlvbi5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29udmVyc2F0aW9uKVxuICAgIG1vY2tNZXNzYWdpbmdTZXJ2aWNlLmdldENvbnZlcnNhdGlvbk1lc3NhZ2VzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tNZXNzYWdlcylcbiAgICBtb2NrTWVzc2FnaW5nU2VydmljZS5tYXJrTWVzc2FnZXNBc1JlYWQubW9ja1Jlc29sdmVkVmFsdWUoKVxuICAgIG1vY2tNZXNzYWdpbmdTZXJ2aWNlLnNlbmRNZXNzYWdlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIC4uLm1vY2tNZXNzYWdlc1swXSxcbiAgICAgIGlkOiAnbXNnLW5ldycsXG4gICAgICBzZW5kZXJfaWQ6ICd1c2VyLTEnLFxuICAgICAgcmVjZWl2ZXJfaWQ6ICd1c2VyLTInLFxuICAgICAgY29udGVudDogJ0hlbGxvISBJIGFtIGZpbmUuJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG5cbiAgICAvLyBNb2NrIGZldGNoIGZvciB0cmFuc2xhdGlvbiBhbmQgdm9pY2UgQVBJc1xuICAgIDsoZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL3RyYW5zbGF0ZScpKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvcmlnaW5hbFRleHQ6ICdPbMOhISBDb21vIGVzdMOhPycsXG4gICAgICAgICAgICB0cmFuc2xhdGVkVGV4dDogJ0hlbGxvISBIb3cgYXJlIHlvdT8nLFxuICAgICAgICAgICAgY29uZmlkZW5jZTogMC45NSxcbiAgICAgICAgICAgIHNvdXJjZUxhbmd1YWdlOiAncHQtUFQnLFxuICAgICAgICAgICAgdGFyZ2V0TGFuZ3VhZ2U6ICdlbidcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL3ZvaWNlLW1lc3NhZ2VzJykpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGlkOiAndm9pY2UtMScsXG4gICAgICAgICAgICBhdWRpb1VybDogJ2Jsb2I6Ly9tb2NrLWF1ZGlvJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA1LFxuICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogJ09sw6EhIENvbW8gZXN0w6E/JyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBBUEkgZW5kcG9pbnQnKSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdJbnRlcmZhY2UgSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ2xvYWRzIGNvbnZlcnNhdGlvbiBhbmQgbWVzc2FnZXMgb24gbW91bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8RW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2VcbiAgICAgICAgICB0YXJnZXRVc2VySWQ9XCJ1c2VyLTJcIlxuICAgICAgICAgIHRhcmdldFVzZXJOYW1lPVwiSm/Do28gU2lsdmFcIlxuICAgICAgICAgIHRhcmdldFVzZXJJbWFnZT1cIi9hdmF0YXJzL2pvYW8uanBnXCJcbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrTWVzc2FnaW5nU2VydmljZS5nZXRPckNyZWF0ZUNvbnZlcnNhdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3VzZXItMicpXG4gICAgICAgIGV4cGVjdChtb2NrTWVzc2FnaW5nU2VydmljZS5nZXRDb252ZXJzYXRpb25NZXNzYWdlcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2NvbnYtMTIzJylcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnT2zDoSEgQ29tbyBlc3TDoT8nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG5cbiAgICBpdCgnZGlzcGxheXMgY29ubmVjdGlvbiB0eXBlIGJhZGdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEVuaGFuY2VkTWVzc2FnaW5nSW50ZXJmYWNlXG4gICAgICAgICAgdGFyZ2V0VXNlcklkPVwidXNlci0yXCJcbiAgICAgICAgICB0YXJnZXRVc2VyTmFtZT1cIkpvw6NvIFNpbHZhXCJcbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9tdXR1YWwgbWF0Y2gvaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdzaG93cyBsb2FkaW5nIHN0YXRlIGR1cmluZyBpbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxFbmhhbmNlZE1lc3NhZ2luZ0ludGVyZmFjZVxuICAgICAgICAgIHRhcmdldFVzZXJJZD1cInVzZXItMlwiXG4gICAgICAgICAgdGFyZ2V0VXNlck5hbWU9XCJKb8OjbyBTaWx2YVwiXG4gICAgICAgIC8+XG4gICAgICApXG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdzdGF0dXMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1RleHQgTWVzc2FnaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEVuaGFuY2VkTWVzc2FnaW5nSW50ZXJmYWNlXG4gICAgICAgICAgdGFyZ2V0VXNlcklkPVwidXNlci0yXCJcbiAgICAgICAgICB0YXJnZXRVc2VyTmFtZT1cIkpvw6NvIFNpbHZhXCJcbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgnc2VuZHMgdGV4dCBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC90eXBlIGEgbWVzc2FnZS9pKVxuICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQvaSB9KVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdIZWxsbyEgSSBhbSBmaW5lLicgfSB9KVxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2VuZEJ1dHRvbilcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChtb2NrTWVzc2FnaW5nU2VydmljZS5zZW5kTWVzc2FnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdjb252LTEyMycsXG4gICAgICAgICd1c2VyLTInLFxuICAgICAgICAnSGVsbG8hIEkgYW0gZmluZS4nXG4gICAgICApXG4gICAgfSlcblxuICAgIGl0KCdjbGVhcnMgaW5wdXQgYWZ0ZXIgc2VuZGluZyBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC90eXBlIGEgbWVzc2FnZS9pKVxuICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQvaSB9KVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdUZXN0IG1lc3NhZ2UnIH0gfSlcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNlbmRCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1lc3NhZ2VJbnB1dCkudG9IYXZlVmFsdWUoJycpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgnc2VuZHMgbWVzc2FnZSBvbiBFbnRlciBrZXkgcHJlc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL3R5cGUgYSBtZXNzYWdlL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jaGFuZ2UobWVzc2FnZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ0tleWJvYXJkIG1lc3NhZ2UnIH0gfSlcbiAgICAgICAgZmlyZUV2ZW50LmtleVByZXNzKG1lc3NhZ2VJbnB1dCwgeyBrZXk6ICdFbnRlcicsIGNvZGU6ICdFbnRlcicgfSlcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChtb2NrTWVzc2FnaW5nU2VydmljZS5zZW5kTWVzc2FnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdjb252LTEyMycsXG4gICAgICAgICd1c2VyLTInLFxuICAgICAgICAnS2V5Ym9hcmQgbWVzc2FnZSdcbiAgICAgIClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdWb2ljZSBNZXNzYWdpbmcgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8RW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2VcbiAgICAgICAgICB0YXJnZXRVc2VySWQ9XCJ1c2VyLTJcIlxuICAgICAgICAgIHRhcmdldFVzZXJOYW1lPVwiSm/Do28gU2lsdmFcIlxuICAgICAgICAgIG1lbWJlcnNoaXBUaWVyPVwiYW1iYXNzYWRvclwiXG4gICAgICAgICAgcHJlZmVycmVkRGlhbGVjdD1cInB0LVBUXCJcbiAgICAgICAgICB2b2ljZU1lc3NhZ2VzRW5hYmxlZD17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgndG9nZ2xlcyB2b2ljZSByZWNvcmRlciBpbnRlcmZhY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvdm9pY2UgbWVzc2FnZS9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodm9pY2VCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvaG9sZCB0byByZWNvcmQvaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ3JlY29yZHMgYW5kIHNlbmRzIHZvaWNlIG1lc3NhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvdm9pY2UgbWVzc2FnZS9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodm9pY2VCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZWNvcmRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yZWNvcmQvaSB9KVxuXG4gICAgICAvLyBTdGFydCByZWNvcmRpbmdcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5tb3VzZURvd24ocmVjb3JkQnV0dG9uKVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9yZWNvcmRpbmcvaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIH0pXG5cbiAgICAgIC8vIFN0b3AgcmVjb3JkaW5nXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQubW91c2VVcChyZWNvcmRCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQgdm9pY2UgbWVzc2FnZS9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuXG4gICAgICAvLyBTZW5kIHZvaWNlIG1lc3NhZ2VcbiAgICAgIGNvbnN0IHNlbmRWb2ljZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQgdm9pY2UgbWVzc2FnZS9pIH0pXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzZW5kVm9pY2VCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QoZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3ZvaWNlLW1lc3NhZ2VzJywgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZXhwZWN0LmFueShGb3JtRGF0YSlcbiAgICAgIH0pKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvd3MgdHJhbnNjcmlwdGlvbiBkdXJpbmcgcmVjb3JkaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgdm9pY2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3ZvaWNlIG1lc3NhZ2UvaSlcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHZvaWNlQnV0dG9uKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVjb3JkQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcmVjb3JkL2kgfSlcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50Lm1vdXNlRG93bihyZWNvcmRCdXR0b24pXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA2MDApKSAvLyBXYWl0IGZvciB0cmFuc2NyaXB0aW9uXG4gICAgICAgIGZpcmVFdmVudC5tb3VzZVVwKHJlY29yZEJ1dHRvbilcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvb2zDoSEgY29tbyBlc3TDoS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3Jlc3BlY3RzIG1lbWJlcnNoaXAgdGllciBkdXJhdGlvbiBsaW1pdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvMzAwLykpLnRvQmVJblRoZURvY3VtZW50KCkgLy8gQW1iYXNzYWRvciB0aWVyIGxpbWl0XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnVHJhbnNsYXRpb24gSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8RW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2VcbiAgICAgICAgICB0YXJnZXRVc2VySWQ9XCJ1c2VyLTJcIlxuICAgICAgICAgIHRhcmdldFVzZXJOYW1lPVwiSm/Do28gU2lsdmFcIlxuICAgICAgICAgIHRyYW5zbGF0aW9uRW5hYmxlZD17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgndHJhbnNsYXRlcyBleGlzdGluZyBtZXNzYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvdHJhbnNsYXRlL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayh0cmFuc2xhdGVCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS90cmFuc2xhdGUtbWVzc2FnZScsIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICB0ZXh0OiAnT2zDoSEgQ29tbyBlc3TDoT8nXG4gICAgICAgICAgfSkpXG4gICAgICAgIH0pKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ2VuYWJsZXMgYXV0by10cmFuc2xhdGlvbiBzZXR0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2V0dGluZ3NCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3NldHRpbmdzL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzZXR0aW5nc0J1dHRvbilcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGF1dG9UcmFuc2xhdGVUb2dnbGUgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2F1dG8tdHJhbnNsYXRlL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhhdXRvVHJhbnNsYXRlVG9nZ2xlKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KGF1dG9UcmFuc2xhdGVUb2dnbGUpLnRvQmVDaGVja2VkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3dzIHRyYW5zbGF0aW9uIHBhbmVsIGZvciBuZXcgbWVzc2FnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL3R5cGUgYSBtZXNzYWdlL2kpXG4gICAgICBjb25zdCB0cmFuc2xhdGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3RyYW5zbGF0ZS9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdCb20gZGlhIScgfSB9KVxuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodHJhbnNsYXRlQnV0dG9uKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3RyYW5zbGF0aW5nL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnUG9ydHVndWVzZSBDdWx0dXJhbCBGZWF0dXJlcycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxFbmhhbmNlZE1lc3NhZ2luZ0ludGVyZmFjZVxuICAgICAgICAgIHRhcmdldFVzZXJJZD1cInVzZXItMlwiXG4gICAgICAgICAgdGFyZ2V0VXNlck5hbWU9XCJKb8OjbyBTaWx2YVwiXG4gICAgICAgIC8+XG4gICAgICApXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSm/Do28gU2lsdmEnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3RvZ2dsZXMgUG9ydHVndWVzZSBleHByZXNzaW9ucyBwYW5lbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1bHR1cmFsQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wb3J0dWd1ZXNlIGV4cHJlc3Npb25zL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhjdWx0dXJhbEJ1dHRvbilcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9wb3J0dWd1ZXNlIGNvbW11bmljYXRpb24vaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ2luc2VydHMgc2VsZWN0ZWQgZXhwcmVzc2lvbiBpbnRvIG1lc3NhZ2UgaW5wdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjdWx0dXJhbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcG9ydHVndWVzZSBleHByZXNzaW9ucy9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2soY3VsdHVyYWxCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICAvLyBXYWl0IGZvciBwYW5lbCB0byBsb2FkIGFuZCBtb2NrIHNlbGVjdGluZyBhbiBleHByZXNzaW9uXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3BvcnR1Z3Vlc2UgY29tbXVuaWNhdGlvbi9pKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgfSlcblxuICAgICAgLy8gVGhpcyB3b3VsZCBub3JtYWxseSB0cmlnZ2VyIGZyb20gdGhlIFBvcnR1Z3Vlc2VDb21tdW5pY2F0aW9uUGFuZWxcbiAgICAgIGNvbnN0IG1lc3NhZ2VJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvdHlwZSBhIG1lc3NhZ2UvaSlcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNoYW5nZShtZXNzYWdlSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAn8J+HtfCfh7kgT2zDoSEgVHVkbyBiZW0/JyB9IH0pXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QobWVzc2FnZUlucHV0KS50b0hhdmVWYWx1ZSgn8J+HtfCfh7kgT2zDoSEgVHVkbyBiZW0/JylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3dzIGN1bHR1cmFsIGdyZWV0aW5ncyBiYXNlZCBvbiB0aW1lIG9mIGRheScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1bHR1cmFsQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wb3J0dWd1ZXNlIGV4cHJlc3Npb25zL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhjdWx0dXJhbEJ1dHRvbilcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBTaG91bGQgc2hvdyBhcHByb3ByaWF0ZSBncmVldGluZyBmb3IgY3VycmVudCB0aW1lXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9ncmVldGluZ3MvaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnU2V0dGluZ3MgYW5kIFByZWZlcmVuY2VzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEVuaGFuY2VkTWVzc2FnaW5nSW50ZXJmYWNlXG4gICAgICAgICAgdGFyZ2V0VXNlcklkPVwidXNlci0yXCJcbiAgICAgICAgICB0YXJnZXRVc2VyTmFtZT1cIkpvw6NvIFNpbHZhXCJcbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgndG9nZ2xlcyBzZXR0aW5ncyBwYW5lbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNldHRpbmdzQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zZXR0aW5ncy9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2V0dGluZ3NCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZW5hYmxlIHZvaWNlIG1lc3NhZ2VzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZW5hYmxlIGF1dG8tdHJhbnNsYXRpb24vaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ3NhdmVzIHByZWZlcmVuY2UgY2hhbmdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNldHRpbmdzQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zZXR0aW5ncy9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2V0dGluZ3NCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB2b2ljZVRvZ2dsZSA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZW5hYmxlIHZvaWNlIG1lc3NhZ2VzL2kpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayh2b2ljZVRvZ2dsZSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFZvaWNlIHJlY29yZGVyIGJ1dHRvbiBzaG91bGQgYmUgaGlkZGVuL2Rpc2FibGVkXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlMYWJlbFRleHQoL3ZvaWNlIG1lc3NhZ2UvaSkpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ2hhbmRsZXMgbWVzc2FnaW5nIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja01lc3NhZ2luZ1NlcnZpY2Uuc2VuZE1lc3NhZ2UubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpXG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxFbmhhbmNlZE1lc3NhZ2luZ0ludGVyZmFjZVxuICAgICAgICAgIHRhcmdldFVzZXJJZD1cInVzZXItMlwiXG4gICAgICAgICAgdGFyZ2V0VXNlck5hbWU9XCJKb8OjbyBTaWx2YVwiXG4gICAgICAgIC8+XG4gICAgICApXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSm/Do28gU2lsdmEnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC90eXBlIGEgbWVzc2FnZS9pKVxuICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQvaSB9KVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdUZXN0IG1lc3NhZ2UnIH0gfSlcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNlbmRCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UvaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdoYW5kbGVzIHRyYW5zbGF0aW9uIEFQSSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICA7KGZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL3RyYW5zbGF0ZScpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVHJhbnNsYXRpb24gQVBJIGVycm9yJykpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IG9rOiB0cnVlLCBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pIH0pXG4gICAgICB9KVxuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8RW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2VcbiAgICAgICAgICB0YXJnZXRVc2VySWQ9XCJ1c2VyLTJcIlxuICAgICAgICAgIHRhcmdldFVzZXJOYW1lPVwiSm/Do28gU2lsdmFcIlxuICAgICAgICAgIHRyYW5zbGF0aW9uRW5hYmxlZD17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB0cmFuc2xhdGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3RyYW5zbGF0ZS9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodHJhbnNsYXRlQnV0dG9uKVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC90cmFuc2xhdGlvbiBmYWlsZWQvaSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdoYW5kbGVzIHZvaWNlIHJlY29yZGluZyBwZXJtaXNzaW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoJ1Blcm1pc3Npb24gZGVuaWVkJylcbiAgICAgIClcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEVuaGFuY2VkTWVzc2FnaW5nSW50ZXJmYWNlXG4gICAgICAgICAgdGFyZ2V0VXNlcklkPVwidXNlci0yXCJcbiAgICAgICAgICB0YXJnZXRVc2VyTmFtZT1cIkpvw6NvIFNpbHZhXCJcbiAgICAgICAgICB2b2ljZU1lc3NhZ2VzRW5hYmxlZD17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvdm9pY2UgbWVzc2FnZS9pKVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodm9pY2VCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZWNvcmRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yZWNvcmQvaSB9KVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQubW91c2VEb3duKHJlY29yZEJ1dHRvbilcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvbWljcm9waG9uZSBwZXJtaXNzaW9uL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIGFuZCBPcHRpbWl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ29ubHkgbG9hZHMgdm9pY2UgcmVjb3JkZXIgd2hlbiBuZWVkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8RW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2VcbiAgICAgICAgICB0YXJnZXRVc2VySWQ9XCJ1c2VyLTJcIlxuICAgICAgICAgIHRhcmdldFVzZXJOYW1lPVwiSm/Do28gU2lsdmFcIlxuICAgICAgICAgIHZvaWNlTWVzc2FnZXNFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuXG4gICAgICAvLyBWb2ljZSBtZXNzYWdlIGJ1dHRvbiBzaG91bGQgbm90IGJlIHZpc2libGVcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeUxhYmVsVGV4dCgvdm9pY2UgbWVzc2FnZS9pKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ2RlYm91bmNlcyB0cmFuc2xhdGlvbiByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGplc3QudXNlRmFrZVRpbWVycygpXG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxFbmhhbmNlZE1lc3NhZ2luZ0ludGVyZmFjZVxuICAgICAgICAgIHRhcmdldFVzZXJJZD1cInVzZXItMlwiXG4gICAgICAgICAgdGFyZ2V0VXNlck5hbWU9XCJKb8OjbyBTaWx2YVwiXG4gICAgICAgICAgYXV0b1RyYW5zbGF0ZT17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKb8OjbyBTaWx2YScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBtZXNzYWdlSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL3R5cGUgYSBtZXNzYWdlL2kpXG5cbiAgICAgIC8vIFR5cGUgcXVpY2tseSAoc2hvdWxkIGRlYm91bmNlKVxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNoYW5nZShtZXNzYWdlSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnSCcgfSB9KVxuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdIZScgfSB9KVxuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdIZWxsbycgfSB9KVxuICAgICAgfSlcblxuICAgICAgLy8gRmFzdC1mb3J3YXJkIHBhc3QgZGVib3VuY2UgdGltZVxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDEwMDApXG4gICAgICB9KVxuXG4gICAgICAvLyBTaG91bGQgb25seSBtYWtlIG9uZSB0cmFuc2xhdGlvbiByZXF1ZXN0XG4gICAgICBleHBlY3QoZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKVxuXG4gICAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHkgRmVhdHVyZXMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8RW5oYW5jZWRNZXNzYWdpbmdJbnRlcmZhY2VcbiAgICAgICAgICB0YXJnZXRVc2VySWQ9XCJ1c2VyLTJcIlxuICAgICAgICAgIHRhcmdldFVzZXJOYW1lPVwiSm/Do28gU2lsdmFcIlxuICAgICAgICAvPlxuICAgICAgKVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0pvw6NvIFNpbHZhJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdwcm92aWRlcyBwcm9wZXIgQVJJQSBsYWJlbHMgZm9yIGFsbCBjb250cm9scycsICgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3R5cGUgYSBtZXNzYWdlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zZW5kL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zZXR0aW5ncy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG5cbiAgICBpdCgnc3VwcG9ydHMga2V5Ym9hcmQgbmF2aWdhdGlvbiBiZXR3ZWVuIGNvbnRyb2xzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC90eXBlIGEgbWVzc2FnZS9pKVxuICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQvaSB9KVxuXG4gICAgICAvLyBUYWIgbmF2aWdhdGlvbiBzaG91bGQgd29ya1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgbWVzc2FnZUlucHV0LmZvY3VzKClcbiAgICAgICAgZmlyZUV2ZW50LmtleURvd24obWVzc2FnZUlucHV0LCB7IGtleTogJ1RhYicgfSlcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChzZW5kQnV0dG9uKS50b0hhdmVGb2N1cygpXG4gICAgfSlcblxuICAgIGl0KCdwcm92aWRlcyBzY3JlZW4gcmVhZGVyIGFubm91bmNlbWVudHMgZm9yIHN0YXR1cyBjaGFuZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC90eXBlIGEgbWVzc2FnZS9pKVxuICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NlbmQvaSB9KVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKG1lc3NhZ2VJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdUZXN0IG1lc3NhZ2UnIH0gfSlcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNlbmRCdXR0b24pXG4gICAgICB9KVxuXG4gICAgICAvLyBTaG91bGQgaGF2ZSBzdGF0dXMgYW5ub3VuY2VtZW50IGZvciBzZW50IG1lc3NhZ2VcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdzdGF0dXMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG59KSJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIm1vY2tNZXNzYWdpbmdTZXJ2aWNlIiwibWVzc2FnaW5nU2VydmljZSIsImdsb2JhbCIsIk1lZGlhUmVjb3JkZXIiLCJNb2NrTWVkaWFSZWNvcmRlciIsImlzVHlwZVN1cHBvcnRlZCIsImZuIiwibW9ja1JldHVyblZhbHVlIiwiY29uc3RydWN0b3IiLCJzdHJlYW0iLCJvcHRpb25zIiwib25kYXRhYXZhaWxhYmxlIiwib25zdG9wIiwic3RhdGUiLCJzdGFydCIsInRpbWVzbGljZSIsInNldFRpbWVvdXQiLCJkYXRhIiwiQmxvYiIsInR5cGUiLCJzdG9wIiwicGF1c2UiLCJyZXN1bWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIm5hdmlnYXRvciIsInZhbHVlIiwiZ2V0VXNlck1lZGlhIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJnZXRUcmFja3MiLCJ3cml0YWJsZSIsIndpbmRvdyIsIk1vY2tTcGVlY2hSZWNvZ25pdGlvbiIsIm9ucmVzdWx0IiwicmVzdWx0SW5kZXgiLCJyZXN1bHRzIiwidHJhbnNjcmlwdCIsImNvbmZpZGVuY2UiLCJpc0ZpbmFsIiwib25lbmQiLCJjb250aW51b3VzIiwiaW50ZXJpbVJlc3VsdHMiLCJsYW5nIiwibWF4QWx0ZXJuYXRpdmVzIiwib25lcnJvciIsInNwZWFrIiwiY2FuY2VsIiwiZ2V0Vm9pY2VzIiwiZmV0Y2giLCJhc3NpZ24iLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJ1bmRlZmluZWQiLCJyZW5kZXJXaXRoUHJvdmlkZXJzIiwiY29tcG9uZW50IiwicmVuZGVyIiwiTGFuZ3VhZ2VQcm92aWRlciIsImluaXRpYWxMYW5ndWFnZSIsIm1vY2tDb252ZXJzYXRpb24iLCJpZCIsInBhcnRpY2lwYW50X2lkcyIsImNvbm5lY3Rpb25fdHlwZSIsImlzX2FjdGl2ZSIsImxhc3RfYWN0aXZpdHlfYXQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsIm1vY2tNZXNzYWdlcyIsImNvbnZlcnNhdGlvbl9pZCIsInNlbmRlcl9pZCIsInJlY2VpdmVyX2lkIiwiY29udGVudCIsIm1lc3NhZ2VfdHlwZSIsImFwcHJvdmFsX3N0YXR1cyIsImlzX3JlYWQiLCJpc19ibG9ja2VkIiwic2FmZXR5X3Njb3JlIiwiY29udGFpbnNfY29udGFjdF9pbmZvIiwiZmxhZ2dlZF9jb250ZW50IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImdldE9yQ3JlYXRlQ29udmVyc2F0aW9uIiwiZ2V0Q29udmVyc2F0aW9uTWVzc2FnZXMiLCJtYXJrTWVzc2FnZXNBc1JlYWQiLCJzZW5kTWVzc2FnZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInVybCIsImluY2x1ZGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvayIsImpzb24iLCJvcmlnaW5hbFRleHQiLCJ0cmFuc2xhdGVkVGV4dCIsInNvdXJjZUxhbmd1YWdlIiwidGFyZ2V0TGFuZ3VhZ2UiLCJhdWRpb1VybCIsImR1cmF0aW9uIiwidHJhbnNjcmlwdGlvbiIsInRpbWVzdGFtcCIsInJlamVjdCIsIkVycm9yIiwiaXQiLCJFbmhhbmNlZE1lc3NhZ2luZ0ludGVyZmFjZSIsInRhcmdldFVzZXJJZCIsInRhcmdldFVzZXJOYW1lIiwidGFyZ2V0VXNlckltYWdlIiwid2FpdEZvciIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJnZXRCeVJvbGUiLCJtZXNzYWdlSW5wdXQiLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsInNlbmRCdXR0b24iLCJuYW1lIiwiYWN0IiwiZmlyZUV2ZW50IiwiY2hhbmdlIiwidGFyZ2V0IiwiY2xpY2siLCJ0b0hhdmVWYWx1ZSIsImtleVByZXNzIiwia2V5IiwiY29kZSIsIm1lbWJlcnNoaXBUaWVyIiwicHJlZmVycmVkRGlhbGVjdCIsInZvaWNlTWVzc2FnZXNFbmFibGVkIiwidm9pY2VCdXR0b24iLCJnZXRCeUxhYmVsVGV4dCIsInJlY29yZEJ1dHRvbiIsIm1vdXNlRG93biIsIm1vdXNlVXAiLCJzZW5kVm9pY2VCdXR0b24iLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiYm9keSIsImFueSIsIkZvcm1EYXRhIiwidHJhbnNsYXRpb25FbmFibGVkIiwidHJhbnNsYXRlQnV0dG9uIiwiSlNPTiIsInN0cmluZ2lmeSIsInRleHQiLCJzZXR0aW5nc0J1dHRvbiIsImF1dG9UcmFuc2xhdGVUb2dnbGUiLCJ0b0JlQ2hlY2tlZCIsImN1bHR1cmFsQnV0dG9uIiwidm9pY2VUb2dnbGUiLCJxdWVyeUJ5TGFiZWxUZXh0Iiwibm90IiwibW9ja1JlamVjdGVkVmFsdWUiLCJtZWRpYURldmljZXMiLCJ1c2VGYWtlVGltZXJzIiwiYXV0b1RyYW5zbGF0ZSIsImFkdmFuY2VUaW1lcnNCeVRpbWUiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ1c2VSZWFsVGltZXJzIiwiZm9jdXMiLCJrZXlEb3duIiwidG9IYXZlRm9jdXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0NBSUM7QUFRRCxpQ0FBaUM7QUFDakNBLEtBQUtDLElBQUksQ0FBQzs7Ozs7dUJBUHlDOzJCQUMvQjttRkFDbUI7aUNBQ047a0NBQ0E7Ozs7OztBQUlqQyxNQUFNQyx1QkFBdUJDLGtDQUFnQjtBQUU3QyxxQ0FBcUM7QUFDckNDLE9BQU9DLGFBQWEsR0FBRyxNQUFNQzs7YUFDcEJDLGtCQUFrQlAsS0FBS1EsRUFBRSxHQUFHQyxlQUFlLENBQUM7O0lBSW5EQyxZQUFZQyxNQUFtQixFQUFFQyxPQUE4QixDQUFFO2FBSGpFQyxrQkFBaUQ7YUFDakRDLFNBQThCO2FBc0I5QkMsUUFBNkM7SUFwQnFCO0lBRWxFQyxNQUFNQyxTQUFrQixFQUFFO1FBQ3hCQyxXQUFXO1lBQ1QsSUFBSSxJQUFJLENBQUNMLGVBQWUsRUFBRTtnQkFDeEIsSUFBSSxDQUFDQSxlQUFlLENBQUM7b0JBQ25CTSxNQUFNLElBQUlDLEtBQUs7d0JBQUM7cUJBQWtCLEVBQUU7d0JBQUVDLE1BQU07b0JBQWE7Z0JBQzNEO1lBQ0Y7UUFDRixHQUFHO0lBQ0w7SUFFQUMsT0FBTztRQUNMSixXQUFXO1lBQ1QsSUFBSSxJQUFJLENBQUNKLE1BQU0sRUFBRSxJQUFJLENBQUNBLE1BQU07UUFDOUIsR0FBRztJQUNMO0lBRUFTLFFBQVEsQ0FBQztJQUNUQyxTQUFTLENBQUM7QUFFWjtBQUVBLG9CQUFvQjtBQUNwQkMsT0FBT0MsY0FBYyxDQUFDQyxXQUFXLGdCQUFnQjtJQUMvQ0MsT0FBTztRQUNMQyxjQUFjN0IsS0FBS1EsRUFB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
f909ae3b715d4246aea66c4eff4a5163
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "usePortuguesePWAFeatures", {
    enumerable: true,
    get: function() {
        return usePortuguesePWAFeatures;
    }
});
const _react = require("react");
const _LanguageContext = require("../context/LanguageContext");
const _logger = /*#__PURE__*/ _interop_require_default(require("../utils/logger"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const DEFAULT_NOTIFICATION_SETTINGS = {
    enabled: true,
    culturalEvents: true,
    businessUpdates: true,
    communityMessages: true,
    festivalReminders: true,
    fadoNights: true,
    portugalDay: true,
    brazilianEvents: true,
    capeVerdeanEvents: true,
    quietHoursStart: "22:00",
    quietHoursEnd: "08:00",
    language: "en"
};
function usePortuguesePWAFeatures() {
    const { language, t } = (0, _LanguageContext.useLanguage)();
    const [installationState, setInstallationState] = (0, _react.useState)({
        canInstall: false,
        isInstalled: false,
        installPromptEvent: null,
        hasShownPrompt: false,
        installationSource: null
    });
    const [offlineCapabilities, setOfflineCapabilities] = (0, _react.useState)({
        isOffline: !navigator.onLine,
        hasOfflineContent: false,
        cachedPagesCount: 0,
        offlineEventsCount: 0,
        offlineBusinessesCount: 0,
        lastSyncTime: null,
        pendingActions: []
    });
    const [notificationSettings, setNotificationSettings] = (0, _react.useState)({
        ...DEFAULT_NOTIFICATION_SETTINGS,
        language: language
    });
    const [backgroundSyncData, setBackgroundSyncData] = (0, _react.useState)({
        culturalEvents: [],
        featuredBusinesses: [],
        communityUpdates: [],
        userPreferences: {},
        lastSyncTimestamp: new Date()
    });
    const syncInterval = (0, _react.useRef)();
    const installPromptTimeout = (0, _react.useRef)();
    // Portuguese cultural PWA install prompts
    const getPortugueseInstallMessage = (0, _react.useCallback)(()=>{
        const messages = {
            en: {
                title: "Install LusoTown App",
                subtitle: "Get instant access to Portuguese cultural events",
                description: "Never miss Fado nights, festivals, or community gatherings. Install LusoTown for the best Portuguese-speaking community experience.",
                install: "Install App",
                later: "Maybe Later",
                benefits: [
                    "Offline access to Portuguese events",
                    "Push notifications for cultural celebrations",
                    "Faster loading of business directory",
                    "Portuguese flag homescreen icon"
                ]
            },
            pt: {
                title: "Instalar App LusoTown",
                subtitle: "Acesso instant\xe2neo a eventos culturais portugueses",
                description: "Nunca percas noites de Fado, festivais ou encontros comunit\xe1rios. Instala LusoTown para a melhor experi\xeancia da comunidade lus\xf3fona.",
                install: "Instalar App",
                later: "Talvez Mais Tarde",
                benefits: [
                    "Acesso offline a eventos portugueses",
                    "Notifica\xe7\xf5es de celebra\xe7\xf5es culturais",
                    "Carregamento mais r\xe1pido do diret\xf3rio",
                    "\xcdcone da bandeira portuguesa no ecr\xe3 inicial"
                ]
            }
        };
        return messages[language] || messages.en;
    }, [
        language
    ]);
    // PWA installation management
    const handleInstallPrompt = (0, _react.useCallback)(async (source = "button")=>{
        if (!installationState.canInstall || !installationState.installPromptEvent) {
            _logger.default.warn("[PWA] No install prompt available");
            return false;
        }
        try {
            setInstallationState((prev)=>({
                    ...prev,
                    installationSource: source
                }));
            // Show the install prompt
            installationState.installPromptEvent.prompt();
            // Wait for user choice
            const result = await installationState.installPromptEvent.userChoice;
            if (result.outcome === "accepted") {
                setInstallationState((prev)=>({
                        ...prev,
                        isInstalled: true,
                        canInstall: false,
                        installPromptEvent: null
                    }));
                // Track installation for Portuguese community analytics
                if ("gtag" in window) {
                    window.gtag("event", "pwa_install", {
                        event_category: "pwa",
                        event_label: `portuguese_community_${source}`,
                        language: language
                    });
                }
                _logger.default.info("[PWA] Portuguese community app installed successfully", {
                    source,
                    language
                });
                return true;
            } else {
                setInstallationState((prev)=>({
                        ...prev,
                        hasShownPrompt: true
                    }));
                return false;
            }
        } catch (error) {
            _logger.default.error("[PWA] Installation failed:", error);
            return false;
        }
    }, [
        installationState,
        language
    ]);
    // Portuguese cultural push notifications
    const requestPortugueseNotifications = (0, _react.useCallback)(async ()=>{
        if (!("Notification" in window) || !("serviceWorker" in navigator)) {
            return false;
        }
        try {
            const permission = await Notification.requestPermission();
            if (permission === "granted") {
                setNotificationSettings((prev)=>({
                        ...prev,
                        enabled: true
                    }));
                // Register for Portuguese cultural event categories
                const registration = await navigator.serviceWorker.ready;
                if ("pushManager" in registration) {
                    const subscription = await registration.pushManager.subscribe({
                        userVisibleOnly: true,
                        applicationServerKey: process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY
                    });
                    // Send subscription to server with Portuguese preferences
                    await fetch("/api/notifications/subscribe", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            subscription,
                            preferences: notificationSettings,
                            language,
                            culturalInterests: [
                                "fado-nights",
                                "portuguese-festivals",
                                "brazilian-events",
                                "cape-verdean-music",
                                "lusophone-networking"
                            ]
                        })
                    });
                    _logger.default.info("[PWA] Portuguese community notifications enabled");
                    return true;
                }
            }
            return false;
        } catch (error) {
            _logger.default.error("[PWA] Notification setup failed:", error);
            return false;
        }
    }, [
        notificationSettings,
        language
    ]);
    // Enhanced offline functionality for Portuguese content
    const enableOfflineMode = (0, _react.useCallback)(async ()=>{
        try {
            if ("serviceWorker" in navigator) {
                const registration = await navigator.serviceWorker.ready;
                // Trigger background sync for Portuguese cultural content
                if ("sync" in registration) {
                    await registration.sync.register("portuguese-community-sync");
                    await registration.sync.register("cultural-events-sync");
                    await registration.sync.register("business-directory-sync");
                }
                // Cache Portuguese cultural content
                const cache = await caches.open("portuguese-cultural-v3.0.1");
                const culturalResources = [
                    "/api/events?category=fado-nights&limit=10",
                    "/api/events?category=portuguese-festivals&limit=10",
                    "/api/events?category=brazilian-events&limit=10",
                    "/api/businesses?type=restaurants&portuguese=true&limit=20",
                    "/api/businesses?type=cultural&portuguese=true&limit=10",
                    "/events",
                    "/business-directory",
                    "/community"
                ];
                const cachePromises = culturalResources.map(async (url)=>{
                    try {
                        const response = await fetch(url);
                        if (response.ok) {
                            await cache.put(url, response);
                        }
                    } catch (error) {
                        _logger.default.warn(`[PWA] Failed to cache ${url}:`, error);
                    }
                });
                await Promise.allSettled(cachePromises);
                // Update offline capabilities
                const cachedRequests = await cache.keys();
                setOfflineCapabilities((prev)=>({
                        ...prev,
                        hasOfflineContent: true,
                        cachedPagesCount: cachedRequests.length,
                        lastSyncTime: new Date()
                    }));
                _logger.default.info("[PWA] Portuguese cultural content cached for offline use");
            }
        } catch (error) {
            _logger.default.error("[PWA] Offline mode setup failed:", error);
        }
    }, []);
    // Background sync for Portuguese community data
    const syncPortugueseContent = (0, _react.useCallback)(async ()=>{
        try {
            if (!navigator.onLine) {
                _logger.default.info("[PWA] Device offline, skipping sync");
                return;
            }
            const syncPromises = [
                // Portuguese cultural events
                fetch("/api/events?featured=true&lang=pt&limit=20").then((r)=>r.json()),
                // Featured Portuguese businesses
                fetch("/api/businesses?featured=true&portuguese=true&limit=15").then((r)=>r.json()),
                // Community updates
                fetch("/api/community/updates?lang=pt&limit=10").then((r)=>r.json())
            ];
            const [events, businesses, updates] = await Promise.allSettled(syncPromises);
            setBackgroundSyncData({
                culturalEvents: events.status === "fulfilled" ? events.value : [],
                featuredBusinesses: businesses.status === "fulfilled" ? businesses.value : [],
                communityUpdates: updates.status === "fulfilled" ? updates.value : [],
                userPreferences: notificationSettings,
                lastSyncTimestamp: new Date()
            });
            setOfflineCapabilities((prev)=>({
                    ...prev,
                    offlineEventsCount: events.status === "fulfilled" ? events.value.length : 0,
                    offlineBusinessesCount: businesses.status === "fulfilled" ? businesses.value.length : 0,
                    lastSyncTime: new Date()
                }));
            _logger.default.info("[PWA] Portuguese community content synced successfully");
        } catch (error) {
            _logger.default.error("[PWA] Background sync failed:", error);
        }
    }, [
        notificationSettings
    ]);
    // Handle offline actions
    const queueOfflineAction = (0, _react.useCallback)((action)=>{
        const offlineAction = {
            ...action,
            id: `offline_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
            timestamp: new Date(),
            retryCount: 0
        };
        setOfflineCapabilities((prev)=>({
                ...prev,
                pendingActions: [
                    ...prev.pendingActions,
                    offlineAction
                ]
            }));
        // Store in IndexedDB for persistence
        if ("indexedDB" in window) {
            const request = indexedDB.open("LusoTownOffline", 1);
            request.onsuccess = (event)=>{
                const db = event.target.result;
                const transaction = db.transaction([
                    "offlineActions"
                ], "readwrite");
                const store = transaction.objectStore("offlineActions");
                store.add(offlineAction);
            };
        }
        _logger.default.info("[PWA] Offline action queued:", offlineAction.type);
    }, []);
    // Process offline actions when back online
    const processOfflineActions = (0, _react.useCallback)(async ()=>{
        if (!navigator.onLine || offlineCapabilities.pendingActions.length === 0) {
            return;
        }
        const actionsToProcess = [
            ...offlineCapabilities.pendingActions
        ];
        const processedActions = [];
        for (const action of actionsToProcess){
            try {
                let success = false;
                switch(action.type){
                    case "favorite-event":
                        await fetch("/api/events/favorite", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(action.data)
                        });
                        success = true;
                        break;
                    case "save-business":
                        await fetch("/api/businesses/save", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(action.data)
                        });
                        success = true;
                        break;
                    case "rsvp-event":
                        await fetch("/api/events/rsvp", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(action.data)
                        });
                        success = true;
                        break;
                }
                if (success) {
                    processedActions.push(action.id);
                } else {
                    // Increment retry count
                    action.retryCount++;
                    if (action.retryCount >= 3) {
                        processedActions.push(action.id) // Remove after 3 failed attempts
                        ;
                    }
                }
            } catch (error) {
                _logger.default.warn(`[PWA] Failed to process offline action ${action.type}:`, error);
                action.retryCount++;
                if (action.retryCount >= 3) {
                    processedActions.push(action.id);
                }
            }
        }
        // Remove processed actions
        setOfflineCapabilities((prev)=>({
                ...prev,
                pendingActions: prev.pendingActions.filter((action)=>!processedActions.includes(action.id))
            }));
        if (processedActions.length > 0) {
            _logger.default.info(`[PWA] Processed ${processedActions.length} offline actions`);
        }
    }, [
        offlineCapabilities.pendingActions
    ]);
    // Smart install prompt timing for Portuguese users
    const schedulePortugueseInstallPrompt = (0, _react.useCallback)(()=>{
        if (installationState.hasShownPrompt || !installationState.canInstall) {
            return;
        }
        // Show install prompt after user has engaged with Portuguese cultural content
        const engagementThreshold = 3 // 3 interactions with cultural content
        ;
        let engagementCount = 0;
        const trackEngagement = ()=>{
            engagementCount++;
            if (engagementCount >= engagementThreshold) {
                installPromptTimeout.current = setTimeout(()=>{
                    handleInstallPrompt("automatic");
                }, 2000) // Small delay for better UX
                ;
            }
        };
        // Track Portuguese cultural content interactions
        document.addEventListener("click", (e)=>{
            const target = e.target;
            if (target.closest("[data-portuguese-content]") || target.closest(".cultural-event") || target.closest(".portuguese-business")) {
                trackEngagement();
            }
        });
    }, [
        installationState.hasShownPrompt,
        installationState.canInstall,
        handleInstallPrompt
    ]);
    // Initialize PWA features
    (0, _react.useEffect)(()=>{
        const initializePWAFeatures = async ()=>{
            // Check if already installed
            if (window.matchMedia("(display-mode: standalone)").matches) {
                setInstallationState((prev)=>({
                        ...prev,
                        isInstalled: true
                    }));
            }
            // Listen for install prompt
            const handleBeforeInstallPrompt = (e)=>{
                e.preventDefault();
                setInstallationState((prev)=>({
                        ...prev,
                        canInstall: true,
                        installPromptEvent: e
                    }));
                schedulePortugueseInstallPrompt();
            };
            window.addEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
            // Online/offline status
            const handleOnline = ()=>{
                setOfflineCapabilities((prev)=>({
                        ...prev,
                        isOffline: false
                    }));
                processOfflineActions();
                syncPortugueseContent();
            };
            const handleOffline = ()=>{
                setOfflineCapabilities((prev)=>({
                        ...prev,
                        isOffline: true
                    }));
            };
            window.addEventListener("online", handleOnline);
            window.addEventListener("offline", handleOffline);
            // Initial content sync
            if (navigator.onLine) {
                await enableOfflineMode();
                await syncPortugueseContent();
            }
            // Set up periodic sync
            syncInterval.current = setInterval(()=>{
                if (navigator.onLine) {
                    syncPortugueseContent();
                }
            }, 5 * 60 * 1000) // Sync every 5 minutes
            ;
            return ()=>{
                window.removeEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
                window.removeEventListener("online", handleOnline);
                window.removeEventListener("offline", handleOffline);
                if (syncInterval.current) {
                    clearInterval(syncInterval.current);
                }
                if (installPromptTimeout.current) {
                    clearTimeout(installPromptTimeout.current);
                }
            };
        };
        initializePWAFeatures();
    }, [
        enableOfflineMode,
        syncPortugueseContent,
        processOfflineActions,
        schedulePortugueseInstallPrompt
    ]);
    // Update notification settings language
    (0, _react.useEffect)(()=>{
        setNotificationSettings((prev)=>({
                ...prev,
                language: language
            }));
    }, [
        language
    ]);
    return {
        installationState,
        offlineCapabilities,
        notificationSettings,
        backgroundSyncData,
        getPortugueseInstallMessage,
        handleInstallPrompt,
        requestPortugueseNotifications,
        enableOfflineMode,
        syncPortugueseContent,
        queueOfflineAction,
        processOfflineActions,
        setNotificationSettings,
        isFullyOfflineCapable: offlineCapabilities.hasOfflineContent && offlineCapabilities.cachedPagesCount > 0
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2hvb2tzL3VzZVBvcnR1Z3Vlc2VQV0FGZWF0dXJlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2NvbnRleHQvTGFuZ3VhZ2VDb250ZXh0J1xuaW1wb3J0IGxvZ2dlciBmcm9tICdAL3V0aWxzL2xvZ2dlcidcblxuaW50ZXJmYWNlIFBXQUluc3RhbGxhdGlvblN0YXRlIHtcbiAgY2FuSW5zdGFsbDogYm9vbGVhblxuICBpc0luc3RhbGxlZDogYm9vbGVhblxuICBpbnN0YWxsUHJvbXB0RXZlbnQ6IGFueVxuICBoYXNTaG93blByb21wdDogYm9vbGVhblxuICBpbnN0YWxsYXRpb25Tb3VyY2U6ICdiYW5uZXInIHwgJ2J1dHRvbicgfCAnYXV0b21hdGljJyB8IG51bGxcbn1cblxuaW50ZXJmYWNlIE9mZmxpbmVDYXBhYmlsaXRpZXMge1xuICBpc09mZmxpbmU6IGJvb2xlYW5cbiAgaGFzT2ZmbGluZUNvbnRlbnQ6IGJvb2xlYW5cbiAgY2FjaGVkUGFnZXNDb3VudDogbnVtYmVyXG4gIG9mZmxpbmVFdmVudHNDb3VudDogbnVtYmVyXG4gIG9mZmxpbmVCdXNpbmVzc2VzQ291bnQ6IG51bWJlclxuICBsYXN0U3luY1RpbWU6IERhdGUgfCBudWxsXG4gIHBlbmRpbmdBY3Rpb25zOiBPZmZsaW5lQWN0aW9uW11cbn1cblxuaW50ZXJmYWNlIE9mZmxpbmVBY3Rpb24ge1xuICBpZDogc3RyaW5nXG4gIHR5cGU6ICdmYXZvcml0ZS1ldmVudCcgfCAnc2F2ZS1idXNpbmVzcycgfCAnc2VuZC1tZXNzYWdlJyB8ICdyc3ZwLWV2ZW50J1xuICBkYXRhOiBhbnlcbiAgdGltZXN0YW1wOiBEYXRlXG4gIHJldHJ5Q291bnQ6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzIHtcbiAgZW5hYmxlZDogYm9vbGVhblxuICBjdWx0dXJhbEV2ZW50czogYm9vbGVhblxuICBidXNpbmVzc1VwZGF0ZXM6IGJvb2xlYW5cbiAgY29tbXVuaXR5TWVzc2FnZXM6IGJvb2xlYW5cbiAgZmVzdGl2YWxSZW1pbmRlcnM6IGJvb2xlYW5cbiAgZmFkb05pZ2h0czogYm9vbGVhblxuICBwb3J0dWdhbERheTogYm9vbGVhblxuICBicmF6aWxpYW5FdmVudHM6IGJvb2xlYW5cbiAgY2FwZVZlcmRlYW5FdmVudHM6IGJvb2xlYW5cbiAgcXVpZXRIb3Vyc1N0YXJ0OiBzdHJpbmdcbiAgcXVpZXRIb3Vyc0VuZDogc3RyaW5nXG4gIGxhbmd1YWdlOiAnZW4nIHwgJ3B0J1xufVxuXG5pbnRlcmZhY2UgQmFja2dyb3VuZFN5bmNEYXRhIHtcbiAgY3VsdHVyYWxFdmVudHM6IGFueVtdXG4gIGZlYXR1cmVkQnVzaW5lc3NlczogYW55W11cbiAgY29tbXVuaXR5VXBkYXRlczogYW55W11cbiAgdXNlclByZWZlcmVuY2VzOiBhbnlcbiAgbGFzdFN5bmNUaW1lc3RhbXA6IERhdGVcbn1cblxuY29uc3QgREVGQVVMVF9OT1RJRklDQVRJT05fU0VUVElOR1M6IFB1c2hOb3RpZmljYXRpb25TZXR0aW5ncyA9IHtcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgY3VsdHVyYWxFdmVudHM6IHRydWUsXG4gIGJ1c2luZXNzVXBkYXRlczogdHJ1ZSxcbiAgY29tbXVuaXR5TWVzc2FnZXM6IHRydWUsXG4gIGZlc3RpdmFsUmVtaW5kZXJzOiB0cnVlLFxuICBmYWRvTmlnaHRzOiB0cnVlLFxuICBwb3J0dWdhbERheTogdHJ1ZSxcbiAgYnJhemlsaWFuRXZlbnRzOiB0cnVlLFxuICBjYXBlVmVyZGVhbkV2ZW50czogdHJ1ZSxcbiAgcXVpZXRIb3Vyc1N0YXJ0OiAnMjI6MDAnLFxuICBxdWlldEhvdXJzRW5kOiAnMDg6MDAnLFxuICBsYW5ndWFnZTogJ2VuJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlUG9ydHVndWVzZVBXQUZlYXR1cmVzKCkge1xuICBjb25zdCB7IGxhbmd1YWdlLCB0IH0gPSB1c2VMYW5ndWFnZSgpXG4gIGNvbnN0IFtpbnN0YWxsYXRpb25TdGF0ZSwgc2V0SW5zdGFsbGF0aW9uU3RhdGVdID0gdXNlU3RhdGU8UFdBSW5zdGFsbGF0aW9uU3RhdGU+KHtcbiAgICBjYW5JbnN0YWxsOiBmYWxzZSxcbiAgICBpc0luc3RhbGxlZDogZmFsc2UsXG4gICAgaW5zdGFsbFByb21wdEV2ZW50OiBudWxsLFxuICAgIGhhc1Nob3duUHJvbXB0OiBmYWxzZSxcbiAgICBpbnN0YWxsYXRpb25Tb3VyY2U6IG51bGxcbiAgfSlcblxuICBjb25zdCBbb2ZmbGluZUNhcGFiaWxpdGllcywgc2V0T2ZmbGluZUNhcGFiaWxpdGllc10gPSB1c2VTdGF0ZTxPZmZsaW5lQ2FwYWJpbGl0aWVzPih7XG4gICAgaXNPZmZsaW5lOiAhbmF2aWdhdG9yLm9uTGluZSxcbiAgICBoYXNPZmZsaW5lQ29udGVudDogZmFsc2UsXG4gICAgY2FjaGVkUGFnZXNDb3VudDogMCxcbiAgICBvZmZsaW5lRXZlbnRzQ291bnQ6IDAsXG4gICAgb2ZmbGluZUJ1c2luZXNzZXNDb3VudDogMCxcbiAgICBsYXN0U3luY1RpbWU6IG51bGwsXG4gICAgcGVuZGluZ0FjdGlvbnM6IFtdXG4gIH0pXG5cbiAgY29uc3QgW25vdGlmaWNhdGlvblNldHRpbmdzLCBzZXROb3RpZmljYXRpb25TZXR0aW5nc10gPSB1c2VTdGF0ZTxQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3M+KHtcbiAgICAuLi5ERUZBVUxUX05PVElGSUNBVElPTl9TRVRUSU5HUyxcbiAgICBsYW5ndWFnZTogbGFuZ3VhZ2UgYXMgJ2VuJyB8ICdwdCdcbiAgfSlcblxuICBjb25zdCBbYmFja2dyb3VuZFN5bmNEYXRhLCBzZXRCYWNrZ3JvdW5kU3luY0RhdGFdID0gdXNlU3RhdGU8QmFja2dyb3VuZFN5bmNEYXRhPih7XG4gICAgY3VsdHVyYWxFdmVudHM6IFtdLFxuICAgIGZlYXR1cmVkQnVzaW5lc3NlczogW10sXG4gICAgY29tbXVuaXR5VXBkYXRlczogW10sXG4gICAgdXNlclByZWZlcmVuY2VzOiB7fSxcbiAgICBsYXN0U3luY1RpbWVzdGFtcDogbmV3IERhdGUoKVxuICB9KVxuXG4gIGNvbnN0IHN5bmNJbnRlcnZhbCA9IHVzZVJlZjxOb2RlSlMuVGltZW91dD4oKVxuICBjb25zdCBpbnN0YWxsUHJvbXB0VGltZW91dCA9IHVzZVJlZjxOb2RlSlMuVGltZW91dD4oKVxuXG4gIC8vIFBvcnR1Z3Vlc2UgY3VsdHVyYWwgUFdBIGluc3RhbGwgcHJvbXB0c1xuICBjb25zdCBnZXRQb3J0dWd1ZXNlSW5zdGFsbE1lc3NhZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSB7XG4gICAgICBlbjoge1xuICAgICAgICB0aXRsZTogJ0luc3RhbGwgTHVzb1Rvd24gQXBwJyxcbiAgICAgICAgc3VidGl0bGU6ICdHZXQgaW5zdGFudCBhY2Nlc3MgdG8gUG9ydHVndWVzZSBjdWx0dXJhbCBldmVudHMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ05ldmVyIG1pc3MgRmFkbyBuaWdodHMsIGZlc3RpdmFscywgb3IgY29tbXVuaXR5IGdhdGhlcmluZ3MuIEluc3RhbGwgTHVzb1Rvd24gZm9yIHRoZSBiZXN0IFBvcnR1Z3Vlc2Utc3BlYWtpbmcgY29tbXVuaXR5IGV4cGVyaWVuY2UuJyxcbiAgICAgICAgaW5zdGFsbDogJ0luc3RhbGwgQXBwJyxcbiAgICAgICAgbGF0ZXI6ICdNYXliZSBMYXRlcicsXG4gICAgICAgIGJlbmVmaXRzOiBbXG4gICAgICAgICAgJ09mZmxpbmUgYWNjZXNzIHRvIFBvcnR1Z3Vlc2UgZXZlbnRzJyxcbiAgICAgICAgICAnUHVzaCBub3RpZmljYXRpb25zIGZvciBjdWx0dXJhbCBjZWxlYnJhdGlvbnMnLFxuICAgICAgICAgICdGYXN0ZXIgbG9hZGluZyBvZiBidXNpbmVzcyBkaXJlY3RvcnknLFxuICAgICAgICAgICdQb3J0dWd1ZXNlIGZsYWcgaG9tZXNjcmVlbiBpY29uJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgcHQ6IHtcbiAgICAgICAgdGl0bGU6ICdJbnN0YWxhciBBcHAgTHVzb1Rvd24nLFxuICAgICAgICBzdWJ0aXRsZTogJ0FjZXNzbyBpbnN0YW50w6JuZW8gYSBldmVudG9zIGN1bHR1cmFpcyBwb3J0dWd1ZXNlcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTnVuY2EgcGVyY2FzIG5vaXRlcyBkZSBGYWRvLCBmZXN0aXZhaXMgb3UgZW5jb250cm9zIGNvbXVuaXTDoXJpb3MuIEluc3RhbGEgTHVzb1Rvd24gcGFyYSBhIG1lbGhvciBleHBlcmnDqm5jaWEgZGEgY29tdW5pZGFkZSBsdXPDs2ZvbmEuJyxcbiAgICAgICAgaW5zdGFsbDogJ0luc3RhbGFyIEFwcCcsXG4gICAgICAgIGxhdGVyOiAnVGFsdmV6IE1haXMgVGFyZGUnLFxuICAgICAgICBiZW5lZml0czogW1xuICAgICAgICAgICdBY2Vzc28gb2ZmbGluZSBhIGV2ZW50b3MgcG9ydHVndWVzZXMnLFxuICAgICAgICAgICdOb3RpZmljYcOnw7VlcyBkZSBjZWxlYnJhw6fDtWVzIGN1bHR1cmFpcycsXG4gICAgICAgICAgJ0NhcnJlZ2FtZW50byBtYWlzIHLDoXBpZG8gZG8gZGlyZXTDs3JpbycsXG4gICAgICAgICAgJ8ONY29uZSBkYSBiYW5kZWlyYSBwb3J0dWd1ZXNhIG5vIGVjcsOjIGluaWNpYWwnXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG1lc3NhZ2VzW2xhbmd1YWdlIGFzIGtleW9mIHR5cGVvZiBtZXNzYWdlc10gfHwgbWVzc2FnZXMuZW5cbiAgfSwgW2xhbmd1YWdlXSlcblxuICAvLyBQV0EgaW5zdGFsbGF0aW9uIG1hbmFnZW1lbnRcbiAgY29uc3QgaGFuZGxlSW5zdGFsbFByb21wdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChzb3VyY2U6ICdiYW5uZXInIHwgJ2J1dHRvbicgfCAnYXV0b21hdGljJyA9ICdidXR0b24nKSA9PiB7XG4gICAgaWYgKCFpbnN0YWxsYXRpb25TdGF0ZS5jYW5JbnN0YWxsIHx8ICFpbnN0YWxsYXRpb25TdGF0ZS5pbnN0YWxsUHJvbXB0RXZlbnQpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdbUFdBXSBObyBpbnN0YWxsIHByb21wdCBhdmFpbGFibGUnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHNldEluc3RhbGxhdGlvblN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgaW5zdGFsbGF0aW9uU291cmNlOiBzb3VyY2UgfSkpXG4gICAgICBcbiAgICAgIC8vIFNob3cgdGhlIGluc3RhbGwgcHJvbXB0XG4gICAgICBpbnN0YWxsYXRpb25TdGF0ZS5pbnN0YWxsUHJvbXB0RXZlbnQucHJvbXB0KClcbiAgICAgIFxuICAgICAgLy8gV2FpdCBmb3IgdXNlciBjaG9pY2VcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGluc3RhbGxhdGlvblN0YXRlLmluc3RhbGxQcm9tcHRFdmVudC51c2VyQ2hvaWNlXG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQub3V0Y29tZSA9PT0gJ2FjY2VwdGVkJykge1xuICAgICAgICBzZXRJbnN0YWxsYXRpb25TdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBpc0luc3RhbGxlZDogdHJ1ZSxcbiAgICAgICAgICBjYW5JbnN0YWxsOiBmYWxzZSxcbiAgICAgICAgICBpbnN0YWxsUHJvbXB0RXZlbnQ6IG51bGxcbiAgICAgICAgfSkpXG4gICAgICAgIFxuICAgICAgICAvLyBUcmFjayBpbnN0YWxsYXRpb24gZm9yIFBvcnR1Z3Vlc2UgY29tbXVuaXR5IGFuYWx5dGljc1xuICAgICAgICBpZiAoJ2d0YWcnIGluIHdpbmRvdykge1xuICAgICAgICAgICh3aW5kb3cgYXMgYW55KS5ndGFnKCdldmVudCcsICdwd2FfaW5zdGFsbCcsIHtcbiAgICAgICAgICAgIGV2ZW50X2NhdGVnb3J5OiAncHdhJyxcbiAgICAgICAgICAgIGV2ZW50X2xhYmVsOiBgcG9ydHVndWVzZV9jb21tdW5pdHlfJHtzb3VyY2V9YCxcbiAgICAgICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxvZ2dlci5pbmZvKCdbUFdBXSBQb3J0dWd1ZXNlIGNvbW11bml0eSBhcHAgaW5zdGFsbGVkIHN1Y2Nlc3NmdWxseScsIHsgc291cmNlLCBsYW5ndWFnZSB9KVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SW5zdGFsbGF0aW9uU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBoYXNTaG93blByb21wdDogdHJ1ZSB9KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignW1BXQV0gSW5zdGFsbGF0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSwgW2luc3RhbGxhdGlvblN0YXRlLCBsYW5ndWFnZV0pXG5cbiAgLy8gUG9ydHVndWVzZSBjdWx0dXJhbCBwdXNoIG5vdGlmaWNhdGlvbnNcbiAgY29uc3QgcmVxdWVzdFBvcnR1Z3Vlc2VOb3RpZmljYXRpb25zID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghKCdOb3RpZmljYXRpb24nIGluIHdpbmRvdykgfHwgISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSBhd2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKVxuICAgICAgXG4gICAgICBpZiAocGVybWlzc2lvbiA9PT0gJ2dyYW50ZWQnKSB7XG4gICAgICAgIHNldE5vdGlmaWNhdGlvblNldHRpbmdzKHByZXYgPT4gKHsgLi4ucHJldiwgZW5hYmxlZDogdHJ1ZSB9KSlcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGZvciBQb3J0dWd1ZXNlIGN1bHR1cmFsIGV2ZW50IGNhdGVnb3JpZXNcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHlcbiAgICAgICAgXG4gICAgICAgIGlmICgncHVzaE1hbmFnZXInIGluIHJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgdXNlclZpc2libGVPbmx5OiB0cnVlLFxuICAgICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1ZBUElEX1BVQkxJQ19LRVlcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNlbmQgc3Vic2NyaXB0aW9uIHRvIHNlcnZlciB3aXRoIFBvcnR1Z3Vlc2UgcHJlZmVyZW5jZXNcbiAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9ub3RpZmljYXRpb25zL3N1YnNjcmliZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgcHJlZmVyZW5jZXM6IG5vdGlmaWNhdGlvblNldHRpbmdzLFxuICAgICAgICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgICAgICAgY3VsdHVyYWxJbnRlcmVzdHM6IFtcbiAgICAgICAgICAgICAgICAnZmFkby1uaWdodHMnLFxuICAgICAgICAgICAgICAgICdwb3J0dWd1ZXNlLWZlc3RpdmFscycsIFxuICAgICAgICAgICAgICAgICdicmF6aWxpYW4tZXZlbnRzJyxcbiAgICAgICAgICAgICAgICAnY2FwZS12ZXJkZWFuLW11c2ljJyxcbiAgICAgICAgICAgICAgICAnbHVzb3Bob25lLW5ldHdvcmtpbmcnXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBsb2dnZXIuaW5mbygnW1BXQV0gUG9ydHVndWVzZSBjb21tdW5pdHkgbm90aWZpY2F0aW9ucyBlbmFibGVkJylcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1tQV0FdIE5vdGlmaWNhdGlvbiBzZXR1cCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0sIFtub3RpZmljYXRpb25TZXR0aW5ncywgbGFuZ3VhZ2VdKVxuXG4gIC8vIEVuaGFuY2VkIG9mZmxpbmUgZnVuY3Rpb25hbGl0eSBmb3IgUG9ydHVndWVzZSBjb250ZW50XG4gIGNvbnN0IGVuYWJsZU9mZmxpbmVNb2RlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeVxuICAgICAgICBcbiAgICAgICAgLy8gVHJpZ2dlciBiYWNrZ3JvdW5kIHN5bmMgZm9yIFBvcnR1Z3Vlc2UgY3VsdHVyYWwgY29udGVudFxuICAgICAgICBpZiAoJ3N5bmMnIGluIHJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgIGF3YWl0IHJlZ2lzdHJhdGlvbi5zeW5jLnJlZ2lzdGVyKCdwb3J0dWd1ZXNlLWNvbW11bml0eS1zeW5jJylcbiAgICAgICAgICBhd2FpdCByZWdpc3RyYXRpb24uc3luYy5yZWdpc3RlcignY3VsdHVyYWwtZXZlbnRzLXN5bmMnKVxuICAgICAgICAgIGF3YWl0IHJlZ2lzdHJhdGlvbi5zeW5jLnJlZ2lzdGVyKCdidXNpbmVzcy1kaXJlY3Rvcnktc3luYycpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhY2hlIFBvcnR1Z3Vlc2UgY3VsdHVyYWwgY29udGVudFxuICAgICAgICBjb25zdCBjYWNoZSA9IGF3YWl0IGNhY2hlcy5vcGVuKCdwb3J0dWd1ZXNlLWN1bHR1cmFsLXYzLjAuMScpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBjdWx0dXJhbFJlc291cmNlcyA9IFtcbiAgICAgICAgICAnL2FwaS9ldmVudHM/Y2F0ZWdvcnk9ZmFkby1uaWdodHMmbGltaXQ9MTAnLFxuICAgICAgICAgICcvYXBpL2V2ZW50cz9jYXRlZ29yeT1wb3J0dWd1ZXNlLWZlc3RpdmFscyZsaW1pdD0xMCcsXG4gICAgICAgICAgJy9hcGkvZXZlbnRzP2NhdGVnb3J5PWJyYXppbGlhbi1ldmVudHMmbGltaXQ9MTAnLFxuICAgICAgICAgICcvYXBpL2J1c2luZXNzZXM/dHlwZT1yZXN0YXVyYW50cyZwb3J0dWd1ZXNlPXRydWUmbGltaXQ9MjAnLFxuICAgICAgICAgICcvYXBpL2J1c2luZXNzZXM/dHlwZT1jdWx0dXJhbCZwb3J0dWd1ZXNlPXRydWUmbGltaXQ9MTAnLFxuICAgICAgICAgICcvZXZlbnRzJyxcbiAgICAgICAgICAnL2J1c2luZXNzLWRpcmVjdG9yeScsXG4gICAgICAgICAgJy9jb21tdW5pdHknXG4gICAgICAgIF1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNhY2hlUHJvbWlzZXMgPSBjdWx0dXJhbFJlc291cmNlcy5tYXAoYXN5bmMgKHVybCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybClcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS5wdXQodXJsLCByZXNwb25zZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtQV0FdIEZhaWxlZCB0byBjYWNoZSAke3VybH06YCwgZXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGNhY2hlUHJvbWlzZXMpXG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgb2ZmbGluZSBjYXBhYmlsaXRpZXNcbiAgICAgICAgY29uc3QgY2FjaGVkUmVxdWVzdHMgPSBhd2FpdCBjYWNoZS5rZXlzKClcbiAgICAgICAgc2V0T2ZmbGluZUNhcGFiaWxpdGllcyhwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBoYXNPZmZsaW5lQ29udGVudDogdHJ1ZSxcbiAgICAgICAgICBjYWNoZWRQYWdlc0NvdW50OiBjYWNoZWRSZXF1ZXN0cy5sZW5ndGgsXG4gICAgICAgICAgbGFzdFN5bmNUaW1lOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pKVxuICAgICAgICBcbiAgICAgICAgbG9nZ2VyLmluZm8oJ1tQV0FdIFBvcnR1Z3Vlc2UgY3VsdHVyYWwgY29udGVudCBjYWNoZWQgZm9yIG9mZmxpbmUgdXNlJylcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdbUFdBXSBPZmZsaW5lIG1vZGUgc2V0dXAgZmFpbGVkOicsIGVycm9yKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgLy8gQmFja2dyb3VuZCBzeW5jIGZvciBQb3J0dWd1ZXNlIGNvbW11bml0eSBkYXRhXG4gIGNvbnN0IHN5bmNQb3J0dWd1ZXNlQ29udGVudCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKCdbUFdBXSBEZXZpY2Ugb2ZmbGluZSwgc2tpcHBpbmcgc3luYycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBzeW5jUHJvbWlzZXMgPSBbXG4gICAgICAgIC8vIFBvcnR1Z3Vlc2UgY3VsdHVyYWwgZXZlbnRzXG4gICAgICAgIGZldGNoKCcvYXBpL2V2ZW50cz9mZWF0dXJlZD10cnVlJmxhbmc9cHQmbGltaXQ9MjAnKS50aGVuKHIgPT4gci5qc29uKCkpLFxuICAgICAgICAvLyBGZWF0dXJlZCBQb3J0dWd1ZXNlIGJ1c2luZXNzZXNcbiAgICAgICAgZmV0Y2goJy9hcGkvYnVzaW5lc3Nlcz9mZWF0dXJlZD10cnVlJnBvcnR1Z3Vlc2U9dHJ1ZSZsaW1pdD0xNScpLnRoZW4ociA9PiByLmpzb24oKSksXG4gICAgICAgIC8vIENvbW11bml0eSB1cGRhdGVzXG4gICAgICAgIGZldGNoKCcvYXBpL2NvbW11bml0eS91cGRhdGVzP2xhbmc9cHQmbGltaXQ9MTAnKS50aGVuKHIgPT4gci5qc29uKCkpXG4gICAgICBdXG5cbiAgICAgIGNvbnN0IFtldmVudHMsIGJ1c2luZXNzZXMsIHVwZGF0ZXNdID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHN5bmNQcm9taXNlcylcblxuICAgICAgc2V0QmFja2dyb3VuZFN5bmNEYXRhKHtcbiAgICAgICAgY3VsdHVyYWxFdmVudHM6IGV2ZW50cy5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gZXZlbnRzLnZhbHVlIDogW10sXG4gICAgICAgIGZlYXR1cmVkQnVzaW5lc3NlczogYnVzaW5lc3Nlcy5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gYnVzaW5lc3Nlcy52YWx1ZSA6IFtdLFxuICAgICAgICBjb21tdW5pdHlVcGRhdGVzOiB1cGRhdGVzLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgPyB1cGRhdGVzLnZhbHVlIDogW10sXG4gICAgICAgIHVzZXJQcmVmZXJlbmNlczogbm90aWZpY2F0aW9uU2V0dGluZ3MsXG4gICAgICAgIGxhc3RTeW5jVGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9KVxuXG4gICAgICBzZXRPZmZsaW5lQ2FwYWJpbGl0aWVzKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgb2ZmbGluZUV2ZW50c0NvdW50OiBldmVudHMuc3RhdHVzID09PSAnZnVsZmlsbGVkJyA/IGV2ZW50cy52YWx1ZS5sZW5ndGggOiAwLFxuICAgICAgICBvZmZsaW5lQnVzaW5lc3Nlc0NvdW50OiBidXNpbmVzc2VzLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgPyBidXNpbmVzc2VzLnZhbHVlLmxlbmd0aCA6IDAsXG4gICAgICAgIGxhc3RTeW5jVGltZTogbmV3IERhdGUoKVxuICAgICAgfSkpXG5cbiAgICAgIGxvZ2dlci5pbmZvKCdbUFdBXSBQb3J0dWd1ZXNlIGNvbW11bml0eSBjb250ZW50IHN5bmNlZCBzdWNjZXNzZnVsbHknKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1tQV0FdIEJhY2tncm91bmQgc3luYyBmYWlsZWQ6JywgZXJyb3IpXG4gICAgfVxuICB9LCBbbm90aWZpY2F0aW9uU2V0dGluZ3NdKVxuXG4gIC8vIEhhbmRsZSBvZmZsaW5lIGFjdGlvbnNcbiAgY29uc3QgcXVldWVPZmZsaW5lQWN0aW9uID0gdXNlQ2FsbGJhY2soKGFjdGlvbjogT21pdDxPZmZsaW5lQWN0aW9uLCAnaWQnIHwgJ3RpbWVzdGFtcCcgfCAncmV0cnlDb3VudCc+KSA9PiB7XG4gICAgY29uc3Qgb2ZmbGluZUFjdGlvbjogT2ZmbGluZUFjdGlvbiA9IHtcbiAgICAgIC4uLmFjdGlvbixcbiAgICAgIGlkOiBgb2ZmbGluZV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICByZXRyeUNvdW50OiAwXG4gICAgfVxuXG4gICAgc2V0T2ZmbGluZUNhcGFiaWxpdGllcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgcGVuZGluZ0FjdGlvbnM6IFsuLi5wcmV2LnBlbmRpbmdBY3Rpb25zLCBvZmZsaW5lQWN0aW9uXVxuICAgIH0pKVxuXG4gICAgLy8gU3RvcmUgaW4gSW5kZXhlZERCIGZvciBwZXJzaXN0ZW5jZVxuICAgIGlmICgnaW5kZXhlZERCJyBpbiB3aW5kb3cpIHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbignTHVzb1Rvd25PZmZsaW5lJywgMSlcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGRiID0gKGV2ZW50LnRhcmdldCBhcyBhbnkpLnJlc3VsdFxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFsnb2ZmbGluZUFjdGlvbnMnXSwgJ3JlYWR3cml0ZScpXG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoJ29mZmxpbmVBY3Rpb25zJylcbiAgICAgICAgc3RvcmUuYWRkKG9mZmxpbmVBY3Rpb24pXG4gICAgICB9XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oJ1tQV0FdIE9mZmxpbmUgYWN0aW9uIHF1ZXVlZDonLCBvZmZsaW5lQWN0aW9uLnR5cGUpXG4gIH0sIFtdKVxuXG4gIC8vIFByb2Nlc3Mgb2ZmbGluZSBhY3Rpb25zIHdoZW4gYmFjayBvbmxpbmVcbiAgY29uc3QgcHJvY2Vzc09mZmxpbmVBY3Rpb25zID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSB8fCBvZmZsaW5lQ2FwYWJpbGl0aWVzLnBlbmRpbmdBY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uc1RvUHJvY2VzcyA9IFsuLi5vZmZsaW5lQ2FwYWJpbGl0aWVzLnBlbmRpbmdBY3Rpb25zXVxuICAgIGNvbnN0IHByb2Nlc3NlZEFjdGlvbnM6IHN0cmluZ1tdID0gW11cblxuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnNUb1Byb2Nlc3MpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBzdWNjZXNzID0gZmFsc2VcblxuICAgICAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnZmF2b3JpdGUtZXZlbnQnOlxuICAgICAgICAgICAgYXdhaXQgZmV0Y2goJy9hcGkvZXZlbnRzL2Zhdm9yaXRlJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGFjdGlvbi5kYXRhKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnc2F2ZS1idXNpbmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9idXNpbmVzc2VzL3NhdmUnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYWN0aW9uLmRhdGEpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc3VjY2VzcyA9IHRydWVcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdyc3ZwLWV2ZW50JzpcbiAgICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL2V2ZW50cy9yc3ZwJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGFjdGlvbi5kYXRhKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICBwcm9jZXNzZWRBY3Rpb25zLnB1c2goYWN0aW9uLmlkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEluY3JlbWVudCByZXRyeSBjb3VudFxuICAgICAgICAgIGFjdGlvbi5yZXRyeUNvdW50KytcbiAgICAgICAgICBpZiAoYWN0aW9uLnJldHJ5Q291bnQgPj0gMykge1xuICAgICAgICAgICAgcHJvY2Vzc2VkQWN0aW9ucy5wdXNoKGFjdGlvbi5pZCkgLy8gUmVtb3ZlIGFmdGVyIDMgZmFpbGVkIGF0dGVtcHRzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIud2FybihgW1BXQV0gRmFpbGVkIHRvIHByb2Nlc3Mgb2ZmbGluZSBhY3Rpb24gJHthY3Rpb24udHlwZX06YCwgZXJyb3IpXG4gICAgICAgIGFjdGlvbi5yZXRyeUNvdW50KytcbiAgICAgICAgaWYgKGFjdGlvbi5yZXRyeUNvdW50ID49IDMpIHtcbiAgICAgICAgICBwcm9jZXNzZWRBY3Rpb25zLnB1c2goYWN0aW9uLmlkKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHByb2Nlc3NlZCBhY3Rpb25zXG4gICAgc2V0T2ZmbGluZUNhcGFiaWxpdGllcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgcGVuZGluZ0FjdGlvbnM6IHByZXYucGVuZGluZ0FjdGlvbnMuZmlsdGVyKGFjdGlvbiA9PiAhcHJvY2Vzc2VkQWN0aW9ucy5pbmNsdWRlcyhhY3Rpb24uaWQpKVxuICAgIH0pKVxuXG4gICAgaWYgKHByb2Nlc3NlZEFjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgbG9nZ2VyLmluZm8oYFtQV0FdIFByb2Nlc3NlZCAke3Byb2Nlc3NlZEFjdGlvbnMubGVuZ3RofSBvZmZsaW5lIGFjdGlvbnNgKVxuICAgIH1cbiAgfSwgW29mZmxpbmVDYXBhYmlsaXRpZXMucGVuZGluZ0FjdGlvbnNdKVxuXG4gIC8vIFNtYXJ0IGluc3RhbGwgcHJvbXB0IHRpbWluZyBmb3IgUG9ydHVndWVzZSB1c2Vyc1xuICBjb25zdCBzY2hlZHVsZVBvcnR1Z3Vlc2VJbnN0YWxsUHJvbXB0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpbnN0YWxsYXRpb25TdGF0ZS5oYXNTaG93blByb21wdCB8fCAhaW5zdGFsbGF0aW9uU3RhdGUuY2FuSW5zdGFsbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2hvdyBpbnN0YWxsIHByb21wdCBhZnRlciB1c2VyIGhhcyBlbmdhZ2VkIHdpdGggUG9ydHVndWVzZSBjdWx0dXJhbCBjb250ZW50XG4gICAgY29uc3QgZW5nYWdlbWVudFRocmVzaG9sZCA9IDMgLy8gMyBpbnRlcmFjdGlvbnMgd2l0aCBjdWx0dXJhbCBjb250ZW50XG4gICAgbGV0IGVuZ2FnZW1lbnRDb3VudCA9IDBcblxuICAgIGNvbnN0IHRyYWNrRW5nYWdlbWVudCA9ICgpID0+IHtcbiAgICAgIGVuZ2FnZW1lbnRDb3VudCsrXG4gICAgICBpZiAoZW5nYWdlbWVudENvdW50ID49IGVuZ2FnZW1lbnRUaHJlc2hvbGQpIHtcbiAgICAgICAgaW5zdGFsbFByb21wdFRpbWVvdXQuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGhhbmRsZUluc3RhbGxQcm9tcHQoJ2F1dG9tYXRpYycpXG4gICAgICAgIH0sIDIwMDApIC8vIFNtYWxsIGRlbGF5IGZvciBiZXR0ZXIgVVhcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcmFjayBQb3J0dWd1ZXNlIGN1bHR1cmFsIGNvbnRlbnQgaW50ZXJhY3Rpb25zXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnW2RhdGEtcG9ydHVndWVzZS1jb250ZW50XScpIHx8IFxuICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcuY3VsdHVyYWwtZXZlbnQnKSB8fFxuICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcucG9ydHVndWVzZS1idXNpbmVzcycpKSB7XG4gICAgICAgIHRyYWNrRW5nYWdlbWVudCgpXG4gICAgICB9XG4gICAgfSlcbiAgfSwgW2luc3RhbGxhdGlvblN0YXRlLmhhc1Nob3duUHJvbXB0LCBpbnN0YWxsYXRpb25TdGF0ZS5jYW5JbnN0YWxsLCBoYW5kbGVJbnN0YWxsUHJvbXB0XSlcblxuICAvLyBJbml0aWFsaXplIFBXQSBmZWF0dXJlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxpemVQV0FGZWF0dXJlcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgaW5zdGFsbGVkXG4gICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhkaXNwbGF5LW1vZGU6IHN0YW5kYWxvbmUpJykubWF0Y2hlcykge1xuICAgICAgICBzZXRJbnN0YWxsYXRpb25TdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGlzSW5zdGFsbGVkOiB0cnVlIH0pKVxuICAgICAgfVxuXG4gICAgICAvLyBMaXN0ZW4gZm9yIGluc3RhbGwgcHJvbXB0XG4gICAgICBjb25zdCBoYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0ID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBzZXRJbnN0YWxsYXRpb25TdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBjYW5JbnN0YWxsOiB0cnVlLFxuICAgICAgICAgIGluc3RhbGxQcm9tcHRFdmVudDogZVxuICAgICAgICB9KSlcbiAgICAgICAgc2NoZWR1bGVQb3J0dWd1ZXNlSW5zdGFsbFByb21wdCgpXG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnN0YWxscHJvbXB0JywgaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdClcblxuICAgICAgLy8gT25saW5lL29mZmxpbmUgc3RhdHVzXG4gICAgICBjb25zdCBoYW5kbGVPbmxpbmUgPSAoKSA9PiB7XG4gICAgICAgIHNldE9mZmxpbmVDYXBhYmlsaXRpZXMocHJldiA9PiAoeyAuLi5wcmV2LCBpc09mZmxpbmU6IGZhbHNlIH0pKVxuICAgICAgICBwcm9jZXNzT2ZmbGluZUFjdGlvbnMoKVxuICAgICAgICBzeW5jUG9ydHVndWVzZUNvbnRlbnQoKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoYW5kbGVPZmZsaW5lID0gKCkgPT4ge1xuICAgICAgICBzZXRPZmZsaW5lQ2FwYWJpbGl0aWVzKHByZXYgPT4gKHsgLi4ucHJldiwgaXNPZmZsaW5lOiB0cnVlIH0pKVxuICAgICAgfVxuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgaGFuZGxlT25saW5lKVxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBoYW5kbGVPZmZsaW5lKVxuXG4gICAgICAvLyBJbml0aWFsIGNvbnRlbnQgc3luY1xuICAgICAgaWYgKG5hdmlnYXRvci5vbkxpbmUpIHtcbiAgICAgICAgYXdhaXQgZW5hYmxlT2ZmbGluZU1vZGUoKVxuICAgICAgICBhd2FpdCBzeW5jUG9ydHVndWVzZUNvbnRlbnQoKVxuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdXAgcGVyaW9kaWMgc3luY1xuICAgICAgc3luY0ludGVydmFsLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmIChuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAgICAgc3luY1BvcnR1Z3Vlc2VDb250ZW50KClcbiAgICAgICAgfVxuICAgICAgfSwgNSAqIDYwICogMTAwMCkgLy8gU3luYyBldmVyeSA1IG1pbnV0ZXNcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZWluc3RhbGxwcm9tcHQnLCBoYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0KVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb25saW5lJywgaGFuZGxlT25saW5lKVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIGhhbmRsZU9mZmxpbmUpXG4gICAgICAgIFxuICAgICAgICBpZiAoc3luY0ludGVydmFsLmN1cnJlbnQpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHN5bmNJbnRlcnZhbC5jdXJyZW50KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5zdGFsbFByb21wdFRpbWVvdXQuY3VycmVudCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChpbnN0YWxsUHJvbXB0VGltZW91dC5jdXJyZW50KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZVBXQUZlYXR1cmVzKClcbiAgfSwgW2VuYWJsZU9mZmxpbmVNb2RlLCBzeW5jUG9ydHVndWVzZUNvbnRlbnQsIHByb2Nlc3NPZmZsaW5lQWN0aW9ucywgc2NoZWR1bGVQb3J0dWd1ZXNlSW5zdGFsbFByb21wdF0pXG5cbiAgLy8gVXBkYXRlIG5vdGlmaWNhdGlvbiBzZXR0aW5ncyBsYW5ndWFnZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldE5vdGlmaWNhdGlvblNldHRpbmdzKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UgYXMgJ2VuJyB8ICdwdCdcbiAgICB9KSlcbiAgfSwgW2xhbmd1YWdlXSlcblxuICByZXR1cm4ge1xuICAgIGluc3RhbGxhdGlvblN0YXRlLFxuICAgIG9mZmxpbmVDYXBhYmlsaXRpZXMsXG4gICAgbm90aWZpY2F0aW9uU2V0dGluZ3MsXG4gICAgYmFja2dyb3VuZFN5bmNEYXRhLFxuICAgIGdldFBvcnR1Z3Vlc2VJbnN0YWxsTWVzc2FnZSxcbiAgICBoYW5kbGVJbnN0YWxsUHJvbXB0LFxuICAgIHJlcXVlc3RQb3J0dWd1ZXNlTm90aWZpY2F0aW9ucyxcbiAgICBlbmFibGVPZmZsaW5lTW9kZSxcbiAgICBzeW5jUG9ydHVndWVzZUNvbnRlbnQsXG4gICAgcXVldWVPZmZsaW5lQWN0aW9uLFxuICAgIHByb2Nlc3NPZmZsaW5lQWN0aW9ucyxcbiAgICBzZXROb3RpZmljYXRpb25TZXR0aW5ncyxcbiAgICBpc0Z1bGx5T2ZmbGluZUNhcGFibGU6IG9mZmxpbmVDYXBhYmlsaXRpZXMuaGFzT2ZmbGluZUNvbnRlbnQgJiYgb2ZmbGluZUNhcGFiaWxpdGllcy5jYWNoZWRQYWdlc0NvdW50ID4gMFxuICB9XG59Il0sIm5hbWVzIjpbInVzZVBvcnR1Z3Vlc2VQV0FGZWF0dXJlcyIsIkRFRkFVTFRfTk9USUZJQ0FUSU9OX1NFVFRJTkdTIiwiZW5hYmxlZCIsImN1bHR1cmFsRXZlbnRzIiwiYnVzaW5lc3NVcGRhdGVzIiwiY29tbXVuaXR5TWVzc2FnZXMiLCJmZXN0aXZhbFJlbWluZGVycyIsImZhZG9OaWdodHMiLCJwb3J0dWdhbERheSIsImJyYXppbGlhbkV2ZW50cyIsImNhcGVWZXJkZWFuRXZlbnRzIiwicXVpZXRIb3Vyc1N0YXJ0IiwicXVpZXRIb3Vyc0VuZCIsImxhbmd1YWdlIiwidCIsInVzZUxhbmd1YWdlIiwiaW5zdGFsbGF0aW9uU3RhdGUiLCJzZXRJbnN0YWxsYXRpb25TdGF0ZSIsInVzZVN0YXRlIiwiY2FuSW5zdGFsbCIsImlzSW5zdGFsbGVkIiwiaW5zdGFsbFByb21wdEV2ZW50IiwiaGFzU2hvd25Qcm9tcHQiLCJpbnN0YWxsYXRpb25Tb3VyY2UiLCJvZmZsaW5lQ2FwYWJpbGl0aWVzIiwic2V0T2ZmbGluZUNhcGFiaWxpdGllcyIsImlzT2ZmbGluZSIsIm5hdmlnYXRvciIsIm9uTGluZSIsImhhc09mZmxpbmVDb250ZW50IiwiY2FjaGVkUGFnZXNDb3VudCIsIm9mZmxpbmVFdmVudHNDb3VudCIsIm9mZmxpbmVCdXNpbmVzc2VzQ291bnQiLCJsYXN0U3luY1RpbWUiLCJwZW5kaW5nQWN0aW9ucyIsIm5vdGlmaWNhdGlvblNldHRpbmdzIiwic2V0Tm90aWZpY2F0aW9uU2V0dGluZ3MiLCJiYWNrZ3JvdW5kU3luY0RhdGEiLCJzZXRCYWNrZ3JvdW5kU3luY0RhdGEiLCJmZWF0dXJlZEJ1c2luZXNzZXMiLCJjb21tdW5pdHlVcGRhdGVzIiwidXNlclByZWZlcmVuY2VzIiwibGFzdFN5bmNUaW1lc3RhbXAiLCJEYXRlIiwic3luY0ludGVydmFsIiwidXNlUmVmIiwiaW5zdGFsbFByb21wdFRpbWVvdXQiLCJnZXRQb3J0dWd1ZXNlSW5zdGFsbE1lc3NhZ2UiLCJ1c2VDYWxsYmFjayIsIm1lc3NhZ2VzIiwiZW4iLCJ0aXRsZSIsInN1YnRpdGxlIiwiZGVzY3JpcHRpb24iLCJpbnN0YWxsIiwibGF0ZXIiLCJiZW5lZml0cyIsInB0IiwiaGFuZGxlSW5zdGFsbFByb21wdCIsInNvdXJjZSIsImxvZ2dlciIsIndhcm4iLCJwcmV2IiwicHJvbXB0IiwicmVzdWx0IiwidXNlckNob2ljZSIsIm91dGNvbWUiLCJ3aW5kb3ciLCJndGFnIiwiZXZlbnRfY2F0ZWdvcnkiLCJldmVudF9sYWJlbCIsImluZm8iLCJlcnJvciIsInJlcXVlc3RQb3J0dWd1ZXNlTm90aWZpY2F0aW9ucyIsInBlcm1pc3Npb24iLCJOb3RpZmljYXRpb24iLCJyZXF1ZXN0UGVybWlzc2lvbiIsInJlZ2lzdHJhdGlvbiIsInNlcnZpY2VXb3JrZXIiLCJyZWFkeSIsInN1YnNjcmlwdGlvbiIsInB1c2hNYW5hZ2VyIiwic3Vic2NyaWJlIiwidXNlclZpc2libGVPbmx5IiwiYXBwbGljYXRpb25TZXJ2ZXJLZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfVkFQSURfUFVCTElDX0tFWSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicHJlZmVyZW5jZXMiLCJjdWx0dXJhbEludGVyZXN0cyIsImVuYWJsZU9mZmxpbmVNb2RlIiwic3luYyIsInJlZ2lzdGVyIiwiY2FjaGUiLCJjYWNoZXMiLCJvcGVuIiwiY3VsdHVyYWxSZXNvdXJjZXMiLCJjYWNoZVByb21pc2VzIiwibWFwIiwidXJsIiwicmVzcG9uc2UiLCJvayIsInB1dCIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiY2FjaGVkUmVxdWVzdHMiLCJrZXlzIiwibGVuZ3RoIiwic3luY1BvcnR1Z3Vlc2VDb250ZW50Iiwic3luY1Byb21pc2VzIiwidGhlbiIsInIiLCJqc29uIiwiZXZlbnRzIiwiYnVzaW5lc3NlcyIsInVwZGF0ZXMiLCJzdGF0dXMiLCJ2YWx1ZSIsInF1ZXVlT2ZmbGluZUFjdGlvbiIsImFjdGlvbiIsIm9mZmxpbmVBY3Rpb24iLCJpZCIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRpbWVzdGFtcCIsInJldHJ5Q291bnQiLCJyZXF1ZXN0IiwiaW5kZXhlZERCIiwib25zdWNjZXNzIiwiZXZlbnQiLCJkYiIsInRhcmdldCIsInRyYW5zYWN0aW9uIiwic3RvcmUiLCJvYmplY3RTdG9yZSIsImFkZCIsInR5cGUiLCJwcm9jZXNzT2ZmbGluZUFjdGlvbnMiLCJhY3Rpb25zVG9Qcm9jZXNzIiwicHJvY2Vzc2VkQWN0aW9ucyIsInN1Y2Nlc3MiLCJkYXRhIiwicHVzaCIsImZpbHRlciIsImluY2x1ZGVzIiwic2NoZWR1bGVQb3J0dWd1ZXNlSW5zdGFsbFByb21wdCIsImVuZ2FnZW1lbnRUaHJlc2hvbGQiLCJlbmdhZ2VtZW50Q291bnQiLCJ0cmFja0VuZ2FnZW1lbnQiLCJjdXJyZW50Iiwic2V0VGltZW91dCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjbG9zZXN0IiwidXNlRWZmZWN0IiwiaW5pdGlhbGl6ZVBXQUZlYXR1cmVzIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJoYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0IiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVPbmxpbmUiLCJoYW5kbGVPZmZsaW5lIiwic2V0SW50ZXJ2YWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyVGltZW91dCIsImlzRnVsbHlPZmZsaW5lQ2FwYWJsZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQXNFZ0JBOzs7ZUFBQUE7Ozt1QkFwRXlDO2lDQUM3QjsrREFDVDs7Ozs7O0FBbURuQixNQUFNQyxnQ0FBMEQ7SUFDOURDLFNBQVM7SUFDVEMsZ0JBQWdCO0lBQ2hCQyxpQkFBaUI7SUFDakJDLG1CQUFtQjtJQUNuQkMsbUJBQW1CO0lBQ25CQyxZQUFZO0lBQ1pDLGFBQWE7SUFDYkMsaUJBQWlCO0lBQ2pCQyxtQkFBbUI7SUFDbkJDLGlCQUFpQjtJQUNqQkMsZUFBZTtJQUNmQyxVQUFVO0FBQ1o7QUFFTyxTQUFTYjtJQUNkLE1BQU0sRUFBRWEsUUFBUSxFQUFFQyxDQUFDLEVBQUUsR0FBR0MsSUFBQUEsNEJBQVc7SUFDbkMsTUFBTSxDQUFDQyxtQkFBbUJDLHFCQUFxQixHQUFHQyxJQUFBQSxlQUFRLEVBQXVCO1FBQy9FQyxZQUFZO1FBQ1pDLGFBQWE7UUFDYkMsb0JBQW9CO1FBQ3BCQyxnQkFBZ0I7UUFDaEJDLG9CQUFvQjtJQUN0QjtJQUVBLE1BQU0sQ0FBQ0MscUJBQXFCQyx1QkFBdUIsR0FBR1AsSUFBQUEsZUFBUSxFQUFzQjtRQUNsRlEsV0FBVyxDQUFDQyxVQUFVQyxNQUFNO1FBQzVCQyxtQkFBbUI7UUFDbkJDLGtCQUFrQjtRQUNsQkMsb0JBQW9CO1FBQ3BCQyx3QkFBd0I7UUFDeEJDLGNBQWM7UUFDZEMsZ0JBQWdCLEVB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
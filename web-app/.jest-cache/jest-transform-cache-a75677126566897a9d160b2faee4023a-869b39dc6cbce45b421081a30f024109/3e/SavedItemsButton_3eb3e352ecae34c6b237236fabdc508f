655fa16d3f3271521c7c7e71dfc4c733
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return SavedItemsButton;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _framermotion = require("framer-motion");
const _link = /*#__PURE__*/ _interop_require_default(require("next/link"));
const _outline = require("@heroicons/react/24/outline");
const _solid = require("@heroicons/react/24/solid");
const _CartContext = require("../context/CartContext");
const _LanguageContext = require("../context/LanguageContext");
const _auth = require("../lib/auth");
const _AuthPopupProvider = require("./AuthPopupProvider");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function SavedItemsButton({ showCount = true, iconOnly = true, size = "medium", className = "" }) {
    const { savedCount } = (0, _CartContext.useCart)();
    const { t, language } = (0, _LanguageContext.useLanguage)();
    const [isLoggedIn, setIsLoggedIn] = (0, _react.useState)(false);
    const { showPopup } = (0, _AuthPopupProvider.useAuthPopup)();
    const isPortuguese = language === "pt";
    (0, _react.useEffect)(()=>{
        setIsLoggedIn((0, _auth.isAuthenticated)());
    }, []);
    (0, _react.useEffect)(()=>{
        const unsubscribe = (0, _auth.useAuthState)((user)=>{
            setIsLoggedIn(!!user);
        });
        return unsubscribe;
    }, []);
    const handleFavoritesClick = (e)=>{
        if (!isLoggedIn) {
            e.preventDefault();
            showPopup("view-details", {
                type: "view-details",
                redirectPath: "/saved"
            });
        }
    };
    const getSizeClasses = ()=>{
        switch(size){
            case "small":
                return "p-2";
            case "large":
                return "p-3";
            default:
                return "p-3";
        }
    };
    const getIconSize = ()=>{
        switch(size){
            case "small":
                return "w-4 h-4";
            case "large":
                return "w-7 h-7";
            default:
                return "w-5 h-5 sm:w-6 sm:h-6";
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_link.default, {
        href: isLoggedIn ? "/saved" : "#",
        onClick: handleFavoritesClick,
        className: `relative text-gray-600 hover:text-primary-500 transition-colors group ${getSizeClasses()} ${className} min-h-[44px] min-w-[44px] flex items-center justify-center`,
        title: isLoggedIn ? t("favorites.view-all") : isPortuguese ? "Clique para se registar" : "Click to sign up",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_framermotion.motion.div, {
                whileHover: {
                    scale: 1.05
                },
                whileTap: {
                    scale: 0.95
                },
                className: "relative",
                children: [
                    savedCount > 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_solid.HeartIcon, {
                        className: `${getIconSize()} text-action-500`
                    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.HeartIcon, {
                        className: getIconSize()
                    }),
                    showCount && savedCount > 0 && /*#__PURE__*/ (0, _jsxruntime.jsx)(_framermotion.motion.div, {
                        initial: {
                            scale: 0
                        },
                        animate: {
                            scale: 1
                        },
                        className: "absolute -top-1 -right-1 bg-action-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold",
                        children: savedCount > 99 ? "99+" : savedCount
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "absolute top-full mt-2 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-3 py-2 rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",
                        children: [
                            isLoggedIn ? savedCount > 0 ? `${savedCount} saved ${savedCount === 1 ? "item" : "items"}` : t("favorites.view-all") : isPortuguese ? "Clique para se registar" : "Click to sign up",
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"
                            })
                        ]
                    })
                ]
            }),
            !iconOnly && /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                className: "ml-2 font-medium text-sm",
                children: t("favorites.title")
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL0x1c29Ub3duL3dlYi1hcHAvc3JjL2NvbXBvbmVudHMvU2F2ZWRJdGVtc0J1dHRvbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IG1vdGlvbiB9IGZyb20gXCJmcmFtZXItbW90aW9uXCI7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCI7XG5pbXBvcnQgeyBIZWFydEljb24gfSBmcm9tIFwiQGhlcm9pY29ucy9yZWFjdC8yNC9vdXRsaW5lXCI7XG5pbXBvcnQgeyBIZWFydEljb24gYXMgSGVhcnRTb2xpZEljb24gfSBmcm9tIFwiQGhlcm9pY29ucy9yZWFjdC8yNC9zb2xpZFwiO1xuaW1wb3J0IHsgdXNlQ2FydCB9IGZyb20gXCJAL2NvbnRleHQvQ2FydENvbnRleHRcIjtcbmltcG9ydCB7IHVzZUxhbmd1YWdlIH0gZnJvbSBcIkAvY29udGV4dC9MYW5ndWFnZUNvbnRleHRcIjtcbmltcG9ydCB7IGlzQXV0aGVudGljYXRlZCwgdXNlQXV0aFN0YXRlIGFzIG9uQXV0aFN0YXRlQ2hhbmdlIH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcbmltcG9ydCB7IHVzZUF1dGhQb3B1cCB9IGZyb20gXCJAL2NvbXBvbmVudHMvQXV0aFBvcHVwUHJvdmlkZXJcIjtcblxuaW50ZXJmYWNlIFNhdmVkSXRlbXNCdXR0b25Qcm9wcyB7XG4gIHNob3dDb3VudD86IGJvb2xlYW47XG4gIGljb25Pbmx5PzogYm9vbGVhbjtcbiAgc2l6ZT86IFwic21hbGxcIiB8IFwibWVkaXVtXCIgfCBcImxhcmdlXCI7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2F2ZWRJdGVtc0J1dHRvbih7XG4gIHNob3dDb3VudCA9IHRydWUsXG4gIGljb25Pbmx5ID0gdHJ1ZSxcbiAgc2l6ZSA9IFwibWVkaXVtXCIsXG4gIGNsYXNzTmFtZSA9IFwiXCIsXG59OiBTYXZlZEl0ZW1zQnV0dG9uUHJvcHMpIHtcbiAgY29uc3QgeyBzYXZlZENvdW50IH0gPSB1c2VDYXJ0KCk7XG4gIGNvbnN0IHsgdCwgbGFuZ3VhZ2UgfSA9IHVzZUxhbmd1YWdlKCk7XG4gIGNvbnN0IFtpc0xvZ2dlZEluLCBzZXRJc0xvZ2dlZEluXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgeyBzaG93UG9wdXAgfSA9IHVzZUF1dGhQb3B1cCgpO1xuXG4gIGNvbnN0IGlzUG9ydHVndWVzZSA9IGxhbmd1YWdlID09PSBcInB0XCI7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc0xvZ2dlZEluKGlzQXV0aGVudGljYXRlZCgpKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZSgodXNlcikgPT4ge1xuICAgICAgc2V0SXNMb2dnZWRJbighIXVzZXIpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUZhdm9yaXRlc0NsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBpZiAoIWlzTG9nZ2VkSW4pIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNob3dQb3B1cChcInZpZXctZGV0YWlsc1wiLCB7XG4gICAgICAgIHR5cGU6IFwidmlldy1kZXRhaWxzXCIsXG4gICAgICAgIHJlZGlyZWN0UGF0aDogXCIvc2F2ZWRcIixcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRTaXplQ2xhc3NlcyA9ICgpID0+IHtcbiAgICBzd2l0Y2ggKHNpemUpIHtcbiAgICAgIGNhc2UgXCJzbWFsbFwiOlxuICAgICAgICByZXR1cm4gXCJwLTJcIjtcbiAgICAgIGNhc2UgXCJsYXJnZVwiOlxuICAgICAgICByZXR1cm4gXCJwLTNcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcInAtM1wiO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRJY29uU2l6ZSA9ICgpID0+IHtcbiAgICBzd2l0Y2ggKHNpemUpIHtcbiAgICAgIGNhc2UgXCJzbWFsbFwiOlxuICAgICAgICByZXR1cm4gXCJ3LTQgaC00XCI7XG4gICAgICBjYXNlIFwibGFyZ2VcIjpcbiAgICAgICAgcmV0dXJuIFwidy03IGgtN1wiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwidy01IGgtNSBzbTp3LTYgc206aC02XCI7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPExpbmtcbiAgICAgIGhyZWY9e2lzTG9nZ2VkSW4gPyBcIi9zYXZlZFwiIDogXCIjXCJ9XG4gICAgICBvbkNsaWNrPXtoYW5kbGVGYXZvcml0ZXNDbGlja31cbiAgICAgIGNsYXNzTmFtZT17YHJlbGF0aXZlIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1wcmltYXJ5LTUwMCB0cmFuc2l0aW9uLWNvbG9ycyBncm91cCAke2dldFNpemVDbGFzc2VzKCl9ICR7Y2xhc3NOYW1lfSBtaW4taC1bNDRweF0gbWluLXctWzQ0cHhdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyYH1cbiAgICAgIHRpdGxlPXtcbiAgICAgICAgaXNMb2dnZWRJblxuICAgICAgICAgID8gdChcImZhdm9yaXRlcy52aWV3LWFsbFwiKVxuICAgICAgICAgIDogaXNQb3J0dWd1ZXNlXG4gICAgICAgICAgPyBcIkNsaXF1ZSBwYXJhIHNlIHJlZ2lzdGFyXCJcbiAgICAgICAgICA6IFwiQ2xpY2sgdG8gc2lnbiB1cFwiXG4gICAgICB9XG4gICAgPlxuICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgd2hpbGVIb3Zlcj17eyBzY2FsZTogMS4wNSB9fVxuICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45NSB9fVxuICAgICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiXG4gICAgICA+XG4gICAgICAgIHtzYXZlZENvdW50ID4gMCA/IChcbiAgICAgICAgICA8SGVhcnRTb2xpZEljb24gY2xhc3NOYW1lPXtgJHtnZXRJY29uU2l6ZSgpfSB0ZXh0LWFjdGlvbi01MDBgfSAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxIZWFydEljb24gY2xhc3NOYW1lPXtnZXRJY29uU2l6ZSgpfSAvPlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBDb3VudCBCYWRnZSAqL31cbiAgICAgICAge3Nob3dDb3VudCAmJiBzYXZlZENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICAgIGluaXRpYWw9e3sgc2NhbGU6IDAgfX1cbiAgICAgICAgICAgIGFuaW1hdGU9e3sgc2NhbGU6IDEgfX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIC10b3AtMSAtcmlnaHQtMSBiZy1hY3Rpb24tNTAwIHRleHQtd2hpdGUgdGV4dC14cyByb3VuZGVkLWZ1bGwgbWluLXctWzE4cHhdIGgtWzE4cHhdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGZvbnQtYm9sZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge3NhdmVkQ291bnQgPiA5OSA/IFwiOTkrXCIgOiBzYXZlZENvdW50fVxuICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogVG9vbHRpcCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtZnVsbCBtdC0yIGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgdGV4dC14cyBweC0zIHB5LTIgcm91bmRlZCBzaGFkb3ctbGcgd2hpdGVzcGFjZS1ub3dyYXAgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0yMDAgcG9pbnRlci1ldmVudHMtbm9uZSB6LTUwXCI+XG4gICAgICAgICAge2lzTG9nZ2VkSW5cbiAgICAgICAgICAgID8gc2F2ZWRDb3VudCA+IDBcbiAgICAgICAgICAgICAgPyBgJHtzYXZlZENvdW50fSBzYXZlZCAke3NhdmVkQ291bnQgPT09IDEgPyBcIml0ZW1cIiA6IFwiaXRlbXNcIn1gXG4gICAgICAgICAgICAgIDogdChcImZhdm9yaXRlcy52aWV3LWFsbFwiKVxuICAgICAgICAgICAgOiBpc1BvcnR1Z3Vlc2VcbiAgICAgICAgICAgID8gXCJDbGlxdWUgcGFyYSBzZSByZWdpc3RhclwiXG4gICAgICAgICAgICA6IFwiQ2xpY2sgdG8gc2lnbiB1cFwifVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXRvcC0xIGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIHctMiBoLTIgYmctZ3JheS05MDAgcm90YXRlLTQ1XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9tb3Rpb24uZGl2PlxuXG4gICAgICB7LyogTGFiZWwgZm9yIG5vbi1pY29uLW9ubHkgbW9kZSAqL31cbiAgICAgIHshaWNvbk9ubHkgJiYgKFxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0yIGZvbnQtbWVkaXVtIHRleHQtc21cIj57dChcImZhdm9yaXRlcy50aXRsZVwiKX08L3NwYW4+XG4gICAgICApfVxuICAgIDwvTGluaz5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJTYXZlZEl0ZW1zQnV0dG9uIiwic2hvd0NvdW50IiwiaWNvbk9ubHkiLCJzaXplIiwiY2xhc3NOYW1lIiwic2F2ZWRDb3VudCIsInVzZUNhcnQiLCJ0IiwibGFuZ3VhZ2UiLCJ1c2VMYW5ndWFnZSIsImlzTG9nZ2VkSW4iLCJzZXRJc0xvZ2dlZEluIiwidXNlU3RhdGUiLCJzaG93UG9wdXAiLCJ1c2VBdXRoUG9wdXAiLCJpc1BvcnR1Z3Vlc2UiLCJ1c2VFZmZlY3QiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ1bnN1YnNjcmliZSIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwidXNlciIsImhhbmRsZUZhdm9yaXRlc0NsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwidHlwZSIsInJlZGlyZWN0UGF0aCIsImdldFNpemVDbGFzc2VzIiwiZ2V0SWNvblNpemUiLCJMaW5rIiwiaHJlZiIsIm9uQ2xpY2siLCJ0aXRsZSIsIm1vdGlvbiIsImRpdiIsIndoaWxlSG92ZXIiLCJzY2FsZSIsIndoaWxlVGFwIiwiSGVhcnRTb2xpZEljb24iLCJIZWFydEljb24iLCJpbml0aWFsIiwiYW5pbWF0ZSIsInNwYW4iXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkFtQkE7OztlQUF3QkE7Ozs7dUJBakJZOzhCQUNiOzZEQUNOO3lCQUNTO3VCQUNrQjs2QkFDcEI7aUNBQ0k7c0JBQ3VDO21DQUN0Qzs7Ozs7O0FBU2QsU0FBU0EsaUJBQWlCLEVBQ3ZDQyxZQUFZLElBQUksRUFDaEJDLFdBQVcsSUFBSSxFQUNmQyxPQUFPLFFBQVEsRUFDZkMsWUFBWSxFQUFFLEVBQ1E7SUFDdEIsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsSUFBQUEsb0JBQU87SUFDOUIsTUFBTSxFQUFFQyxDQUFDLEVBQUVDLFFBQVEsRUFBRSxHQUFHQyxJQUFBQSw0QkFBVztJQUNuQyxNQUFNLENBQUNDLFlBQVlDLGNBQWMsR0FBR0MsSUFBQUEsZUFBUSxFQUFDO0lBQzdDLE1BQU0sRUFBRUMsU0FBUyxFQUFFLEdBQUdDLElBQUFBLCtCQUFZO0lBRWxDLE1BQU1DLGVBQWVQLGFBQWE7SUFFbENRLElBQUFBLGdCQUFTLEVBQUM7UUFDUkwsY0FBY00sSUFBQUEscUJBQWU7SUFDL0IsR0FBRyxFQUFFO0lBRUxELElBQUFBLGdCQUFTLEVBQUM7UUFDUixNQUFNRSxjQUFjQyxJQUFBQSxrQkFBaUIsRUFBQyxDQUFDQztZQUNyQ1QsY0FBYyxDQUFDLENBQUNTO1FBQ2xCO1FBQ0EsT0FBT0Y7SUFDVCxHQUFHLEVBQUU7SUFFTCxNQUFNRyx1QkFBdUIsQ0FBQ0M7UUFDNUIsSUFBSSxDQUFDWixZQUFZO1lBQ2ZZLEVBQUVDLGNBQWM7WUFDaEJWLFVBQVUsZ0JBQWdCO2dCQUN4QlcsTUFBTTtnQkFDTkMsY0FBYztZQUNoQjtRQUNGO0lBQ0Y7SUFFQSxNQUFNQyxpQkFBaUI7UUFDckIsT0FBUXZCO1lBQ04sS0FBSztnQkFDSCxPQUFPO1lBQ1QsS0FBSztnQkFDSCxPQUFPO1lBQ1Q7Z0JBQ0UsT0FBTztRQUNYO0lBQ0Y7SUFFQSxNQUFNd0IsY0FBYztRQUNsQixPQUFReEI7WUFDTixLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO2dCQUNILE9BQU87WUFDVDtnQkFDRSxPQUFPO1FBQ1g7SUFDRjtJQUVBLHFCQUNFLHNCQUFDeUIsYUFBSTtRQUNIQyxNQUFNbkIsYUFBYSxXQUFXO1FBQzlCb0IsU0FBU1Q7UUFDVGpCLFdBQVcsQ0FBQyxzRUFBc0UsRUFBRXNCLGlCQUFpQixDQUFDLEVBQUV0QixVQUFVLDJEQUEyRCxDQUFDO1FBQzlLMkIsT0FDRXJCLGFBQ0lILEVBQUUsd0JBQ0ZRLGVBQ0EsNEJBQ0E7OzBCQUdOLHNCQUFDaUIsb0JBQU0sQ0FBQ0MsR0FBRztnQkFDVEMsWUFBWTtvQkFBRUMsT0FBTztnQkFBSztnQkFDMUJDLFVBQVU7b0JBQUVELE9BQU87Z0JBQUs7Z0JBQ3hCL0IsV0FBVTs7b0JBRVRDLGFBQWEsa0JBQ1oscUJBQUNnQyxnQkFBYzt3QkFBQ2pDLFdBQVcsQ0FBQyxFQUFFdUIsY0FBYyxnQkFBZ0IsQ0FBQzt1Q0FFN0QscUJBQUNXLGtCQUFTO3dCQUFDbEMsV0FBV3VCOztvQkFJdkIxQixhQUFhSSxhQUFhLG1CQUN6QixxQkFBQzJCLG9CQUFNLENBQUNDLEdBQUc7d0JBQ1RNLFNBQVM7NEJBQUVKLE9BQU87d0JBQUU7d0JBQ3BCSyxTQUFTOzRCQUFFTCxPQUFPO3dCQUFFO3dCQUNwQi9CLFdBQVU7a0NBRVRDLGFBQWEsS0FBSyxRQUFRQTs7a0NBSy9CLHNCQUFDNEI7d0JBQUk3QixXQUFVOzs0QkFDWk0sYUFDR0wsYUFBYSxJQUNYLENBQUMsRUFBRUEsV0FBVyxPQUFPLEVBQUVBLGVBQWUsSUFBSSxTQUFTLFFBQVEsQ0FBQyxHQUM1REUsRUFBRSx3QkFDSlEsZUFDQSw0QkFDQTswQ0FDSixxQkFBQ2tCO2dDQUFJN0IsV0FBVTs7Ozs7O1lBS2xCLENBQUNGLDBCQUNBLHFCQUFDdUM7Z0JBQUtyQyxXQUFVOzBCQUE0QkcsRUFBRTs7OztBQUl0RCJ9
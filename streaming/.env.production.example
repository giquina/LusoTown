# LusoTown Portuguese Community Streaming Infrastructure
# Production Environment Configuration Template

# ============================================================================
# CORE STREAMING CONFIGURATION
# ============================================================================

# Streaming infrastructure security secret (required)
# Generate with: openssl rand -hex 32
LUSOTOWN_STREAMING_SECRET=your_secure_secret_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Server configuration
COMPOSE_PROJECT_NAME=lusotown-streaming-prod
NODE_ENV=production

# ============================================================================
# CDN AND DELIVERY CONFIGURATION
# ============================================================================

# BunnyCDN configuration for Portuguese market optimization
# Sign up at: https://panel.bunny.net/
CDN_ENDPOINT=https://your-storage-zone.b-cdn.net
BUNNYCDN_API_KEY=your_bunnycdn_api_key_here
BUNNYCDN_STORAGE_ZONE=your-storage-zone-name
BUNNYCDN_REGION=EU  # EU for Portugal/London optimization

# Alternative CDN endpoints for fallback
BACKUP_CDN_ENDPOINT=

# ============================================================================
# SSL/TLS CONFIGURATION
# ============================================================================

# Domain configuration
STREAMING_DOMAIN=stream.lusotown.com
SSL_CERTIFICATE_PATH=/etc/ssl/lusotown/lusotown-streaming.crt
SSL_PRIVATE_KEY_PATH=/etc/ssl/lusotown/lusotown-streaming.key

# Let's Encrypt configuration (if using automated SSL)
LETSENCRYPT_EMAIL=admin@lusotown.com
LETSENCRYPT_STAGING=false

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Primary database (Supabase)
DATABASE_URL=postgresql://user:password@host:port/database
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Analytics database (TimescaleDB)
ANALYTICS_DB_HOST=localhost
ANALYTICS_DB_PORT=5432
ANALYTICS_DB_NAME=lusotown_streaming_analytics
ANALYTICS_DB_USER=lusotown_analytics
ANALYTICS_DB_PASSWORD=secure_analytics_password_here
ANALYTICS_DB_SSL=require

# ============================================================================
# MONITORING AND LOGGING
# ============================================================================

# Elasticsearch for log aggregation
ELASTICSEARCH_HOST=your-elasticsearch-host
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=your_elasticsearch_password
ELASTICSEARCH_INDEX_PREFIX=lusotown-streaming

# Monitoring and alerting
GRAFANA_ADMIN_PASSWORD=secure_grafana_password
PROMETHEUS_RETENTION_TIME=30d

# Slack notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url
SLACK_CHANNEL=#lusotown-streaming-alerts

# ============================================================================
# SCALING AND PERFORMANCE
# ============================================================================

# Resource limits for production
SRS_MAX_CONNECTIONS=1000
SRS_WORKER_PROCESSES=4
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# Caching configuration
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=secure_redis_password_XXXXXXXXXXXXXXXX
REDIS_MAX_MEMORY=2gb
REDIS_EVICTION_POLICY=allkeys-lru

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Rate limiting
RATE_LIMIT_STREAMS_PER_USER=10
RATE_LIMIT_API_REQUESTS_PER_MINUTE=300
RATE_LIMIT_RTMP_CONNECTIONS_PER_IP=5

# CORS configuration
CORS_ALLOWED_ORIGINS=https://lusotown.com,https://*.lusotown.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# Authentication
JWT_SECRET=your_jwt_secret_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
JWT_EXPIRATION=24h

# ============================================================================
# CONTENT DELIVERY OPTIMIZATION
# ============================================================================

# HLS configuration for mobile optimization
HLS_SEGMENT_DURATION=6
HLS_PLAYLIST_LENGTH=5
HLS_CLEANUP_INTERVAL=300

# WebRTC configuration for low latency
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302
WEBRTC_ICE_SERVERS_CONFIG=/etc/streaming/ice-servers.json

# Transcoding for Portuguese market devices
TRANSCODING_ENABLED=true
TRANSCODING_PROFILES=mobile,desktop,hd
TRANSCODING_MAX_CONCURRENT=4

# ============================================================================
# BACKUP AND DISASTER RECOVERY
# ============================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=lusotown-streaming-backups
BACKUP_S3_REGION=eu-west-2  # London region

# AWS credentials for backups
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# ============================================================================
# PORTUGUESE COMMUNITY FEATURES
# ============================================================================

# Cultural content optimization
CULTURAL_CONTENT_BOOST=true
PORTUGUESE_LANGUAGE_PRIORITY=true
REGIONAL_CONTENT_FILTERING=true

# Community features
COMMUNITY_CHAT_ENABLED=true
PORTUGUESE_EMOTES_ENABLED=true
REGIONAL_MODERATION=true

# Event integration
CULTURAL_EVENTS_API=https://api.lusotown.com/v1/cultural-events
COMMUNITY_CALENDAR_SYNC=true

# ============================================================================
# HEALTH CHECKS AND MONITORING
# ============================================================================

# Health check endpoints
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Performance monitoring
PERFORMANCE_MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=60
SLOW_QUERY_THRESHOLD=1000

# Alerting thresholds
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=90
ALERT_DISK_THRESHOLD=85
ALERT_STREAM_FAILURE_THRESHOLD=5

# ============================================================================
# DEVELOPMENT OVERRIDES (Remove in production)
# ============================================================================

# Development mode flags (set to false in production)
DEBUG_MODE=false
VERBOSE_LOGGING=false
ENABLE_CORS_ALL_ORIGINS=false
SKIP_SSL_VERIFICATION=false